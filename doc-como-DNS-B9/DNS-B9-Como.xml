<?xml version="1.0" encoding="iso-8859-1" ?>
<!DOCTYPE article PUBLIC "-//OASIS//DTD DocBook V4.1.2//EN"
"http://www.oasis-open.org/docbook/xml/4.1.2/docbookx.dtd">

<article>

<articleinfo>

<title>DNS COMO
 </title>

<author>
<firstname>Nicolai Langfeldtjanl(en)langfeldt.net) ,Jamie
Norrish  y otros.
Traducción: Pedro Pablo Fábrega
pfabrega(en)arrakis.es" </firstname>
</author>

<pubdate>Versión 9.0, 2001-12-20</pubdate>

<abstract>

<para>
COMO convertirse en todo un administrador DNS en poco tiempo
</para>

</abstract>

</articleinfo>

<sect1>
<title>Preámbulo</title>

<para>
Keywords: DNS, BIND, BIND  4, BIND 8, named, dialup, PPP,
slip,ISDN,
Internet, domain, name, resolution, hosts, caching,
resolución,cacheo.
</para>

<para>
 Este  documento es parte del Linux Documentation  Project
(Proyecto de Documentación Linux).
</para>

<sect2>
<title>Cuestiones legales</title>

<para>
(C)opyright 1995-2001
Nicolai Langfeldt, Jamie Norrish &amp; Co. No modificar sin mantener
o  mejorar el copyright, se  puede distribuir libremente  pero
manteniendo este  mensaje de copyright.
</para>

</sect2>

<sect2>
<title>Créditos y solicitud de ayuda.</title>

<para>
Quiero agradecer a toda la  gente que se ha aburrido con la lectura
de este documento (tú sabes quien eres) quienes han sufrido los
borradores de  este trabajo y han proporcionado muchas y muy útiles
aportaciones. También  quiero agradecer a las numerosas personas que
me han enviado sugerencias y  notas por correo electrónico.
</para>

<para>
Esto nunca será un documento acabado, por favor mandadme  correo con
vuestros problemas y éxitos;  de esta forma me ayudarás a  mejorar
este COMO.  Así que  por favor, manda dinero,  comentarios y/o
preguntas a  <literal remap="tt">janl(en)langsfeld.net</literal>. O compra mi libro sobre
DNS(se titula "The Concise Guide to DNS and  BIND, en la bibliografía
tienes el ISBNs). Si envías un E-mail, y quieres respuesta,  por favor
<emphasis>asegúrate</emphasis> de  que tu dirección de remitente es correcta, recibo
un montón de  E-mail.  Asimismo, por favor lee la  sección de las PUF
(<xref linkend="PUF"/>) antes de enviarme un  mail.  Otra cosa,
sólo entiendo Noruego e  Inglés. 
<footnote>

<para>
N.T. Como  consecuencia se
ruega no hacer preguntas que el autor no se entere de lo  que se le
está preguntando.  El traductor sí entiende el castellano, pero no
sabe  tanto, ni mucho menos, como el autor.
</para>

</footnote>

</para>

<para>
Esto es un COMO.  Lo he  mantenido como parte del  LDP  desde 1995.
Durante  el año 2000 he  escrito un libro con los  mismos fines.
Quiero decir  que,  aunque este  COMO es en muchos aspectos  como el
libro, <emphasis>no</emphasis>  es una  versión limitada destinada a promocionar
el  libro. Sin embargo  encontrará el  libro en la bibliografía,  al
final de este COMO. Los  lectores de  este COMO me  han ayudado a
comprender  cuales son las dificultades  para comprender el DNS. Eso
me ha ayudado con libro,  pero el libro también  me ha  ayudado a
pensar qué es lo que este COMO  necesita. El COMO precedió  al  libro,
el libro precedió la la versión 3 de  este COMO. Muchas gracias a  los
editores del libro, <emphasis>Que</emphasis>, que me dieron una oportunidad.  :-)
</para>

</sect2>

<sect2>
<title>Dedicatoria</title>

<para>
Este COMO está dedicado a  Anne Line Norheim. Aunque  ella
probablemente nunca lo leerá porque no es de  esa clase de chicas.
</para>

</sect2>

<sect2>
<title>Versiones Actualizadas</title>

<para>
Deberías poder encontrar versiones actualizadas de este COMO en
<ulink
url="http://langfeldt.net/DNS-HOWTO/"
>&#65533;</ulink
> y en en <ulink
url="http://www.linuxdoc.org/"
>&#65533;</ulink
>.  Pásate por allí si este documento
tiene más de 9 meses.
</para>

</sect2>

</sect1>

<sect1 id="intro">
<title>Introducción.</title>

<para>
<emphasis remap="bf">Qué es y qué no es.</emphasis>
</para>

<para>
DNS es el Domain Name  System (Sistema de nombres de  dominio).
DNS  convierte nombres de máquina a las direcciones IP que tienen
todas las máquinas de la red. DNS traduce o  relaciona nombres con
direcciones y de direcciones con nombres, y alguna que otra cosa más.
Este COMO  documenta como se definen tales asociaciones usando
sistemas Unix, con  algunos  pequeños detalles específicos de Linux.
</para>

<para>
Una relación es simplemente  una asociación entre dos cosas, en
estecaso un  nombre de máquina, como <literal remap="tt">ftp.linux.org</literal>, y el
número IP de la  máquina (o  dirección)  <literal remap="tt">199.249.150.4</literal>.  DNS
también contiene relaciones en el sentido contrario, del número IP al
nombre  de la máquina; esto se denomina "asociación inversa".
</para>

<para>
El DNS es, para los no  iniciados (tú. <literal remap="tt">;-)</literal>, una de las áreas
más opacas de la administración de una red. Afortunadamente el DNS no
es  realmente difícil.
</para>

<para>
Este COMO tratará de aclarar algunas cosas. Describe cómo configurar
un servidor de  nombres DNS simple, comenzando con un servidor de
sólo cacheo  (<emphasis remap="it">caching only server</emphasis>)
<footnote>

<para>
Servidor  que se
limita a guardar en  una  caché las IP de los nombres de máquina más
solicitados, obteniéndolas de  servidores externos.
</para>

</footnote>
, y
continuaremos con la  configuración de un  servidor DNS primario para
un dominio. Para configuraciones más  complejas puedes  consultar
la sección de PUF (<xref linkend="PUF"/>) de este documento. Si lo que buscas
no está descrito allí,  necesitarás  <emphasis>leer</emphasis> la <emphasis remap="it">Documentación
Real</emphasis>.  Volveré a lo que es la <emphasis remap="it">Documentación Real</emphasis> en el <xref linkend="grande"/>.
</para>

<para>
<emphasis remap="bf">Antes de empezar</emphasis>, debes configurar tu sistema
convenientemente, de  forma que pueda hacer <literal remap="tt">telnet</literal> desde y hacia
tu máquina, efectuando satisfactoriamente toda clase de conexiones de
red, especialmente <literal remap="tt">telnet 127.0.0.1</literal> entrando en tu propia
máquina (compruébalo ahora). También necesitas que los archivos
<literal remap="tt">/etc/host.conf</literal> (o <literal remap="tt">/etc/nsswitch.conf</literal>),
<literal remap="tt">/etc/resolv.conf</literal> y  <literal remap="tt">/etc/hosts</literal> sean  correctos como
punto de partida, ya que no explicaré sus  funciones aquí.
Si NO tienes aun esta configuración y no funciona en red, el
<emphasis remap="it">Networking-HOWTO</emphasis> y <emphasis remap="it">Networking-Overview-HOWTO</emphasis>
explican como hacerlo.  Léelos.
<footnote>

<para>
 N.T.: Mira los documentos
en castellano en  <ulink
url="www.insflug.org"
>www.insflug.org</ulink
> 
</para>

</footnote>

</para>

<para>
Cuando digo <emphasis remap="it">``tu máquina''</emphasis> quiero decir la máquina en la que
estás  intentando configurar DNS. No cualquier otra máquina que
puedas tener en tu red.
</para>

<para>
Supongo que <emphasis remap="bf">no estás detrás de cualquier clase de cortafuegos</emphasis>
(<emphasis remap="it">firewall</emphasis>) que bloquee peticiones de nombres. Si necesitas una
configuración especial, mira la sección <xref linkend="PUF"/>.
</para>

<para>
El servicio de nombres en Unix se lleva a cabo por un programa,
llamado <literal remap="tt">named</literal>.
Éste programa forma parte del paquete <literal remap="tt">bind</literal>, que es coordinado por
el <emphasis remap="it">The Internet  Software Consortium</emphasis>. <literal remap="tt">named</literal> está
incluido en la mayoría de las distribuciones de  Linux y generalmente
se instala como <literal remap="tt">/usr/sbin/named</literal>, normalmente de  un paquete
llamado <literal remap="tt">BIND</literal>, en mayúsculas o minúsculas, depende quien lo
confeccione.
</para>

<para>
Si tienes el fichero <literal remap="tt">named</literal> probablemente puedas usarlo; si
no lo tienes, puedes obtener el binario en un ftp de Linux, o
conseguir los  últimos y más voluminosos fuentes en <literal remap="tt"><ulink
url="ftp://ftp.isc.org/isc/bind/src/"
>ftp://ftp.isc.org/isc/bind/src/</ulink
></literal>, bien de los
subdirectorios de versión actual, o de prueba,  lo que mejor se adapte
a tu estilo de vida. Este COMO trata la versión 9  de BIND. Las
anteriores  versiones del COMO tratan de las versiones 4 y 8,
todavía disponibles en <ulink
url="http://langfeldt.net/DNS-HOWTO/"
>&#65533;</ulink
> en
caso de  que uses BIND 4 u 8 (tambien encontrarás este COMO).
Si la página de manual de named habla sobre (al final del todo, en la
sección FILES)<literal remap="tt">named.conf</literal> tiene  BIND 8; si habla de
<literal remap="tt">named.boot</literal> tienes BIND 4. Si tienes la 4 y te  preocupa la
seguridad realmente deberías actualizarte a la última versión de BIND
8. Ahora.
</para>

<para>
<emphasis remap="bf">DNS es una base de datos  cuyo ámbito es la Red</emphasis>.  Ten cuidado
con lo  que pones en ella. Si pones incongruencias, tú y los demás
obtendrán incongruencias de ella. Mantén tu DNS limpia y consistente y
conseguirás un buen servicio de ella. Aprende a usarla,
administrarla, depurarla y serás otro buen administrador,  salvando a
la red de  caerse  de rodillas sobrecargada por falta de
mantenimiento.
</para>

<para>
<variablelist>

<varlistentry>
<term>Aviso:</term>
<listitem>
<para>
Haz una copia de seguridad de todos los  archivos que te
indico  que cambie si ya los tienes, y así si después, si  no
funciona podrás volver al principio.
</para>
</listitem></varlistentry>
</variablelist>
</para>

<sect2>
<title>Otras implementaciones de servidores de nombres.</title>

<para>
Esta seccion la ha escrito Joost van Baal.
</para>

<para>
Existen varios paquetes para disponer de servidores e nombres en tu
máquina.
</para>

<para>
Esta el paquete BIND (<ulink
url="http://www.isc.org/products/BIND/"
>&#65533;</ulink
>);
sobre el que trata este COMO. Es el servidor de nombres más popular
que hay y  se usa en una amplia mayoría de los servidores de Internet
desde que apareció  sobre 1980. Está disponible bajo licencia BSD.
Como es el paquete más popular hay  muchísima documentación y
conocimientos sobre su comportamiento. Sin embargo han  habido
problemas de seguridad con BIND.
</para>

<para>
Tambien está djbdns (<ulink
url="http://djbdns.org/"
>&#65533;</ulink
>)un paquete
relativamente  nuevo escrito por Daniel J. Bernstein que tembien
escribió qmail.  Es una suite modular: varios pequeños programas
llevan a cabo las  diferentes tareas que se supone que tiene que
realizar un servidor de nombres.  Está diseñado teniendo la seguridad
en mente. Usa un formato de fichero de  zona más simple y generalmente
es más fácil de configurar. Sin embargo, al ser  menos conocido, tu
gurú local podría no poder ayudarte. Por desgracia, este software no
es <literal remap="tt">Open Source</literal>. El anuncio  del autor está en <ulink
url="http://cr.yp.to/djbdns/ad.html"
>&#65533;</ulink
>. 
</para>

<para>
Si el software DJBs es una
mejora sobre las viejas alternativas es  motivo de un amplio debate.
Una discusion (¿o es un <literal remap="tt">flame-war</literal>?) sobre  BIND vs
djbdns a la que se adhirió la gente de ISC la puedes ver en <ulink
url="http://www.isc.org/ml-archives/bind-users/2000/08/msg01075.html"
>&#65533;</ulink
>
</para>

</sect2>

</sect1>

<sect1 id="caching">
<title>Servidor de nombres de ``sólo cacheo''.</title>

<para>
<emphasis remap="bf">Una primera nota para la configuración de DNS, muy útil para
usuarios de  módem, cable-módem, ADSL y similares.</emphasis>
</para>

<para>
En Red Hat y distribuciones derivadas puedes conseguir los
resultados  prácticos de esta primera sección del COMO instalando los
paquetes <literal remap="tt">bind</literal>, <literal remap="tt">bind-utils</literal> y caching-nameserver.  Si usa
Debian simplemente instala <literal remap="tt">bind</literal> (o <literal remap="tt">bind9</literal>, al escibir esto,
BIND 9 no está soportado por Debian Stable (potato))y <literal remap="tt">bind-doc</literal>.
Desde luego, que sólo instalando estos paquetes no  aprenderás más
que leyendo este COMO. Así pues, instala los paquetes, lee y verifica
los ficheros instalados.
</para>

<para>
Un servidor de "sólo cache" encontrará las respuestas a  las
consultas de   nombres y las recordará para la próxima vez que las
necesites. Esto acorta el tiempo de espera significativamente para la
próxima vez, especialmente si dispones de una conexión lenta.
</para>

<para>
Lo primero que necesitas es un fichero llamado
<literal remap="tt">/etc/named.conf</literal>  (Debian: <literal remap="tt">/etc/bind/named.conf</literal>).
Este fichero se lee cuando  arranca named. Por ahora simplemente
contendrá:
</para>

<para>

<programlisting>
// Fichero de configuración para servidor de sólo cacheo
// La version que lea de este COMO puede contener espacios
// iniciales (espacios previos a los caracteres de estas
// líneas) en este u otros ficheros. Debe eliminarlos para
// que las cosas funcionen.
//
// Observe que los nombres de ficheros y directorio pueden
// ser distintos, aunque los ultimos contenidos deben
// ser muy parecidos.

options {
	directory "/var/named";

	// Descomentar esto podría ayudar si tiene que salir a través
	// de un cortafuegos y las cosas no funcionan fuera.  Sin embargo, de
 todas
	// formas necesitarás hablar con el administrador del cortafuegos.

	// query-source port 53;
};
controls {
        inet 127.0.0.1 allow { localhost; } keys { rndc_key; };
};

key "rndc_key" {
        algorithm hmac-md5;
        secret
 "c3Ryb25nIGVub3VnaCBmb3IgYSBtYW4gYnV0IG1hZGUgZm9yIGEgd29tYW4K";
};

zone "." {
        type hint;
        file "root.hints";
};

zone "0.0.127.in-addr.arpa" {
        type master;
        file "pz/127.0.0";
};
</programlisting>

</para>

<para>
Los paquetes de las distribuciones Linux pueden usar diferentes
nombres para  cada uno de los ficheros mencionados aquí; el contenido
sigue siendo  el mismo.
</para>

<para>
La línea `<literal remap="tt">directory</literal>' le indica a named donde  buscar los
ficheros. Todos los ficheros mencionados están relativos a esta ruta.
Así <literal remap="tt">pz</literal> es un directorio bajo  <literal remap="tt">/var/named</literal>,
i.e., <literal remap="tt">/var/named/pz</literal>.  <literal remap="tt">/var/named</literal> es el directorio
correcto de acuerdo con la distribución estándar de directorios en
Linux  (<emphasis>Linux File system Standard</emphasis>).
</para>

<para>
Aquí describimos el fichero <literal remap="tt">/var/named/root.hints</literal>.
<literal remap="tt">/var/named/root.hints</literal> debería contener lo
siguiente: (<emphasis>si cortas y pegas este fichero de una versión
electrónica del  documento, ten en  cuenta que <emphasis remap="bf">no</emphasis> deberían haber
espacios en blanco iniciales en  este fichero,  i.e. todas las líneas
deberían comenzar con un carácter que no sea espacio. Algún software
de procesamiento de  documentos inserta espacios al comienzo de las
líneas y causan confusión. En este  caso, elimina los espacios
iniciales</emphasis>).
</para>

<para>

<programlisting>
;
; Puede haber comentarios aquí si ya tenías el fichero.
; Si no no te preocupes.
;
.                       6D  IN      NS      A.ROOT-SERVERS.NET.
.                       6D  IN      NS      B.ROOT-SERVERS.NET.
.                       6D  IN      NS      C.ROOT-SERVERS.NET.
.                       6D  IN      NS      D.ROOT-SERVERS.NET.
.                       6D  IN      NS      E.ROOT-SERVERS.NET.
.                       6D  IN      NS      F.ROOT-SERVERS.NET.
.                       6D  IN      NS      G.ROOT-SERVERS.NET.
.                       6D  IN      NS      H.ROOT-SERVERS.NET.
.                       6D  IN      NS      I.ROOT-SERVERS.NET.
.                       6D  IN      NS      J.ROOT-SERVERS.NET.
.                       6D  IN      NS      K.ROOT-SERVERS.NET.
.                       6D  IN      NS      L.ROOT-SERVERS.NET.
.                       6D  IN      NS      M.ROOT-SERVERS.NET.
A.ROOT-SERVERS.NET.     6D  IN      A       198.41.0.4
B.ROOT-SERVERS.NET.     6D  IN      A       128.9.0.107
C.ROOT-SERVERS.NET.     6D  IN      A       192.33.4.12
D.ROOT-SERVERS.NET.     6D  IN      A       128.8.10.90
E.ROOT-SERVERS.NET.     6D  IN      A       192.203.230.10
F.ROOT-SERVERS.NET.     6D  IN      A       192.5.5.241
G.ROOT-SERVERS.NET.     6D  IN      A       192.112.36.4
H.ROOT-SERVERS.NET.     6D  IN      A       128.63.2.53
I.ROOT-SERVERS.NET.     6D  IN      A       192.36.148.17
J.ROOT-SERVERS.NET.     6D  IN      A       198.41.0.10
K.ROOT-SERVERS.NET.     6D  IN      A       193.0.14.129
L.ROOT-SERVERS.NET.     6D  IN      A       198.32.64.12
M.ROOT-SERVERS.NET.     6D  IN      A       202.12.27.33

</programlisting>

</para>

<para>
Este archivo describe los servidores de nombres raíz en el mundo. Este
archivo  cambiará a lo largo del tiempo y tiene que ser mantenido
y actualizado con una cierta regularidad.  Vea la sección de (<xref linkend="mantenimiento"/>) para saber cómo mantenerlo
actualizado.
</para>

<para>
La siguiente sección de <literal remap="tt">named.conf</literal> es la  última
<literal remap="tt">zone</literal>.  Explicaré su uso en un capítulo posterior: Por ahora,
crea un archivo llamado <literal remap="tt">127.0.0</literal> en el subdirectorio
<literal remap="tt">pz</literal>:(<emphasis>De nuevo, por favor borra los espacios iniciales si
cortas y pegas esto</emphasis>).
</para>

<para>

<programlisting>
$TTL 3D
@               IN      SOA  ns.linux.bogus. hostmaster.linux.bogus. (
				1       ; Serial
				8H	; Refresh
				2H      ; Retry
				4W	; Expire
				1D)	; Minimum TTL
			NS      ns.linux.bogus.
1			PTR	localhost.
</programlisting>

</para>

<para>
Las secciones llamadas <literal remap="tt">key</literal> y <literal remap="tt">controls</literal>
juntas especifican que tu named se puede controlar remotamente
mediante un  programa llamado <literal remap="tt">rndc</literal> si se conecta desde el host
local y se  identifica con la llave secreta codificada. Esta llave es
como una contraseña. Para que rndc funcione necesita que
<literal remap="tt">/etc/rndc.conf</literal> cumpla  esto:
</para>

<para>

<programlisting>
key rndc_key {
    algorithm "hmac-md5";
    secret
 "c3Ryb25nIGVub3VnaCBmb3IgYSBtYW4gYnV0IG1hZGUgZm9yIGEgd29tYW4K";
};
options {
    default-server localhost;
    default-key    rndc_key;
};
</programlisting>

</para>

<para>
Como puedes ver la clave es idéntica.  Si quieres usar <literal remap="tt">rndc</literal>
desde otras máquinas sus tiempos tiene que estar dentro de un margen
de 5 minutos la una de la otra. Recomiendo usar el software  the ntp
(<literal remap="tt">xntpd</literal> y <literal remap="tt">ntpdate</literal>) para hacer esto.
</para>

<para>
A continuación, necesitas un <literal remap="tt">/etc/resolv.conf</literal>
parecido a este:(<emphasis>De nuevo: ¡borrar espacios!</emphasis>)
</para>

<para>

<programlisting>
search
 subdomain.your-domain.edu
 your-domain.edu
nameserver 127.0.0.1
</programlisting>

</para>

<para>
La línea `<literal remap="tt">search</literal>' especifica en qué dominios buscar para
cualquier  nombre de máquina al que te quieras conectar.  La línea
`<literal remap="tt">nameserver</literal>' especifica la dirección de tu servidor de nombres,
en este caso tu misma máquina ya que es donde se ejecuta  named
(127.0.0.1  está bien, no importa si la máquina tiene otra dirección
también). Si quieres  incluir varias máquinas  como servidores de
nombres basta añadir líneas  `<literal remap="tt">nameserver</literal>' para cada uno.(Nota:
Named nunca lee este fichero, lo lee la aplicación que  busca un
servidor de nombres. Nota 2: En algunos ficheros  resolv.conf
puedes encontrar una línea "domain".  Es correcto, pero no uses
a la vez "search" y "domain", sólo una de ellas funcionará).
</para>

<para>
Para ilustrar lo que hace este archivo: 
 Si un cliente intenta
buscar a  <literal remap="tt">fulano</literal>, primero se probará
<literal remap="tt">fulano.subdominio.su-dominio.edu</literal>, a continuación
<literal remap="tt">fulano.su-dominio.edu</literal>, y finalmente <literal remap="tt">fulano</literal>. Si un
cliente  intenta buscar <literal remap="tt">sunsite.unc.edu</literal>,
<literal remap="tt">sunsite.unc.edu.subdominio.su-dominio.edu</literal> se prueba primero
(sí, es  tonto, pero es así como tiene que ser), después
<literal remap="tt">sunsite.unc.edu.su-dominio.edu</literal>, y  finalmente
<literal remap="tt">sunsite.unc.edu</literal>.
Puede que no quieras poner demasiados dominios en la línea
<literal remap="tt">search</literal>, lleva su tiempo el efectuar las búsquedas.
</para>

<para>
El ejemplo supone que pertenece al dominio
<literal remap="tt">subdominio.su-dominio.edu</literal>,
tu máquina probablemente se llame
<literal remap="tt">su-máquina.subdominio.su-dominio.edu</literal>.  La línea
<literal remap="tt">search</literal> no debería contener tu  <emphasis remap="it">TLD</emphasis> (<emphasis remap="it">Top Level
Domain</emphasis> o <emphasis remap="it">Dominio de Nivel Superior</emphasis>, `<literal remap="tt">edu</literal>' en este caso).
Si  necesitas  conectar frecuentemente con máquinas de  otro dominio,
puedes añadir  ese dominio a la línea <literal remap="tt">search</literal> como
sigue:(<emphasis>Recuerda eliminar  los espacios iniciales, si los hay</emphasis>)
</para>

<para>

<programlisting>
search subdominio.su-dominio.edu su-dominio.edu otro-dominio.com
</programlisting>

</para>

<para>
y así. Obviamente necesitas poner un dominio real en su lugar. Esto
es importante; por favor  observa la ausencia de puntos al final de
los nombres  de dominio.
</para>

<sect2 id="iniciando">
<title>Iniciando named</title>

<para>
Tras haber terminado todo lo anterior es el momento de lanzar
named. Si usas  un conexión por módem, conéctate primero.  Ejecuta el
guion de  arranque  <literal remap="tt">/etc/init.d/named start</literal> o named
directamente: <literal remap="tt">/usr/sbin/named</literal>.
Si has usado versiones previas de BIND probablementa hayas usado
`<literal remap="tt">ndc start</literal>'. BIND9 lo ha sustituido por `<literal remap="tt">rndc start</literal>',
que puede controlar tu named remotamente, pero que ya no puede iniciar
named.  Si  falla mira la sección <xref linkend="PUF"/>.
Si observas los mensajes del fichero de syslog (normalmente llamado
<literal remap="tt">/var/adm/messages</literal>, Debian lo llama <literal remap="tt">/var/log/daemon</literal> o
también en el directorio, <literal remap="tt">/var/log</literal>) mientras inicias named
(ejecuta <literal remap="tt">tail -f /var/log/messages</literal>)  deberías ver algo como:
</para>

<para>
(las líneas terminadas en \ continúan en la siguiente línea)
</para>

<para>

<screen>
Dec 23 02:21:12 lookfar named[11031]: starting BIND 9.1.3
Dec 23 02:21:12 lookfar named[11031]: using 1 CPU
Dec 23 02:21:12 lookfar named[11034]: loading configuration from \
    '/etc/named.conf'
Dec 23 02:21:12 lookfar named[11034]: the default for the \
    'auth-nxdomain' option is now 'no'
Dec 23 02:21:12 lookfar named[11034]: no IPv6 interfaces found
Dec 23 02:21:12 lookfar named[11034]: listening on IPv4 interface lo,\
     127.0.0.1#53
Dec 23 02:21:12 lookfar named[11034]: listening on IPv4 interface
 eth0, \
    10.0.0.129#53
Dec 23 02:21:12 lookfar named[11034]: command channel listening on \
     127.0.0.1#953
Dec 23 02:21:13 lookfar named[11034]: running

</screen>

</para>

<para>
Si hay algún mensaje sobre errores debe haber algún fallo.
Named indicará el fichero en el que está el fallo.  Vuelve y
compruébalo. Reinicia named (<literal remap="tt">"</literal>etc/init.d/named restart"/ )
cuando lo hayas  corregido.
</para>

<para>
Ahora puedes comprobar la configuración. Tradicionalmente hay un
programa llamado <literal remap="tt">nslookup</literal> que nos servirá para estos fines.
Actualmente se recomienda  <literal remap="tt">dig</literal>:
</para>

<para>

<screen>
$ dig -x 127.0.0.1
;; Got answer:
;; -&#62;&#62;HEADER&#60;&#60;- opcode: QUERY, status: NOERROR, id: 26669
;; flags: qr aa rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 1, ADDITIONAL:
 0

;; QUESTION SECTION:
;1.0.0.127.in-addr.arpa.                IN      PTR

;; ANSWER SECTION:
1.0.0.127.in-addr.arpa. 259200  IN      PTR     localhost.

;; AUTHORITY SECTION:
0.0.127.in-addr.arpa.   259200  IN      NS      ns.linux.bogus.

;; Query time: 3 msec
;; SERVER: 127.0.0.1#53(127.0.0.1)
;; WHEN: Sun Dec 23 02:26:17 2001
;; MSG SIZE  rcvd: 91

</screen>

</para>

<para>
Si es esto lo que obtienes, está funcionando.  Espero. Ante
cualquier otra  cosa, vuelve y verifica todo otra  vez.  Cada vez que
modifiques un  fichero  necesitas reiniciar named usando la orden
<literal remap="tt">rndc reload</literal>.
</para>

<para>
Ahora puedes introducir una consulta.  Intenta buscar alguna
máquina cercana.
<literal remap="tt">pat.uio.no</literal> está cerca de mi, en la Universidad de Oslo:
</para>

<para>

<screen>
$ dig pat.uio.no
; &#60;&#60;&#62;&#62; DiG 9.1.3 &#60;&#60;&#62;&#62; pat.uio.no
;; global options:  printcmd
;; Got answer:
;; -&#62;&#62;HEADER&#60;&#60;- opcode: QUERY, status: NOERROR, id: 15574
;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 3, ADDITIONAL: 0

;; QUESTION SECTION:
;pat.uio.no.                    IN      A

;; ANSWER SECTION:
pat.uio.no.             86400   IN      A       129.240.130.16

;; AUTHORITY SECTION:
uio.no.                 86400   IN      NS      nissen.uio.no.
uio.no.                 86400   IN      NS      nn.uninett.no.
uio.no.                 86400   IN      NS      ifi.uio.no.

;; Query time: 651 msec
;; SERVER: 127.0.0.1#53(127.0.0.1)
;; WHEN: Sun Dec 23 02:28:35 2001
;; MSG SIZE  rcvd: 108

</screen>

</para>

<para>
Esta vez <literal remap="tt">dig</literal> ha preguntado a tu named para buscar la máquina
<literal remap="tt">pat.uio.no</literal>.  Contacta con una de las máquinas servidoras de
nombres indicadas en tu fichero <literal remap="tt">root.hints</literal>, y busca su camino
desde ahí. Puede demorar un poquito antes de obtener los resultados
si tiene  que buscar todos los dominios que hay en
<literal remap="tt">/etc/resolv.conf</literal>.
</para>

<para>
Si de nuevo preguntas lo mismo, obtendrás:
</para>

<para>

<screen>
$ dig pat.uio.no

; &#60;&#60;&#62;&#62; DiG 8.2 &#60;&#60;&#62;&#62; pat.uio.no
;; res options: init recurs defnam dnsrch
;; got answer:
;; -&#62;&#62;HEADER&#60;&#60;- opcode: QUERY, status: NOERROR, id: 4
;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 3, ADDITIONAL: 3
;; QUERY SECTION:
;;      pat.uio.no, type = A, class = IN

;; ANSWER SECTION:
pat.uio.no.             23h59m58s IN A  129.240.130.16

;; AUTHORITY SECTION:
UIO.NO.                 23h59m58s IN NS  nissen.UIO.NO.
UIO.NO.                 23h59m58s IN NS  ifi.UIO.NO.
UIO.NO.                 23h59m58s IN NS  nn.uninett.NO.

;; ADDITIONAL SECTION:
nissen.UIO.NO.          23h59m58s IN A  129.240.2.3
ifi.UIO.NO.             1d23h59m58s IN A  129.240.64.2
nn.uninett.NO.          1d23h59m58s IN A  158.38.0.181

;; Total query time: 4 msec
;; FROM: lookfar to SERVER: default -- 127.0.0.1
;; WHEN: Sat Dec 16 00:23:09 2000
;; MSG SIZE  sent: 28  rcvd: 162
</screen>

</para>

</sect2>

<sect2>
<title>Resolutores (Resolvers)</title>

<para>
Todos los sistemas operativos que incorporan la API estándar de C
disponen de las llamadas gethostbyname y gethostbyaddr.  Estas
llamadas pueden obtener información de diferentes orígenes. El
origen viene determinado por la configuración indicada
en <literal remap="tt">/etc/nsswitch.conf</literal> en Linux (y otros
Unix).  Es un fichero grande que especifica de qué base de
datos se obtienen los diferentes tipos de datos.
Normalmente contiene comentarios útiles al principio, que deberías
leer. Tras encontrar que empieza con  `<literal remap="tt">hosts:</literal>'; se debería
leer:
</para>

<para>

<programlisting>
hosts:      files dns
</programlisting>

</para>

<para>
(<emphasis>¿Recuerdas lo de los espacios en blanco? Ya no lo voy a
mencionar de nuevo.</emphasis>)
</para>

<para>
Si no hay una línea que  comience por  `<literal remap="tt">hosts:</literal>', pon una como
la anterior. Eso le dice a los programas que primero
deben buscar en el fichero <literal remap="tt">/etc/hosts</literal>, y después
comprobar DNS de acuerdo con <literal remap="tt">resolv.conf</literal>.
</para>

</sect2>

<sect2>
<title>Felicitaciones</title>

<para>
Ahora ya sabes como configurar un servidor de nombres de sólo cacheo.
Tómate una cerveza, leche, o lo que más te guste, para celebrarlo.
</para>

</sect2>

</sect1>

<sect1>
<title>Reenvío (Forwarding)</title>

<para>
En redes grandes y bien organizadas, académicas o ISP
(Internet ServiceProvider, Proveedores de servicios de internet)
algunas veces verás que la gente ha configurado una jerarquía de reenvío de
servidores DNS que ayuda a aligerar la carga de la red interna y también
de los servidores externos. No es fácil saber si estás dentro
de una red así o no.
Sin embargo no es importante, y al usar los servidores DNS
de tu proveedor de red como un ``forwarder'' puedes obtener respuestas más
rápidas a las consultas y una menor carga de la red.
Si usas un módem esto puede  ser una ventaja. Para este ejemplo,
supondremos  que tu proveedor de red tiene  dos servidores
de nombres que permiten que  uses, con direcciones IP
<literal remap="tt">10.0.0.1</literal> y <literal remap="tt">10.1.0.1</literal>. Entonces, en tu fichero
<literal remap="tt">named.conf</literal> , en la  sección llamada ``options'',
inserta estas líneas:
</para>

<para>

<programlisting>
           forward first;
           forwarders {
                10.0.0.1;
                10.1.0.1;
            };
</programlisting>

</para>

<para>
Hay un bonito truco para máquinas con conexión por módem
usando forwarders, se describe en la sección <xref linkend="PUF"/>.
</para>

<para>
Reinicia tu servidor de nombres y comprueba con <literal remap="tt">dig</literal>.
Todavía debería funcionar bien.
</para>

</sect1>

<sect1 id="simple">
<title>Un dominio <emphasis>simple</emphasis>.</title>

<para>
<emphasis remap="bf">Cómo configurar tu propio dominio.</emphasis>
</para>

<sect2>
<title>Pero primero algo de teoría a secas</title>

<para>
Antes de nada: ¿Has leído todo lo anterior? Tienes que hacerlo.
</para>

<para>
Antes de comenzar <emphasis>realmente</emphasis> con esta sección, voy a dar un
poco de teoría sobre cómo funciona DNS.  Y lo deberías de leer
porque es mejor  para ti.  Si no quieres, al menos deberías echar un
vistazo rápido. Deja  el repaso cuando sepas lo que debes incluir en
tu fichero <literal remap="tt">named.conf</literal>.
</para>

<para>
El DNS es un sistema jerárquico, un sistema con  estructura de árbol.
La raíz se escribe como  `<literal remap="tt">.</literal>' y se denomina <emphasis remap="it">`root'</emphasis> como
es habitual para estructuras en árbol. Debajo hay cierto número de
Dominios de Nivel Superior (<emphasis remap="it">Top Level Domains</emphasis>, <emphasis remap="it">TLD</emphasis>s), los más
conocidos son <literal remap="tt">ORG, COM, EDU</literal> y <literal remap="tt">NET</literal>, pero hay muchos más. Como en
un árbol, tiene raíz y ramas. Si tienes una base de  informática puedes
reconocer DNS como un árbol de  búsqueda, y podrás buscar  nodos.
Los puntos son nodos, en los extremos están los nombres.
</para>

<para>
Cuando se busca una  máquina, la pregunta procede recursivamente en la
jerarquía comenzando desde la raíz. Si quieres localizar la dirección de
<literal remap="tt">prep.ai.mit.edu</literal>, tu servidor de nombres tiene que empezar
preguntando en algún sitio. Comienza mirando e el cache. Si sabe la respuesta,
por tenerla en el cache de antes, responderá de la misma forma que vimos en la
última sección. Si lo desconoce mirará la respuesta más cercana que
verifique el nombre pedido y utilizará el cache. En el peor de los
casos que no se encuentre nada salvo la '.' (raíz) del nombre, se
consultarán los servidores raíz. Eliminará partes del nombre
comenzando por la izquierda, comprobando si sabe algo de
<literal remap="tt">ai.mit.edu.</literal>, después  <literal remap="tt">mit.edu.</literal>, después  <literal remap="tt">edu.</literal> y si no,
lo que conoce de <literal remap="tt">.</literal> es lo que tiene el fichero "hints".
Entonces preguntará al servidor <literal remap="tt">.</literal>  sobre <literal remap="tt">prep.ai.mit.edu</literal>.
Este servidor  <literal remap="tt">.</literal> desconoce la respuesta, pero  ayudará a tu servidor a
encontrar el camino dando la referencia sobre  donde buscar. Estas
referencias, le dirigen al servidor de nombres que conoce  la respuesta. Ilustramos eso
ahora. <literal remap="tt">+norec</literal> significa que dig  está preguntando consultas no recursivas
para que la  obtengamos  nosotros mismos. La otras opciones son para
reducir lo que dig genera para no obtener muchas  páginas:
</para>

<para>

<screen>
$  dig +norec +noH +noques +nostats +nocmd  prep.ai.mit.edu.
 ;; Got answer:
;; -&#62;&#62;HEADER&#60;&#60;- opcode: QUERY, status: NOERROR, id: 980
;; flags: qr ra; QUERY: 1, ANSWER: 0, AUTHORITY: 13, ADDITIONAL: 0

;; AUTHORITY SECTION:
.                       518400  IN      NS      J.ROOT-SERVERS.NET.
.                       518400  IN      NS      K.ROOT-SERVERS.NET.
.                       518400  IN      NS      L.ROOT-SERVERS.NET.
.                       518400  IN      NS      M.ROOT-SERVERS.NET.
.                       518400  IN      NS      A.ROOT-SERVERS.NET.
.                       518400  IN      NS      B.ROOT-SERVERS.NET.
.                       518400  IN      NS      C.ROOT-SERVERS.NET.
.                       518400  IN      NS      D.ROOT-SERVERS.NET.
.                       518400  IN      NS      E.ROOT-SERVERS.NET.
.                       518400  IN      NS      F.ROOT-SERVERS.NET.
.                       518400  IN      NS      G.ROOT-SERVERS.NET.
.                       518400  IN      NS      H.ROOT-SERVERS.NET.
.                       518400  IN      NS      I.ROOT-SERVERS.NET.
</screen>

</para>

<para>
Esto es una referencia. Nos devuelve una "Authority section" sólo, no
"Answer section". Nuestro propio servidor de nombres nos envía a un
servidor de nombres. Toma uno  al azar.
</para>

<para>

<screen>
$ dig +norec +noques +nostats +nocmd prep.ai.mit.edu. @D.ROOT-SERVERS.NET.
;; Got answer:
;; -&#62;&#62;HEADER&#60;&#60;- opcode: QUERY, status: NOERROR, id: 58260
;; flags: qr; QUERY: 1, ANSWER: 0, AUTHORITY: 3, ADDITIONAL: 3

;; AUTHORITY SECTION:
mit.edu.                172800  IN      NS      BITSY.mit.edu.
mit.edu.                172800  IN      NS      STRAWB.mit.edu.
mit.edu.                172800  IN      NS      W20NS.mit.edu.

;; ADDITIONAL SECTION:
BITSY.mit.edu.          172800  IN      A       18.72.0.3
STRAWB.mit.edu.         172800  IN      A       18.71.0.151
W20NS.mit.edu.          172800  IN      A       18.70.0.160


</screen>

</para>

<para>
Esto nos envía a los servidores de MIT.EDU de una vez.  De nuevo toma uno
al azar.
</para>

<para>

<screen>
$ dig +norec +noques +nostats +nocmd prep.ai.mit.edu. @BITSY.mit.edu.
;; Got answer:
;; -&#62;&#62;HEADER&#60;&#60;- opcode: QUERY, status: NOERROR, id: 29227
;; flags: qr ra; QUERY: 1, ANSWER: 1, AUTHORITY: 4, ADDITIONAL: 4

;; ANSWER SECTION:
prep.ai.mit.edu.        10562   IN      A       198.186.203.77

;; AUTHORITY SECTION:
ai.mit.edu.             21600   IN      NS      FEDEX.ai.mit.edu.
ai.mit.edu.             21600   IN      NS      LIFE.ai.mit.edu.
ai.mit.edu.             21600   IN      NS      ALPHA-BITS.ai.mit.edu.
ai.mit.edu.             21600   IN      NS      BEET-CHEX.ai.mit.edu.

;; ADDITIONAL SECTION:
FEDEX.ai.mit.edu.       21600   IN      A       192.148.252.43
LIFE.ai.mit.edu.        21600   IN      A       128.52.32.80
ALPHA-BITS.ai.mit.edu.  21600   IN      A       128.52.32.5
BEET-CHEX.ai.mit.edu.   21600   IN      A       128.52.32.22

</screen>

</para>

<para>
Esta vez obtenemos una "ANSWER SECTION", y una respuesta para
nuestra pregunta. La  "AUTHORITY SECTION" contiene información sobre a
qué servidores hacer las preguntas sobre <literal remap="tt">ai.mit.edu</literal> la próxima
vez.  Así les puede preguntar  directamente la próxima vez
que necesite algo de sobre los nombres de <literal remap="tt">ai.mit.edu</literal>, es decir,
cuando preguntamos por <literal remap="tt">w.ww.mit.edu</literal> estaremos mucho mas cerca de
obtener la respuesta.
</para>

<para>
Así, empezando en  <literal remap="tt">.</literal> encontramos los sucesivos  servidores de
nombres para cada nivel por  referencia. Si has usado tu  propio
servidor DNS en lugar de usar  todos esos servidores, tu  named, por
supuesto, guardará en el cache  toda la información que  encuentre
mientras consulta para ti, y  no tendrá que preguntar de  nuevo
durante cierto tiempo.
</para>

<para>
En la analogía con el árbol, cada ``<literal remap="tt">.</literal>'' del  mismo nombre es
un punto de rama. Y cada parte  entre  ``<literal remap="tt">.</literal>'' son los  nombres de
ramas individuales del árbol.  Uno sube por el árbol tomando el nombre que
queremos  (<literal remap="tt">prep.ai.mit.edu</literal>)  preguntando a la raíz  (<literal remap="tt">.</literal>) o a
cualquier servidor más arriba de la raíz  hacia prep.ai.mit.edu cuya
información tuviéramos en el cache.  Una  vez que llegamos a los
límites del caché las resolución recursiva continúa  preguntando a
servidores,  obteniendo referencias más lejanas del nombre.
</para>

<para>
Aunque se hable mucho menos, un dominio tan importante es
<literal remap="tt">in-addr.arpa</literal>.  También se  anida como los dominios  `normales'.
<literal remap="tt">in-addr.arpa</literal> nos permite  obtener el nombre de host cuando tenemos
su dirección. Una cosa importante que tenemos que observar es que las
direcciones IP se escriben en  orden inverso en el dominio  <literal remap="tt">in-addr.arpa</literal>.
Si tiene la dirección de una  máquina: <literal remap="tt">192.186.203.77</literal> named procede igual que
para el ejemplo de <literal remap="tt">prep.ai.mit.edu</literal>:
encuentra servidores <literal remap="tt">arpa.</literal>.  Busca servidores
<literal remap="tt">in-addr.arpa.</literal>,  busca servidores <literal remap="tt">192.in-addr.arpa.</literal>, busca
servidores <literal remap="tt">186.192.in-addr.arpa.</literal>, busca
servidores<literal remap="tt">203.186.192.in-addr.arpa.</literal>. Busca los registros que
necesitamos para <literal remap="tt">77.203.186.192.in-addr.arpa.</literal>
como haría para <literal remap="tt">prep.ai.mit.edu</literal>. Ejemplo: Al no encontrar
una entrada en el cache adecuada salvo  `.', pregunta al servidor
raíz, <literal remap="tt">m.root-servers.net</literal> que te envía a otro servidor raíz.
<literal remap="tt">b.root-servers.net</literal> nos envia directamente a <literal remap="tt"></literal>bitsy.mit.edu/.
Se debería poder tomar ya desde allí.
</para>

</sect2>

<sect2>
<title>Nuestro propio dominio</title>

<para>
Ahora vamos a definir nuestro propio dominio.  Vamos a crear el
dominio <literal remap="tt">linux.bogus</literal> y definir  máquinas en él. Uso un nombre  de
dominio totalmente falso para estar  seguro de que no molestamos a
nadie de fuera.
</para>

<para>
Una cosa más antes de empezar: No se permiten todos los caracteres
en nombres de máquina. Estamos  restringidos a los caracteres  del
alfabeto inglés: a-z, números  0-9 y el carácter  '-' (guión).
Manténte en  estos caracteres. Las  mayúsculas y minúsculas son
indistintas  para el DNS, así  <literal remap="tt">pat.uio.no</literal> es idéntico a
<literal remap="tt">Pat.UiO.No</literal>.
</para>

<para>
Ya hemos comenzado esta parte con la siguiente línea en <literal remap="tt">named.conf</literal>:
</para>

<para>

<programlisting>
zone "0.0.127.in-addr.arpa" {
	type master;
	file "pz/127.0.0";
};
</programlisting>

</para>

<para>
Por favor, observa la ausencia de  `<literal remap="tt">.</literal>' al final de los nombres de dominio
en este fichero. Esto dice que ahora vamos a definir la zona
<literal remap="tt">0.0.127.in-addr.arpa</literal>, de  la que somos servidor  principal
("master") y que  está definida en un fichero llamado
<literal remap="tt">pz/127.0.0</literal>.  Ya  hemos configurado este fichero,
en el que podemos leer:
</para>

<para>

<programlisting>
$TTL 3D
@               IN      SOA
  ns.linux.bogus.
 hostmaster.linux.bogus. (
				1       ; Serie
				8H	; Refresco
				2H      ; Reintento
				4W	; Expira
				1D)	; Minimo TTL
			NS      ns.linux.bogus.
1			PTR	localhost.
</programlisting>

</para>

<para>
Por favor observa los `<literal remap="tt">.</literal>' al final de los nombres de dominio completo
en contraste con el archivo <literal remap="tt">named.conf</literal> anterior. A algunas
personas les gusta iniciar cada zona del archivo con una
directiva <literal remap="tt">$ORIGIN</literal>, pero esto es superfluo. El origen
(lugar de la jerarquía DNS a donde  pertenece) de un fichero de
zona se especifica en la seccion <literal remap="tt">zona</literal> del  archivo
<literal remap="tt">named.conf</literal>;  en este caso es <literal remap="tt">0.0.127.in-addr.arpa.</literal>
</para>

<para>
Este ``fichero de zona''  contiene tres <emphasis remap="it">registros  de
recursos</emphasis> (RRs): Un <literal remap="tt">RR SOA</literal>, Un  <literal remap="tt">RR NS</literal> y un
<literal remap="tt">RR  PTR</literal>. <literal remap="tt">SOA</literal> es una abreviatura de <emphasis remap="it">Start Of
Authority</emphasis>. La `<literal remap="tt">&commat;</literal>' es una notación especial que
simboliza el origen, y como la columna <literal remap="tt">dominio</literal>
para este archivo indica <literal remap="tt">0.0.127.in-addr.arpa</literal>. La
primera línea realmente significa:
</para>

<para>

<screen>
0.0.127.in-addr.arpa.	IN	SOA ...
</screen>

</para>

<para>
<literal remap="tt">NS</literal> es el <literal remap="tt">RR Name Server</literal> (Servidor de Nombres). No hay '@' al
comienzo de esta línea; es implícita ya que la línea  previa comenzaba
con '@'. Eso ahorra algo de tecleo. Así la línea NS se podría haber
escrito también como:
</para>

<para>

<screen>
0.0.127.in-addr.arpa.	IN	NS	ns.linux.bogus
</screen>

</para>

<para>
Esto le indica a DNS qué máquina es el servidor de nombres del
dominio <literal remap="tt">0.0.127.in-addr.arpa</literal> este es <literal remap="tt">ns.linux.bogus</literal>.
'ns' es un nombre habitual para servidores de  nombres, pero como con
los  servidores web que habitualmente se  llaman
<literal remap="tt">www.</literal><emphasis>loquesea</emphasis>  el nombre puede ser cualquiera.
</para>

<para>
Y finalmente el registro <literal remap="tt">PTR</literal> (Domain  Name Pointer,
Puntero de  nombre de dominio) le dice que el host con
dirección  <literal remap="tt">1</literal> (igual a <literal remap="tt">1.0.0.127.IN-ADDR.ARPA</literal>,
esto es, <literal remap="tt">127.0.0.1</literal>) es el llamado <literal remap="tt">localhost</literal>.
</para>

<para>
El registro <literal remap="tt">SOA</literal> es el preámbulo de <emphasis>todos</emphasis> los
archivos de zona y debe haber uno exactamente en cada archivo de
zona,(pero tras la directiva <literal remap="tt">$TTL</literal> ). El  registro
<literal remap="tt">SOA</literal> describe la zona, de dónde proviene (una máquina llamada
<literal remap="tt">linux.bogus</literal>), quién es el responsable de su contenido
(<literal remap="tt">hostmaster&commat;linux. bogus</literal>, deberías poner su dirección
de correo aquí, qué versión del archivo de zona es (<literal remap="tt">Número  de
Serie</literal>, <literal remap="tt">1</literal>), y otras cosas que tienen que ver con el caché y los
servidores secundarios DNS. Para el resto de los campos (<literal remap="tt">Tasa de
Refresco</literal>, <literal remap="tt">Tasa de Reintento</literal>, <literal remap="tt">Caducidad para
secundario</literal> y  <literal remap="tt">Tiempo de Validez para Clientes</literal>) usa los
valores que aparecen aquí  para mayor seguridad. Antes de  SOA viene
una línea obligatoria, la  línea <literal remap="tt">$TTL 3D</literal> Ponla en todos tus
ficheros de  zona.
</para>

<para>
Ahora reinicia tu named (la
orden es  <literal remap="tt">rndc stop</literal> o <literal remap="tt">/etc/init.d/named restart</literal>) y
usa dig para examinar tu trabajo.  <literal remap="tt">-x</literal> pregunta por resolución inversa:
</para>

<para>

<screen>
$ dig -x 127.0.0.1
;; Got answer:
;; -&#62;&#62;HEADER&#60;&#60;- opcode: QUERY, status: NOERROR, id: 30944
;; flags: qr aa rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 1, ADDITIONAL: 0

;; QUESTION SECTION:
;1.0.0.127.in-addr.arpa.                IN      PTR

;; ANSWER SECTION:
1.0.0.127.in-addr.arpa. 259200  IN      PTR     localhost.

;; AUTHORITY SECTION:
0.0.127.in-addr.arpa.   259200  IN      NS      ns.linux.bogus.

;; Query time: 3 msec
;; SERVER: 127.0.0.1#53(127.0.0.1)
;; WHEN: Sun Dec 23 03:02:39 2001
;; MSG SIZE  rcvd: 91

</screen>

</para>

<para>
Así gestiona para obtener <literal remap="tt">localhost</literal> de 127.0.0.1, bien.  Ahora para
nuestro tarea principal, el dominio <literal remap="tt">linux.bogus</literal>,inserta una nueva sección
'zone' en <literal remap="tt">named.conf</literal>:
</para>

<para>

<programlisting>
zone "linux.bogus" {
	notify no;
	type master;
	file "pz/linux.bogus";
};
</programlisting>

</para>

<para>
Observa de nuevo la ausencia de  `<literal remap="tt">.</literal>' final en el nombre de
dominio en el fichero <literal remap="tt">named.conf</literal>.
</para>

<para>
En el fichero de zona <literal remap="tt">linux.bogus</literal> pondremos  datos totalmente
ficticios 
<footnote>

<para>
N del T 
 Por si no lo has notado todavía,
<emphasis remap="it">bogus</emphasis> en inglés significa precisamente <emphasis remap="it">falso</emphasis>.
</para>

</footnote>
:
</para>

<para>

<programlisting>
;
; Fichero de zona para linux.bogus
;
; El fichero de zona completo
;
$TTL 3D
@	IN	SOA	ns.linux.bogus. hostmaster.linux.bogus. (
			199802151	; serie, fecha de hoy + serie de hoy #
			8H		; refresco, segundos
			2H		; reintento, segundos
			4W		; expira, segundos
			1D )		; mínimo, segundos
;
		NS	ns		; Dirección Inet del servidor de nombres
		MX	10 mail.linux.bogus	; Relay de correo primario
		MX	20 mail.friend.bogus.	; Relay de correo secundario
;
localhost	A	127.0.0.1
ns		A	192.168.196.2
mail		A	192.168.196.4

</programlisting>

</para>

<para>
Deben de observarse dos cosas sobre los registros  <literal remap="tt">SOA</literal>.
<literal remap="tt">ns.linux.bogus</literal>  <emphasis>debe</emphasis> ser una máquina  actual con un
registro <literal remap="tt">A</literal>. No es legal tener un registro <literal remap="tt">CNAME</literal> para
la máquina mencionada en el registro  <literal remap="tt">SOA</literal>. Su nombre no
necesita ser <literal remap="tt">ns</literal>, podría ser  cualquier nombre legal de
máquina. A continuación, en  <literal remap="tt">hostmaster.linux.bogus</literal>  deberá
aparecer algo como <literal remap="tt">hostmaster&commat;linux.bogus</literal>; esto sería
un alias  de email, o una cuenta de correo, donde la(s) persona(s)
que realizan  el mantenimiento de DNS deberían leer con  frecuencia el
correo.  Cualquier email respecto del dominio será mandado a la
dirección aquí indicada. El nombre no tiene por que ser
<literal remap="tt">hostmaster</literal>, puede  ser cualquier dirección email
legal, pero la dirección email  <literal remap="tt">hostmaster</literal>
funcionará también.
</para>

<para>
Hay un nuevo tipo de  <literal remap="tt">RR</literal> en este archivo, el <literal remap="tt">MX</literal>, o
<emphasis remap="it">Mail eXchanger</emphasis>. Este indica el sistema de correo a
donde mandar el correo dirigido a <literal remap="tt">alguien&commat;linux.bogus</literal>, pudiendo ser
también <literal remap="tt">mail.linux.bogus</literal> o <literal remap="tt">mail.friend.bogus</literal>.
El número que precede a cada nombre de  máquina es la prioridad del
<literal remap="tt">RR MX</literal>. El <literal remap="tt">RR</literal> con el número más bajo (<literal remap="tt">10</literal>) es aquel al
que el correo será enviado primero.  Si este falla, puede ser mandado a
otro con un número más alto, que será gestor  secundario de correo,
como <literal remap="tt">mail.friend.bogus</literal> que tiene una prioridad <literal remap="tt">20</literal>  aquí.
</para>

<para>
Reinicia <literal remap="tt">named</literal> ejecutando <literal remap="tt">rndc reload</literal>.  Examina
los resultados con <literal remap="tt">dig</literal>:
</para>

<para>

<screen>
$ dig any linux.bogus
; &#60;&#60;&#62;&#62; DiG 9.1.3 &#60;&#60;&#62;&#62; any linux.bogus
;; global options:  printcmd
;; Got answer:
;; -&#62;&#62;HEADER&#60;&#60;- opcode: QUERY, status: NOERROR, id: 55239
;; flags: qr aa rd ra; QUERY: 1, ANSWER: 4, AUTHORITY: 1, ADDITIONAL: 1

;; QUESTION SECTION:
;linux.bogus.               IN      ANY

;; ANSWER SECTION:
linux.bogus.        259200  IN      SOA     ns.linux.bogus. \
      hostmaster.linux.bogus. 199802151 28800 7200 2419200 86400
linux.bogus.        259200  IN      NS      ns.linux.bogus.
linux.bogus.        259200  IN      MX      20 mail.friend.bogus.
linux.bogus.        259200  IN      MX      10 mail.linux.bogus.linux.bogus.

;; AUTHORITY SECTION:
linux.bogus.        259200  IN      NS      ns.linux.bogus.

;; ADDITIONAL SECTION:
ns.linux.bogus.     259200  IN      A       192.168.196.2

;; Query time: 4 msec
;; SERVER: 127.0.0.1#53(127.0.0.1)
;; WHEN: Sun Dec 23 03:06:45 2001
;; MSG SIZE  rcvd: 184

$ dig any linux.bogus
; &#60;&#60;&#62;&#62; DiG 9.1.3 &#60;&#60;&#62;&#62; any linux.bogus
;; global options:  printcmd
;; Got answer:
;; -&#62;&#62;HEADER&#60;&#60;- opcode: QUERY, status: NOERROR, id: 55239
;; flags: qr aa rd ra; QUERY: 1, ANSWER: 4, AUTHORITY: 1, ADDITIONAL: 1

;; QUESTION SECTION:
;linux.bogus.               IN      ANY

;; ANSWER SECTION:
linux.bogus.        259200  IN      SOA     ns.linux.bogus. \
      hostmaster.linux.bogus. 199802151 28800 7200 2419200 86400
linux.bogus.        259200  IN      NS      ns.linux.bogus.
linux.bogus.        259200  IN      MX      20 mail.friend.bogus.
linux.bogus.        259200  IN      MX      10 mail.linux.bogus.linux.bogus.

;; AUTHORITY SECTION:
linux.bogus.        259200  IN      NS      ns.linux.bogus.

;; ADDITIONAL SECTION:
ns.linux.bogus.     259200  IN      A       192.168.196.2

;; Query time: 4 msec
;; SERVER: 127.0.0.1#53(127.0.0.1)
;; WHEN: Sun Dec 23 03:06:45 2001
;; MSG SIZE  rcvd: 184$ dig any linux.bogus
; &#60;&#60;&#62;&#62; DiG 9.1.3 &#60;&#60;&#62;&#62; any linux.bogus
;; global options:  printcmd
;; Got answer:
;; -&#62;&#62;HEADER&#60;&#60;- opcode: QUERY, status: NOERROR, id: 55239
;; flags: qr aa rd ra; QUERY: 1, ANSWER: 4, AUTHORITY: 1, ADDITIONAL: 1

;; QUESTION SECTION:
;linux.bogus.               IN      ANY

;; ANSWER SECTION:
linux.bogus.        259200  IN      SOA     ns.linux.bogus. \
      hostmaster.linux.bogus. 199802151 28800 7200 2419200 86400
linux.bogus.        259200  IN      NS      ns.linux.bogus.
linux.bogus.        259200  IN      MX      20 mail.friend.bogus.
linux.bogus.        259200  IN      MX      10 mail.linux.bogus.linux.bogus.

;; AUTHORITY SECTION:
linux.bogus.        259200  IN      NS      ns.linux.bogus.

;; ADDITIONAL SECTION:
ns.linux.bogus.     259200  IN      A       192.168.196.2

;; Query time: 4 msec
;; SERVER: 127.0.0.1#53(127.0.0.1)
;; WHEN: Sun Dec 23 03:06:45 2001
;; MSG SIZE  rcvd: 184
$ dig any linux.bogus
; &#60;&#60;&#62;&#62; DiG 9.1.3 &#60;&#60;&#62;&#62; any linux.bogus
;; global options:  printcmd
;; Got answer:
;; -&#62;&#62;HEADER&#60;&#60;- opcode: QUERY, status: NOERROR, id: 55239
;; flags: qr aa rd ra; QUERY: 1, ANSWER: 4, AUTHORITY: 1, ADDITIONAL: 1

;; QUESTION SECTION:
;linux.bogus.               IN      ANY

;; ANSWER SECTION:
linux.bogus.        259200  IN      SOA     ns.linux.bogus. \
      hostmaster.linux.bogus. 199802151 28800 7200 2419200 86400
linux.bogus.        259200  IN      NS      ns.linux.bogus.
linux.bogus.        259200  IN      MX      20 mail.friend.bogus.
linux.bogus.        259200  IN      MX      10 mail.linux.bogus.linux.bogus.

;; AUTHORITY SECTION:
linux.bogus.        259200  IN      NS      ns.linux.bogus.

;; ADDITIONAL SECTION:
ns.linux.bogus.     259200  IN      A       192.168.196.2

;; Query time: 4 msec
;; SERVER: 127.0.0.1#53(127.0.0.1)
;; WHEN: Sun Dec 23 03:06:45 2001
;; MSG SIZE  rcvd: 184
</screen>

</para>

<para>
Con un examen cuidadoso  puede descubrir fallos. La línea
</para>

<para>

<screen>
linux.bogus.            3D IN MX        10 mail.linux.bogus.linux.bogus.
</screen>

</para>

<para>
está completamente equivocada. Debería ser
</para>

<para>

<screen>
linux.bogus.            3D IN MX        10 mail.linux.bogus.
</screen>

</para>

<para>
Deliberadamente cometí un error para que pudieras aprender de él. :-)
Mirando en el fichero de zona encontramos la línea:
</para>

<para>

<screen>
		MX	10 mail.linux.bogus	; Relay de correo primario
</screen>

</para>

<para>
Falta un punto. O tiene demasiados 'linux.bogus'. Si una nombre de máquina
no termina en punto, en un fichero de zona, se le añade el origen al final
ocasionado el doble <literal remap="tt">linux.bogus.linux.bogus</literal>.   Entonces, o bien
</para>

<para>

<programlisting>
		MX	10 mail.linux.bogus.	; Relay de correo primario
</programlisting>

</para>

<para>
o
</para>

<para>

<programlisting>
		MX	10 mail			; Relay de correo primario
</programlisting>

</para>

<para>
es correcto.  Prefiero la última forma, hay que teclear menos.
Hay algunos expertos den BIND que no están de acuerdo con esto y otros
que sí. En un  fichero de zona el dominio debería de escribirse bien
finalizado con un `<literal remap="tt">.</literal>' o no debería incluirse, en cuyo caso toma
como valor predeterminado el origen.
</para>

<para>
Tengo que insistir que en  el fichero named.conf <emphasis>no</emphasis>  se tiene
que poner `<literal remap="tt">.</literal>'s tras los  nombres de dominio.  No tienes ni idea de cuantas
veces un `<literal remap="tt">.</literal>' por ponerlo o por no ponerlo ha estropeado todo  y
ha vuelto loca a la gente.
</para>

<para>
Y habiendo incluido mi punto,aquí está el nuevo  fichero de zona,
con alguna información extra  también:
</para>

<para>

<programlisting>
;
; Fichero de zona para linux.bogus
;
; Fichero de zona completo
;
$TTL 3D
@	IN	SOA	ns.linux.bogus. hostmaster.linux.bogus. (
			199802151	; seriel, fecho de hoy + serie de hoy #
			8H		; refresco, segundos
			2H		; reintento, segundos
			4W		; expira, segundos
			1D )		; mínimo, segundos
;
		TXT	"Linux.Bogus, sus consutas DNS"
		NS	ns		; Inet Address of name server
		NS	ns.friend.bogus.
		MX	10 mail		; Relay primario de correo
		MX	20 mail.friend.bogus. ; Relay secundario de correo

localhost	A	127.0.0.1

gw		A	192.168.196.1
		TXT	"El router"

ns		A	192.168.196.2
		MX	10 mail
		MX	20 mail.friend.bogus.
www		CNAME	ns

donald		A	192.168.196.3
		MX	10 mail
		MX	20 mail.friend.bogus.
		HINFO	"i486"	"Linux 2.0"
		TXT	"DEK"

mail		A	192.168.196.4
		MX	10 mail
		MX	20 mail.friend.bogus.

ftp		A	192.168.196.5
		MX	10 mail
		MX	20 mail.friend.bogus.
</programlisting>

</para>

<para>
El registro <literal remap="tt">TXT</literal> es un texto en formato libre que puede
usar para cualquier  cosa que le interese.  <literal remap="tt">CNAME</literal>
(<emphasis remap="it">Canonical NAME</emphasis>) es una forma de dar a cada máquina varios
nombres.  Por tanto <literal remap="tt">www</literal> es un alias para <literal remap="tt">ns</literal>.
</para>

<para>
 El uso de registros CNAME es controvertido. Pero es más
seguro seguir la norma de que  los  registros <literal remap="tt">MX</literal>,
<literal remap="tt">CNAME</literal> y  <literal remap="tt">SOA</literal> <emphasis remap="bf">nunca deben hacer referencia a un
registro</emphasis> <literal remap="tt">CNAME</literal>, sólo deben referirse a registros
<literal remap="tt">A</literal>, en  consecuencia es desaconsejable tener
</para>

<para>

<programlisting>
foobar		CNAME	www			; NO!
</programlisting>

</para>

<para>
lo correcto sería tener
</para>

<para>

<programlisting>
foobar		CNAME	ns			; Si!
</programlisting>

</para>

<para>
También es mejor suponer que un <literal remap="tt">CNAME</literal> no es
un nombre de máquina legal para direcciones de correo:
<literal remap="tt">webmaster&commat;www.linux.bogus</literal> es una dirección
email ilegaldada en la configuración anterior. Encontrarás muy
pocos administradores de correo de Ahí Afuera que
recomienden esta regla, incluso si  te funciona.  La forma de evitar
esto es usar un registro <literal remap="tt">A</literal> (y quizá algunos otros también,
como un registro <literal remap="tt">MX</literal>) en su lugar:
</para>

<para>

<programlisting>
www		A	192.168.196.2
</programlisting>

</para>

<para>
Algunos  gurús de <literal remap="tt">named</literal> recomiendan no usar CNAME. Por
tanto considera el no  utilizarlo seriamente. Pero  la discusión de
por qué o no está más allá de los  objetivos de este documento.
</para>

<para>
Pero como puede ver, en  este COMO y en muchos sitios  no siguen
esta regla.
</para>

<para>
Cargue la nueva base de datos  ejecutando <literal remap="tt">rndc  reload</literal>, esto
provoca la lectura de sus archivos de nuevo.
</para>

<para>

<screen>
$ dig linux.bogus axfr

; &#60;&#60;&#62;&#62; DiG 9.1.3 &#60;&#60;&#62;&#62; linux.bogus axfr
;; global options:  printcmd
linux.bogus.            259200  IN      SOA     ns.linux.bogus. hostmaster.linux.bogus. 199802151 28800 7200 2419200 86400
linux.bogus.            259200  IN      NS      ns.linux.bogus.
linux.bogus.            259200  IN      MX      10 mail.linux.bogus.
linux.bogus.            259200  IN      MX      20 mail.friend.bogus.
donald.linux.bogus.     259200  IN      A       192.168.196.3
donald.linux.bogus.     259200  IN      MX      10 mail.linux.bogus.
donald.linux.bogus.     259200  IN      MX      20 mail.friend.bogus.
donald.linux.bogus.     259200  IN      TXT     "DEK"
ftp.linux.bogus.        259200  IN      A       192.168.196.5
ftp.linux.bogus.        259200  IN      MX      10 mail.linux.bogus.
ftp.linux.bogus.        259200  IN      MX      20 mail.friend.bogus.
gw.linux.bogus.         259200  IN      A       192.168.196.1
gw.linux.bogus.         259200  IN      TXT     "The router"
localhost.linux.bogus.  259200  IN      A       127.0.0.1
mail.linux.bogus.       259200  IN      A       192.168.196.4
mail.linux.bogus.       259200  IN      MX      10 mail.linux.bogus.
mail.linux.bogus.       259200  IN      MX      20 mail.friend.bogus.
ns.linux.bogus.         259200  IN      MX      10 mail.linux.bogus.
ns.linux.bogus.         259200  IN      MX      20 mail.friend.bogus.
ns.linux.bogus.         259200  IN      A       192.168.196.2
www.linux.bogus.        259200  IN      CNAME   ns.linux.bogus.
linux.bogus.            259200  IN      SOA     ns.linux.bogus. hostmaster.linux.bogus. 199802151 28800 7200 2419200 86400
;; Query time: 41 msec
;; SERVER: 127.0.0.1#53(127.0.0.1)
;; WHEN: Sun Dec 23 03:12:31 2001
;; XFR size: 23 records

</screen>

</para>

<para>
Está bien.  Como ves, se parece bastante al propio ficheros de
zona. Comprobamos que dice para <literal remap="tt">www</literal> solo:
</para>

<para>

<screen>
$ dig www.linux.bogus

; &#60;&#60;&#62;&#62; DiG 9.1.3 &#60;&#60;&#62;&#62; www.linux.bogus
;; global options:  printcmd
;; Got answer:
;; -&#62;&#62;HEADER&#60;&#60;- opcode: QUERY, status: NOERROR, id: 16633
;; flags: qr aa rd ra; QUERY: 1, ANSWER: 2, AUTHORITY: 1, ADDITIONAL: 0

;; QUESTION SECTION:
;www.linux.bogus.               IN      A

;; ANSWER SECTION:
www.linux.bogus.        259200  IN      CNAME   ns.linux.bogus.
ns.linux.bogus.         259200  IN      A       192.168.196.2

;; AUTHORITY SECTION:
linux.bogus.            259200  IN      NS      ns.linux.bogus.

;; Query time: 5 msec
;; SERVER: 127.0.0.1#53(127.0.0.1)
;; WHEN: Sun Dec 23 03:14:14 2001
;; MSG SIZE  rcvd: 80
</screen>

</para>

<para>
En otras palabras, el nombre real de <literal remap="tt">www.linux.bogus</literal> es
<literal remap="tt">ns.linux.bogus</literal>, y te da parte de la información que
tiene de ns también, suficiente si fueras un programa.
</para>

<para>
Ahora estamos a mitad de camino.
</para>

</sect2>

<sect2>
<title>La zona inversa</title>

<para>
Ahora los programas pueden convertir los nombres de  linux.bogus a
direcciones a las que poder conectarse. Pero también se  necesita una
zona inversa, una para hacer que  DNS sea capaz de convertir de
direcciones a nombres. Ese nombre lo  utilizan distintos tipos de
servidores (FTP, IRC, WWW y otros) para decidir si  quieren o no
hablar contigo,  y en caso afirmativo, qué prioridad se le debería
dar. Para un acceso completo  a los servicios de
internet se necesita una zona  inversa.
</para>

<para>
Pon esto en  <literal remap="tt">named.conf</literal>:
</para>

<para>

<programlisting>
zone
 "196.168.192.in-addr.arpa" {
	notify no;
        type master;
        file "pz/192.168.196";
};
</programlisting>

</para>

<para>
Esto es exactamente como en   <literal remap="tt">0.0.127.in-addr.arpa</literal>, y los
contenidos son similares:
</para>

<para>

<programlisting>
$TTL 3D
@	IN	SOA	ns.linux.bogus. hostmaster.linux.bogus. (
			199802151 ; Serial, todays date + todays serial
			8H	; Refresco
			2H      ; Reintento
			4W	; Expira
			1D)	; Minimo TTL
		NS      ns.linux.bogus.

1		PTR	gw.linux.bogus.
2		PTR	ns.linux.bogus.
3		PTR	donald.linux.bogus.
4		PTR	mail.linux.bogus.
5		PTR	ftp.linux.bogus.
</programlisting>

</para>

<para>
Ahora reinicia tu  named (<literal remap="tt">rndc reload</literal>) y examina
el trabajo con dig de nuevo:
</para>

<para>

<programlisting>
$ dig -x 192.168.196.4
;; Got answer:
;; -&#62;&#62;HEADER&#60;&#60;- opcode: QUERY, status: NOERROR, id: 58451
;; flags: qr aa rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 1, ADDITIONAL: 1

;; QUESTION SECTION:
;4.196.168.192.in-addr.arpa.    IN      PTR

;; ANSWER SECTION:
4.196.168.192.in-addr.arpa. 259200 IN   PTR     mail.linux.bogus.

;; AUTHORITY SECTION:
196.168.192.in-addr.arpa. 259200 IN     NS      ns.linux.bogus.

;; ADDITIONAL SECTION:
ns.linux.bogus.         259200  IN      A       192.168.196.2

;; Query time: 4 msec
;; SERVER: 127.0.0.1#53(127.0.0.1)
;; WHEN: Sun Dec 23 03:16:05 2001
;; MSG SIZE  rcvd: 107
</programlisting>

</para>

<para>
y parece correcto, vuelca todo y examínalo también:
</para>

<para>

<programlisting>
$ dig 196.168.192.in-addr.arpa. AXFR

; &#60;&#60;&#62;&#62; DiG 9.1.3 &#60;&#60;&#62;&#62; 196.168.192.in-addr.arpa. AXFR
;; global options:  printcmd
196.168.192.in-addr.arpa. 259200 IN     SOA     ns.linux.bogus. \
	hostmaster.linux.bogus. 199802151 28800 7200 2419200 86400
196.168.192.in-addr.arpa. 259200 IN     NS      ns.linux.bogus.
1.196.168.192.in-addr.arpa. 259200 IN   PTR     gw.linux.bogus.
2.196.168.192.in-addr.arpa. 259200 IN   PTR     ns.linux.bogus.
3.196.168.192.in-addr.arpa. 259200 IN   PTR     donald.linux.bogus.
4.196.168.192.in-addr.arpa. 259200 IN   PTR     mail.linux.bogus.
5.196.168.192.in-addr.arpa. 259200 IN   PTR     ftp.linux.bogus.
196.168.192.in-addr.arpa. 259200 IN     SOA     ns.linux.bogus. \
	hostmaster.linux.bogus. 199802151 28800 7200 2419200 86400
;; Query time: 6 msec
;; SERVER: 127.0.0.1#53(127.0.0.1)
;; WHEN: Sun Dec 23 03:16:58 2001
;; XFR size: 9 records
</programlisting>

</para>

<para>
¡Parece bien! Si tu salida no se parece, busca algún
mensaje de error en tu syslog, explico como hacerlo en la primera sección
en la cabecera <xref linkend="iniciando"/>
</para>

</sect2>

<sect2>
<title>Palabras de precaución</title>

<para>
Hay algunas cosas que añadiría aquí.  Las direcciones IP utilizadas en
los ejemplos se han tomado  del  rango de 'redes privadas',i.e., no
se permite usarlas  públicamente en internet.  Esto es más seguro para
usar en un ejemplo en el COMO.  Las segunda cosa es la línea
<literal remap="tt">notify no;</literal>.  Esta le dice a named que no notifique a
sus servidores secundarios (eslave, esclavos) cuando haya
realizado una actualización  de uno de sus ficheros
de zona. En BIND-8 y posteriores named puede  notificar al resto de
servidores listados en  registros
NS de la zona cuando se  actualiza una zona. Es bueno  para el uso
ordinario. Pero  para experimentos privados con  zonas, se debería
deshabilitar esta  característica. No queremos que los experimentos
contaminen internet ¿no?.
</para>

<para>
Y por supuesto, este dominio es ficticio y en  consecuencia, todas
las  direcciones que hay en él. Para tener un ejemplo de  dominio de
la vida real mira  la sección correspondiente.
</para>

</sect2>

<sect2>
<title>Por qué no funciona la  resolución inversa</title>

<para>
Hay una serie de pegas que normalmente se evitan con  búsquedas de
nombres que se ven con  frecuencia cuando se  configuran las zonas
inversas. Ante de proseguir, necesitas  que funcionen las búsquedas
inversas en tu propio servidor de nombres. Si aun no  funciona vuelve
atrás y  corrígelo antes de continuar.
</para>

<para>
Discutiré dos fallos de las búsquedas inversas tal y como  se ven
desde fuera de tu red:
</para>

<sect3>
<title>La zona inversa no está delegada.</title>

<para>
Cuando le solicita a un proveedor de servicios un  rango de red
y un nombre de dominio, el  nombre de dominio normalmente  se
delega. Una delegación es el  registro NS que te ayuda a
obtener de un servidor de nombres otro  servidor de nombres, como se
explicaba en la anterior sección "Un   poco de teoría a secas". ¿La
has leído? Si tu zona inversa no  funciona, vuelve y léela.  Ahora.
</para>

<para>
La zona inversa también necesita ser delegada. Si tienes la red
<literal remap="tt">192.168.196</literal> con el dominio <literal remap="tt">linux.bogus</literal> de tu proveedor, ellos
tienen que poner registros <literal remap="tt">NS</literal> para tu zona inversa
también como para tus zonas de reenvío. Si sigues la  cadena desde
<literal remap="tt">in-addr.arpa</literal> hasta llegar  a tu red, probablemente
encontrarás una ruptura en la cadena, los más  probable en tu
proveedor de  servicios. Cuando hayas encontrado la
ruptura de la cadena,  contacta con tu
proveedor de servicios y  pídeles que corrijan el error.
</para>

</sect3>

<sect3>
<title>Tienes una subred sin clases</title>

<para>
Esta es una cuestión avanzada, pero las subredes  sin clase son muy
comunes hay día, y  probablemente tendrás una si  tienes una pequeña
empresa.
</para>

<para>
Las subredes sin clase es  lo que mantiene internet en
funcionamiento hoy día. Hace algunos años.  Hace no mucho tiempo había
mucha dificultad para acortar las  direcciones IP. La gente
inteligente del IETF (Internet Engineering  Task Force, ellos
mantienen  internet en funcionamiento) se  devanaron juntos los sesos
y  resolvieron el problema. A un precio. El  precio es que obtienes
menos  que una subred de clase  ``C'' y ciertas  cosas pueden no
funcionar.  Por favor mira <ulink
url="http://www.acmebw.com/askmrdns/00007.htm"
>Preguntar a Mr. DNS  (Ask Mr. DNS at)</ulink
>
para tener  una buena explicación sobre todo esto y como gestionarlo.
</para>

<para>
¿Lo has leído?  No lo voy a explicar, por favor léelo.
</para>

<para>
La primera parte del  problema es que tu ISP tiene
que entender la técnica descrita por Mr.
DNS.  No todos los pequeños proveedores comprenden esto de forma
práctica. Si es así, tendrías  que explicárselo tú
y ser insistente. Pero primero  asegúrate de entenderlo tú
:-). Así ellos configurarán un bonita zona  inversa en sus servidores
que  tú puedes examinar con dig para posibles  correcciones.
</para>

<para>
La segunda y última parte  del problema es que tienes
que entender la técnica. Si no estás seguro,  vuelve y lee todos esto
de  nuevo. Ahora puedes configurar tu  propia zona inversa sin
clases como lo describe Mr. DNS.
</para>

<para>
Hay otra trampa escondida  aquí. Los resolutores (muy) viejos
<emphasis>no</emphasis> podrán seguir el truco <literal remap="tt">CNAME</literal> en la cadena de
resolución y fallarán en la resolución inversa de tu máquina.  Esto
puede ocasionar en el servicio la  asignación de una clase de
acceso incorrecta, denegación de acceso o algo  similar. Si tropiezas
con este  servicio la única solución (que yo  sepa) es que tu ISP
inserte  tu registro PTR directamente en su fichero de  zona sin clase
en lugar del  truco del registro CNAME.
</para>

<para>
Algunos ISP te pueden ofrecer otras formas de   gestionar esto,
como formularios  Web para que  introduzca las relaciones  inversas u
otros sistema automágicos.
</para>

</sect3>

</sect2>

<sect2>
<title>Servidores esclavos</title>

<para>
Una vez que hayas configurado tus zonas  correctamente en
el servidor principal,  necesitas configurar al menos  un servidor
esclavo. Los servidores  esclavos son necesarios por
motivos de robustez. Si cae el servidor  principal, la gente de la
red  todavía podrá obtener información  sobre tu dominio a partir del
esclavo. Tu servidor esclavo debería  estar tan alejado de ti como
sea posible. El principal y el esclavo  deberían compartir los menos
posibles de entre estos aspectos:
Suministro eléctrico, red  local, ISP, ciudad  país. Si todas estas
cosas  son diferentes para sus  servidores principal y esclavo, ha
encontrado realmente un buen  esclavo.
</para>

<para>
Un esclavo es simplemente  un servidor de nombres que
copia los ficheros de zona de un  principal. Lo puedes poner
como:
</para>

<para>

<programlisting>
zone "linux.bogus" {
	type slave;
	file "sz/linux.bogus";
	masters { 192.168.196.2; };
};
</programlisting>

</para>

<para>
Para copiar los datos se  usa un mecanismo llamado  transferencias
de zona. La transferencia de  zona esta controlada por su  registro
SOA:
</para>

<para>

<programlisting>
@	IN	SOA	ns.linux.bogus. hostmaster.linux.bogus. (
			199802151	; serie, fecha de  hoy + serie de hoy #
			8H		; refresco, segundos
			2H		; reintento, segundos
			4W		; expira, segundos
			1D )		; minimo, segundos
</programlisting>

</para>

<para>
Una zona solo se transfiere  si el numero de serie del principal es
mayor que el del  esclavo. En cada intervalo de refresco el esclavo
comprueba  si el principal se ha actualizado. Si la
comprobación falla (porque el  principal no esté disponible)
intentará  comprobarlo cada intervalo de  reintento.
Si el fallo continúa hasta el  intervalo de expiración el
esclavo eliminará la zona de su  sistema de ficheros y ya no
volverá a estar disponible.
</para>

</sect2>

</sect1>

<sect1 id="seguridad">
<title>Opciones de seguridad básicas
</title>

<para>
<emphasis>Por Jamie Norrish</emphasis>
</para>

<para>
<emphasis remap="bf">Opciones de  configuración para reducir los problemas de
seguridad.</emphasis>
</para>

<para>
Hay algunos pasos simples  que puede llevara cabo para  asegurar
su servidor y reducir su  carga. El material incluido  aquí no es más
que un punto de partida; si te  preocupan los temas de  seguridad (y
deberían preocuparte), por  favor, consulta otros  recursos en la
red (mira el <xref linkend="grande"/>).
</para>

<para>
Las siguientes directivas de  configuración se incluyen en el
fichero <literal remap="tt">named.conf</literal>. Si la  directiva aparece en la
sección <literal remap="tt">options</literal> del fichero,  entonces se aplica a todas
las zonas incluidas en ese  fichero. Si aparecen en una
entrada <literal remap="tt">zone</literal>, entonces se aplican  sólo a esa zona. Los valores
de <literal remap="tt">zone</literal> se anteponen a los  especificados en  <literal remap="tt">options</literal>.
</para>

<sect2>
<title>Restringir  transferencias de zona</title>

<para>
Para que sus servidores  esclavos puedan responder  consultas
sobre tu dominio tienen que  poder transferir la  información de la
zona de tu servidor primario.  Del resto, muy pocas máquinas
deberían hacerlo. Por tanto,  restringe las transferencias
de zona usando la opción  <literal remap="tt">allow-transfer</literal>,  suponiendo que
192.168.1.4 es la dirección IP de  ns.friend.bogus y añádete a
ti mismo por motivos de depuración:
</para>

<para>

<programlisting>
zone "linux.bogus" {
      allow-transfer { 192.168.1.4; localhost; };
};
</programlisting>

</para>

<para>
Al restringir las transferencias de zona te  aseguras que la
información pública disponible es la que la gente consulte
directamente, nadie puede preguntar detalles sobre  la configuración
del  servidor.
</para>

</sect2>

<sect2>
<title>Protegerse contra falsificaciones</title>

<para>
Primero, desactiva cualquier  consulta para dominios que no  sean
de tu propiedad, salvo para  consultas internas y la  máquina local.
Esto no sólo ayuda a prevenir el uso  malicioso de tu servidor
DNS, sino que reduce el uso innecesario de  tu servidor.
</para>

<para>

<programlisting>
options {
      allow-query { 192.168.196.0/24; localhost;
 };
};

zone "linux.bogus" {
      allow-query { any; };
};

zone
 "196.168.192.in-addr.arpa" {
      allow-query { any; };
};
</programlisting>

</para>

<para>
Más aun, desactiva las consultas recursivas salvo  para orígenes
internos/locales. Esto reduce  el riesgo de "ataques de
envenenamiento" (que alimentan tu servidor con  datos falsos).
</para>

<para>

<programlisting>
options {
	allow-recursion { 192.168.196.0/24; localhost; };
};
</programlisting>

</para>

</sect2>

<sect2>
<title>Ejecutar named no como root</title>

<para>
Es buena idea ejecutar  named como un usuario  distinto de root,
de forma que los privilegios  obtenidos por un cracker  estén tan
limitados como sea posible. Primero  tenemos que crear unos
usuario y grupo para ejecutar named, y después  modificar los guiones
de  inicio necesarios que uses para  lanzar named. Pasa el usuario
y el grupo a named usando las opciones  -u y -g.
</para>

<para>
Por ejemplo, en Debian GNU/Linux 2.2 podría  modificar su guion
<literal remap="tt">/etc/init.d/bind</literal>  para tener la siguiente línea (donde el
usuario y el grupo  ya se han creado):
</para>

<para>

<programlisting>
start-stop-daemon --start --quiet --exec /usr/sbin/named -- -u named -g named
</programlisting>

</para>

<para>
Lo mismo se puede hacer con  Red Hat y otras  distribuciones. Dave
Lugo ha descrito una  configuración dual chroot  segura <ulink
url="http://www.etherboy.com/d ns/chrootdns.html"
>&#65533;</ulink
> que te  puede
resultar interesante leer.
</para>

</sect2>

</sect1>

<sect1 id="real-example">
<title>Un ejemplo de dominio real</title>

<para>
<emphasis remap="bf">Donde incluimos algunos ficheros de zona <emphasis>reales</emphasis>.</emphasis>
</para>

<para>
Algunos usuarios han  sugerido que incluya un  ejemplo real
de un dominio en  funcionamiento además del  ejemplo del tutorial.
</para>

<para>
Yo uso este ejemplo con  permiso de David Bullock de LAND-5. Estos
archivos eran  los usados el 24 de  Septiembre de 1996, se han editado
para adaptarse  a las restricciones de BIND 8 y uso mis extensiones.
Así lo  que ve podría diferir de los  que encuentres si preguntas
ahora al servidor  de nombres LAND-5.
</para>

<sect2>
<title>/etc/named.conf (o  /var/named/named.conf)</title>

<para>
Aquí encontramos las  secciones de zonas  principales para las dos
zonas de  resolución inversa  necesarias:
tanto la red 127.0.0 como la  subred <literal remap="tt">206.6.177</literal>  de  LAND-5,
y una línea primaria para la  zona de reenvío de land-5,
<literal remap="tt">land-5.com</literal>. También observa que en lugar  de almacenar los
ficheros en  un directorio llamado <literal remap="tt">pz</literal>, como hace en  este COMO,
él los pone en un  directorio llamado <literal remap="tt">zone</literal>.
</para>

<para>

<programlisting>
// Boot file for LAND-5 name server

options {
	directory "/var/named";
};

controls {
        inet 127.0.0.1 allow { localhost; } keys { rndc_key; };
};

key "rndc_key" {
        algorithm hmac-md5;
        secret "c3Ryb25nIGVub3VnaCBmb3IgYSBtYW4gYnV0IG1hZGUgZm9yIGEgd29tYW4K";
};

zone "." {
	type hint;
	file "root.hints";
};

zone "0.0.127.in-addr.arpa" {
	type master;
	file "zone/127.0.0";
};

zone "land-5.com" {
	type master;
	file "zone/land-5.com";
};

zone "177.6.206.in-addr.arpa" {
	type master;
	file "zone/206.6.177";
};

</programlisting>

</para>

<para>
Si pones esto en tu fichero  named.conf para probar <emphasis remap="bf">POR FAVOR</emphasis>
pon  ``<literal remap="tt">notify no;</literal>'' en la  sección de zona para las dos zonas
<literal remap="tt">land-5</literal> para evitar  accidentes.
</para>

</sect2>

<sect2>
<title>/var/named/root.hints</title>

<para>
Tenga en cuenta que este  fichero es dinámico, y el  listado
aquí es viejo. Lo mejor es  usar uno creado ahora, con  dig, como
se explicaba antes.
</para>

<para>

<programlisting>
; &#60;&#60;&#62;&#62; DiG 8.1 &#60;&#60;&#62;&#62; @A.ROOT-SERVERS.NET.
; (1 server found)
;; res options: init recurs defnam dnsrch
;; got answer:
;; -&#62;&#62;HEADER&#60;&#60;- opcode: QUERY, status: NOERROR, id: 10
;; flags: qr aa rd; QUERY: 1, ANSWER: 13, AUTHORITY: 0, ADDITIONAL: 13
;; QUERY SECTION:
;;	., type = NS, class = IN

;; ANSWER SECTION:
.			6D IN NS	G.ROOT-SERVERS.NET.
.			6D IN NS	J.ROOT-SERVERS.NET.
.			6D IN NS	K.ROOT-SERVERS.NET.
.			6D IN NS	L.ROOT-SERVERS.NET.
.			6D IN NS	M.ROOT-SERVERS.NET.
.			6D IN NS	A.ROOT-SERVERS.NET.
.			6D IN NS	H.ROOT-SERVERS.NET.
.			6D IN NS	B.ROOT-SERVERS.NET.
.			6D IN NS	C.ROOT-SERVERS.NET.
.			6D IN NS	D.ROOT-SERVERS.NET.
.			6D IN NS	E.ROOT-SERVERS.NET.
.			6D IN NS	I.ROOT-SERVERS.NET.
.			6D IN NS	F.ROOT-SERVERS.NET.

;; ADDITIONAL SECTION:
G.ROOT-SERVERS.NET.	5w6d16h IN A	192.112.36.4
J.ROOT-SERVERS.NET.	5w6d16h IN A	198.41.0.10
K.ROOT-SERVERS.NET.	5w6d16h IN A	193.0.14.129
L.ROOT-SERVERS.NET.	5w6d16h IN A	198.32.64.12
M.ROOT-SERVERS.NET.	5w6d16h IN A	202.12.27.33
A.ROOT-SERVERS.NET.	5w6d16h IN A	198.41.0.4
H.ROOT-SERVERS.NET.	5w6d16h IN A	128.63.2.53
B.ROOT-SERVERS.NET.	5w6d16h IN A	128.9.0.107
C.ROOT-SERVERS.NET.	5w6d16h IN A	192.33.4.12
D.ROOT-SERVERS.NET.	5w6d16h IN A	128.8.10.90
E.ROOT-SERVERS.NET.	5w6d16h IN A	192.203.230.10
I.ROOT-SERVERS.NET.	5w6d16h IN A	192.36.148.17
F.ROOT-SERVERS.NET.	5w6d16h IN A	192.5.5.241

;; Total query time: 215 msec
;; FROM: roke.uio.no to SERVER: A.ROOT-SERVERS.NET.  198.41.0.4
;; WHEN: Sun Feb 15 01:22:51 1998
;; MSG SIZE  sent: 17  rcvd: 436

</programlisting>

</para>

</sect2>

<sect2>
<title>/var/named/zone/127.0.0</title>

<para>
Sólo lo básico, el registro  SOA y el registro que asocia
127.0.0.1 con <literal remap="tt">localhost</literal>.  Ambos son necesarios. No es
necesario nada más en este fichero.  Probablemente nunca tendrá
que actualizarse, salvo que cambien las  direcciones del servidor de
nombres o del hostmaster.
</para>

<para>

<programlisting>
@               IN      SOA  land-5.com. root.land-5.com.
 (
  199609203       ; Serial
  28800   ; Refresh
  7200    ; Retry
  604800  ; Expire
  86400)  ; Minimum TTL
  NS  land-5.com.
1                       PTR
  localhost.
</programlisting>

</para>

<para>
Si miras una instalación de  BIND al azar, probablemente
encontrarás que falta una línea <literal remap="tt">$TTL</literal> como aquí.
Esto no se usaba antes, y sólo la versión  8.2  de BIND ha comenzado
a  avisarnos de su ausencia.  BIND 9 <emphasis>requiere</emphasis> el <literal remap="tt">$TTL</literal>.
<footnote>

<para>
N.T.  Mira de nuevo los datos de  syslog para detectar la
ausencia de un TTL  predeterminado.
</para>

</footnote>

</para>

</sect2>

<sect2>
<title>/var/named/zone/land-5.com</title>

<para>
Aquí vemos el registro  <literal remap="tt">SOA</literal> obligatorio y  los registros
<literal remap="tt">NS</literal> necesarios. Podemos observar  que dispone de un servidor
de  nombres secundario  <literal remap="tt">ns2.psi.net</literal>. Esto es
como debe ser, ten  <emphasis>siempre</emphasis> un servidor secundario de
seguridad. También podemos  ver que tiene una
máquina principal llamada  <literal remap="tt">land-5</literal> que se encarga de
todos los diferentes servicios de  internet, y que se ha hecho
usando <literal remap="tt">CNAME</literal> (una alternativa al uso de los
registros <literal remap="tt">A</literal>).
</para>

<para>
Como puedes ver en el  registro <literal remap="tt">SOA</literal>, el  origen del
archivo de zona es <literal remap="tt">land-5.com</literal>, la persona  de contacto es
<literal remap="tt">root&commat;land-5.com.</literal> <literal remap="tt">hostmaster</literal> es otro uso
frecuente para la persona de contacto.  El número de serie en el
formato habitual <emphasis remap="it">yyyymmdd</emphasis> con el número de  serie de hoy
añadido; esta es  probablemente la sexta versión del archivo
de zona del 20 de Septiembre  de 1996. Recuerde que el número de
serie debe incrementarse  monótonamente, aquí hay sólo <emphasis>un</emphasis> dígito
para las  series de hoy, así que  después de 9 ediciones
tendrás que esperar hasta  mañana antes de poder editar
el el archivo de nuevo. Considera el uso de dos  dígitos.
</para>

<para>

<programlisting>
$TTL 3D
@       IN      SOA     land-5.com. root.land-5.com. (
                        199609206       ; serial, todays date + todays serial #
                        8H		; refresh, seconds
                        2H		; retry, seconds
                        4W		; expire, seconds
                        1D )		; minimum, seconds
                NS      land-5.com.
                NS      ns2.psi.net.
                MX      10 land-5.com.  ; Primary Mail Exchanger
                TXT     "LAND-5 Corporation"

localhost	A	127.0.0.1

router          A       206.6.177.1

land-5.com.     A       206.6.177.2
ns		A	206.6.177.3
www             A	207.159.141.192

ftp             CNAME   land-5.com.
mail            CNAME   land-5.com.
news            CNAME   land-5.com.

funn            A       206.6.177.2

;
;       Workstations
;
ws-177200	A       206.6.177.200
                MX      10 land-5.com.   ; Primary Mail Host
ws-177201       A       206.6.177.201
                MX      10 land-5.com.   ; Primary Mail Host
ws-177202       A       206.6.177.202
                MX      10 land-5.com.   ; Primary Mail Host
ws-177203       A       206.6.177.203
                MX      10 land-5.com.   ; Primary Mail Host
ws-177204       A       206.6.177.204
                MX      10 land-5.com.   ; Primary Mail Host
ws-177205       A       206.6.177.205
                MX      10 land-5.com.   ; Primary Mail Host
; {Many repetitive definitions deleted - SNIP}
ws-177250       A       206.6.177.250
                MX      10 land-5.com.   ; Primary Mail Host
ws-177251       A       206.6.177.251
                MX      10 land-5.com.   ; Primary Mail Host
ws-177252       A       206.6.177.252
                MX      10 land-5.com.   ; Primary Mail Host
ws-177253       A       206.6.177.253
                MX      10 land-5.com.   ; Primary Mail Host
ws-177254       A       206.6.177.254
                MX      10 land-5.com.   ; Primary Mail Host

</programlisting>

</para>

<para>
Si examinas el servidor de  nombres de land-5 verás que los nombres
de host son de la  forma  <literal remap="tt">ws_</literal><emphasis>number</emphasis>.  Como desde
las versiones de BIND 4 named  fuerza la restricción sobre
qué caracteres se pueden usar en  los nombres de máquina. Por
eso no funcionará del todo con  BIND-8 y he sustituido '-' (guiones)
por los  '_'  (subrayados) para usarlo en  este COMO. Pero como se
mencianaba anteriormente BIND9 ya no fuerza esta restricción.
</para>

<para>
Otra cosa a tener en cuenta es que las estaciones de  trabajo no
tienen nombres propios, sino un  prefijo seguido por las dos
últimas porciones de los números IP. Usar tal  convención puede
simplificar  el mantenimiento significativamente, pero puede
resultar un poquito  impersonal, y de hecho, ser una fuente de
irritación de los clientes.
</para>

<para>
También vemos que  <literal remap="tt">funn.land-5.com</literal> es un
alias de <literal remap="tt">land-5.com</literal>, pero usando  un registro A, no un registro
CNAME. Esto es una buena política como  observamos anteriormente.
</para>

</sect2>

<sect2>
<title>/var/named/zone/206.6.177</title>

<para>
Ya comentaré este fichero más abajo.
</para>

<para>

<programlisting>
$TTL 3D
@               IN      SOA     land-5.com. root.land-5.com. (
                                199609206       ; Serial
                                28800   ; Refresh
                                7200    ; Retry
                                604800  ; Expire
                                86400)  ; Minimum TTL
                        NS      land-5.com.
                        NS      ns2.psi.net.
;
;       Servers
;
1       PTR     router.land-5.com.
2       PTR     land-5.com.
2       PTR     funn.land-5.com.
;
;       Workstations
;
200     PTR     ws-177200.land-5.com.
201     PTR     ws-177201.land-5.com.
202     PTR     ws-177202.land-5.com.
203     PTR     ws-177203.land-5.com.
204     PTR     ws-177204.land-5.com.
205     PTR     ws-177205.land-5.com.
; {Many repetitive definitions deleted - SNIP}
250     PTR     ws-177250.land-5.com.
251     PTR     ws-177251.land-5.com.
252     PTR     ws-177252.land-5.com.
253     PTR     ws-177253.land-5.com.
254     PTR     ws-177254.land-5.com.

</programlisting>

</para>

<para>
La <emphasis remap="bf">zona de resolución  inversa</emphasis> es la parte de  la
configuración que parece crear más dolores de  cabeza. <emphasis remap="bf">Se usa para
encontrar el nombre de la máquina a partir de su  dirección IP</emphasis>.
Ejemplo:  supon que estás en un servidor  FTP  y acepta conexiones de clientes
<literal remap="tt">ftp</literal>.  El
servidor <literal remap="tt">ftp</literal> es noruego y  quiere aceptar mas conexiones de
clientes de Noruega y otros países  escandinavos y menos del resto del
mundo. Cuando se  produce una conexión de un cliente, la librería
<emphasis remap="it">C</emphasis>  es capaz de indicar el número  IP de la máquina conectada
porque el  número IP del cliente está  contenido en todos los paquetes
que se pasan a  través de la red. Ahora puede  llamar a una
función llamada  <literal remap="tt">gethostbyaddr</literal> que  busca el nombre de la
máquina dada su dirección IP.
</para>

<para>
<literal remap="tt">gethostbyaddr</literal>  interrogará a un servidor DNS  el cual
efectuará una búsqueda DNS para la máquina.  Suponiendo que la
conexión  cliente viene de <literal remap="tt">ws_177200.land-5.com</literal>, la
dirección IP que la librería  <emphasis remap="it">C</emphasis>  proporciona al servidor irc
será <literal remap="tt">206.6.177.200</literal>. Para  encontrar el nombre de la máquina
necesitamos encontrar <literal remap="tt">200.177.6.206.in-addr.arpa</literal>.  El servidor
DNS primero  encuentra los servidores <literal remap="tt">arpa.</literal>, después  los
servidores  <literal remap="tt">in-addr.arpa.</literal>, a continuación sigue por  <literal remap="tt">206</literal>,
<literal remap="tt">6</literal> y al final  busca el servidor para la zona
<literal remap="tt">177.6.206.in-addr.arpa</literal>  en <literal remap="tt">land-5</literal>. Aquí obtendrá
finalmente que para  <literal remap="tt">200.177.6.206.in-addr.arpa</literal> tenemos un
registro `<literal remap="tt">PTR ws_177200.land-5.com</literal>',  que significa que el nombre
que va con <literal remap="tt">206.6.177.200</literal> es  <literal remap="tt">ws_177200.land-5.com</literal>.
Como con la  explicación de cómo buscar  <literal remap="tt">prep.ai.mit.edu</literal>, esto
es  ligeramente ficticio.
</para>

<para>
Volviendo al ejemplo del servidor FTP.  El servidor
FTP prioriza las conexiones de los países  escandinavos, osea,
<literal remap="tt">*.no</literal>, <literal remap="tt">*.se</literal>, y <literal remap="tt">*.dk</literal>; el nombre
<literal remap="tt">ws_177200.land-5.com</literal>  claramente no se ajusta a ninguno de ellos,
y el  servidor pondrá la conexión en la clase de conexiones
con menor ancho de banda y menor número de clientes. Si no hubiese
habido resolución inversa de  <literal remap="tt">206.2.177.200</literal> mediante
la zona <literal remap="tt">in-addr.arpa</literal> el servidor habría sido incapaz de de
encontrar el nombre y habría tenido que  comparar <literal remap="tt">206.2.177.200</literal>
con <literal remap="tt">*.no</literal>, <literal remap="tt">*.se</literal> y <literal remap="tt">*.dk</literal>, es  decir, cifras con nombres,
ninguna de las cuales concordaría, e incluso podría haber denegado
la conexión por falta de clasificación.
</para>

<para>
Algunas personas te dirán que la resolución inversa  sólo es
importante para los servidores, o que no  tienen importancia. No es
así;  muchos servidores de ftp, news, irc e  incluso algunos
servidores  http (WWW) <emphasis>NO</emphasis> aceptarán conexiones de
máquinas de las cuales no son capaces de resolver el nombre. Por
tanto la  asociacion inversa de  máquinas es de hecho
<emphasis>obligatoria</emphasis>.
</para>

</sect2>

</sect1>

<sect1 id="mantenimiento">
<title>Mantenimiento</title>

<para>
<emphasis remap="bf">Manteniéndolo en funcionamiento.</emphasis>
</para>

<para>
Hay una tarea de  mantenimiento que tienes que  realizar con
<literal remap="tt">named</literal>, además de mantenerlo en  funcionamiento. Esta tarea es
mantener el archivo <literal remap="tt">root.hints</literal>  actualizado. La forma más
fácil es usar <literal remap="tt">dig</literal>, primero ejecuta <literal remap="tt">dig</literal>
sin argumentos, conseguirás <literal remap="tt">root.hints</literal> de acuerdo
con tu propio servidor.  Entonces pregunta a alguno de los servidores
raíz listados con  <literal remap="tt">dig @rootserver</literal>.
Podrás observar que la salida  se parece terriblemente al
archivo <literal remap="tt">root.cache</literal> excepto  por un par de números extras.
Esos números no ocasionan problemas. Guárdalo  en un archivo
(<literal remap="tt">dig  @e.root-servers.net . ns &gt;root.hints.nuevo</literal>) y
sustituye el antiguo  <literal remap="tt">root.hints</literal> con él.
</para>

<para>
Recuerda reiniciar  <literal remap="tt">named</literal> después de  sustituir el archivo
caché.
</para>

<para>
Al Longyear me envió este  script que puede ser  ejecutado
automáticamente para actualizar  <literal remap="tt">root.cache</literal>, instala
una entrada en el <literal remap="tt">crontab</literal> para  ejecutarlo una vez al mes y
olvídate.  El script supone que trabajas con correo  y que el alias
de mail  <literal remap="tt">hostmaster</literal> está definido. Debes editarlo para
ajustarlo a tu configuración.
</para>

<para>

<programlisting>
#!/bin/sh
#
# Actualizacion del cache del servidor de nombres una vez al mes.
# Esto es ejecutado automaticamente mediante una entrada de cron
#
# Original de Al Longyear# Actualizado para  BIND 8 por Nicolai Langfeldt
# Varias condiciones de  error notificadas por  David A. Ranch
# Test ping test sugerido por Martin Foster
# named activo sugerido por Erik Bryer.
#
(
 echo "To: hostmaster &#60;hostmaster&#62;"
 echo "From: system &#60;root&#62;"

 # ¿Está named activo? Verifica el estado de named.
 case `ndc status 2&#62;&#38;1` in
 *'refused'*)
        echo "named está inactivo. root.hints NO actualizado"
        echo
        exit 0
        ;;
 esac

 PATH=/sbin:/usr/sbin:/bin:/usr/bin:
 export PATH
 # NOTA: /var/named tiene que tener permiso de escritura sólo para los usuarios válidos del guion
 # podrá ocasionar oportunidades de comprometer el sistema o ataques DOS.
 cd /var/named 2&#62;/dev/null ||
 {
    echo "Subject: No puedo ir a  /var/named, error $?"
    echo
    echo "El motivo lo dice todo"
    exit 1
 }

 # ¿Estamos en red?  Hace ping a un servidor del tu ISP
  case `ping -qnc 1 some.machine.net 2&#62;&#38;1` in
   *'100% packet loss'*)
        echo "Subject: root.hints NO actualizado. La red no está activa."
	echo
	echo "El motivo lo dice todo"
	exit 1
	;;
 esac

 dig @e.root-servers.net . ns &#62;root.hints.new 2&#62; errors

 case `cat root.hints.new` in
   *NOERROR*)
	# funciona
	:;;
   *)
	echo "Subject: la actualización de root.hints ha FALLADO."
        echo
   	echo "La actualización de  root.hints ha fallado"
	echo "Este es el informe de errores de dig:"
   	echo
   	cat root.hints.new errors
        exit 1
	;;
 esac

 echo "Subject: El fichero root.hints se ha actualizado"
 echo
 echo "El fichero root.hints se ha actualizado y contiene
 la siguiente información:"
 echo
 cat root.hints.new

 chown root.root
 root.hints.new
 chmod 444 root.hints.new
 rm -f root.hints.old errors
 mv root.hints root.hints.old
 mv root.hints.new root.hints
 rndc reload
  echo
 echo "El servidor de nombres se ha reiiniciado para asegurarnos que la actualización es completa."
 echo "El anterior fichero root.hints file ahora se llama/var/named/root.hints.old." ) 2&#62;&#38;1 | /usr/lib/sendmail -t exit 0
</programlisting>

</para>

<para>
Alguno de vosotros puede haber observado que el archivo <literal remap="tt">root.hints</literal>
está también disponible mediante ftp en <emphasis remap="it">Internic</emphasis>. Por favor NO
utilice ftp para actualizar <literal remap="tt">root.cache</literal>, el método anterior es mucho
más amistoso con la red.
</para>

</sect1>

<sect1 id="bind9">
<title>Cambiando a BIND9</title>

<para>
La distribucion de BIND 9 y las versiones empaquetadas
también continen un documento llamado  <literal remap="tt">migration</literal>
que contienen notas sobre como cambiar de BIND 8 a BIND 9. El
documento es bastante directo. Si ha instalado los paquetes
binarios es probable que se guarde en  <literal remap="tt">/usr/share/doc/bind*</literal> o
<literal remap="tt">/usr/doc/bind*</literal>
</para>

<para>
Si esta usando BIND 4, puede encontrar un documento llamado
<literal remap="tt">migration-4to9</literal> en el mismo lugar.
</para>

</sect1>

<sect1 id="PUF">
<title>Preguntas y respuestas</title>

<para>
Por favor, lee esta sección antes de enviar correos con preguntas.
</para>

<para>

<orderedlist>
<listitem>
<para>
Mi named quiere un fichero named.boot
</para>

<para>
Estás leyendo el COMO equivocado.  Por favor mira versiones anteriores de
este COMO, que tratan de  BIND 4, en <ulink
url="http://langfeldt.net/DNS-HOWTO/"
>&#65533;</ulink
> o <ulink
url="http://www.insflug.org/"
>&#65533;</ulink
>.
</para>
</listitem>
<listitem>
<para>
¿Cómo uso DNS desde dentro de un cortafuegos (<emphasis remap="it">firewall</emphasis>)?
</para>

<para>
Una pista:  `<literal remap="tt">forwad only</literal>'. También puede necesitar
</para>

<para>

<programlisting>
  query-source port 53;
  
</programlisting>

</para>

<para>
dentro  de  ``options'', parte del fichero <literal remap="tt">named.conf</literal>, como se sugería
en el ejemplo de la sección <xref linkend="caching"/>.
</para>
</listitem>
<listitem>
<para>
¿Cómo hago que DNS rote las direcciones  disponibles para un
servicio, digamos  <literal remap="tt">www.busy.site</literal>  para obtener un efecto de
balanceo de carga o similar?
</para>

<para>
Haz varios registros  <emphasis remap="bf">A</emphasis> para  <literal remap="tt">www.busy.site</literal> y use BIND
4.9.3 o posterior.  Entonces  BIND hará un "round-robin" de  las
respuestas.  Esto   <emphasis>no</emphasis> funcionará con  versiones anteriores de
BIND.
</para>
</listitem>
<listitem>
<para>
Quiero configurar DNS en una intranet (cerrada). ¿Qué hago?
</para>

<para>
Elimina el fichero <literal remap="tt">root.hints</literal> y define los  ficheros de
zona.  Esto  también significa   que no tienes por qué  obtener nuevos
ficheros de  caché.
</para>
</listitem>
<listitem>
<para>
¿Cómo configuro un  servidor de nombres  secundario(esclavo)?
</para>

<para>
Si el servidor  primario/master tiene  dirección 127.0.0.1 pon
una  linea como la siguiente   en el fichero  named.conf de
tu secundario:
</para>

<para>

<programlisting>
  zone "linux.bogus" {
	type slave;
	file "sz/linux.bogus";
	masters { 127.0.0.1; };
  };
  
</programlisting>

</para>

<para>
Puedes listar varios servidores principales alternativos la zona se puede
copiar desde la lista de   <literal remap="tt">masters</literal>, separadas por  ';' (punto y
coma).
</para>
</listitem>
<listitem>
<para>
Quiro que bind  funcione cuando me desconecto  de la red.
</para>

<para>
Hay que considerar cuatro  puntos:
</para>

<para>

<itemizedlist>
<listitem>

<para>
Específico para BIND 8/9, Adam L Rice me ha enviado  este
correo, sobre como ejecutar DNS sin miedo en una  máquina con módem:


<screen>

He descubierto que con las nuevas versiones de BIND esto ya no es
necesario. Hay  una directiva "forward" además de la  directiva
"forwarders"  directiva que controla como se usan. El valor
 predeterminado es "forward  first", que primero pregunta a cada
 uno de los forwarders, y  luego intenta el mecanismo normal, si esto
 falla. Esto da el  comportamiento familiar de gethostbyname() de
llevarse  mucho tiempo cuando la  conexión no está abierta. Pero si se
 activa  "forward only",  entonces BIND vuelve cuando no obtiene una
respuesta de los forwarders,  y gethostbyname() termina
inmediatamente. Por tanto no  es necesario realizar retoques de los
 ficheros y reiniciar el  servidor named.

En mi caso, he añadido las  líneas

forward only;
forwarders { 193.133.58.5; };

a la sección  options { } de  mi fichero named.conf.  Funciona muy
bien. La única desventaja de esto es  que reduce una pieza de
software DNS increíblemente sofisticado al  estado de un volcado de
 cache. Extendiéndonos un poco, me gustaría ejecutar  un volcado de
caché en su  lugar, pero no parece haber tal pieza de software
disponible para Linux.
</screen>



</para>
</listitem>
<listitem>
<para>
He recibido este  correo de  Ian Clark
&lt;ic@deakin.edu.au&gt;  donde explica su forma de  hacer esto:


<screen>
Ejecuto named en mi máquina  con 'Masquerading'. Tengo
dos ficheros  root.hints, uno  llamado root.hints.real que
 contiene los nombres de los servidores  reales y otro llamado
 root.hints.fake que contiene...

----
; root.hints.fake
; este fichero no contiene información
----

Cuando me desconecto, copia el root.hints.fake a  root.hints y
reinicio named.

Cuando me conecto copio  root.hints.real en root.hints  y reinicio
named.

Esto se hace desde  ip-down e  ip-up respectivamente.

La primera vez que hago una  consulta desconectado sobre  un dominio,
named no tiene detalles para  ella y pone una entrada como  la
siguiente en  messages...

Jan 28 20:10:11 hazchem  named[10147]: No root  nameserver for class IN

con la que puedo sobrevivir.

Esto ciertamente me funciona.  Puedo usar los servidores de  nombres
para máquinas locales mientras  estoy desconectado sin los  retrasos
del temporizador para dominios  externos y cuando estoy en la  red,
las consultas para dominios externos  funcionan normalmente.

</screen>
</para>


<para>
Peter Denison pensó que Ian no fue suficientemente lejos. Escribió:
</para>

<para>

<screen>
Cuando estoy conectado)	sirve todas las entradas cacheadas  (y red
		local) inmediatamente
		para las entradas no cacheadas, se dirige la servidor de nombres de mi  ISP
Cuando estoy desconectado) sirve las consultas locales inmediatamente
		falla en otras consultas
 		**inmediatamente**

La combinación de cambiar el fichero root cache y consultas forwarding no funciona.

Así, he configurado (con  algunas discusiones sobre esto en el LUG local) dos named
de la siguiente forma:

named-online:	forwards a servidores del ISP
		master para zona localnet
		master para zona inversa localnet(1.168.192.in-addr.arpa)
		master para 0.0.127.in-addr.arpa
		escucha en el puerto 60053

named-offline:	sin forwarding
		"fake" (falso) fichero root.cache
		esclavo para  3 zonas locales (master es 127.0.0.1:60053)
		escucha en el puerto 61053

Y combinando esto con reenvío de puertos, para enviar el puerto 53 al
61053 cuando estoy  desconectado y al puerto 60053 cuando
estoy conectado. (Uso el nuevo paquete netfilter bajo  2.3.18, pero el
 mecanismo anterior (ipchains) debería funcionar).

Observe que esto no funcionará fuera de la máquina, ya que  hay un
ligero bug en BIND 8.2, que he hablado con los desarrolladores, que previene
para tener un esclavo en la  misma dirección IP que el principal (incluso
sobre diferentes puertos). Es un parche trivial que podría salir pronto, espero.
</screen>

</para>
</listitem>
<listitem>

<para>
También he recibido información sobre como  BIND interactúa con NFS
y el portmapper en gran parte de la máquina desconectada de Karl-Max Wanger:

<screen>

Suelo ejecutar mi propio named  en todas mis máquinas que sólo
se conectan ocasionalmente a  internet por módem. El servidor
de nombres sólo actúa como  cache, no tiene área de
 autoridad y consulta todo de los servidores de nombres del
 fichero root.cache. Como es normal en Slackware,  se inicia antes que
nfs y  mountd.

Con una de mis máquinas (un  Libretto 30 notebook) he  tenido el
problema que algunas veces podía  montarlo de otro sistema
 conectado a mi red local, pero la mayoría de  las veces no
funcionaba.  Obtuve el mismo efecto independientemente del
 uso de PLIP, una tarjeta  PCMCIA ethernet o PPP sobre un interfaz
serie.


Tras preguntarme y experimentar durante cierto  tiempo, encontré
que named aparentemente  interfería el proceso de  registro que nfsd
y mountd tienen que realizar  con el portmapper en el
 arranque (inicio estos demonios en el  arranque, como es habitual).
 Al comenzar tras nfsd y mountd  elimina este problema  completamente.

Como no supone ninguna  desventaja la modificación de  la
secuencia de arranque, os  advierto a todos que lo  hagáis para
prevenir potenciales  problemas.
</screen>


</para>
</listitem>
<listitem>

<para>
Finalmente, hay  información sobre esto en <ulink
url="http://www.acmebw.com/askmrdns/#linux-dialup"
>Ask Mr. DNS at</ulink
>.  Es
sobre  BIND 4 aunque, tendrá que adaptarlo a lo que hemos dicho de  BIND 8.

</para>
</listitem>

</itemizedlist>

</para>
</listitem>
<listitem>
<para>
¿Donde guarda el servidor de cacheo su cache? ¿Hay forma de controlar el
tamaño del cache?
</para>

<para>
El cache se almacena en memoria completamente.  <emphasis>No</emphasis> se escribe
en disco en ningún momento. Cada vez que matas a <literal remap="tt">named</literal> se pierde
el caché. El caché no es controlable de ninguna forma, <literal remap="tt">named</literal> lo
maneja de acuerdo con unas reglas simples. No puedes controlar ni el caché
ni su tamaño de ninguna forma ni por ningún  motivo. Si quieres,
puedes cambiar esto tocando los fuentes de <literal remap="tt">named</literal>, lo  cual no es
recomendable.
</para>
</listitem>
<listitem>
<para>
 ¿Salva <literal remap="tt">named</literal> el caché entre reinicios? ¿Puedo guardarlo?
</para>

<para>
No, <literal remap="tt">named</literal> no salva el caché cuando muere. Esto significa que el cache
se debes reconstruir de nuevo  cada vez que mates y reinicies <literal remap="tt">named</literal>. <emphasis>No</emphasis>
hay forma de hacer que  <literal remap="tt">named</literal> salve el caché en un archivo. Si quieres,
puedes cambiar esto tocando  los fuentes de <literal remap="tt">named</literal>, lo cual no es
recomendable.
</para>
</listitem>
<listitem>
<para>
¿Cómo puedo obtener un  dominio? Quiero configurar mi propio dominio
llamado (por ejemplo)  <literal remap="tt">linux-rules.net</literal>.  ¿Cómo puedo obtener el dominio
que quiero que se me asigne?
</para>

<para>
Por favor, contacta con tu proveedor de servicios de internet.
Ellos podrán ayudarte con esto. Ten  en cuenta que en la mayor  parte
del mundo tienes que pagar para obtener  un dominio.
</para>
</listitem>
<listitem>
<para>
¿Como puedo asegurar mi  servidor DNS?  ¿Como divido  DNS?
</para>

<para>
Ambas son características avanzadas. Ambos temas se  tratan en
<ulink
url="http://www.etherboy.com/dns/chrootdns.html"
>&#65533;</ulink
>.  No  explicaré
estos temas   más allá de esto.
</para>
</listitem>

</orderedlist>

</para>

</sect1>

<sect1 id="grande">
<title>Cómo convertirse en un  gran <emphasis remap="it">admin</emphasis> DNS.</title>

<para>
<emphasis remap="bf">Documentación y herramientas.</emphasis>
</para>

<para>
Existe documentación real. En línea e impresa.  La lectura de
varios de estos documentos  es necesaria para dar los  pasos
de un gran admin DNS en poco  tiempo. Impreso, he escrito  <emphasis>The
Concise Guide to DNS and BIND</emphasis> (por Nicolai Langfeldt), publicado
por  Que (ISBN 0-7897-2273-9).  El libro es parecido a este COMO. Más
detalles, y un poco más de todo. Ha sido traducido al polaco y
publicado como <emphasis>DNS i BIND</emphasis> por Helion (<ulink
url="http://helion.pl/ksiazki/dnsbin.htm"
>&#65533;</ulink
>, ISBN 83-7197-446-9).Pero
el libro estándar es  en u cuarta edicion <emphasis>DNS and BIND</emphasis> por C. Liu
and P. Albitz  from O'Reilly &amp; Associates (ISBN 0-937175-82-X). Es
excelente también. Consigue la 3ª edición, cubre BIND 8 y también BIND
4. También hay una sección sobre DNS en <emphasis>TCP/IP Network
Administration</emphasis>, por Craig Hunt de O'Reilly (ISBN 0-937175-82-X).
Otro  para buena administración DNS  (o cualquier cosa buena para ese
asunto) es <emphasis>Zen and the  Art of Motorcycle Maintenance</emphasis> por Robert
M.  Pirsig :-) Disponible como ISBN 0688052304 y otros.
</para>

<para>
En la red podrás encontrar mi libro con toneladas de otros libros,
disponibles electronicamente  como suscripcion en <ulink
url="http://safari.informit.com/"
>&#65533;</ulink
>.  Hay material en <ulink
url="http://www.dns.net/dnsrd/"
>&#65533;</ulink
>(DNS Resources Directory),
<ulink
url="http://www.isc.org/bind.html"
>&#65533;</ulink
>; Una FAQ, un manual de
referencia  (BOG; BIND Operations Guide) también como
papeles  y definición de  protocolos y trucos DNS (estos, y la
mayoría, si no  todos,los  RFCs mencionados abajo,  también contenidos
en la  distribución de  BIND). No he leído la mayoría de
estos, pero no soy un admin  DNS a tiempo completo.
Arnt Gulbrandsen por otro lado  ha leído  BOG y quedó
extasiado  :-).  El grupo de noticias <ulink
url="news:comp.protocols.tcp- ip.domains"
>&#65533;</ulink
> es sobre DNS.
Además hay un número de RFCs  sobre DNS, los más
importantes son probablemente los listados aquí.  Los que
tienen números BCP (Best  Current Practice) son <emphasis>altamente
recomendables</emphasis>.
</para>

<para>
<variablelist>

<varlistentry>
<term>RFC 2671</term>
<listitem>
<para>
P. Vixie, <emphasis>Extension Mechanisms for DNS (EDNS0)</emphasis>
August 1999.
</para>
</listitem></varlistentry>
<varlistentry>
<term>RFC 2317</term>
<listitem>
<para>
, BCP 20, H. Eidnes et. al. <emphasis>Classless IN-ADDR.ARPA
delegation</emphasis>, March 1998. This is about CIDR, or classless subnet
reverse lookups.
</para>
</listitem></varlistentry>
<varlistentry>
<term>RFC 2308</term>
<listitem>
<para>
, M. Andrews, <emphasis>Negative Caching of DNS Queries</emphasis>,
March 1998.  About negative caching and the $TTL zone file
directive.
</para>
</listitem></varlistentry>
<varlistentry>
<term>RFC 2219</term>
<listitem>
<para>
, BCP 17, M. Hamilton and R. Wright, <emphasis>Use of DNS
Aliases for Network Services</emphasis>, October 1997.  About  CNAME usage.
</para>
</listitem></varlistentry>
<varlistentry>
<term>RFC 2182</term>
<listitem>
<para>
, BCP 16, R. Elz et. al., <emphasis>Selection and Operation
of Secondary DNS Servers</emphasis>, July 1997.
</para>
</listitem></varlistentry>
<varlistentry>
<term>RFC 2052</term>
<listitem>
<para>
A. Gulbrandsen, P. Vixie, <emphasis>A DNS RR for specifying
the location of services (DNS SRV)</emphasis>, October 1996
</para>
</listitem></varlistentry>
<varlistentry>
<term>RFC 1918</term>
<listitem>
<para>
Y. Rekhter, R. Moskowitz, D. Karrenberg, G. de Groot,
E. Lear, <emphasis>Address Allocation for Private Internets</emphasis>, 02/29/1996.
</para>
</listitem></varlistentry>
<varlistentry>
<term>RFC 1912</term>
<listitem>
<para>
D. Barr, <emphasis>Common DNS Operational and Configuration
Errors</emphasis>, 02/28/1996.
</para>
</listitem></varlistentry>
<varlistentry>
<term>RFC 1912 Errors</term>
<listitem>
<para>
B. Barr <emphasis>Errors in RFC 1912</emphasis>, this is available
at <ulink
url="http://www.cis.ohio-state.edu/~barr/rfc1912-errors.html"
>&#65533;</ulink
>
</para>
</listitem></varlistentry>
<varlistentry>
<term>RFC 1713</term>
<listitem>
<para>
A. Romao, <emphasis>Tools for DNS debugging</emphasis>, 11/03/1994.
</para>
</listitem></varlistentry>
<varlistentry>
<term>RFC 1712</term>
<listitem>
<para>
C. Farrell, M. Schulze, S. Pleitner, D. Baldoni,
<emphasis>DNS Encoding of Geographical Location</emphasis>, 11/01/1994.
</para>
</listitem></varlistentry>
<varlistentry>
<term>RFC 1183</term>
<listitem>
<para>
R. Ullmann, P. Mockapetris, L. Mamakos, C. Everhart,
<emphasis>New DNS RR Definitions</emphasis>, 10/08/1990.
</para>
</listitem></varlistentry>
<varlistentry>
<term>RFC 1035</term>
<listitem>
<para>
P. Mockapetris, <emphasis>Domain names - implementation and
specification</emphasis>, 11/01/1987.
</para>
</listitem></varlistentry>
<varlistentry>
<term>RFC 1034</term>
<listitem>
<para>
P. Mockapetris, <emphasis>Domain names - concepts and  facilities</emphasis>, 11/01/1987.
</para>
</listitem></varlistentry>
<varlistentry>
<term>RFC 1033</term>
<listitem>
<para>
M. Lottor, <emphasis>Domain administrators operations  guide</emphasis>, 11/01/1987.
</para>
</listitem></varlistentry>
<varlistentry>
<term>RFC 1032</term>
<listitem>
<para>
M. Stahl, <emphasis>Domain administrators guide</emphasis>,  11/01/1987.
</para>
</listitem></varlistentry>
<varlistentry>
<term>RFC 974</term>
<listitem>
<para>
C. Partridge, <emphasis>Mail routing and the domain system</emphasis>,  01/01/1986.
</para>
</listitem></varlistentry>
</variablelist>
</para>

</sect1>

<sect1>
<title>Traducción</title>

<para>
Este documento ha sido traducido por
</para>

<para>
Pedro Pablo Fábrega Martínez,
<literal remap="tt"><ulink
url="mailto:pfabrega(en)arrakis.es s"
>pfabrega(en)arrakis.es</ulink
></literal>
</para>

<para>
Si encontráis mejoras, añadidos o fallos, de cualquier tipo, indicádmelo
para mejorar el documento.
</para>

<para>
 Nota: El autor del documento, como ya ha dicho   él anteriormente,
sól0 entiende noruego e inglés; por   favor no le hagáis consultas en
otros idiomas. En caso de duda os podéis dirigir al traductor, y
aunque no pueda resolveros vuestra duda sí que os puede  indicar algún
foro donde os  podrían ayudar.
</para>

<para>
Por otro lado me he permitido  usar el tuteo en este texto,
saltándome algunas normas de estilo. No  creo que nadie se sienta
molesto. Bastante serio es el DNS de por sí.
</para>

</sect1>

<sect1 id="Grupos">
<title>Anexo: El INSFLUG </title>

<para>
El <emphasis>INSFLUG</emphasis> forma parte  del grupo internacional <emphasis remap="it">Linux
Documentation  Project</emphasis>, encargándose de las  traducciones al
castellano de  los Howtos (Comos), así como la producción de
documentos originales en  aquellos casos en los que no existe análogo
en inglés.
</para>

<para>
En el <emphasis remap="bf">INSFLUG</emphasis> se orienta  preferentemente a la  traducción de
documentos breves, como los <emphasis>COMOs</emphasis> y  <emphasis>PUFs</emphasis> (<emphasis remap="bf">P</emphasis>reguntas de
<emphasis remap="bf">U</emphasis>so <emphasis remap="bf">F</emphasis>recuente, las  <emphasis remap="it">FAQs</emphasis>. <literal remap="tt">:)</literal> ), etc.
</para>

<para>
Diríjase a la sede del INSFLUG  para más información al  respecto.
</para>

<para>
En la sede del INSFLUG  encontrará siempre las  <emphasis remap="bf">últimas</emphasis> versiones
de las traducciones:   <literal remap="tt"><ulink
url="http://www.insflug.org"
>www.insflug.org</ulink
></literal>.  Asegúrese de comprobar cuál  es la
última versión disponible en el Insflug antes  de bajar un documento
de un  servidor réplica.
</para>

<para>
Se proporciona también una  lista de los servidores réplica
(<emphasis remap="it">mirror</emphasis>) del  Insflug más cercanos a Vd., e información relativa
a otros  recursos en castellano.
</para>

<para>
Francisco José Montilla,
<literal remap="tt"><ulink
url="mailto:pacopepe@insflug.org"
>pacopepe@insflug.org</ulink
></literal>.
</para>

</sect1>

</article>
