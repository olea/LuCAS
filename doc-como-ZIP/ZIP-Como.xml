<?xml version="1.0" encoding="iso-8859-1" ?>
<!DOCTYPE article PUBLIC "-//OASIS//DTD DocBook V4.1.2//EN"
"http://www.oasis-open.org/docbook/xml/4.1.2/docbookx.dtd">

<article>

<articleinfo>

<title>Unidad ZIP: mini-COMO</title>

<author>
<firstname>Grant Guenther, <literal remap="tt"><ulink
url="mailto:grant@torque.net"
>grant@torque.net</ulink
></literal> 
  Traductor: Iñaki Martínez Díez,
<literal remap="tt"><ulink
url="mailto:imd@redestb.es"
>imd@redestb.es</ulink
></literal>,
revisión y actualización: <literal remap="tt"><ulink
url="mailto:pacopepe@insflug.org"
>pacopepe@insflug.org</ulink
></literal></firstname>
</author>

<pubdate>Tercera revisión/actualización de la traducción, 25 de Mayo de 1998.</pubdate>

<abstract>

<para>
 La unidad Iomega ZIP es una unidad de disco extraíble y de
moda. Está disponible en tres versiones principales, la hay con interfaz
SCSI, IDE, y otra que se conecta a un puerto paralelo. Este documento
describe cómo usar el ZIP con Linux. Se debería leer en conjunción con el
HOWTO SCSI a menos que posea la versión IDE. 
</para>

</abstract>

</articleinfo>

<sect1>
<title>Introducción</title>

<para>
La unidad Iomega ZIP es una unidad de disco extraíble, portable, barata,
de bajo rendimiento y de moda. Sus discos tienen una capacidad de 96
megas, y la unidad está disponible en 3 versiones, una versión SCSI, otra
IDE, y una versión para puerto paralelo. La versión de puerto paralelo es
realmente un dispositivo SCSI también, configurada para usar el protocolo
paralelo-sobre-SCSI PPA-3 propiedad de Iomega.
</para>

<para>
Este documento describe como usar la unidad ZIP con Linux. Si tiene la
versión SCSI o de puerto paralelo, que realmente funciona como un
dispositivo SCSI, es importante leer el HOWTO SCSI también. Dicho
documento da una introducción al sistema SCSI del Linux. No contiene
ninguna información especifica sobre la unidad ZIP, La tarjeta SCSI ZIP
ZOOM o el adaptador PPA-3 paralelo-a-SCSI. Este mini-Como tiene el
propósito de rellenar esos huecos.
</para>

<para>
Este documento incorpora información reunida y publicada por otros, en
particular: 
</para>

<para>

<itemizedlist>
<listitem>

<para>
Scot Wilcoxon, 
<literal remap="tt"><ulink
url="mailto:sewilco@fieldday.mn.org"
>sewilco@fielday.mn.org</ulink
></literal>
</para>
</listitem>
<listitem>

<para>
Joe Mack,
<literal remap="tt"><ulink
url="mailto:mack@ncifcrf.gov"
>mack@ncifcrf.gov</ulink
></literal>
</para>
</listitem>
<listitem>

<para>
Byron Jeff,
<literal remap="tt"><ulink
url="mailto:byron@cc.gatech.edu"
>byron@cc.gatech.edu</ulink
></literal>
</para>
</listitem>

</itemizedlist>

</para>

<para>
Les agradezco sus importantes contribuciones, y acepto responsabilidad por
cualquier error que pudiera introducir. 
</para>

</sect1>

<sect1>
<title>La unidad ZIP</title>

<para>
Hay cuatro versiones de la unidad Iomega ZIP. Todas ellas aceptan
cartuchos especiales parecidos a los diskettes de 3.5" con capacidad de
<emphasis>100 megas</emphasis>.  Los discos normalmente tienen 96 cilindros de 2048
sectores conteniendo 512 bytes cada uno. Esto sería normalmente llamado 96
megas.
</para>

<para>
Una versión es una unidad interna de media altura 5.25", con interfaz
SCSI, otras dos son unidades externas en pequeñas unidades de plástico
azules de poco peso, alimentadas mediante un transformador. Las unidades
externas vienen en versión SCSI y puerto paralelo, y las internas en SCSI
e IDE. 
</para>

<para>
Todas las unidades tienen un botón redondo en el frontal de la unidad. 
Este botón es para expulsar el disco. Linux impide la expulsión mientras
se la unidad esté montada, pero si el botón es pulsado mientras esté
bloqueada, la unidad ZIP recordará y expulsará el disco tan pronto como el
software desbloquee (desmonte) la unidad. 
</para>

<sect2>
<title>Versión IDE</title>

<para>
Con esta versión, todo lo aplicable a dispositivos IDE entra en juego: 
básicamente, la unidad puede colocarse como maestra o esclava del bus IDE
en donde se ubique, y para ello habrá que hacer uso de los <emphasis>jumpers</emphasis> o
puentes correspondientes, situados en la parte trasera de la unidad. Por
defecto viene configurada como esclava; si la coloca en el mismo bus que
su disco duro, o en el que ya tenga un CD-Rom configurado como maestro, no
tendrá que hacer modificación alguna. Si la coloca como único dispositivo
en alguno de los buses, deberá colocar los puentes (<emphasis remap="it">jumpers</emphasis>) en la
posición <emphasis remap="it">master</emphasis>. 
</para>

</sect2>

<sect2>
<title>Versión SCSI</title>

<para>
La versión SCSI externa de la unidad ZIP tiene 2 conectores DB25F, y dos
interruptores de configuración. Un interruptor selecciona la dirección de
la unidad: esta elección esta limitada a 5 y 6. El otro activa un
terminador interno, en caso de que la unidad sea la última de la cadena.
Los conectores SCSI de 25 patillas son del estilo de <emphasis>Macintosh</emphasis>.
</para>

<para>
La unidad viene con cable tipo <emphasis>Macintosh</emphasis>, pero el cable y los
convertidores estándar son fáciles de obtener
<footnote>

<para>
N del T: Los cables
no son TAN fáciles de conseguir y son MUY caros.  Un cable con mini-SCSI y
DB25M a los extremos cuesta +8.000.
</para>

</footnote>
 si tu tarjeta SCSI viene
con conector Centronics o conector mini SCSI. 
</para>

<para>
No he visto la unidad SCSI interna, pero esperaría que tuviese un conector
estándar de 50 patillas DIP.
<footnote>

<para>
N. del Revisor 
 Soy propietario
de una y lo certifico, tiene un conector estándar SCSI II, y dos grupos de
puentes o <emphasis>jumpers</emphasis>; uno de ellos, de cuatro puentes, sirve para
seleccionar combinándolos el ID SCSI, que es el 5 por defecto, y el otro
es para activar o desactivar la terminación en el caso en que el ZIP fuese
o no la última unidad de la cadena SCSI.
</para>

</footnote>

</para>

<para>
Asegúrese de que la dirección que elija no entra en conflicto con
cualquier otro dispositivo SCSI que pueda tener en el mismo bus. 
Asegúrese también de que la última unidad en la cadena tiene el terminador
activado, o un terminador instalado.
</para>

<para>
Si tiene un disco o CD-Rom SCSI interno, y conecta su unidad ZIP al
adaptador existente, debería comprobar si existe algún terminador en la
tarjeta que se debiera quitar. Solo los dos extremos del bus SCSI deben
estar terminados. Si el bus es parcialmente interno y parcialmente
externo, debería haber un terminador en el último dispositivo externo y
otro en el último dispositivo interno, pero ninguno en la propia tarjeta
SCSI. 
</para>

<para>
Asegúrese de que todos los cables están firmemente conectados. 
</para>

</sect2>

<sect2>
<title>La controladora ZIP <emphasis remap="it">Zoom</emphasis></title>

<para>
Iomega vende una controladora bajo el nombre <emphasis>ZIP Zoom</emphasis>. Ésta está
basada en el diseño de la familia de controladoras <emphasis>Adaptec
AHA1520</emphasis>. Tiene un conector DB25F externo tipo Macintosh, compatible
con el cable que viene con la unidad ZIP. 
</para>

<para>
Linux Soporta esta controladora con el driver <literal remap="tt">aha152x</literal>. Ver sección
<xref linkend="aha152x"/>
</para>

</sect2>

<sect2>
<title>Versión de puerto Paralelo</title>

<para>
La unidad Zip de puerto paralelo también tiene dos conectores DB25, el
macho (DB25M) debe conectarse mediante el cable suministrado al puerto
paralelo del ordenador. El otro (hembra, DB25F) es para conectar una
impresora <emphasis>en cadena</emphasis>. Actualmente, Linux no soporta el uso
simultáneo de ambos, unidad ZIP e impresora. Es posible cargar módulos. No
hay interruptores de configuración. 
</para>

<para>
La unidad ZIP de puerto paralelo es compatible con varios tipos de puertos
paralelos, pero actualmente el driver de Linux solo soporta los puertos
<emphasis>estándar</emphasis> y <emphasis>bi-direccional</emphasis>. Si su puerto paralelo tiene
interruptores de configuración (en hardware o en pantallas del setup de la
CMOS) asegúrese de configurar el puerto en uno de los soportados.
</para>

<para>
Asegúrese de que todos los cables están firmemente conectados.
</para>

</sect2>

</sect1>

<sect1>
<title>Configuración del kernel para la unidad ZIP</title>

<para>
Para usar unidades ZIP con Linux, el kernel debe estar configurado para
dar el soporte correspondiente: en el caso de unidades SCSI, o paralelas,
son necesarios tres: soporte SCSI, soporte de discos SCSI y soporte para
la controladora que esté usando en el caso SCSI o para PPA en el caso
paralelo. Si es IDE, bastará con soporte para unidades extraíbles ATAPI
(<literal remap="tt">IDE/ATAPI FLOPPY support</literal>). 
</para>

<para>
Si no está familiarizado con la compilación del kernel, debería ir al
directorio <literal remap="tt">/usr/src/linux</literal> y estudiar el fichero <literal remap="tt">README</literal>
que allí encontrará
<footnote>

<para>
N del T:  También dispones del Kernel-COMO,
comprueba la sección <xref linkend="Grupos"/>
</para>

</footnote>
.  También hay valiosa
información en el subdirectorio <literal remap="tt">Documentation</literal> en versiones
recientes. 
</para>

<para>
Debe empezar el proceso de compilación del kernel con la configuración del
mismo. Aquí, identificará los componentes específicos del kernel que
necesita. <literal remap="tt">make config</literal> es el método tradicional, secuencial de
preguntas y respuestas de configuración del kernel. 
</para>

<para>
En kernels recientes
<footnote>

<para>
N del T: A partir de la versión
2.0
</para>

</footnote>
 hay nuevas alternativas:  <literal remap="tt">make menuconfig</literal> hace lo
mismo con interfaz orientado por menús, y <literal remap="tt">make xconfig</literal> usa el kit
<emphasis>tk</emphasis> para mostrar menús bajo X. 
</para>

<para>
Una vez haya configurado el kernel, use <literal remap="tt">make dep</literal>, <literal remap="tt">make
clean</literal> y <literal remap="tt">make zlilo</literal> (o <literal remap="tt">make zImage</literal> si no usa
<emphasis>LILO</emphasis>) para compilar el nuevo kernel e instalarlo, y por supuesto,
¡no olvide reiniciar el sistema!.
</para>

<para>
También puede compilar todo o parte del sistema SCSI como módulos. Si hace
esto, además de los comandos anteriores, deberá hacer <literal remap="tt">make modules; make modules_install</literal>. Asegúrese de cargar <literal remap="tt">scsi_mod.o</literal>,
entonces <literal remap="tt">sd_mod.o</literal> y finalmente el driver de su controladora,
antes de acceder a la unidad ZIP SCSI
<footnote>

<para>
N de los T:  Generalmente,
de esto se encarga el sistema de forma transparente si previamente se han
computado las dependencias entre módulos, (<literal remap="tt">depmod -a</literal> al arrancar)  al
cargar módulos semi-manualmente con el comando <literal remap="tt">modprobe</literal>, o mejor aún,
automáticamente si se usa <literal remap="tt">kerneld</literal>
</para>

</footnote>
.
</para>

<sect2>
<title>Configuración del kernel para la unidad IDE</title>

<para>
Para dar soporte específico a esta unidad, lo único necesario es incluir
soporte en el kernel para ella en la sección de configuración del kernel
<literal remap="tt">Floppy, IDE, and other block devices</literal>, en el apartado <literal remap="tt">Include
IDE/ATAPI FLOPPY support</literal>. 
</para>

<para>
Dependiendo de la configuración de la unidad, su nombre de
dispositivo será de la forma <literal remap="tt">hdX</literal>, en donde <literal remap="tt">X</literal> será:
</para>

<para>

<itemizedlist>
<listitem>

<para>
<literal remap="tt">a</literal>: Unidad maestra del canal IDE primario (muy raramente, ya que
ahí normalmente estará nuestro disco duro)
</para>
</listitem>
<listitem>

<para>
<literal remap="tt">b</literal>: Unidad esclava del canal IDE primario
</para>
</listitem>
<listitem>

<para>
<literal remap="tt">c</literal>: Unidad maestra del canal IDE secundario
</para>
</listitem>
<listitem>

<para>
<literal remap="tt">d</literal>: Unidad esclava del canal IDE secundario
</para>
</listitem>

</itemizedlist>

</para>

<para>
Lo cual comprobaremos al arrancar, por el mensaje del kernel en el
registro del sistema (<literal remap="tt">/var/log/messages</literal>): 
</para>

<para>

<screen>
hdX: IOMEGA ZIP 100 ATAPI, ATAPI FLOPPY drive
</screen>

</para>

<para>
En cuanto a gestión de los discos, aplica exactamente lo mismo que para el
resto de unidades, con la salvedad de que nos referiremos a ellos como
<literal remap="tt">hdX</literal> en lugar de <literal remap="tt">sdX</literal>. 
</para>

<para>
Una vez comprendidos estos términos, puede saltar directamente a la
sección <xref linkend="uso"/>.	
</para>

</sect2>

<sect2 id="aha152x">
<title>Versión SCSI </title>

<para>
Si ya tiene un disco SCSI en el sistema, y está conectando la unidad ZIP a
la misma controladora, no hay necesidad de configurar el kernel. Si no,
tendrá que compilar un nuevo kernel.
</para>

<para>
Si compila el kernel para soportar la versión SCSI de la unidad ZIP, debe
seleccionar soporte SCSI y soporte de discos SCSI. También debe
seleccionar un driver para la controladora que usará. Si tiene la
controladora ZIP Zoom, seleccione el driver <literal remap="tt">aha152x</literal>. 
</para>

<para>
Asegúrese de leer la documentación de la controladora en el SCSI HOWTO y
cualquier fichero <literal remap="tt">README</literal> en el subdirectorio
<literal remap="tt">drivers/scsi</literal> del directorio raíz de los fuentes de Linux. Preste
atención a línea de parámetros que tendrá que usar para ayudar al kernel a
inicializar la controladora.
</para>

<para>
Por ejemplo, si está usando la controladora ZIP Zoom, tendrá que añadir
algo como
</para>

<para>

<screen>
	aha152x=0x340,11,7,1
</screen>

</para>

<para>
al arrancar (o incluirlo en el fichero <literal remap="tt">/etc/lilo.conf</literal> mediante la
cláusula <literal remap="tt">append</literal> (=añadir) ). Esto le dice al driver la dirección del
puerto y la <literal remap="tt">IRQ</literal> de su tarjeta ZIP Zoom. Asegúrese de usar los
parámetros que corresponden a la selección de los <emphasis remap="it">jumpers</emphasis>, que son
por defecto IRQ 11 y dirección base 0x340. El tercer y cuarto parámetro
son asumidos por el <emphasis remap="it">driver</emphasis> en su configuración por defecto, además de
ser lo recomendable. 
</para>

<para>
Si por el contrario, prefiere (y es lo más cómodo además de recomendable) 
compilar soporte modularmente, y hacer uso de las ventajas de la
carga-descarga automática de módulos mediante <literal remap="tt">kerneld</literal>, deberá añadir
lo siguiente en el fichero <literal remap="tt">/etc/conf.modules</literal>:
</para>

<para>

<screen>
alias scsi_hostadapter aha152x
options aha152x aha152x=0x340,11,7,1
</screen>

</para>

<para>
Sí, la línea <literal remap="tt">options aha152x aha152x=0x340,11,7,1</literal> es correcta,
<emphasis remap="bf">ha</emphasis> de aparecer <emphasis remap="bf">dos veces</emphasis> el término <literal remap="tt">aha152x</literal>. 
</para>

<para>
Tras hacer esto, reinicie el sistema si no lo hizo al compilar el kernel,
o ejecute
</para>

<para>

<screen>
depmod -a
</screen>

</para>

<para>
Para que se genere la base de datos de dependencias entre módulos. 
</para>

<para>
Se asume que la controladora está con la configuración que trae de fábrica
por defecto. Otras posibilidades (configurables por <emphasis>jumpers</emphasis> en la
propia controladora) son: 
</para>

<para>

<itemizedlist>
<listitem>

<para>
IRQs: 9, 10, 12.
</para>
</listitem>
<listitem>

<para>
IOs: 0x140 
</para>
</listitem>

</itemizedlist>

</para>

<para>
También debe leer el <emphasis>BOOTPROMPT HOWTO</emphasis> de Paul Gortmaker para
información sobre cómo configurar el kernel con <emphasis>LILO</emphasis> o
<emphasis>LOADLIN</emphasis>. 
</para>

</sect2>

<sect2>
<title>Driver <literal remap="tt">PPA</literal> para 1.2.13</title>

<para>
Si quiere usar la unidad ZIP de puerto paralelo con el kernel versión
1.2.13
<footnote>

<para>
N del Revisor 
 Actualmente obsoleto
</para>

</footnote>
, debe
conseguir la versión 0.18 del driver que esta disponible vía ftp anónimo
en <literal remap="tt"><ulink
url="ftp://gear.torque.net/pub/ppa.c"
>ftp://gear.torque.net/pub/ppa.c</ulink
></literal>
</para>

<para>
Las instrucciones de instalación, así como cómo compilar el driver como
módulo cargable están incluídas en el fichero fuente <literal remap="tt">ppa.c</literal>. 
</para>

<para>
Tendrá casi con toda seguridad que compilar un nuevo kernel. En
particular, ninguno de los kernels pre-compilados de <emphasis>Slackware</emphasis>
funcionarán con <literal remap="tt">ppa</literal>.
</para>

<para>
Sea cuidadoso al compilar el kernel con soporte SCSI y soporte de discos
SCSI, pero no incluya soporte del driver de impresora <literal remap="tt">lp</literal>.  En el
1.2.13, los drivers no pueden co-existir en el mismo kernel.
</para>

<para>
Puede ajustar el número del puerto y algunos parámetros de reloj con el
comando <literal remap="tt">insmod</literal> cuando cargue el driver <literal remap="tt">ppa</literal>.  Estos ajustes
están documentados en el fichero <literal remap="tt">ppa.c</literal>.  Por defecto la unidad
asume que la unidad ZIP esta conectada al puerto paralelo en la dirección
<literal remap="tt">0x378</literal>.
</para>

<para>
No habrá ninguna mejora a este driver para el kernel 1.2.13.  Se espera
que desaparezca unos meses después de la salida del kernel 2.0 y las
principales distribuciones empiecen a usarlo. 
</para>

</sect2>

<sect2>
<title>El driver PPA en kernels actuales</title>

<para>
Desde la versión 1.3.74 el driver <literal remap="tt">ppa</literal> ha sido una parte estándar del
kernel.  Hubo algunos cambios a otras partes del kernel alrededor de la
versión 1.3.78 que requerían ciertas mejoras internas, pero desde 1.3.85
el driver ha sido completamente estable en su versión 0.26. Espero que la
versión 0.26 esté en la próxima versión estable del kernel. 
</para>

<para>
Para compilar el kernel con soporte <literal remap="tt">ppa</literal>, ha de incluirse soporte
SCSI, soporte de discos SCSI y seleccionar de la lista de controladoras
SCSI de bajo nivel (<emphasis remap="it">low-level</emphasis>) soporte para Iomega ZIP / PPA-3. 
También puede compilar el driver como módulo. 
</para>

<para>
Puede usar la línea de parámetros en <literal remap="tt">/etc/lilo.conf</literal> o con
<literal remap="tt">insmod</literal> para cargar el driver. Todo esto está documentado en
<literal remap="tt">drivers/scsi/README.ppa</literal> en la estructura del fichero fuente del
kernel. He incluído un sumario en la siguiente sección. 
</para>

<para>
Si quiere usar tanto el driver <literal remap="tt">lp</literal> como <literal remap="tt">ppa</literal> en el mismo
puerto paralelo, tendrá que compilar ambos como módulos y cargar uno u
otro en cualquier momento, pero nunca los dos a la vez. 
</para>

<para>
Las prestaciones de Linux en cuanto a módulos cargables se tornan cada vez
más potentes, y por tanto, más complejas día a día. Debería leer el
fichero <literal remap="tt">Documentation/modules.txt</literal> en el árbol de directorios de
los fuentes del kernel como punto de partida. 
</para>

</sect2>

<sect2>
<title>PPA: parámetros en la línea de comandos</title>

<para>
Si ha compilado <literal remap="tt">ppa</literal> dentro del kernel, puede ajustar sus
parámetros desde la <emphasis>línea de comando</emphasis> del <literal remap="tt">LILO</literal> o <literal remap="tt">LOADLIN</literal>
con la siguiente sintaxis:
</para>

<para>

<screen>
ppa=base[,speed_high[,speed_low[,nybble]]] 
</screen>

</para>

<para>
Donde <literal remap="tt">base</literal> es la dirección i/o del puerto paralelo,
<literal remap="tt">speed_high</literal> es una constante de temporización para ciertos bucles
rápidos del driver, <literal remap="tt">speed_low</literal> es un parámetro de temporización
similar para otros más lentos, y <literal remap="tt">nybble</literal> es un indicativo para
forzar al driver a usar 4-bit, o modo <emphasis remap="it">nybble</emphasis>, incluso si el
controlador quisiera hacerlo de otro modo. 
</para>

<para>
Por ejemplo, por defecto podría ser especificado como:
</para>

<para>

<screen>
ppa=0x378,1,6,0
</screen>

</para>

</sect2>

</sect1>

<sect1 id="uso">
<title>Uso de la unidad ZIP </title>

<para>
Si ha compilado todos los componentes necesarios, el kernel debería
reconocer la controladora y unidad al arrancar. Si está usando módulos,
lo siguiente se aplicará cuando el módulo sea cargado.
</para>

<para>
La unidad versión SCSI y la de puerto paralelo en se comportan de forma
idéntica, excepto que la versión paralelo es mas lenta. 
</para>

<sect2>
<title>Identificando la unidad al arrancar</title>

<para>
Cuando el sistema arranca debería mostrar varios fragmentos de información
sobre la controladora, unidad y el disco dentro de la unidad
<footnote>

<para>
Si
hemos compilado el soporte modularmente, dicha información aparecerá al
cargarse los módulos correspondientes
</para>

</footnote>
. Si no hay disco en la
unidad, parte de esta información se perderá y sólo aparecerá cuando se
inserte un disco y haga algún tipo de acceso al disco. Se aconseja a
usuarios noveles arrancar con un disco metido en la unidad, ¡las cosas
resultan menos confusas de esta forma! 
</para>

<para>
En dónde aparecerán estos mensajes exactamente depende de cómo esté
configurado el sistema. A menudo serán mostrados en la pantalla, pero
pueden ser enviados a un fichero de registro como por ejemplo
<literal remap="tt">/var/log/messages</literal> o <literal remap="tt">/var/adm/messages</literal>. Normalmente, se
puede volver a visualizar el último par de pantallas de mensajes del
kernel con el comando <literal remap="tt">dmesg</literal>, si no lo encuentra en ningún otro
lugar, o verlo conforme se va generando (útil por ejemplo si hemos
compilado soporte modular, cuando procedamos a cargar el módulo las
primeras veces) con el comando <literal remap="tt">tail -f /var/log/messages</literal>
</para>

<para>
Si necesita ayuda por parte de alguien, una copia de este registro de
información es vital. Trate de enviar tanto como pueda de los mensajes
relevantes registrados, junto con algún informe sobre el fallo.
</para>

<para>
Aquí se puede ver un ejemplo de lo que debería aparecer en los mensajes
del kernel: 
</para>

<para>

<screen>
scsi0 : PPA driver version 0.26 using 8-bit mode on port 0x378.
scsi : 1 host.
  Vendor: IOMEGA    Model: ZIP 100           Rev: N*32
  Type:   Direct-Access                      ANSI SCSI revision: 02
Detected scsi disk sda at scsi0, channel 0, id 6, lun 0
scsi : detected 1 SCSI disk total.
SCSI device sda: hdwr sector= 512 bytes. Sectors= 196608 [96 MB] [0.1 GB]
  sda: Write Protect is off
Partition check:
  sda: sda1
</screen>

</para>

<para>
Esta salida es de un kernel 1.3.87 con una unidad ZIP paralela. La salida
exacta puede variar dependiendo de la controladora y si existe otro
dispositivo SCSI en el sistema. 
</para>

<para>
La primera línea muestra el mensaje de inicialización del <emphasis remap="it">driver</emphasis> de
bajo nivel para la controladora, en este caso <literal remap="tt">PPA</literal>. Lo siguiente
es información de la identificación de la unidad retornado por cada
dispositivo encontrado en el bus SCSI. La línea 5 muestra el nombre del
dispositivo asignado a la unidad, en este caso <literal remap="tt">/dev/sda</literal>.  y la
última línea el estado de la partición del disco en la unidad. Esta caso
solo tiene una partición, <literal remap="tt">/dev/sda1</literal>. Esta información viene de
diferentes módulos del kernel, si tiene más de una controladora SCSI, o
varios discos, cada sección contendrá más información.
</para>

<para>
Por ejemplo, para la unidad SCSI, con un kernel 2.0.33, conectada a la
controladora ZIP-Zoom, con el identificativo SCSI 5: 
</para>

<para>

<screen>
aha152x: BIOS test: passed, detected 1 controller(s)
aha152x0: vital data: PORTBASE=0x340,
IRQ=11, SCSI ID=7, reconnect=enabled, parity=enabled,
synchronous=disabled, delay=100, extended translation=disabled
aha152x: trying software interrupt, ok.
scsi0 : Adaptec 152x SCSI driver; $Revision: 1.1.1.1 $
scsi : 1 host.
  Vendor: IOMEGA   Model: ZIP 100          Rev: E.08
  Type:   Direct-Access                    ANSI SCSI revision: 02
Detected scsi removable disk sda at scsi0, channel 0, id 5, lun 0
</screen>

</para>

<para>
Si utiliza otra controladora, la información será similar a partir de la
línea 8. 
</para>

<para>
Y por último, si la unidad es IDE:
</para>

<para>

<screen>
hdc: IOMEGA ZIP 100 ATAPI, ATAPI FLOPPY drive
</screen>

</para>

<para>
Que en este caso está como dispositivo maestro del segundo canal IDE.	
</para>

<para>
Si está usando un disco <emphasis>virgen</emphasis> (sin usar), directamente de
Iomega, el chequeo de partición debería mostrar una partición,
<literal remap="tt">/dev/sda4</literal>.  Si tiene otros dispositivos SCSI la unidad ZIP podría
aparecer en otro nombre de dispositivo como <literal remap="tt">/dev/sdb</literal>, por eso es
interesante comprobar estos mensajes.
</para>

<para>
Si estas líneas no aparecen, entonces algo esta mal configurado: o el
hardware en sí, o el kernel. Compruebe todo cuidadosamente antes de enviar
emails. 
</para>

<para>
Si la línea <literal remap="tt">scsi0:</literal> no aparece, entonces esta mal configurada la
controladora y su driver correctamente. Algunos drivers dan una pista de
lo que esta mal. Si el driver no es detectado, probablemente haya un
problema con el cable. Si no es asignado el nombre de unidad probablemente
olvidó incluir soporte para discos SCSI cuando recompiló el kernel. 
</para>

<para>
Compruebe los ficheros <literal remap="tt">README</literal> en <literal remap="tt">drivers/scsi</literal> y los
<emphasis remap="it">SCSI HOWTO</emphasis> para otros aspectos relativos a la depuración de la
instalación.
</para>

</sect2>

<sect2>
<title><literal remap="tt">Fdisk, mke2fs, mount,</literal> etc.</title>

<para>
Una vez conozca el nombre de la unidad ZIP, estará listo. Puede manipular
la unidad con los comandos típicos del gestión de discos del Linux.
<literal remap="tt">fdisk</literal> (o quizás <literal remap="tt">cfdisk</literal>) es usado para manipular las
tablas de partición en el disco.  <literal remap="tt">mke2fs</literal> puede ser usado para
formatear una partición con el sistema de ficheros <emphasis>ext2</emphasis> el más
usado en Linux.  <literal remap="tt">mount</literal> es usado para conectar una partición
formateada a la jerarquía de directorios. 
</para>

<para>
Debería estudiar las páginas del manual de estas herramientas si no está
familiarizado con ellas. Tenga cuidado: hay varias versiones diferentes
del programa <literal remap="tt">fdisk</literal>, sea cuidadoso. 
</para>

<para>
Describiré dos situaciones comunes:
</para>

<sect3>
<title>Un disco formateado con DOS</title>

<para>
Si tiene un disco ZIP con una estructura de ficheros DOS que fue creado
originalmente por las herramientas de <emphasis remap="it">Iomega</emphasis>, la detección de la
partición debería decir que en el disco hay una partición,
<literal remap="tt">/dev/sda4</literal>.
</para>

<para>
Cree un directorio donde montar el disco, como por ejemplo <literal remap="tt">/zip</literal>,
y móntelo como un sistema de ficheros DOS:
</para>

<para>

<screen>
mkdir /zip
mount -t msdos /dev/sda4 /zip
</screen>

</para>

<para>
Ahora, los ficheros en el disco deberían aparecer en <literal remap="tt">/zip</literal>. 
Mientras el disco esté montado, no debe poder sacar el disco de la unidad.
Cuando termines con el disco puede desmontarlo para extraer el disco y
liberarlo de la jerarquía de directorios:
</para>

<para>

<screen>
umount /zip
</screen>

</para>

<para>
Una vez que haya creado un punto de montaje <literal remap="tt">/zip</literal> no necesitas
hacerlo otra vez, así puedes más tarde volver a montar cualquier otra
cosa.
</para>

</sect3>

<sect3>
<title>Re-formatear como disco nativo de Linux</title>

<para>
Si quiere borrar un disco ZIP y hacer un sistema de ficheros nativo de
Linux, deberá usar <literal remap="tt">fdisk</literal> en el disco entero:
</para>

<para>

<screen>
fdisk /dev/sda
</screen>

</para>

<para>
y borrar cualquier partición (con el comando <literal remap="tt">d</literal>). Cree una nueva
partición con el comando <literal remap="tt">n</literal>, que sea partición primaria
<literal remap="tt">1</literal>, usar <literal remap="tt">w</literal> para escribir la tabla de particiones al disco
y salir con <literal remap="tt">q</literal>. 
</para>

<para>
Formateo de la partición:
</para>

<para>

<screen>
mke2fs /dev/sda1
</screen>

</para>

<para>
(El <literal remap="tt">1</literal> es el número que dio a esta partición con el
<literal remap="tt">fdisk</literal>).  Ahora podrá montar el disco: 
</para>

<para>

<screen>
mount -t ext2 /dev/sda1 /zip
</screen>

</para>

<para>
(re-usando el punto de montaje que antes creamos).
</para>

</sect3>

<sect3>
<title>El disco <emphasis remap="it">ZIP Tools</emphasis>.</title>

<para>
Hay trabajo extra que hacer si quiere usar el disco que viene con la
unidad ZIP. De fábrica, el disco está protegido contra escritura por
software. La mayoría de la gente ha desprotegido el disco bajo DOS antes
de intentar usarlo desde Linux
<footnote>

<para>
Y con una unidad de puerto
paralelo, con la SCSI <emphasis remap="bf">no</emphasis> suele poder hacerse
</para>

</footnote>
. Linux no
puede acceder a un disco protegido, y <emphasis>debe</emphasis> ser desprotegido con
la herramientas de Iomega.
</para>

<para>
Se espera que pronto esté disponible un programa nativo de Linux para
manejar la protección de escritura.
</para>

</sect3>

<sect3>
<title>Eliminación de la protección software desde Linux</title>

<para>
<emphasis remap="bf">Nota del Revisor:</emphasis> 

</para>

<para>
Mi experiencia es que a menos que se use tanto un zip paralelo, y las
herramientas windows, es imposible desproteger un zip <emphasis remap="it">por software</emphasis> o
civilizadamente.
</para>

<para>
Pero hay un <emphasis remap="it">truco</emphasis>: 
</para>

<para>

<orderedlist>
<listitem>

<para>
Inserte un disco no protegido. (El <emphasis remap="it">Zip-Tools</emphasis>, por ejemplo.) 

</para>
</listitem>
<listitem>

<para>
Extráigalo mediante el sistema de eyección de emergencia,
introduciendo una aguja o similar por el orificio que hay en la esquina
superior izquierda de la unidad. 

</para>
</listitem>
<listitem>

<para>
Introduzca el disco protegido y haga con él lo que quiera; la unidad
zip no notará el cambio.
</para>
</listitem>

</orderedlist>

</para>

<para>
<literal remap="tt">:-)</literal> Por supuesto, todo ello bajo su cuenta y riesgo; a mí y a otros
nos ha funcionado, pero no asumo ninguna responsabilidad... 
</para>

</sect3>

</sect2>

<sect2>
<title>Expulsión del disco</title>

<para>
Solo se puede expulsar un disco cuando no esté montado. Actualmente, no
hay un comando Linux para expulsar el disco, así que se debe pulsar el
botón que tiene la unidad para expulsar el disco.
</para>

<para>
Linux se asegura de que todos los datos estén grabados en el disco antes
de desbloquearlo. 
</para>

<para>
Se espera un nuevo programa <emphasis remap="it">ZIP Tools</emphasis> para Linux que soportará
algunas posibilidades especiales de Iomega (incluyendo la expulsión por
software y la protección contra escritura) tanto en versión SCSI como
paralela.
</para>

</sect2>

</sect1>

<sect1>
<title>Preguntas de Uso Frecuente</title>

<para>
Estas son algunas de las preguntas que se hacen. Por favor, ¡lea las
respuestas aquí antes de volver a preguntarlas ! 
</para>

<sect2>
<title>¿Puedo arrancar desde la unidad ZIP?</title>

<para>
Esto depende de su controladora. Si la unidad es SCSI interna, y le
asignamos las IDs 0 o 1 a la unidad, la controladora lo arrancará
automáticamente. Si tiene la unidad SCSI externa, y la controladora tiene
BIOS ROM con código que permita arrancar desde los <emphasis remap="it">IDs</emphasis> 5 ó 6,
entonces sí, podrá arrancar desde su unidad ZIP. No puede arrancar desde
una unidad de puerto paralelo (directamente. sí usando un disquete de
arranque). 
</para>

<para>
Si tiene DOS en su disco principal y quiere arrancar Linux desde un disco
ZIP, puede usar el cargador de arranque LOADLIN. La imagen del kernel debe
estar en algún lugar en el disco DOS, pero el resto del sistema Linux
puede estar en el ZIP. Asegúrese de que el kernel que va a usar tiene
incluidos los drivers necesarios.
</para>

<para>
Por lo que yo conozco, no hay discos de arranque de instalación para
ninguna de la distribuciones más populares que contengan el driver para la
unidad ZIP de puerto paralelo, pero esto puede cambiar cuando la versión
2.0 salga. 
</para>

</sect2>

<sect2>
<title>¿Por qué Iomega usa la partición número 4 ?</title>

<para>
Esta es la pregunta más realizada, pero creo que nadie tiene una respuesta
definitiva a esta pregunta. Quizás no haya una buena razón. 
</para>

</sect2>

<sect2>
<title>¿Cómo puedo montar el disco al arrancar?</title>

<para>
Todo lo que se necesita es añadir una línea al fichero
<literal remap="tt">/etc/fstab</literal>. Por ejemplo, si siempre se tiene un disco DOS en la
unidad cuando se arranca, podría ser: 
</para>

<para>

<screen>
/dev/sda4   /zip  msdos  defaults  0 0
</screen>

</para>

<para>
Dependiendo en la distribución, los scripts de inicialización pueden
intentar ejecutar <literal remap="tt">fsck</literal> en las particiones listadas en el fichero
<literal remap="tt">/etc/fstab</literal>.  Cuidado ya que esto podría causar problemas si no
hay un disco metido en la unidad cuando se arrancar Linux, o si hay un
disco erróneo
<footnote>

<para>
N del T: Respecto a lo indicado en
<literal remap="tt">/etc/fstab</literal> en cuanto a particiones y sistema de
ficheros
</para>

</footnote>
. 
</para>

</sect2>

<sect2>
<title>¿Qué ocurre si no hay un disco metido cuando arranco?</title>

<para>
El kernel intentará leer la tabla de particiones, pero la operación
expirará.  No hay nada por que preocuparse. Una vez insertado el disco, e
intentando hacer algo con él, el kernel se dará cuenta de que hay un disco
ahora y re-escaneará la tabla de particiones. 
</para>

<para>
AYUDA: Cuando cambie de disco, es una buena idea que uses fdisk para
chequear la estructura de la partición en el nuevo disco. 
</para>

<para>
La BIOS de algunas controladoras SCSI intentarán leer la tabla de
particiones en el disco durante el arranque. Si no puedes desactivar este
chequeo, siempre puedes forzar el arranque con un disco metido en la
unidad. 
</para>

</sect2>

<sect2>
<title>¿Qué controladoras SCSI son compatibles con la unidad ZIP?</title>

<para>
Iomega tiene una lista de las controladoras compatibles en:
</para>

<para>
<literal remap="tt"><ulink
url="http://www.iomega.com/techs/zip/what063.html"
>http://www.iomega.com/techs/zip/what063.html</ulink
></literal>
</para>

</sect2>

<sect2>
<title>¿Puedo usar la unidad de puerto paralelo como un disco SCSI real?</title>

<para>
El adaptador PPA-3 parallel-to-SCSI esta implementado como un chip ASIC
único que Iomega llama <emphasis>VPI0</emphasis>.  Está integrado en la controladora
de la unidad ZIP. Hay un bus SCSI presente, pero no en una forma útil. 
</para>

<para>
Aunque he intentado comparar las dos controladoras, parece lógico que el
VPI0 reemplace los circuitos de <emphasis remap="it">buffer</emphasis> eléctricos convencionales que
serían necesarios si el bus SCSI estuviese extendido fuera de la caja. 
</para>

</sect2>

<sect2>
<title>¿Puedo conectar una impresora con la unidad de puerto paralelo?</title>

<para>
Sí, pero actualmente, no se puede tener los drivers <literal remap="tt">lp</literal> y
<literal remap="tt">ppa</literal> activos a la vez en el mismo puerto paralelo. Se ha diseñado
un protocolo de compartición y esta en las primeras etapas de
implementación, pero no estará disponible antes de que salga el kernel
2.0. 
</para>

<para>
Mientras tanto, se puede conectar a la vez la impresora y la unidad ZIP
sin tener que rearrancar el sistema, si se tienen los drivers <literal remap="tt">lp</literal>
y <literal remap="tt">ppa</literal> como <emphasis>módulos</emphasis>. Si se tienen así, entonces cuando se
quiera imprimir se carga el módulo (<literal remap="tt">insmod lp</literal>), y cuando se
quiere utilizar la unidad ZIP se carga el driver <literal remap="tt">ppa</literal>. 
</para>

<para>
Por supuesto, si se tienen <emphasis>dos</emphasis> puertos paralelos, se puede usar
uno para imprimir y otro para la unidad ZIP. Se compila el kernel con
ambos drivers <literal remap="tt">lp</literal> y <literal remap="tt">ppa</literal> incluidos, añadiendo entonces los
parámetros de configuración apropiados en la línea de comandos del kernel. 
Por ejemplo, si se usa LILO y se tiene la impresora en <literal remap="tt">0x378</literal> y el ZIP
en <literal remap="tt">0x3bc</literal> se puede añadir la siguiente línea en el fichero
<literal remap="tt">/etc/lilo.conf</literal>. 
</para>

<para>

<screen>
append = "lp=0x378 ppa=0x3bc"
</screen>

</para>

</sect2>

<sect2>
<title>¿Hay algún plan de soportar los puertos EPP/ECP en PPA?</title>

<para>
<literal remap="tt">ppa</literal> fue inicialmente desarrollado sin contar con el beneficio de
ninguna especificación técnica para el protocolo de comandos en el bus
paralelo. Sin embargo, se usó el emulador del DOS para reunir información
a fin de tratar de averiguar mediante ingeniería inversa cómo funcionaba
dicho protocolo. Fue imposible conseguir que la unidad funcionase en el
modo mejorado bajo el emulador.
</para>

<para>
El manual de referencia técnica de Iomega se encuentra ahora disponible, y
he localizado la hoja del chip de puerto paralelo mejorado, así que es
posible mejorar el driver. 
</para>

</sect2>

<sect2>
<title>¿Puede usarse el PPA con unidades de cinta de puerto paralelo de
Iomega?</title>

<para>
No. Esas son unidades de cinta de disquetera, el SCSI no esta involucrado.
</para>

<para>
Varias personas han mostrado interés en aplicar mis métodos para intentar
determinar el protocolo y desarrollo de un driver para esas unidades de
cinta. El primer paso en ese proceso es conseguir un driver para DOS que
funcione bajo DOSemu. No he oído aún que nadie lo haya conseguido. 
</para>

</sect2>

<sect2>
<title>¿Funcionará el <literal remap="tt">PPA</literal> con la unidad <emphasis remap="it">SyQuest EZ135</emphasis> de puerto
paralelo ? </title>

<para>
No. La <emphasis remap="it">EX135</emphasis> es una unidad <emphasis remap="it">IDE</emphasis> con un conversor de puerto
paralelo <emphasis>ShuttlePort</emphasis> a IDE integrado. 
</para>

<para>
La labor ha comenzado por decodificar el protocolo, con la intención de
escribir un driver para Linux del EZ135 de puerto paralelo. Tengo el
protocolo básico funcionando, pero no tengo idea de cuando estará
disponible un driver completo. 
</para>

<para>
Eche un vistazo a mi <literal remap="tt"><ulink
url="http://www.torque.net/ez135.html"
>http://www.torque.net/ez135.html</ulink
></literal>, Buscaré eventualmente algún
<emphasis remap="it">beta tester</emphasis>. 
</para>

</sect2>

</sect1>

<sect1>
<title>Búsqueda de información actualizada.</title>

<para>
Intentaré tener un actualización de este mini-COMO disponible en mis
páginas web. Puede comprobarlo en
</para>

<para>
<literal remap="tt"><ulink
url="http://www.torque.net/zip.html"
>http://www.torque.net/zip.html</ulink
></literal>. 
</para>

<para>
Hay una página web más general sobre ZIP FAQ (con influencia de Macintosh) 
en
</para>

<para>
<literal remap="tt"><ulink
url="http://earth.cnct.com/home/steveg/zip.html"
>http://earth.cnct.com/home/steveg/zip.html</ulink
></literal>. 
</para>

<para>
Las páginas de Iomega están en
</para>

<para>
<literal remap="tt"><ulink
url="http://www.iomega.com/"
>http://www.iomega.com/</ulink
></literal>. 
</para>

<para>
Y si está buscando información general sobre programación del puerto
paralelo para PC, Puede visitar
</para>

<para>
<literal remap="tt"><ulink
url="http://www.lvr.com/parport.htm"
>http://www.lvr.com/parport.htm</ulink
></literal>
</para>

</sect1>

<sect1 id="Grupos">
<title>Anexo: El INSFLUG </title>

<para>
El <emphasis>INSFLUG</emphasis> forma parte del grupo internacional 
<emphasis remap="it">Linux Documentation Project</emphasis>, 
encargándose de las traducciones al castellano de los Howtos (Comos),
así como la producción de documentos originales en aquellos casos
en los que no existe análogo en inglés.
</para>

<para>
En el <emphasis remap="bf">INSFLUG</emphasis> se orienta preferentemente a la traducción de documentos
breves, como los <emphasis>COMOs</emphasis> y <emphasis>PUFs</emphasis> (<emphasis remap="bf">P</emphasis>reguntas de
<emphasis remap="bf">U</emphasis>so <emphasis remap="bf">F</emphasis>recuente, las <emphasis remap="it">FAQs</emphasis>. <literal remap="tt">:)</literal> ), etc.
</para>

<para>
Diríjase a la sede del INSFLUG para más información al respecto.
</para>

<para>
En la sede del INSFLUG encontrará siempre las <emphasis remap="bf">últimas</emphasis> versiones 
de las traducciones:  <literal remap="tt"><ulink
url="http://www.insflug.org"
>www.insflug.org</ulink
></literal>. Asegúrese de comprobar cuál es la última versión 
disponible en el Insflug antes de bajar un documento de un servidor réplica.
</para>

<para>
Se proporciona también una lista de los servidores
réplica (<emphasis remap="it">mirror</emphasis>) del Insflug más cercanos a Vd.,  
e información relativa a otros recursos en castellano.
</para>

<para>
Francisco José Montilla, <literal remap="tt"><ulink
url="mailto:pacopepe@insflug.org"
>pacopepe@insflug.org</ulink
></literal>.
</para>

</sect1>

</article>
