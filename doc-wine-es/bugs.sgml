  <chapter id="bugs">
    <title>Detección de fallos / Reporte de bugs</title>

    <sect1 id="troubleshooting">
      <title> ¿ Qué hacer si aún así ningún programa funciona ?        
      </title>

      <para>
          Hay veces que aún probando de todo, incluso habiendo 
	  matando un gato bajo la luna llena y comiéndoselo con ajo y pescado 
	  podrido mientras bailaba la danza del diablo, ni siquiera así nada 
	  le ayudó a hacer que un maldito programa corriese bajo alguna 
	  versión de Wine. 
	  No desespere, estamos aquí para ayudarle... ( en otras palabras: 
	  ¿Cuánto quiere pagar?)

      </para>
      
      <sect2>
        <title>Ejecutar "winecheck" para comprobar su configuración</title>

	<para>
	   Ejecute un script en perl que se llama 
	   <command>winecheck</command>, y que puede hallar en el directorio 
	   tools/ de Wine.
	   La última versión siempre la puede hallar en 
	   <ulink url="http://home.arcor.de/andi.mohr/download/winecheck">http://home.arcor.de/andi.mohr/download/winecheck</ulink>.

	   Asegúrese de ejecutar primero <command>chmod +x winecheck</command>
	    antes de tratar de ejecutarlo... ( o como alternativa ejecútelo 
	   mediante <command>perl ../winecheck</command>)
	   La salida de winecheck le mostrará un número porcentual que le 
	   indicará la exactitud de la configuración de Wine. Debe observarse 
	   que winecheck es beta solamente, de manera que no es muy completo 
	   ni 100% preciso.
	</para>
      </sect2>

      <sect2>
        <title>El uso de configuraciones para distintas versiones de windows</title>

	<para>
	   En muchos casos el uso de 
	   <link linkend="windows-versions">configuraciones para distintas 
	   versiones de windows</link> puede ayudarle.
      </para>
      </sect2>

      <sect2>
        <title>Uso de diferentes caminos para el inicio</title>

	<para>
	  Algunas veces esto también ayuda: Pruebe usar tanto 
	  <command>wine prg.exe</command> como 
	  <command>wine x:\\full\\path\\to\\prg.exe</command>
	</para>
      </sect2>

      <sect2>
        <title>Jugar con la configuración de los DLL </title>

	<para>
	  Corra el --debugmsg +loaddll para resolver cuáles son los DLL que 
	  estan siendo usados, y cómo están cargados, si como nativos o
	   como integrados al sistema.

	  Ahora asegúrese de que tiene los apropiados archivos DLL nativos en 
	  su directorio configurado C:\windows\system y comience a 'juguetear'
	   con las configuraciones de las órdenes de carga en la línea de 
	  comando o en el archivo config.
	</para>
      </sect2>

      <sect2>
        <title>Compruebe el entorno de su sistema!</title>

	<para>
	  Sólo una idea: ¿Puede estar pasando que se haya roto el entorno 
	  de construcción/ejecución de Wine?
	  Asegúrese de que no hay problemas con alguno de los paquetes que 
	  dependen de wine (gcc, glibc, X libraries, OpenGL (!), ...)
	  Por ejemplo... algunas personas tienen insólitas frustraciones para 
	  hallar cosas cuando usan " los incorrectos" archivos de encabezado 
	  para las librerías apropiadas !!! ( lo cual resulta en días y días 
	  de depuración para desesperadamente tratar de hallar porqué la 
	  función de bajo nivel falla de manera tal que va más allá de la 
	  imaginación ... ARGH !)
	</para>
      </sect2>

      <sect2>
        <title>Usar diferentes modos GUI (Administradores de ventanas)</title>
	
	<para>
	  Dé instrucciones a wine por medio del archivo config para usar 
	  tanto el modo escritorio como el modo administrado o el antiestético
	  modo plano "normal". Ello puede hacer la diferencia.
	</para>
      </sect2>

      <sect2>
        <title>Compruebe su aplicación</title>
	
	<para>
	  ¿ Puede que su app esté usando algún tipo de protección de copiado?
	  normalmente muchas protecciones de copiado no trabajan sobre Wine.
	  Aunque quizás algunas puedan hacerlo en el futuro.
	</para>

	<para>
	  Vaya a <ulink url="http://www.gamecopyworld.com">GameCopyWorld</ulink> y trate 
	  de hallar un crack decente para su juego que se deshace de esa 
	  desagradable protección de copia. Aunque espero que tenga una copia 
	  legal del programa... :-)
	</para>
      </sect2>

      <sect2>
        <title>¡Compruebe el entorno de wine!</title>
        
	<para>
	  Correr con o sin una partición de Windows puede llegar a tener 
	  un dramático impacto. Configure Wine para hacer lo opuesto de lo 
	  que acostumbró a hacer. Además, instale DCOM98 o DCOM95. Esto 
	  puede ser muy beneficioso.
	</para>
      </sect2>

      <sect2>
        <title> Reconfigurar Wine</title>
	
	<para>
	  Algunas veces el proceso de instalación de Wine cambia y la nuevas 
	  versiones de wine toman en cuenta estos cambios. Esto es 
	  particularmente cierto si su configuración fue creada ya hace un 
	  tiempo atrás. Renombre su directorio existente 
	  <filename>~/.wine</filename> a los fines  a los fines de realizar 
	  backups. Use el proceso de configuración (setup) que se recomienda 
	  para la distribución de wine que posee, para crear la nueva 
	  configuración.
	  
	  Como referencia use la información del antiguo directorio 
	  <filename>~/.wine</filename>.

	  Para que la distribución de la fuente de wine configure wine, 
	  corra el script en tools/wineinstall como el usuario para el que 
	  usted quiera la configuración.

Esta es una operación bastante segura. Mas tarde puede borrar el directorio 
<filename>~/.wine</filename> y volver a renombrar el antiguo de nuevo.

	</para>
      </sect2>

      <sect2>
      <title>Revise la información adicional</title>
      
      <para>
        Chequée la <ulink	url="http://www.winehq.org/fom-meta/cache/19.html">Guía 
de localización de fallas de Wine</ulink> sobre WineHQ.
Vaya a <ulink url="http://groups.google.com">Google Groups</ulink>
y revise que tanto más listos que usted son algunos tipos ;-)
(Bueno, es decir, qué tanto han hallado la solución del problema)

--???------ Vaya a <ulink url="http://appdb.codeweavers.com">Base de datos de aplicaciones de WineHQ
</ulink> y vea si ya alguien posteó la vital ___config hint _____para su app.


	Si esto no ayuda entonces considere ir a irc.freenode.net channel #WineHQ, postear 
a news:comp.emulators.ms-windows.wine o mantener correo con usuarios (o incluso desarrolladores) 
de las listas de correo de wine.
      </para>
      </sect2>
      <sect2>
        <title>¡Depúrelo! </title>
	<para>
	  ¿ Ha usado la característica de búsqueda de la 
<ulink url="http://www.winehq.org/fom-meta/cache/19.html"> Guía de detección de fallas de Wine</ulink> ??
(por ejemplo. ¿Seguro que no hay respuesta?). Si ya lo hizo entonces intente 
<ulink url="http://www.winehq.org/fom-meta/cache/230.html"> La guía perfecta del depurador del Wine ara el usuario final </ulink>, 
y por supuesto no olvide leer la Guía de Desarrolladores de Wine. 
	</para>
      </sect2>
    </sect1>
    <sect1 id="bug-reporting">
      <title>Cómo reportar un Bug</title>
      <para>
       Por favor reporte todos los bugs junto con cualquier información relevante 
a <ulink url="http://bugs.winehq.com/">Wine Bugzilla</ulink>.
Busque en la base de datos de Bugzilla y chequee si su problema no está ya reportado.
Si ya está reportado entonces agregue cualquier información importante al reporte 
original del bug.
      </para>

      <sect2>
        <title>Todos los reportes de Bug</title>
        <para>
          Algunos consejos simples sobre cómo hacer más útil su reporte del bug. 
( y de esa forma tener mas probabilidad de ser contestado y resuelto su problema )
        </para>
        <orderedlist>
          <listitem>
          <para>
           Postee tanta información relevante como le sea posible
          </para>
          <para>
            Esto implica que necesitamos más información que un simple "MS Word se cuelga
cada vez que lo ejecuto. ¿ Ud. sabe acaso por qué? ". Tiene que incluir por lo menos
la siguiente información:
          </para>
          <itemizedlist spacing="compact">
            <listitem>
            <para>
             Qué versión de Wine es la que Ud está usando (run <command>wine -v</command>)
            </para>
            </listitem>
            <listitem>
            <para>
              El nombre del sistema operativo que usa, qué distribución ( si es alguna ), y 
qué version. ( por ejemplo, Linux RedHat 7.2)
            </para>
            </listitem>
            <listitem>
            <para>
             Cuál compilador y qué versión, (run <command>gcc -v</command>).
Si usted no compiló Wine, entonces el nombre del paquete y el lugar de dónde lo consiguió.
            </para>
            </listitem>
            <listitem>
            <para>
              La versión de Windows, si la usa con Wine. Mencione si usted no usa Windows.
            </para>
            </listitem>
            <listitem>
            <para>
              El nombre del programa que usted está tratando de ejecutar, su número de versión, 
y la URL del lugar de donde obtuvo el programa ( si es que está disponible ).
            </para>
            </listitem>
            <listitem>
            <para>
              La línea de comandos exacta que usó para arrancar Wine.
(por ejemplo, <command>wine "C:\Program Files\Test\program.exe"</command>).
             </para>
            </listitem>
            <listitem>
            <para>
              Los pasos exactos requeridos para reproducir el bug.
            </para>
            </listitem>
            <listitem>
            <para>
              Any other information you think may be relevant or
              helpful, such as X server version in case of X
              problems, libc version etc.
----??-- Cualquier otra información que usted piense que pueda ser relevante o útil, 
tal como la versión de un servidor X en caso de problemas X, versión de libc, etc.
            </para>
            </listitem>
          </itemizedlist>
          </listitem>
          <listitem>
          <para>
            Reinicie el programa con la opción <parameter>--debugmsg +relay</parameter> 
(por ejemplo, <command>wine --debugmsg +relay sol.exe</command>).
          </para>
          <para>
Esto colocará información adicional en la consola, que puede ser muy útil 
al depurar el programa. Además, esto reduce la ejecución del programa. Hay algunos casos 
en donde el bug parece desaparecer cuando se usa <parameter> +relay </parameter> .
          </para>
          </listitem>
        </orderedlist>
      </sect2>
      <sect2>
        <title>Crashes</title>
        <para>
           Si Wine se cuelga mientras corre su programa, es importante que tengamos esa 
información, y así tener una chance de entender qué es lo que causa esa interrupción.
 Esto puede poner mucha cantidad de información ( varios MB ), por eso lo mejor es poner 
la salida a un archivo. Cuando aparezca el prompt <prompt>Wine-dbg></prompt> 
teclee <userinput>quit</userinput>.
        </para>
        <para>
           ¡Puede que usted quiera intentar <parameter>+relay,+snoop</parameter> en vez de
           <parameter>+relay</parameter>, pero por favor observe que 
<parameter>+snoop</parameter> es bastante inestable y a menudo se interrumpirá mucho antes 
que un simple <parameter>+relay</parameter>! si este es el caso entonces por favor use 
<emphasis>solamente</emphasis> <parameter>+relay</parameter>!!
Un reporte de bug con una interrupción en código <parameter>+snoop</parameter>
en muchos casos no es aprovechable.
Adicionalmente usted puede activar otros parámetros dependiendo de la naturaleza 
del problema que está indagando. Vea las páginas man de Wine para tener un 
listado completo de esos parámetros.
         </para>
         <para>
           Para obtener la salida del trace use uno de los siguientes métodos:
         </para>
         <sect3>
           <title>El camino fácil</title>
           <orderedlist>
             <listitem>
             <para>
               Este método fue pensado para permitir que aún un novato total pueda 
enviar un relevante log del trace en el caso de un aborto de programa.
             </para>
             <para>
               Su ordenador <emphasis>debe</emphasis> tener perl instalado para que éste 
método funcione. Para saber si usted tiene perl, corra <command>which perl</command>. 
Si esto retorna algo tal como <filename>/usr/bin/perl</filename>, está en casa.
               De lo contrario salte hacia abajo a la sección "el camino difícil". 
Si no está seguro, solo siga. Cuando trate de correr el script, estará <emphasis>muy</emphasis> 
claro si usted no tiene perl.
             </para>
             </listitem>
             <listitem>
             <para>
              Cambie de directorio a <filename>&lt;dirs to wine>/tools</filename>
             </para>
             </listitem>
             <listitem>
             <para>
               Teclée <command>./bug_report.pl</command> y siga las directivas.
             </para>
             </listitem>
             <listitem>
             <para>
               Postee el bug a <ulink url="http://bugs.winehq.com/">Wine Bugzilla</ulink>.
Por favor busque en la base de datos de Bugzilla y vea si su problema ya se encontró 
antes de postear un reporte de bug.
               Incluya su propia descripción detallada del problema, con información relevante.
Adjunte el " Precioso Reporte Formateado" al bug enviado. No 'corte y pegue' el reporte en la
descripción del bug - es demasiado grande para ello.
               Conserve la salida completa del debug en caso de que los desarrolladores de 
Wine la necesiten.
             </para>
             </listitem>
           </orderedlist>
         </sect3>
         <sect3>
           <title>El camino duro</title>
           <para>
             Es probable que solamente las últimas 100 o tantas líneas del trace sean las necesarias 
para saber dónde falla el programa. A los fines de obtener esas últimas 100 líneas 
necesitamos hacer lo siguiente
           </para>
           <orderedlist>
             <listitem>
             <para>
               Redireccione todas las salidas de <parameter> -debugmsg </parameter> a un archivo.
             </para>
             </listitem>
             <listitem>
             <para>
               Ponga aparte las últimas 100 líneas en otro archivo usando <command> tail </command>.
             </para>
             </listitem>
           </orderedlist>
           <para>
            Esto se puede hacer usando uno de los siguientes métodos.
           </para>
           <variablelist>
             <varlistentry>
             <term>all shells:</term>
             <listitem>
             <screen>
<prompt>$ </prompt>echo quit | wine -debugmsg +relay [other_options] program_name >& filename.out;
<prompt>$ </prompt>tail -n 100 filename.out > report_file
             </screen>
             <para>
               ( Esto imprimirá los mensajes de depuración de Wine solamente al archivo y 
entonces finalizará automáticamente. Probablemente sea una buena idea usar este comando, 
debido a que Wine imprime demasiados mensajes de depuración que desbordan el terminal, consumiendo 
ciclos de CPU.)
             </para>
             </listitem>
             </varlistentry>
             <varlistentry>
             <term>tcsh and other csh-like shells:</term>
             <listitem>
             <screen>
<prompt>$ </prompt>wine -debugmsg +relay [other_options] program_name |& tee filename.out;
<prompt>$ </prompt>tail -100 filename.out > report_file
             </screen>
             </listitem>
             </varlistentry>
             <varlistentry>
             <term>bash and other sh-like shells:</term>
             <listitem>
             <screen>
<prompt>$ </prompt>wine -debugmsg +relay [other_options] program_name 2>&1 | tee filename.out;
<prompt>$ </prompt>tail -100 filename.out > report_file
             </screen>
             </listitem>
             </varlistentry>
          </variablelist>
          <para>
            <filename>report_file</filename> ahora contiene las últimas 100 líneas 
de la salida del debugger (depurador), incluyendo el registro del dump y backtrace, que
son las partes más importantes de información. Por favor no borre este fragmento, 
aún si no entiende qué significa.
          </para>
          <para>
            Postee el bug a <ulink url="http://bugs.winehq.com/">Wine Bugzilla</ulink>.
Ud. necesita adjuntar el archivo de salida <filename>report_file</filename>
de la parte 2). Junto con la información relevante usada para crearlo. No 'corte y pegue' 
el reporte en la descripción del bug - es bastante grande y arruinará el reporte del bug.
Si usted hace esto, tendrá muy buenas chances de recibir algún tipo de respuesta útil.
          </para>
          <para>
            Por favor, busque en la base de datos de Bugzilla si su problema ya ha sido reportado.
Si ya se reportó adjunte el archivo de salida <filename>report_file</filename> al reporte original 
del bug y agregue cualquier otra información relevante.
          </para>
        </sect3>
      </sect2>
    </sect1>
 </chapter>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-parent-document:("wine-doc.sgml" "set" "book" "chapter" "")
End:
-->

