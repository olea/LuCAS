<!--
$Header: /home/cvs/lucas/doc-postgresql-es/v7/src/sgml/REF/pg_dumpall.sgml,v 1.2 2001/10/11 21:46:27 rssantos Exp $
Postgres documentation
-->

<refentry id="APP-PGDUMPALL">
 <refmeta>
  <refentrytitle id="APP-PGDUMPALL-TITLE">
   <application>pg_dumpall</application>
  </refentrytitle>
  <refmiscinfo>Application</refmiscinfo>
 </refmeta>
 <refnamediv>
  <refname>
   <application>pg_dumpall</application>
  </refname>
  <refpurpose>
   Extrae todas las bases de datos <productname>Postgres</productname> en un archivo de script
  </refpurpose>
 </refnamediv>
 <refsynopsisdiv>
  <refsynopsisdivinfo>
   <date>1999-07-20</date>
  </refsynopsisdivinfo>
  <synopsis>
pg_dumpall
pg_dumpall [ -h <replaceable class="parameter">máquina</replaceable> ] [ -p <replaceable class="parameter">puerto</replaceable> ] [ -a ] [ -d ] [ -D ] [ -O ] [ -s ] [ -u ] [ -v ] [ -x ]
  </synopsis>

  <refsect2 id="R2-APP-PG-DUMPALL-1">
   <refsect2info>
    <date>1998-10-04</date>
   </refsect2info>
   <title>
    Entradas
   </title>
   <para>
    <application>pg_dumpall</application> acepta los siguientes argumentos de la línea de órdenes:

    <variablelist>
     <varlistentry>
      <term>-a</term>
      <listitem>
       <para>
        Vuelca sólo los datos, no el esquema (las definiciones).
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term>-d</term>
      <listitem>
       <para>
        Vuelca los datos como inserciones de cadenas adecuadas.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term>-D</term>
      <listitem>
       <para>
        Vuelca los datos como inserciones con nombres de atributos
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term>-n</term>
      <listitem>
       <para>
        Suprime las dobles comillas de los identificadores, a menos que sean absolutamente necesarias.
        Esto puede causar problemas al cargar estos datos volcados si hay palabras reservadas usadas como identificadores.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term>-o</term>
      <listitem>
       <para>
        Vuelca los identificadores de objetos (<acronym>OID</acronym>s) de cada tabla.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term>-s</term>
      <listitem>
       <para>
        Vuelca sólo el esquema (las definiciones), no los datos.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term>-u</term>
      <listitem>
       <para>
        Usa autenticación con clave de acceso. Pide un nombre de usuario y una clave de acceso.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term>-v</term>
      <listitem>
       <para>
        Especifíca el modo verbose (detallado)
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term>-x</term>
      <listitem>
       <para>
        Evita el volcado de ACLs (órdenes grant/revoke) e información del propietario de la tabla.
       </para>
      </listitem>
     </varlistentry>

    </variablelist>
   </para>

   <para>
    <application>pg_dumpall</application> también acepta
    los siguientes argumentos en la línea de órdenes como parámetros de conexión:

    <variablelist>
     <varlistentry>
      <term>-h <replaceable class="parameter">huésped</replaceable></term>
      <listitem>
       <para>
        específica el nombre de la máquina en la cual se está ejecutando
        <application>postmaster</application>.
        El estándar es usar un socket de dominio local Unix
        en vez de una conexión IP.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term>-p <replaceable class="parameter">puerto</replaceable></term>
      <listitem>
       <para>
        Específica el puerto Internet TCP/IP o el fichero de dominio local Unix
        en el cual esté <application>postmaster</application>
        aguardando conexiones. El número estándar de puerto es 5432,
        o el valor de la variable de entorno <envar>PGPORT</envar>
        (si se ha indicado).
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term>-u</term>
      <listitem>
       <para>
        Usa autenticación con clave de acceso.
        Pide <replaceable class="parameter">nombre_de_usuario</replaceable>
        y <replaceable class="parameter">clave_de_acceso</replaceable>.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
   </para>
  </refsect2>

  <refsect2 id="R2-APP-PG-DUMPALL-2">
   <refsect2info>
    <date>1998-10-04</date>
   </refsect2info>
   <title>
    Salida
   </title>
   <para>
    <application>pg_dumpall</application> creará un fichero o
    escribirá a <filename>stdout</filename>.

    <variablelist>
     <varlistentry>
      <term><computeroutput>
La conexión a la base de datos 'template1' falló.
connectDB() falló: ¿Está postmaster ejecutándose y aceptando conexiones en el 'Socket UNIX' en el puerto '<replaceable class="parameter">puerto</replaceable>'?
       </computeroutput></term>
      <listitem>
       <para>
        <application>pg_dumpall</application> no pudo unirse al proceso
        <application>postmaster</application>
        en la máquina y puerto especificados. Si ve usted este mensaje,
        verifique que <application>postmaster</application>
        esté ejecutándose correctamente en el huésped y puerto que
        usted especificó.

        Si su lugar de trabajo usa algún sistema de autenticación verifique
        que usted ha obtenido las credenciales de autenticación.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><computeroutput>
La conexión a la base de datos '<replaceable class="parameter">base_de_datos</replaceable>' falló.
FATAL 1:  SetUserId: el usuario '<replaceable class="parameter">nombre_de_usuario</replaceable>' no está en 'pg_shadow'
       </computeroutput></term>
      <listitem>
       <para>
        Usted no tiene una entrada válida en la relación <literal>pg_shadow</literal> y no le será permitido el acceso a <productname>Postgres</productname>.
        Contacte con su administrador <productname>Postgres</productname>.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><computeroutput>
dumpSequence(<replaceable class="parameter">tabla</replaceable>): SELECT falló
       </computeroutput></term>
      <listitem>
       <para>
        No tiene permiso para leer la base de datos.
        Contacte a su administrador <productname>Postgres</productname>.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
   </para>

   <note>
    <para>
     <application>pg_dumpall</application> ejecuta internamente directivas
     <command>SELECT</command>. Si tiene problemas ejecutando
     <application>pg_dumpall</application>,
     asegúrese de que puede consultar información de la base de datos
     usando, por ejemplo, <application>psql</application>.
    </para>
   </note>
  </refsect2>
 </refsynopsisdiv>

 <refsect1 id="R1-APP-PG-DUMPALL-1">
  <refsect1info>
   <date>1998-10-04</date>
  </refsect1info>
  <title>
   Descripción
  </title>
  <para>
   <application>pg_dumpall</application> se diseñó para volcar todas las
   bases de datos Postgres en un fichero. También vuelca la tabla pg_shadow,
   la cual es global para todas las bases de datos.
   <application>pg_dumpall</application> incluye en este archivo las
   órdenes correctas para crear automáticamente cada una de las bases de
   datos volcadas antes de cargar los datos.
  </para>
  <para>
   <application>pg_dumpall</application> toma todas las opciones de
   <application>pg_dump</application> pero <option>-f</option>,
   <option>-t</option> y
   <replaceable class="parameter">base_de_datos</replaceable>
   deberían ser omitidos.
  </para>
  <para>
   Refiérase a
   <xref endterm="app-pgdump-title" linkend="app-pgdump-title">
   para más información con respecto a esta otra utilidad.
  </para>
 </refsect1>

 <refsect1 id="R1-APP-PG-DUMPALL-2">
  <refsect1info>
   <date>1998-10-04</date>
  </refsect1info>
  <title>
   Uso
  </title>
  <para>
   Para volcar todas las bases de datos:

   <programlisting>
% pg_dumpall > db.out
   </programlisting>

   <tip>
    <para>
     Puede usar la mayoría de las opciones de <application>pg_dump</application>
     con <application>pg_dumpall</application>.
    </para>
   </tip>
  </para>
  <para>
   Para volver a cargar esta base de datos:

   <programlisting>
% psql -e template1 < db.out
   </programlisting>
  </para>
  <tip>
   <para>
    Puede usar la mayoría de las opciones de <application>psql</application>
    cuando vuelva a cargarlas.
   </para>
  </tip>
 </refsect1>
</refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:nil
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
sgml-parent-document:nil
sgml-default-dtd-file:"../reference.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:"/usr/lib/sgml/catalog"
sgml-local-ecat-files:nil
End:
-->
