<!--
$Header: /home/cvs/lucas/doc-postgresql-es/v6/Postgresql-es/src/sgml/keys.sgml,v 1.5 2001/04/21 22:12:32 olea Exp $
Indices and Keys

$Log: keys.sgml,v $
Revision 1.5  2001/04/21 22:12:32  olea
No más retornos de carro de msdos... ódiolos.

Revision 1.4  2001/04/21 21:57:13  olea
Esta es la guarrada que me ha pedido que haga Roberto. Que dios nos coja
confesaos.

Revision 1.3  1998/12/29 02:24:16  thomas
Clean up to ensure tag completion as required by the newest versions
 of Norm's Modular Style Sheets and jade/docbook.
>From Vince Vielhaber <vev@michvhf.com>.

Revision 1.2  1998/08/17 16:18:13  thomas
Small sentence cleanups. Add tags for acronyms and products.

Revision 1.1  1998/08/15 06:52:03  thomas
Nice exposition on indices and keys from Herouth Maoz which appeared
 on the mailing lists a while ago. Maybe slightly changed to fit docs.
Will go into the User's Guide.

-->

<chapter id="keys">
<docinfo>
<authorgroup>
<author>
<firstname>Herouth</firstname>
<surname>Maoz</surname>
</author>
</authorgroup>
<date>1998-03-02</date>
</docinfo>

<Title>Índices y claves (keys)</Title>

<Note>
<Title>Autor</Title>
<Para>
Escrito por
<ULink url="herouth@oumail.openu.ac.il">Herouth Maoz</ULink>
</Para>
</Note>

<Note>
<Title>Nota del Editor</Title>
<Para>
Este artículo apareció originalmente en la lista de correo, como respuesta
a la pregunta: "¿Cual es la diferencia entre las restricciones PRIMARY
KEY y UNIQUE?".
</Para>
</Note>

<ProgramListing>
Asunto: Re: [PREGUNTAS] PRIMARY KEY | UNIQUE

        Cual es la diferencia entre:

              PRIMARY KEY(campos,...) y
              UNIQUE (campos,...)

       - ¿Son sinónimos?
       - Si PRIMARY KEY ya indica una clave (key) única, entonces ¿porqué
	 existe otra clase de clave llamada UNIQUE?
</ProgramListing>

<Para>
Una clave primaria es el campo (o los campos) usado para identificar una
fila. Por ejemplo, el número de identificación fiscal de una persona.
</Para>
<Para>
Una simple combinación única de campos (UNIQUE) no tiene nada que ver con
la identificación de la columna. Es simplemente una restricción de
integridad. Por ejemplo, yo tengo una colección de enlaces. Cada colección
se identifica por medio de un número único, que es la clave primaria. Esta
clave se usa en relaciones.
</Para>
<Para>
Sin embargo, mi aplicación exige que cada colección tenga también un
nombre único. ¿Porqué? Para que un ser humano que quiera modificar una
colección también sea capaz de identificarla. Es mucho mas difícil saber,
si se tienen dos colecciones llamadas "Ciencia de la Vida", que la que
tiene el número 24433 es la que usted necesita y no la que tiene el número
29882.
</Para>
<Para>
De esta forma, el usuario selecciona las colecciones por sus nombres. Por
lo tanto nos aseguramos que los nombres sean únicos dentro de la base de
datos. Sin embargo ninguna otra tabla en la base de datos se refiere a la
tabla de colecciones por su nombre. Eso sería bastante ineficiente.
</Para>
<Para>
¡Aún mas, a pesar de ser único, el nombre de la colección no define
realmente la colección! Por ejemplo, si alguien decidiera cambiar el
nombre de la colección de "Ciencia de la Vida" por "Biología", aún seguiría
siendo la misma colección, solo que con un nombre diferente. Mientras el
nombre sea único no hay problema.
</Para>
<Para>
Resumiendo:

<itemizedlist>
<ListItem>
<Para>
Clave primaria:
<itemizedList Mark="bullet" Spacing="compact">
<ListItem>
<Para>
Usada para identificar la fila y para referirse a ella.
</Para>
</ListItem>
<ListItem>
<Para>
Es imposible (o muy difícil) de actualizar.
</Para>
</ListItem>
<ListItem>
<Para>
No debe aceptar valores NULL.
</Para>
</ListItem>
</itemizedlist>
</para>
</listitem>

<ListItem>
<Para>
Campos "unique":
<itemizedlist Mark="bullet" Spacing="compact">
<ListItem>
<Para>
Se usan como alternativa para acceder una fila.
</Para>
</ListItem>
<ListItem>
<Para>
Pueden ser actualizados siempre y cuando mantengan su valor único.
</Para>
</ListItem>
<ListItem>
<Para>
Aceptan valores NULL.
</Para>
</ListItem>
</itemizedlist>
</para>
</listitem>
</itemizedlist>
</para>

<Para>
En cuanto a la pregunta de ¿por qué no se definen claves no-únicas
explícitamente en la sintaxis estándar de <acronym>SQL</acronym>?
Pues hay que entender que los índices dependen de la implementación
específica. <acronym>SQL</acronym> no define la implementación,
simplemente las relaciones entre los datos y la base de
datos. <productname>Postgres</productname> acepta índices no-únicos, pero
los índices usados como claves <acronym>SQL</acronym> son siempre únicos.
</Para>
<Para>
De esta forma, puede efectuar búsquedas en una tabla por medio de
cualquier combinación de columnas, a pesar de que no tenga un índice en
esas columnas. Los no índices son sino una ayuda que cada implementación
de un <acronym>RDBMS</acronym> le ofrece, para permitir que las búsquedas
usadas frecuentemente sean hechas de una forma más eficiente. Algunos
<acronym>RDBMS</acronym> pueden proporcionarle mecanismos adicionales,
tales como el almacenamiento de una clave en la memoria principal. Esos
mecanismos tendrán una orden especial, por ejemplo
<programlisting>
CREATE MEMSTORE ON &lt;table&gt; COLUMNS &lt;cols&gt;
</programlisting>
(ésta no es ninguna orden real, sino un ejemplo).
</Para>
<Para>
¡De hecho cuando usted crea una clave primaria o una combinación única de
campos, la especificación <acronym>SQL</acronym> no dice en ninguna parte
que sea creado un índice o que la obtención de los datos por medio de la
clave sea más eficiente que una búsqueda secuencial!
</Para>
<Para>
Así que si usted quiere usar como clave secundaria una combinación de
campos que no es única, no tiene que especificar nada - ¡simplemente
comience a obtener datos usando esa combinación! Sin embargo, si quiere
que la obtención de los datos sea más eficiente, tendrá que optar por los
medios que su <acronym>RDBMS</acronym> le proporciona - ya sea un índice,
la orden MEMSTORE que inventé como ejemplo, o un <acronym>RDBMS</acronym>
inteligente que cree índices, sin su conocimiento, basándose en el hecho
de que usted ha efectuado varias búsquedas con la misma combinación
específica de claves... (Aprende con la experiencia).
</Para>
</chapter>

