<Chapter Id="gist">
<DocInfo>
<AuthorGroup>
<Author>
<FirstName>Gene</FirstName>
<Surname>Selkov</Surname>
</Author>
</AuthorGroup>
<Date>Transcribed 1998-02-19</Date>
</DocInfo>
<Title>GiST Indices</Title>

<Para>
La información sobre GIST está en
 <ULink url="http://GiST.CS.Berkeley.EDU:8000/gist/">http://GiST.CS.Berkeley.EDU:8000/gist/</ULink>

con más sobre diferentes esquemas de ordenación e indexado en
<ULink url="http://s2k-ftp.CS.Berkeley.EDU:8000/personal/jmh/">http://s2k-ftp.CS.Berkeley.EDU:8000/personal/jmh/</ULink>

También existe más lectura interesante en el sitio de la base de datos
de Berkely en
<ULink url="http://epoch.cs.berkeley.edu:8000/">http://epoch.cs.berkeley.edu:8000/</ULink>.
</para>

<Para>
<Note>
<Title>Autor</Title>
<Para>
Esta extracción de un e-mail enviado por
<ULink url="mailto:selkovjr@mcs.anl.gov">Eugene Selkov Jr.</ULink>
contiene buena información sobre GiST. Seguramente aprenderemos más en el
futuro y actualizaremos esta información.
- thomas 1998-03-01
</Para>
</Note>
</para>
<Para>
Bueno, no puedo decir que entienda lo que está pasando, pero por lo
menos (casi) he logrado portar los ejemplos GiST a linux. El método
de acceso GiST ya está en el árbol de postfres
(<FileName>src/backend/access/gist</FileName>).
</para>
<Para>
<ULink url="ftp://s2k-ftp.cs.berkeley.edu/pub/gist/pggist/pggist.tgz">Examples at Berkeley</ULink>
vienen con una introducción de los métodos y demuestran mecanismos de índices
espaciales para cajas 2D, polígonos, intervalos enteros y testo 
come with an overview of the methods and demonstrate spatial index 
mechanisms for 2D boxes, polygons, integer intervals and text
(véase también <ULink url="http://gist.cs.berkeley.edu:8000/gist/">GiST at Berkeley</ULink>).
En el ejemplo de la caja, se supone que veremos un aumento en el rendimiento
al utilizar el índice GiST; a mí me funcionó, pero yo no tengo una colección
razonablemente grande de cajas para comprobar. Otros ejemplos también funcionaron,
excepto polígonos: obtuve un error al hacer

<ProgramListing>
test=> create index pix on polytmp
test-> using gist (p:box gist_poly_ops) with (islossy);
ERROR:  cannot open pix

(PostgreSQL 6.3               Sun Feb  1 14:57:30 EST 1998)
</ProgramListing>
</para>
<Para>
No entiendo el sentido de este mensage de error; parece ser algo
que deberíamos preguntar a los desarrolladores (mira también la Nota 4
más abajo). Lo que sugeriría aquí es que alguien de vosotros, gurús de Linux
(linux==gcc?), tomeis las fuentes originales citadas arriba y apliqueis
mi parche (véase el adjunto) y nos dijeseis que pensais sobre esto. Me
parece muy bien a mi, pero no me gustaría mantenerlo mientras que hay tanta
gente competente disponible.

</para>
<Para>
Unas pocas notas en los fuentes:
</para>
<Para>
1. No fui capaz de utilizar el Makefile original (HPUX) y reordenarlo
   con el viejo tutorial de postgres95 para hacerlo funcionar. Intenté
   mantenerlo genérico, pero no soy un escritor de makefiles muy pobre
   --simplemente lo hizo funcionar algún mono. Lo siento, pero creo que
   ahora es un poco más portable que el makefile original.
</para>
<Para>
2. Compilé las fuentes de ejemplo inmediatamente debajo de pgsql/src
   (simplemente extraje el archivo tar allí). El Makefile previamente
   mencionado supone que está un nivel por debajo de pgsql/src (en nuestro
   caso, en pgsql/src/pggist).
</para>
<Para>
3. Los cambios que hice a los ficheros *.c fueron todos sobre #includes's,
   prototipos de funciones y typecasting. Fuera de eso, solamente deseché
   una ristra de variables no utilizadas y añadí un par de parentesis para
   contentar a gcc. Espero que esto no haya enredado las cosas mucho :)
</para>
<Para>
4. Hay un commentario en polyproc.sql:
<ProgramListing>
-- -- there's a memory leak in rtree poly_ops!!
-- -- create index pix2 on polytmp using rtree (p poly_ops);
(-- -- existe una fuga de memoria en el rtree poly_ops!!)
(-- -- crea un índice pix2 en polytmp utilizando rtree (p poly_ops)
</ProgramListing>

   Pensé que podría estar relacionado con un número de versión de
   <ProductName>Postgres</ProductName> 
   anterior e intenté la consulta. Mi sistema se volvió loco y tuve que
   tirar el postmaster en unos diez minutos.
</para>

<Para>
Voy a contunuar mirando dentro de GiST un rato, pero también agradecería
más ejemplos en la utilización de los R-tree.
</para>
</Chapter>
