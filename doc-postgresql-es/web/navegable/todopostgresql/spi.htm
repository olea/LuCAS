<HTML
><HEAD
><TITLE
>Server Programming Interface</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.54"><LINK
REL="HOME"
TITLE="PostgreSQL"
HREF="postgres.htm"><LINK
REL="UP"
TITLE="Guía del Programador"
HREF="part-programmer.htm"><LINK
REL="PREVIOUS"
TITLE="Ejemplos"
HREF="x17962.htm"><LINK
REL="NEXT"
TITLE="SPI_connect"
HREF="spi-spiconnect.htm"></HEAD
><BODY
CLASS="CHAPTER"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>PostgreSQL</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="x17962.htm"
>Anterior</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="spi-spiconnect.htm"
>Siguiente</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="CHAPTER"
><H1
><A
NAME="SPI"
>Capítulo 42. Server Programming Interface</A
></H1
><DIV
CLASS="TOC"
><DL
><DT
><B
>Tabla de contenidos</B
></DT
><DT
><A
HREF="spi.htm#AEN17998"
>Interface Functions</A
></DT
><DT
><A
HREF="x18477.htm"
>Interface Support Functions</A
></DT
><DT
><A
HREF="x19190.htm"
>Memory Management</A
></DT
><DT
><A
HREF="x19212.htm"
>Visibility of Data Changes</A
></DT
><DT
><A
HREF="x19217.htm"
>Examples</A
></DT
></DL
></DIV
><P
>The <I
CLASS="FIRSTTERM"
>Server Programming Interface</I
> 
(<SPAN
CLASS="ACRONYM"
>SPI</SPAN
>) gives users the
ability to run <SPAN
CLASS="ACRONYM"
>SQL</SPAN
> queries inside user-defined 
<SPAN
CLASS="ACRONYM"
>C</SPAN
> functions.
The available Procedural Languages (<SPAN
CLASS="ACRONYM"
>PL</SPAN
>) give an alternate
means to access these capabilities.</P
><P
>In fact, <SPAN
CLASS="ACRONYM"
>SPI</SPAN
> is just a set of native interface functions
to simplify access to the Parser, Planner, Optimizer and Executor. 
<SPAN
CLASS="ACRONYM"
>SPI</SPAN
> also does some memory management.</P
><P
>To avoid misunderstanding we'll use <I
CLASS="FIRSTTERM"
>function</I
> 
to mean <SPAN
CLASS="ACRONYM"
>SPI</SPAN
> interface functions and 
<I
CLASS="FIRSTTERM"
>procedure</I
> for user-defined C-functions 
using <SPAN
CLASS="ACRONYM"
>SPI</SPAN
>.</P
><P
><SPAN
CLASS="ACRONYM"
>SPI</SPAN
> procedures are always called by some (upper) 
Executor and the <SPAN
CLASS="ACRONYM"
>SPI</SPAN
>
manager uses the Executor to run your queries. Other procedures may be
called by the Executor running queries from your procedure.</P
><P
>Note, that if during execution of a query from a procedure the transaction
is aborted then control will not be returned to your procedure. Rather, all work
will be rolled back and the server will wait for the next command from the
client.  This will be changed in future versions.</P
><P
>Other restrictions are the inability to execute BEGIN, END and ABORT
(transaction control statements) and cursor operations.  This will also be
changed in the future.</P
><P
>If successful, <SPAN
CLASS="ACRONYM"
>SPI</SPAN
> functions return a non-negative result (either via
a returned integer value or in SPI_result global variable, as described below).
On error, a negative or NULL result will be returned.</P
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="AEN17998"
>Interface Functions</A
></H1
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="x17962.htm"
>Anterior</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="postgres.htm"
>Inicio</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="spi-spiconnect.htm"
>Siguiente</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Ejemplos</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="part-programmer.htm"
>Subir</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>SPI_connect</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>