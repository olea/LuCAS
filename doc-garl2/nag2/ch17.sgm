<!-- $Id: ch17.sgm,v 1.9 2002/11/03 10:17:42 jjamor Exp $ -->
<!--
Nota legal:

   Linux Network Administration Guide, por Olaf Kirch et al.

   La traducción al español se publica bajo la licencia GFDL,
siendo texto de portada el siguiente:

Linux Network Administrator's Guide
by Olaf Kirch and Terry Dawson
Copyright  (c) 1993 Olaf Kirch
Copyright  (c) 2000 Terry Dawson
Copyright on O'Reilly printed version (c) 2000 O'Reilly & Associates

y siendo secciones invariantes, la sección de Agradecimientos,
la sección titulada «La traducción al español», el apéndice C; así
como esta nota.

Capítulo traducido por:

  César Tapia, tapia@eitig.com
  Natalia Ballesteros, nbhuesca@yahoo.es
Revisión 1 por Francisco Javier Fernández serrador@arrakis.es

-->
<chapter id="X-087-2-mail"><title>Correo Electrónico</title>
<indexterm id="chem.email.1" 
class="startofrange"><primary>email</primary></indexterm>

<para>
El transporte de correo electrónico ha sido uno de los usos más prominentes del trabajo en red  desde que las primeras redes de trabajo se diseñaron. 
Empezó siendo un simple servicio que copiaba un fichero de una máquina a otra, y lo añadía al fichero 
<emphasis>mailbox</emphasis>
(buzón de correo) del destinatario. Básicamente, en esto sigue 
consistiendo
el  correo electrónico (e-mail), aunque el crecimiento continuo de la 
red y, consiguientemente, el aumento de la complejidad de encaminado, ha hecho
necesario un esquema más elaborado.
</para>

<para>
<indexterm><primary>correo multimedia</primary></indexterm>
<indexterm><primary>correo</primary><secondary>multimedia</secondary></indexterm>
<indexterm><primary>RFC-822</primary></indexterm>
Se han diseñado varios estándares de intercambio de correo. Los
anfitriones conectados a Internet cumplen uno recogido en el RFC 822,
complementado en algunos RFCs que describen un método independiente
de la máquina para transferir casi <emphasis>cualquier cosa</emphasis>,
incluso gráficos, ficheros de sonido y conjuntos de caracteres
especiales.<footnote id="X-087-2-FNMA01"><para>
¡Lea el RFC-1437 si no lo cree!</para></footnote>
El CCITT definió otro estándar, el X.400. Todavía se usa en entornos
de grandes corporaciones y gobiernos, pero está siendo retirado
progresivamente.
</para>

<para>
<indexterm><primary>correo electrónico</primary><secondary>sendmail</secondary></indexterm>
<indexterm><primary>sendmail</primary></indexterm>
<indexterm><primary>Allman, Eric</primary></indexterm>
Hay ya una gran cantidad de programas de transporte de correo para
sistemas Unix. Uno de los más conocidos es <command>sendmail</command>,
desarrollado por Eric Allman en la Universidad de California, en 
Berkeley.
Eric Allman ofrece ahora <command>sendmail</command> como un producto 
comercial, pero el programa sigue siendo software libre. 
<command>sendmail</command> se ofrece como el agente de correo estándar 
en algunas distribuciones de GNU/Linux.
Describimos la configuración de <command>sendmail</command> en <xref 
linkend="X-087-2-sendmail">.
</para>

<para>
<indexterm><primary>correo electrónico</primary><secondary>Exim</secondary></indexterm>
<indexterm><primary>Exim</primary></indexterm>
<indexterm><primary>Hazel, Philip</primary></indexterm>
GNU/Linux también usa <command>Exim</command>, escrito por Philip Hazel
de la Universidad de Cambridge. Describimos la configuración de
<command>Exim</command>en <xref linkend="X-087-2-exim">.
</para>

<para>
Comparado con <command>sendmail</command>, <command>Exim</command> es
bastante joven. Para la gran mayoría de los sitios con requerimientos 
de correo electrónico, sus capacidades son muy parecidas.
</para>

<para>
Ambos admiten un conjunto de ficheros de configuración que deben ser
adaptados a cada caso particular. Aparte de la información que se 
necesita para hacer funcionar el subsistema de correo (como puede ser el nombre 
de la computadora local), hay muchos más parámetros que deben ajustarse. El
fichero principal de configuración de <command>sendmail</command> es 
muy difícil de entender al principio. Parece como si un gato se hubiese 
echado una siesta sobre el teclado con la tecla de mayúsculas pulsada. Los
ficheros de configuración de <command>Exim</command> son más 
estructurados
y son más fáciles de entender que los de <command>sendmail</command>, 
pero no ofrecen soporte directo para UUCP y manejan sólo direcciones de 
dominio.
Hoy esto no es una gran limitación como lo era anteriormente; en 
cualquier caso, para la mayoría de los sitios, el trabajo requerido en configurar ambos 
es aproximadamente el mismo.
</para>

<para>
En este capítulo trataremos sobre qué es el correo electrónico y qué 
temas tendrá que abordar usted como administrador del sistema. <xref 
linkend="X-087-2-sendmail"> y <xref linkend="X-087-2-exim"> darán 
instrucciones para poner a punto <command>sendmail</command> y 
<command>Exim</command> por primera vez.
La información que se suministra debe bastar para poner en marcha 
pequeños
anfitriones, pero hay muchas más opciones y usted podrá pasar muchas horas 
felices
frente a su ordenador configurando las características más 
superficiales.
</para>

<para>
Hacia el final de este capítulo nos ocuparemos brevemente de cómo poner 
a
punto <command>elm</command>, un programa para usuario de correo muy 
común
en muchos sistemas Unix, incluyendo GNU/Linux.
</para>

<para>
<indexterm><primary>COMOs</primary><secondary>correo electrónico</secondary></indexterm>
Para más información sobre temas específicos de correo electrónico 
sobre GNU/Linux,
por favor, <indexterm><primary>Aznar, Guylhem</primary></indexterm>
consulte el 'Electronic Mail HOWTO' de Guylhem Aznar,<footnote 
id="X-087-2-FNMA02"><para>
Puede localizar a Guylhem en 
<systemitem role="email">guylhem@danmark.linux.eu.org</systemitem>.
</para></footnote>, que aparece en <systemitem 
role="newsgroup">comp.os.linux.answers</systemitem>
con regularidad. Las distribuciones fuente de <command>elm</command>, 
<command>Exim</command>,
y <command>sendmail</command> contienen también una documentación muy 
extensa que
debe solucionar la mayoría de sus dudas sobre instalación y puesta a 
punto. Si
busca información sobre correo electrónico en general, hay varios RFCs 
que tratan
específicamente este tema. Una lista de ellos se encuentra en la 
bibliografía al final
del libro.
</para>

<sect1 id="X-087-2-mail.message-format"><title>¿Qué es un mensaje de 
correo?</title>
<indexterm><primary>correo</primary><secondary>formato de un mensaje 
de</secondary></indexterm>
<indexterm id="chem.msgs.email" class="startofrange"><primary>mensajes 
de correo</primary></indexterm>

<para>
Un mensaje de correo consta de un cuerpo, que es el texto que
ha escrito el remitente, y datos especiales que especifican el
destinatario o destinatarios, el medio de transporte, etc., de manera
similar a lo que aparece en el sobre de una carta ordinaria.
</para>

<para>
<indexterm><primary>envelope</primary></indexterm>
Estos datos administrativos se clasifican en dos categorías; en la 
primera
categoría están los datos que son específicos del medio de transporte, 
como
son las direcciones del remitente y del destinatario. A esto se le 
llama el
<emphasis>sobre</emphasis> (envelope). Puede ser modificado por el 
software
de transporte a medida que el mensaje se transmite.
</para>

<para>
<indexterm><primary>correo</primary><secondary>cuerpo del mensaje 
de</secondary></indexterm>
<indexterm><primary>correo</primary><secondary>cabeceras del mensaje 
de</secondary></indexterm>
La segunda categoría es cualquier dato necesario para la manipulación 
del mensaje,
que no es propio de ningún mecanismo de transporte, como es la línea 
del
encabezado en la que indicamos el tema del mensaje (Subject), la lista 
de todos
los destinatarios, y la fecha en la que se envió el mensaje. En muchas 
redes,
se ha convertido en un estándar incluir estos datos al comienzo del 
mensaje,
formando lo que se denomina <emphasis>cabecera del mensaje</emphasis> 
(mail header).
Se separa del <emphasis>cuerpo del mensaje</emphasis> (mail body) 
por una línea
en blanco.<footnote id="X-087-2-FNMA03"><para>
Se suele añadir una <emphasis>firma</emphasis> (signature) o 
<filename>.sig</filename>
a un mensaje, que normalmente contiene información sobre el autor, 
junto con un
chiste o cita célebre. Se separa del resto del mensaje con una línea
que contiene &ldquo;<literal>--</literal>&rdquo; seguido por un 
espacio.
</para>
</footnote>
</para>

<indexterm><primary>RFC-822</primary></indexterm>
<para>
La mayoría del software para transporte de correo que se emplea en el 
mundo Unix
usa un formato de cabecera definido en el RFC 822. Su propósito 
original era
especificar un estándar para usar en la ARPANET, pero dado que fue 
diseñado para
ser independiente del entorno de uso, ha sido  adaptado fácilmente a 
otras redes,
incluyendo muchas basadas en UUCP.
</para>

<para>
Pero RFC 822 es sólo el mínimo común denominador. Otros estándares más 
recientes
han sido concebidos para dar respuesta a las crecientes necesidades 
como pueden
ser, por ejemplo, encriptación de datos, soporte de conjuntos de 
caracteres
internacionales, y MIME<indexterm><primary>MIME (Multipurpose Internet 
Mail Extensions,
Extensiones de Correo Multipropósito)</primary></indexterm>
<indexterm><primary>RFC-1341</primary></indexterm>(Multipurpose 
Internet Mail Extensions,
Extensiones de Correo Multipropósito, descritas en el RFC-1341 y otros 
RFCs).
</para>

<para>
En todos esos estándares, la cabecera consiste en varias líneas, 
separadas
por caracteres de retorno de carro. Cada línea consiste en un nombre de 
campo,
que comienza en la columna uno, y el campo en sí, separados por dos 
puntos (:) y
un espacio. El formato y la semántica de cada campo varía dependiendo 
del nombre
del mismo. Un campo de al cabecera se puede continuar más allá de una 
línea, si
la línea siguiente comienza con un carácter de espacio, como puede ser 
un
tabulador. Los campos pueden aparecer en cualquier orden.
</para>

<para>
Una cabecera de correo típico puede ser algo así:

<screen>
Return-Path: &lt;ph10@cus.cam.ac.uk&gt;
Received: ursa.cus.cam.ac.uk (cusexim@ursa.cus.cam.ac.uk [131.111.8.6])
    by al.animats.net (8.9.3/8.9.3/Debian 8.9.3-6) with ESMTP id 
WAA04654
    for &lt;terry@animats.net&gt;; Sun, 30 Jan 2000 22:30:01 +1100
Received: from ph10 (helo=localhost) by ursa.cus.cam.ac.uk with 
local-smtp
    (Exim 3.13 #1) id 12EsYC-0001eF-00; Sun, 30 Jan 2000 11:29:52 +0000
Date: Sun, 30 Jan 2000 11:29:52 +0000 (GMT)
From: Philip Hazel &lt;ph10@cus.cam.ac.uk&gt;
Reply-To: Philip Hazel &lt;ph10@cus.cam.ac.uk&gt;
To: Terry Dawson &lt;terry@animats.net&gt;, Andy Oram 
&lt;andyo@oreilly.com&gt;
Subject: Electronic mail chapter
In-Reply-To: &lt;38921283.A58948F2@animats.net&gt;
Message-ID: 
&lt;Pine.SOL.3.96.1000130111515.5800A-200000@ursa.cus.cam.ac.uk&gt;
</screen>
</para>

<para>
Usualmente, todos los campos de la cabecera necesarios son generados 
por el interfaz de correo que usted use, como <command>elm</command>, 
<command>pine</command>, <command>mush</command>, o <command>mailx</command>. 
Algunos, sin embargo, son opcionales y pueden ser añadidos por el usuario. 
<command>elm</command>, por ejemplo, permite editar parte del encabezado 
del mensaje. Otros campos son añadidos por el software de transporte 
de correo. Si usted mira el fichero donde se almacena el correo local, 
puede ver que cada mensaje está precedido
por una línea &ldquo;From&rdquo; (nota: sin dos puntos). Esta 
<emphasis>no</emphasis> es una cabecera RFC-822; ha sido insertada por 
su software de correo para facilitar la lectura a los programas que usen 
ese fichero. Para prevenir potenciales problemas con las líneas del cuerpo 
del mensaje que también empiecen por &ldquo;From,&rdquo; se ha convertido 
en un procedimiento estándar evitar estas ocurrencias poniendo antes un 
carácter &gt;.
</para>

<para>
Esta lista es una colección de cabeceras de campos comunes, y sus 
significados:

<indexterm><primary>correo</primary><secondary>cabeceras mensaje 
de</secondary></indexterm>
<variablelist>
<varlistentry>
<term><literal>From:</literal></term>
<listitem><para>
Contiene la dirección de correo electrónico del remitente, y
posiblemente el &ldquo;nombre real&rdquo;. Aquí se usa un zoológico
completo de formatos distintos.
</para></listitem>
</varlistentry>

<varlistentry>
<term><literal>To:</literal></term>
<listitem><para>
Esta es la dirección de e-mail del destinatario. Si hay varias 
direcciones
se separan por comas.
</para></listitem>
</varlistentry>

<varlistentry>
<term><literal>Cc:</literal></term>
<listitem><para>
Esta es una lista de las direcciones de correo que recibirán una 
&ldquo;copia de
carbón&rdquo; del mensaje. Si hay varias direcciones, se separan por 
comas.
</para></listitem>
</varlistentry>

<varlistentry>
<term><literal>Bcc:</literal></term>
<listitem><para>
Esta es una lista de las direcciones de correo que recibirán una 
&ldquo;copia de
carbón ciega&rdquo; del mensaje. La diferencia principal entre 
&ldquo;Cc:&rdquo; y
&ldquo;Bcc:&rdquo; es que las direcciones listadas en el 
&ldquo;Bcc:&rdquo;
no aparecerán en la cabecera del mensaje que se envía a cada 
destinatario. Es una
forma de avisar a los destinatarios de que usted ha enviado copias del 
mensaje
a otras personas, sin decir quiénes son. Si hay varias direcciones, se 
separan
por comas.
</para></listitem>
</varlistentry>

<varlistentry>
<term><literal>Subject:</literal></term>
<listitem><para>
Describe el contenido del mensaje en pocas palabras.
</para></listitem>
</varlistentry>

<varlistentry>
<term><literal>Date:</literal></term>
<listitem><para>
Indica la fecha y hora en que se envió el mensaje.
</para></listitem>
</varlistentry>

<varlistentry>
<term><literal>Reply-To:</literal></term>
<listitem><para>
Especifica la dirección a la que el remitente desea que el destinatario 
le conteste. Esto puede ser útil si se tienen varias direcciones, pero se 
desea recibir la mayor parte del correo sólo en aquella que se usa más a 
menudo. Este campo es opcional.
</para></listitem>
</varlistentry>

<varlistentry>
<term><literal>Organization:</literal></term>
<listitem><para>
La organización que posee la máquina desde la que se ha enviado el 
mensaje. Si la máquina usada es la suya propia no incluya este campo, o bien 
indique &ldquo;privado&rdquo; o cualquier trivialidad sin sentido. Este campo
no está descrito en ningún RFC y es completamente opcional. Algunos 
programas de correo lo soportan directamente, pero la mayoría no.
</para></listitem>
</varlistentry>

<varlistentry>
<term><literal>Message-ID:</literal></term>
<listitem><para>
Una cadena generada por el transporte de correo en el sistema 
remitente. Es única para cada mensaje.
</para></listitem>
</varlistentry>

<varlistentry>
<term><literal>Received:</literal></term>
<listitem><para>
Cada anfitrión que procesa su correo (incluyendo las máquinas del remitente
y el destinatario) insertan este campo en el encabezado, dando el 
nombre del anfitrión, una identificación de mensaje, hora y fecha a la que lo
recibieron, de qué anfitrión procede, y qué software de transporte ha
sido usado. Esto se hace así para que usted pueda conocer la ruta que
su mensaje ha seguido, y pueda protestar a la persona responsable si
algo ha ido mal.
</para></listitem>
</varlistentry>

<varlistentry>
<term><literal>X-</literal><replaceable>cualquier-cosa:</replaceable></term>
<listitem><para>
Ningún programa relacionado con el correo debe protestar sobre 
cualquier encabezado que comience con <literal>X-</literal>. Esto se usa para
implementar características adicionales que aún no han sido incluidas 
en un RFC, o que no lo serán nunca. Por ejemplo, existió un gran servidor 
de listas de correo de GNU/Linux que permitía especificar a qué canal quería 
que fuera su mensaje incluyendo la cadena <userinput>X-Mn-Key:</userinput> seguido 
del nombre del canal.
</para></listitem>
</varlistentry>
</variablelist>
</para>

<indexterm class="endofrange" startref="chem.msgs.email"> 
</sect1>

<sect1 id="X-087-2-mail.delivery"><title>¿Cómo se reparte el 
correo?</title>

<indexterm><primary>correo</primary><secondary>composición 
del</secondary></indexterm>
<indexterm><primary>correo</primary><secondary>reparto 
de</secondary></indexterm>
<indexterm><primary>reparto</primary><secondary>de 
correo</secondary></indexterm>
<indexterm><primary>intercambio</primary><secondary>de 
correo</secondary></indexterm>
<indexterm><primary>/usr/sbin/sendmail</primary></indexterm>

<para>
<indexterm><primary>agente de usuario del correo 
(MUA)</primary></indexterm>
<indexterm><primary>agente de transporte del correo 
(MTA)</primary></indexterm>
Generalmente, usted escribirá su correo usando un interfaz de correo 
como <command>mail</command> o <command>mailx</command> u otros más 
sofisticados como <command>mutt</command>, <command>tkrat</command>,
o <command>pine</command>. Estos programas se denominan 
<emphasis>agentes de usuario de correo</emphasis> (mail 
user agents), o MUAs para abreviar. 
Si usted envía un mensaje de correo, el programa interfaz en la mayoría 
de los casos se lo pasara a otro programa para que lo transmita. Este programa 
se denomina <emphasis>agente de transporte de correo</emphasis> (mail 
transport agent), o MTA. En la mayoría de los sistemas se usa el mismo MTA tanto 
para el reparto local como remoto, y normalmente se invoca como
<command>/usr/sbin/sendmail</command> o, en algunos sistemas que no 
cumplen la norma FSSTND, <command>/usr/lib/sendmail</command>. En sistemas UUCP no 
es raro ver que el correo se reparte por dos programas distintos: 
<command>rmail</command> para el envío remoto de correo, y <command>lmail</command> para el 
reparto local.
</para>

<para>
<indexterm><primary>correo</primary><secondary>devolución 
del</secondary></indexterm>
<indexterm><primary>correo devuelto</primary></indexterm>
Un envío local de correo es, por supuesto, algo más que añadir el 
mensaje al
buzón del destinatario. Usualmente el MTA local entenderá como usar 
alias (definir direcciones locales de destinatarios que dirigen a otras 
direcciones) y como usar redirecciones (dirigir el correo de un usuario a otra 
dirección).
Además, los mensajes que no pudieron ser enviados deben ser normalmente
<emphasis>devueltos</emphasis>(bounced) al remitente junto con algún 
mensaje de error.
</para>

<para>
<indexterm><primary>SMTP (Protocolo Simple de Trasferencia de 
Correo)</primary></indexterm>
<indexterm><primary>protocolos</primary><secondary>SMTP</secondary></indexterm>
Para envíos lejanos, el software de transporte usado depende del tipo 
de enlace.
Si el correo debe enviarse a través de una red que usa TCP/IP, se usará 
normalmente <emphasis>Protocolo Simple de Trasferencia de Correo</emphasis> (SMTP), 
que se define en el RFC 821. SMTP se diseñó para repartir
<indexterm><primary>RFC-821</primary></indexterm> correo directamente 
en la máquina de un destinatario, negociando la transferencia del mensaje con el demonio 
SMTP del lado remoto. Hoy es práctica común de las organizaciones establecer máquinas 
especiales que aceptan todo el correo para destinatarios de la organización, y estos 
anfitriones se encargan de controlar el reparto apropiado a los destinos adecuados.
</para>

<para>
<indexterm><primary>ejecución</primary><secondary>remota</secondary></indexterm>
<indexterm><primary>UUCP</primary><secondary>correo</secondary></indexterm>
<indexterm><primary>correo</primary><secondary>sobre 
UUCP</secondary></indexterm>
En redes tipo UUCP, el correo no suele ser enviado directamente, sino 
que es redirigido hasta su destino a través de un conjunto de máquinas intermedias. Para 
enviar un mensaje a través de un enlace UUCP, el MTA remitente ejecutará usualmente 
<command>rmail</command> en la máquina intermedia usando <command>uux</command>, y 
suministrándole el mensaje en la entrada estándar.
</para>

<para>
<indexterm><primary>programa bsmtp</primary></indexterm>
<indexterm><primary>SMTP (Protocolo Simple de Trasferencia de 
Correo)</primary><secondary>por lotes</secondary></indexterm>
<indexterm><primary>correo</primary><secondary>por 
lotes</secondary></indexterm>
<indexterm><primary>rsmtp</primary><secondary>programa</secondary></indexterm>
Desde que se llama a <command>uux</command> separadamente para cada 
mensaje, puede producirse una carga considerable en un anfitrión procesador de 
correo, además de inundar las colas UUCP con cientos de pequeños mensajes que ocupan 
una cantidad de disco desproporcionada.<footnote id="X-087-2-FNMA04"><para>
Esto es así porque el espacio de disco se asigna usualmente en bloques 
de 1024 Bytes. Incluso un mensaje de unas docenas de Bytes ocupara 1 Kb 
completo.
</para>
</footnote> Por esto algunos MTAs permiten recopilar varios mensajes de 
un sistema remoto en un único lote. El fichero de lotes contiene los comandos SMTP 
que el anfitrión local ejecutaría normalmente si usara una conexión SMTP directa. A esto 
se le llama BSMTP, o <emphasis>batched</emphasis> SMTP (SMTP por lotes). El lote se
suministra a los programas <command>rsmtp</command> o <command>bsmtp</command> en 
el sistema remoto, que procesará la entrada como si se hubiera dado una conexión 
SMTP normal.
</para>

</sect1>

<sect1 id="X-087-2-mail.address"><title>Direcciones de correo electrónico</title>
<indexterm id="idx-mailaddressformats-1" 
class="startofrange"><primary>correo electrónico</primary><secondary>formatos de la dirección</secondary></indexterm>
<indexterm id="idx-addressmail-1" 
class="startofrange"><primary>direcciones</primary><secondary>correo electrónico</secondary></indexterm>

<para>
Las direcciones de correo electrónico constan de dos partes: la primera es el nombre de un
<emphasis>dominio de correo</emphasis> encargada de traducir la información, o bien al anfitrión 
del receptor o a cualquiera que acepte correo de su parte. La segunda es la identificación exclusiva 
del usuario que puede ser tanto el nombre que le permite el acceso al sistema, como el nombre del usuario 
en formato &ldquo;nombre.apellido&rdquo; , o un alias que se transmitirá a un usuario o a la lista de usuarios. 
Otros formatos de dirección de correo como el X.400 utilizan otra serie de &ldquo;atributos&rdquo;  que 
sirven para localizar al sistema anfitrión del receptor en el directorio del servidor X.400.
</para>

<para>
La interpretación de las direcciones de correo electrónico depende en gran medida del tipo de red de la que usted disponga. A
hora nos centraremos en cómo los protocolos TCP/IP y UUCP interpretan las direcciones de correo electrónico.
</para>

<sect2 id="X-087-2-mail.address.rfc822"><title>RFC-822</title>
<para>
<indexterm><primary>RFC-822</primary></indexterm> 
<indexterm><primary>dirección de correo completa</primary></indexterm> 
Los sitios de Internet están ligados al estándar RFC-822, que requiere la conocida notación <systemitem
role="emailaddr">usuario@anfitrión.dominio</systemitem>para el cual <systemitem
role="emailaddr">anfitrión.dominio</systemitem> es el nombre de dominio más adecuado para el anfitrión. 
El símbolo que separa ambas partes recibe el nombre de &ldquo;arroba&rdquo; en inglés &ldquo;at.&rdquo; 
Esta nomenclatura no especifica la ruta al sistema anfitrión. Otros mecanismos que trataremos en breve 
son los encargados del encaminamiento de los mensajes.
</para>

<para>
Al ejecutar un sitio en Internet encontrarás muchos RFC-822.
EL estándar RFC-822 no es exclusivo del correo, ya que se ha extendido a otros servicios como los grupos de noticias. Ahora veremos el uso de RFC-822 en los grupos de noticias.
<xref linkend="X-087-2-news">.
</para>

</sect2>

<sect2 id="X-087-2-mail.address.obsolete"><title>Formatos de dirección de correo obsoletos</title>
<para>
<indexterm><primary>¡! (en las direcciones de correo)</primary></indexterm> 
<indexterm><primary>el signo de exclamación (en direcciones de correo)</primary></indexterm> 
<indexterm><primary>correo electrónico</primary><secondary>notación bang path</secondary></indexterm>
<indexterm><primary>direcciones</primary><secondary>bang 
path</secondary></indexterm>
En el entorno original UUCP la forma corriente era
<systemitem role="emailaddr">ruta!anfitrión!usuario</systemitem>, para el cual 
<systemitem role="emailaddr">la ruta</systemitem> indicaba una secuencia de anfitriones por los que el mensaje tenía que pasar antes de llegar a su
<systemitem role="emailaddr">anfitrión</systemitem> de destino. Este modelo recibe el nombre de notación <emphasis>bang path</emphasis>, porque en 
inglés coloquial, la exclamación se conoce con el nombre &ldquo;bang.&rdquo; Actualmente, muchas de las redes basadas en UUCP han adoptado el 
formato RFC-822 y aceptan las direcciones de correo basadas en el dominio.
</para>

<para>
<indexterm><primary>RFC-822</primary></indexterm> 
Hay redes que usan otros sistemas de dirección. Por ejemplo, las basadas en DECnet, usan los dos puntos (:) como elemento separador de sus partes, resultando la dirección <systemitem
role="emailaddr">anfitrión::usuario</systemitem>.<footnote
id="X-087-2-FNMA05"><para> Si desea acceder a una dirección DEC desde el entorno RFC-822, puede hacerlo de la siguiente manera <systemitem
role="emailaddr">&ldquo;anfitrión::usuario@relay</systemitem>, siendo <systemitem role="emailaddr">relay</systemitem> el nombre de un repetidor DEC conocido.
</para>
</footnote>
El estándar X.400 utiliza un estilo totalmente diferente, describiendo al receptor por medio de pares de atributos como país y organización a la que éste pertenece.  
</para>

<para>
En último lugar, está FidoNet, en donde cada usuario se identifica con un código como <systemitem
role="sitename">2:320/204.9</systemitem>, que consiste en cuatro números que indican la zona donde se encuentra (el 2 es para Europa), la red (el 320 se refiere a París y los alrededores),
el anfitrión (distribuidor local), y el punto de conexión (el ordenador del usuario). Se puede trabajar con direcciones Fidonet en RFC-822; la anterior, por ejemplo, se escribiría de la 
siguiente manera <systemitem 
role="emailaddr">Thomas.Quinot@p9.f204.n320.z2.fidonet.org</systemitem>. No dijimos que los nombres de dominio eran fáciles de recordar? 
</para>

</sect2>

<sect2 id="X-087-2-mail.address.mixing"><title>Cómo combinar distintos formatos de correo electrónico </title>
<para>
Cuando a un conjunto de sistemas le sumamos gente inteligente, lo normal es que se intente buscar maneras para poder conectarse entre sí y trabajar en red. Por consiguiente, 
existen distintas pasarelas de correo que vinculan dos sistemas diferentes, de forma que el correo pueda ser transmitido de uno a otro. El problema más crítico a la hora de 
interconectar dos sistemas es el referente a las direcciones de correo. No vamos a centrarnos en las pasarelas de correo en sí mismas, sino que repasaremos algunas de las 
complicaciones referidas al correo que pueden surgir al usarlas.
</para>

<para>
<indexterm><primary>el signo &amp; (en las direcciones de correo)</primary></indexterm> 
<indexterm><primary>&amp; (en  las direcciones de correo)</primary></indexterm> 
<indexterm><primary>direcciones</primary><secondary>híbridas</secondary></indexterm>
Imagine que queremos trabajar con la notación bang-path de UUCP y RFC-822. No son dos formatos fáciles de combinar. Supongamos que tenemos la 
siguiente dirección <systemitem role="emailaddr">dominioA!usuario@dominioB </systemitem>. No está claro si el símbolo <systemitem role="emailaddr">@</systemitem>
tiene prioridad sobre la ruta, o viceversa: entonces, ¿tendríamos que mandar el mensaje a <systemitem role="emailaddr">dominioB</systemitem>,
que lo enviaría a <systemitem role="emailaddr">dominioA!usuario</systemitem>, o por el contrario deberíamos hacerlo a  
<systemitem role="emailaddr">dominioA</systemitem>, que lo dirigiría a <systemitem role="emailaddr">usuario@dominioB</systemitem>&thinsp;?
</para>

<para>
<indexterm><primary>direcciones híbridas</primary></indexterm> 
Aquellas direcciones formadas por distintos proveedores de correo se llaman <emphasis>direcciones híbridas</emphasis>. 
El tipo más común, que es el que acabamos de ilustrar, normalmente se resuelve dando prioridad al símbolo <systemitem
role="emailaddr">@</systemitem> sobre la ruta. Esto significaría enviar primero el mensaje a <systemitem
role="emailaddr">dominioB</systemitem> en <systemitem role="emailaddr">dominioA!usuario@dominioB</systemitem>
</para>

<para>
<indexterm><primary>dirección de correo encaminada desde la fuente</primary></indexterm>
Sin embargo, hay una manera de especificar las ruta en RFC-822:
<systemitem 
role="emailaddr">&lt;@dominioA,@dominioB:usuario@dominioC&thinsp;&gt;
</systemitem> indica la dirección del<systemitem role="emailaddr">usuario
</systemitem> en el
<systemitem role="emailaddr">dominioC</systemitem>, donde llegamos al
<systemitem role="emailaddr">dominioC</systemitem>pasando por
<systemitem role="emailaddr">dominioA</systemitem> y
<systemitem role="emailaddr">dominioB</systemitem> (en ese orden). Este tipo de dirección se llama con frecuencia dirección<emphasis>encaminada desde la fuente</emphasis> 
Tampoco es bueno basarse exclusivamente en este sistema, ya que un posterior repaso al estándar RFC en su apartado de la descripción del encaminamiento del correo,
recomienda que se intente enviar el correo directamente a su destino remoto en lugar de hacerlo por medio de la fuente.
</para>	

<para>
<indexterm><primary>% (en direcciones de correo electrónico)</primary></indexterm> 
<indexterm><primary>el símbolo de porcentaje (en direcciones de correo electrónico)</primary></indexterm> 
<indexterm><primary>Ye Olde ARPAnet kludge</primary></indexterm>
Existe además el <systemitem role="emailaddr">%</systemitem> proveedor de correo<systemitem
role="emailaddr">usuario&thinsp;%dominioB@dominioA</systemitem> que lo envía primero a 
<systemitem role="emailaddr">dominioA</systemitem>, y transforma el símbolo de porcentaje más indicado (que en este caso es el único) a un símbolo arroba<systemitem
role="emailaddr">@</systemitem> sign. La direccion en este caso es <systemitem
role="userid">usuario@dominioB</systemitem>, y el mensajero dirige su mensaje a <systemitem
role="emailaddr">dominioB</systemitem>, el cual lo envía al
<systemitem role="emailaddr">usuario</systemitem>. A este tipo de dirección la solemos llamar &ldquo;Ye Olde ARPAnet Kludge,&rdquo; y su uso no es alentador. 
</para>

<para>
El uso de estos tipos distintos de direccionamiento puede tener sus repercusiones, las cuales veremos en las secciones siguientes. 
En un entorno RFC-822 no se deberá usar otra dirección que no sea una absoluta como <systemitem role="emailaddr">usuario@anfitrión.dominio</systemitem>.
</para>

</sect2>

<indexterm class="endofrange" startref="idx-mailaddressformats-1">
<indexterm class="endofrange" startref="idx-addressmail-1">

</sect1>

<sect1 id="X-087-2-mail.routing"><title>¿Cómo funciona el encaminamiento del correo?</title>
<indexterm id="idx-mailrouting-1" 
class="startofrange"><primary>correo electrónico</primary><secondary>encaminamiento</secondary></indexterm>

<para>
Conocemos como <emphasis>encaminamiento</emphasis>el proceso de dirigir un mensaje al sistema anfitrión del receptor. Aparte de localizar una ruta desde el sitio del emisor hasta el de 
destino, la elección de rutas implica la detección de errores e incluso la optimización de la velocidad y el coste. 
</para>

<para>
Hay una gran diferencia entre la elección de rutas por parte de un sitio UUCP y un sitio de Internet. En Internet, la función principal a la hora de dirigir los datos al anfitrión 
del receptor (cuando el protocolo IP lo conoce), la realiza la capa de red IP, mientras que en el entorno UUCP, la ruta tiene que ser provista por el usuario o generado por el 
agente de transmisión de correo.

</para>

<sect2 id="X-087-2-mail.routing.internet"><title>Encaminamiento en Internet</title>
<indexterm><primary>correo electrónico</primary><secondary>encaminamiento</secondary><tertiary>en Internet</tertiary></indexterm>
<indexterm><primary>correo electrónico</primary><secondary>encaminamiento basado en el dominio</secondary></indexterm>
<indexterm><primary>correo electrónico</primary><secondary>centralización</secondary></indexterm>
<indexterm><primary>Cómo manejar correo centralizado</primary></indexterm>
<indexterm><primary>Internet</primary><secondary>encaminamiento del correo electrónico </secondary></indexterm>
<indexterm><primary>Mail Exchanger (registro DNS)</primary></indexterm>
<indexterm><primary>MX (registro DNS)</primary></indexterm>
<indexterm><primary>correo electrónico</primary><secondary>pasarelas de correo </secondary></indexterm>
<indexterm><primary>pasarelas de correo</primary><secondary>correo electrónico </secondary></indexterm>

<para>
La configuración del sistema anfitrión del destinatario determina si se está trabajando con un determinado sistema 
de localización de la ruta de correo en Internet. La opción predeterminada es transmitir el mensaje a su destino 
determinando primero el anfitrión al que debe ser enviado, y mandándolo allí directamente.
<indexterm><primary>correo electrónico</primary><secondary>elección de la ruta</secondary><tertiary>
entre Internet y UUCP</tertiary></indexterm> 
La mayoría de los sitios de Internet  buscan dirigir todo el correo entrante a un servidor de correo con alta disponibilidad capaz de manejar todo el tráfico y distribuirlo localmente. 
Para dar a conocer este servicio, el sitio publica el llamado registro MX para su dominio local en su base de datos DNS. MX (Mail Exchanger) significa <emphasis>Intercambiador de Correo</emphasis> 
y básicamente indica que el anfitrión del servidor es capaz de convertirse en emisor de correo para todas las direcciones del dominio. Los registros MX también pueden manejar el tráfico de 
anfitriones que no están conectados a la red, como UCCP o FidoNet, que necesitan una pasarela de correo.
</para>

<para>
Los registros MX siempre tienen siempre asignada una <emphasis>preferencia</emphasis> Esto es positivo. Si son muchos los proveedores de correo existentes (MX) para un anfitrión, 
el agente de transporte de correo tratará de enviar el mensaje al proveedor cuya preferencia sea la menor. Sólo si esta operación falla, lo enviará a un anfitrión de mayor índice 
de preferencia. Si el anfitrión local es el proveedor de correo para la dirección de destino, puede enviar los mensajes a un anfitrión menos preferente que él mismo; ésta es una 
manera segura de evitar los bucles en el correo. Si no hay ningún registro MX para un determinado dominio, o no es disponible, el agente de transporte de correo puede comprobar 
si la dirección IP del dominio está asociada a él, y así intentar mandarlo directamente a ese anfitrión.
</para>

<para>
Supongamos que hay una organización dada, por ejemplo Foobar, Inc., que quiere  que todo su correo lo controle el <systemitem 
role="sitename">servidor de correo</systemitem>de su ordenador.
Por ello llevará registros MX como el que se muestra a continuación, en la base de datos DNS:
<screen>
green.foobar.com.        IN   MX      5    mailhub.foobar.com.
</screen>
</para>

<para>
Esto da a conocer a <systemitem role="sitename">mailhub.foobar.com</systemitem> como proveedor de correo para <systemitem 
role="sitename">green.foobar.com</systemitem>con un nivel de preferencia de 5. Un anfitrión que pretenda enviar un mensaje a
<systemitem role="emailaddr">joe@green.foobar.com</systemitem> revisa la base de datos DNS y busca el MX en el
<systemitem role="sitename">distribuidor de correo </systemitem>. Si no hay ningún MX con una preferencia menor a 5, el 
mensaje se envía al <systemitem role="sitename">distribuidor de correo</systemitem>, que lo entrega a <systemitem role="sitename">green</systemitem>.
</para>

<para>
<indexterm><primary>RFC-974</primary></indexterm>
<indexterm><primary>RFC-821</primary></indexterm>
<indexterm><primary>RFC-1123</primary></indexterm>
Ésta es una descripción muy básica de cómo funcionan los registros MX. Para obtener más información sobre el encaminamiento de correo en Internet, consulte RFC-821, RFC-974 y RFC-1123.
</para>

</sect2>

<sect2 id="X-087-2-mail.routing.uucp"><title>Encaminamiento en el entorno UUCP </title>
<indexterm><primary>correo electrónico</primary><secondary>encaminamiento</secondary><tertiary>redes UUCP </tertiary></indexterm>
<indexterm><primary>correo electrónico</primary><secondary>notación bang path 
</secondary></indexterm>
<indexterm><primary>direcciones</primary><secondary>bang path</secondary></indexterm>
<indexterm><primary>encaminamiente en </primary><secondary>UUCP</secondary></indexterm>

<para>
El encaminamiento del correo en las redes UUCP es mucho más complicado que en Internet porque sus programas no realizan el encaminamiento ellos mismos. 
Antes, todo el correo debía ser dirigido mediante las rutas bang path. Éstas especificaban una lista de sistemas anfitriones separados por signos de 
exclamación y seguidos por el nombre del usuario, por los que el correo debía pasar. Por ejemplo, para escribir a un usuario llamado Janet que se encuentra en un ordenador llamado
<systemitem role="sitename">moria</systemitem>, usuaríamos la ruta
<systemitem role="emailaddr">eek!swim!moria!janet</systemitem>.De esta manera el mensaje se enviaría desde su sistema anfitrión a 
<systemitem role="sitename">eek</systemitem>,desde aquí a 
<systemitem role="sitename">swim</systemitem>, y por último lugar a 
<systemitem role="sitename">moria</systemitem>.
</para>

<para>
El inconveniente obvio de este sistema es que es necesario que el usuario recuerde muchos más datos sobre topología de red que la que Internet requiere. 
Y mucho peor son los cambios de la topología como los enlaces eliminados o anfitriones que desaparecen &mdash;&mdash; que produce fallos en los mensajes 
al no ser el usuario consciente de estos cambios. Y por último, si usted cambia de sitio o se traslada, probablemente deberá actualizar estas rutas.
</para>

<para>
<indexterm><primary>nombre de anfitrión</primary><secondary>ambiguo</secondary></indexterm>
Una razón por la que el encaminamiento desde la fuente se hizo necesario fue la presencia de nombres de anfitrión ambiguos. Por ejemplo, imaginemos que hay dos sitios llamados 
<systemitem role="sitename">moria</systemitem>, uno en los Estados Unidos y otro en Francia.  ¿A cuál de los dos se referiría
<systemitem role="emailaddr">moria!janet</systemitem> ahora?
El problema quedaría solucionado especificando una ruta concreta para acceder a 
<systemitem role="sitename">moria</systemitem>
</para>

<para>
<indexterm><primary>UUCP</primary><secondary>Mapping Project</secondary></indexterm>
<indexterm><primary>correo electrónico </primary><secondary>mapas </secondary></indexterm>
<indexterm><primary>Usenet</primary><secondary>mapas</secondary></indexterm>
<indexterm><primary>mapas, Usenet</primary></indexterm>
El primer paso para evitar la ambigüedad con los nombres de anfitrión fue el proyecto de mapeado UUCP. Se encuentra en la Universidad de Rutgers y registra de manera oficial 
todos los nombres de anfitrión, junto con información sobre otros sistemas UUCP y su situación geográfica, procurando que no se repita ninguno. 
Esta información en manos del proyecto de mapeado UUCP, se publica bajo el nombre 
<emphasis>Mapas Usenet</emphasis> , y son distribuidos regularmente a través de Usenet. El formato típico de entrada a un mapa (eliminados ya los comentarios) es de la siguiente manera:<footnote 
id="X-087-2-FNMA06"><para>
<?troff .hw networks>
Los mapas para los sitios registrados en el proyecto de mapeado UUCP se distribuyen a través del grupo de noticias <systemitem 
role="newsgroup">comp.mail.maps</systemitem>&thinsp;;
otras organizaciones pueden publicar distintos mapas para sus redes. 
</para>
</footnote>

<screen>
moria
        bert(DAILY/2),
        swim(WEEKLY)
</screen>
</para>

<para>
Esta entrada indica que <systemitem role="sitename">moria</systemitem> está vinculado a 
<systemitem role="sitename">bert</systemitem>, al cual llama dos veces al día, y a <systemitem role="sitename">swim</systemitem>, 
al cual llama semanalmente. Explicaremos con más detalle lo referente al formato de fichero de mapas.
</para>

<para>
<indexterm><primary>correo electrónico </primary><secondary>fichero de rutas </secondary></indexterm>
<indexterm><primary>base de datos ruta-alias</primary></indexterm>
<indexterm><primary>fichero de rutas </primary></indexterm>
Con la información sobre la conectividad que obtenemos de los mapas, podemos generar la totalidad de rutas existentes entre su sistema 
anfitrión y cualquier sitio. Esta información se encuentra en el fichero de
<filename>rutas</filename>, también conocido como <emphasis>base ruta-alias</emphasis>. Supongamos que los mapas indican que usted puede ponerse en contacto con
<systemitem role="sitename">bert</systemitem> a través de<systemitem
role="sitename">ernie</systemitem>; una entrada en forma de alias de ruta para <systemitem
role="sitename">moria</systemitem> generado del retazo del mapa anterior podría ser de la siguiente manera:
 <screen>
moria           ernie!bert!moria!%s
</screen>
</para>

<para>
Si usted propone la dirección
<systemitem role="emailaddr">janet@moria.uucp</systemitem>, el MTA seguirá la ruta anterior y enviará el mensaje a, 
<systemitem role="sitename">ernie</systemitem> con la dirección<systemitem role="emailaddr">bert!moria!janet</systemitem>.
</para>

<para>
<indexterm><primary>correo electrónico </primary><secondary>encaminamiento </secondary><tertiary>anfitrión inteligente </tertiary></indexterm>
<indexterm><primary>correo electrónico </primary><secondary>la ruta predeterminada </secondary></indexterm>
<indexterm><primary>ruta de correo electrónico predeterminada</primary></indexterm>
<indexterm><primary>encaminamiento por anfitrión inteligente</primary></indexterm>
<indexterm><primary>encaminamiento </primary><secondary>anfitrión inteligente </secondary></indexterm>
<indexterm><primary>leaf sites</primary></indexterm>
<indexterm><primary>sitios</primary><secondary>hoja</secondary></indexterm>
No obstante, crear un fichero de <filename>rutas</filename> a partir de los mapas Usenet no es buena idea. 
La información que contienen suele estar distorsionada, y también es posible que no esté actualizada. 
Es por ello que sólo un determinado número de anfitriones utilizan los mapas UUCP completos para crear sus ficheros de
<filename>rutas</filename>. Muchos sitios mantienen la información de ruta sólo para sitios que se encuentran en su entorno, 
y envían cualquier mensaje a los sitios que no están presentes en su base de datos a anfitriones más inteligentes con información 
de ruta más completa. Este esquema se llama <emphasis>encaminamiento por anfitrión inteligente</emphasis>. Los anfitriones que tienen 
sólo un vínculo de correo UUCP (los llamados <emphasis>leaf sites</emphasis>), no pueden realizar el encaminamiento por su cuenta, 
deben dejar esa labor a un anfitrión inteligente.
</para>

</sect2>

<sect2><title>Mezclar UUCP y RFC-822</title>
<indexterm><primary>correo electrónico</primary><secondary>centralizado</secondary></indexterm>
<indexterm><primary>cómo manejar correo centralizado </primary></indexterm>
<indexterm><primary>correo electrónico </primary><secondary>encaminamiento </secondary><tertiary>basado en el dominio </tertiary></indexterm>
<indexterm><primary>dominios</primary><secondary>encaminamiento de correo</secondary></indexterm>
<para>
La mejor manera de evitar los problemas referentes al encaminamiento del correo en las redes UUCP es adoptar el sistema de nombre de dominio de dichas redes. 
Por supuesto, usted no puede cuestionar un servidor de nombres de UUCP. Sin embargo, muchos sitios UUCP han creado pequeños dominios que coordinan su 
encaminamiento internamente. En los mapas, estos dominios anuncian uno o dos anfitriones en forma de pasarela de correo propio de tal forma que no tiene 
que existir un indicador de entrada al mapa para cada anfitrión en el dominio. Las pasarelas de correo controlan tanto el fluido de correo interno como 
externo al dominio. El plan de encaminamiento dentro del dominio es independiente e invisible para el mundo exterior.
</para>
<?troff .wcon_off>
<para>
Esto funciona muy bien en el esquema de encaminamiento por anfitrión inteligente.
El encaminamiento global de la información sólo lo mantienen los portales; los anfitriones menores dentro de un dominio pueden trabajar únicamente con ficheros de
<filename>rutas</filename> pequeños, escritos a mano que indiquen las rutas de ese dominio y el camino hacia el encaminador. Incluso<?troff .ne 10> las pasarelas 
de correo ya no necesitan la información de ruta para cada anfitrión UUCP del mundo. Aparte de la información de ruta, ahora tan sólo necesitan conocer rutas hacia 
dominios absolutos. Por ejemplo, esta entrada ruta-alias conducirá todo el correo hacia los sitios en el dominio 
<systemitem role="sitename">sub.org</systemitem> hacia 
<systemitem role="sitename">smurf</systemitem>:

<screen>
.sub.org        swim!smurf!%s
</screen>
</para>

<para>
Todo el correo enviado a <systemitem 
role="emailaddr">claire@jones.sub.org</systemitem>
será enviado a <systemitem role="sitename">swim</systemitem> con la dirección <systemitem 
role="emailaddr">smurf!jones!claire</systemitem>.
</para>

<para>
La organización jerárquica del nombre de dominio permite a los servidores de correo mezclar rutas más y menos específicas. Por ejemplo, 
un sistema francés puede tener rutas específicas para los subdominios en o<systemitem role="sitename">fr</systemitem>, y encaminar el 
correo hacia los anfitriones en el dominio, <systemitem role="sitename">us</systemitem> en algún sistema de los Estados Unidos. 
De esta manera, gracias al encaminamiento basado en el dominio (nombre que recibe esta técnica) tanto el tamaño de las bases de 
datos de encaminamiento como las necesidades administrativas, se ven reducidos. 

</para>

<para>
La ventaja principal al usar nombres de dominio en un entorno UUCP es que las normas de conformidad con RFC-822 permiten el contacto entre las redes UUCP 
en Internet. Actualmente, muchos dominios UUCP tienen vínculos con pasarelas de Internet que actúan como anfitrión. Es más rápida y más fiable la información 
de encaminamiento si mandamos los mensajes por Internet, ya que éstos anfitriones pueden funcionar con DNS en lugar de Mapas  Usenet. 
</para>

<para>
Con el fin de se ser localizados desde Internet, los dominios basados en UUCP muestran un registro MX (los registros MX se comentaron en la sección&ldquo;<xref
linkend="X-087-2-mail.routing.internet">&rdquo;). Por ejemplo, supongamos que
<systemitem role="sitename">moria</systemitem> pertenece al dominio
<systemitem role="sitename">orcnet.org</systemitem>
<systemitem role="sitename">gcc2.groucho.edu</systemitem> actúa como su pasarela a Internet. Entonces 
<systemitem role="sitename">moria</systemitem> utilizaría <systemitem role="sitename">gcc2</systemitem> como anfitrión, para que toda la correspondencia dirigida a dominios 
extranjeros se distribuyese a través de Internet. Por otro lado,
<systemitem role="sitename">gcc2</systemitem> mostraría un registro MX para 
<systemitem role="sitename">*.orcnet.org</systemitem> y llevaría todo el correo entrante para los sitios <systemitem role="sitename">orcnet</systemitem> a
<systemitem role="sitename">moria</systemitem>. El asterisco en
<systemitem role="sitename">*.orcnet.org</systemitem> es un comodín que empareja todos los anfitriones de ese dominio que no están relacionados con ningún registro. 
Esto ocurre con frecuencia sólo con los dominios UUCP.
</para>

<para>
El único problema que queda es que los programas de transmisión UUCP no pueden funcionar con nombres de dominio ilimitados. 
Muchos sitios UUCP fueron diseñados para trabajar con nombres de hasta ocho caracteres, o incluso menos, y sin utilizar caracteres alfanuméricos como el punto.  
</para>

<indexterm><primary>RFC-822</primary><secondary>nombres </secondary></indexterm> 
<para>
Por lo tanto, habría que hacer un mapeado entre los nombres RFC-822 y los nombres de anfitrión UUCP.  El mapeado depende totalmente de su puesta en práctica. 
Una manera común de mapear los nombres FQDN y los UUCP, es usar el fichero del alias de ruta: 

<screen>
moria.orcnet.org  ernie!bert!moria!%s
</screen>
</para>
<?troff .Nd 10>
<indexterm><primary>uucpxtable</primary></indexterm> 
<para>
Esto producirá un bang path al estilo UUCP desde una dirección que
especifique un nombre de dominio completamente cualificado. algunos agentesd de transporte proporcionan un fichero especial
para esto:
<command>sendmail</command>, por ejemplo, usa el fichero <filename>uucpxtable</filename>.
</para>

<para>
La transformación inversa (conocida coloquialmente como
<emphasis>domainizing</emphasis>&thinsp;) a veces es necesaria cuando se envía un mensaje desde una red UUCP a Internet. Mientras el emisor utilice el nombre de 
dominio completo en la dirección de destino, este problema se puede evitar si no eliminamos dicho nombre de dominio. Sin embargo, hay sitios UUCP que no pertenecen 
a ningún dominio. Normalmente llevan el pseudo-dominio
<systemitem role="sitename">uucp</systemitem>.</para>

<indexterm class="endofrange" startref="idx-mailrouting-1">
<indexterm id="idx-mailfilenamepathsfilenamefile-1" 
class="startofrange"><primary>correo electrónico</primary><secondary>fichero de rutas</secondary></indexterm>
<indexterm><primary>fichero de rutas </primary></indexterm>
<indexterm><primary>ordenes de  alias de ruta</primary></indexterm> 
<para>
La base de datos ruta-alias proporciona la principal información de ruta en las redes basadas en UUCP. La entrada es de esta manera (el nombre del sitio y la ruta están separados mediante tabulaciones):

<screen>
moria.orcnet.org  ernie!bert!moria!%s
moria             ernie!bert!moria!%s
</screen>
</para>

<para>
Esto hace que cualquier mensaje enviado a <systemitem 
role="sitename">moria</systemitem> sea entregado pasando por <systemitem role="sitename">ernie</systemitem> y
<systemitem role="sitename">bert</systemitem>. Tanto el nombre 
<systemitem role="sitename">moria</systemitem>como el nombre UUCP deben ser dados si el emisor no los incluye.
</para>

<para>
<indexterm><primary>como manejar el correo centralizado </primary></indexterm>
<indexterm><primary>correo electrónico</primary><secondary>encaminamiento basado en el dominio </secondary></indexterm>
Si usted quiere dirigir todos los mensajes a los anfitriones dentro de un dominio a su repetidor de correo, puede especificar una ruta en la base de datos del alias de ruta, 
indicando el nombre de dominio precedido por un punto como el destino. Por ejemplo, si a todos los anfitriones en <systemitem role="sitename">sub.org</systemitem> llegamos 
por medio de <systemitem role="sitename">swim!smurf</systemitem>, la entrada de alias de ruta podrías ser de la siguiente manera: 

<screen>
.sub.org        swim!smurf!%s
</screen></para>

<para>
Escribir el fichero de alias de ruta es aceptable sólo cuando accede a un sitio de Internet donde no son necesarias muchas operaciones de 
encaminamiento. Si tiene que realizar diversas operaciones de encaminamiento para un gran número de anfitriones, la mejor manera de hacerlo es usar la orden 
<command>alias de ruta </command> para crear el fichero a partir del fichero de mapas.
Los mapas son más fáciles de mantener, porque se añade o elimina un sistema editando la entrada al mapa del sistema y volviendo a crear el 
fichero de mapa.  Aunque los mapas publicados por el Proyecto de Mapeado Usenet ya no se usan tanto para el encaminamiento, las redes pequeñas UUCP nos pueden 
dar la información sobre el encaminamiento de sus propios mapas. 
</para>

<para>
<indexterm><primary>correo electrónico</primary><secondary>ficheros de mapa</secondary></indexterm>
<indexterm><primary>Usenet</primary><secondary>ficheros de mapa</secondary></indexterm>
<indexterm><primary>UUCP</primary><secondary>ficheros de mapa</secondary></indexterm>
<indexterm><primary>mapas, Usenet</primary></indexterm>
Un fichero de mapa consiste principalmente en una lista de sitios que cada sistema selecciona, o bien seleccionada por algún sistema. 
El nombre del sistema empieza en la primera columna y va seguido por una lista de enlaces separados por una coma. La lista puede continuar 
si la siguiente línea comienza por el tabulador. Cada vínculo consiste en el nombre del sitio seguido por un coste entre paréntesis. El 
coste es una expresión aritmética formada por números y expresiones simbólicas como DAILY o WEEKLY. Las líneas que empiezan por &gt; se ignoran.</para>

<para>
Por ejemplo, consideremos <systemitem role="sitename">moria</systemitem>, 
que selecciona <systemitem role="sitename">swim.twobirds.com</systemitem> dos veces al día y <systemitem role="sitename">bert.sesame.com</systemitem> 
que lo hace una por semana.
El vínculo a <systemitem role="sitename">bert</systemitem> usa modem lento a 2.400 bps. <systemitem role="sitename">moria</systemitem> 
publicaría la siguiente entrada:

<screen>
moria.orcnet.org
        bert.sesame.com(DAILY/2),
        swim.twobirds.com(WEEKLY+LOW)
moria.orcnet.org = moria
</screen></para>

<para>
La última línea también da a conocer a <systemitem role="sitename">moria</systemitem> bajo su nombre UUCP.  Tenga en cuenta que el coste se 
debe especificar como <systemitem role="keyword">DAILY/2</systemitem> porque conectando dos veces al día limita a la mitad el coste del vínculo</para>

<para>
Al usar la información de los ficheros de mapas <command>pathalias</command> es capaz de calcular las rutas óptimas a cualquier destino indicado en el 
fichero de ruta y producir una base de datos ruta-alias con la que realizar el encaminamiento a estos sitios.</para>

<para>
<indexterm><primary>pathalias, orden</primary></indexterm>
<command>alias de ruta</command> proporciona otras opciones como el ocultamiento del sitio 
(es decir, que sólo se pueda llegar a los sitios a través de una pasarela). Consulte la página sobre <command>alias de ruta</command> del manual para obtener detalles y una lista completa de vínculos cost.
</para>


<indexterm><primary>uuwho, orden</primary></indexterm> 
<para>
Los comentarios sobre el fichero de mapas suelen contener información adicional sobre los sitios descritos en él. 
Existe un formato rígido en el que se puede especificar esta información de tal forma que se pueda recuperar a 
partir de los mapas. Por ejemplo, un programa llamado <command>uuwho</command> utiliza una base de datos creada a 
partir de los ficheros de mapa para mostrar tal información de manera cómoda. Por ello, si usted contrata un sitio 
con una organización que distribuye ficheros de mapas, deberá rellenar dicha entrada. A continuación se muestra 
un ejemplo de entrada de mapa (es la perteneciente al sitio web de Olaf):

<screen>
#N      monad, monad.swb.de, monad.swb.sub.org
#S      AT 486DX50; Linux 0.99
#O      private
#C      Olaf Kirch
#E      okir@monad.swb.de
#P      Kattreinstr. 38, D-64295 Darmstadt, FRG
#L      49 52 03 N / 08 38 40 E
#U      brewhq
#W      okir@monad.swb.de (Olaf Kirch); Sun Jul 25 16:59:32 MET DST 
1993
#
monad   brewhq(DAILY/2)
# Domains
monad = monad.swb.de
monad = monad.swb.sub.org
</screen>
</para>

<para>
El espacio en blanco que sigue a los dos primeros caracteres equivale a una tabulación. El significado de la mayoría de los campos 
está bastante claro; de todas maneras, en caso de registrarse en cualquier dominio, recibiría dicha descripción detallada. El caso de la
<systemitem role="keyword">L</systemitem> es el más curioso: proporciona la posición geográfica (latitud/longitud) del usuario y se 
encarga de dibujar los mapas PostScript que controlan todos los sitios web de cada país e incluso de toda la red.<footnote id="X-087-2-FNMA07"><para>
Suelen ser publicados en <systemitem role="newsgroup">news.lists.ps-maps</systemitem>.
Ojo! Son INMENSOS.
</para>
</footnote>
</para>

<indexterm class="endofrange" 
startref="idx-mailfilenamepathsfilenamefile-1">
</sect2>

</sect1>

<sect1 id="X-087-2-mail.elm"><title>como configurar elm </title>
<indexterm id="idx-configuringcommandelmcommand-1" 
class="startofrange"><primary>configurar</primary><secondary>elm (electronic mail)</secondary></indexterm>
<indexterm id="idx-commandelmcommand-1" 
class="startofrange"><primary>elm</primary></indexterm>
<indexterm id="chem.email.elm" 
class="startofrange"><primary>correo electrónico</primary><secondary>correo electrónico </secondary></indexterm> 

<para>
<command>elm</command> significa &ldquo;electronic mail&rdquo; (correo electrónico), y es una de las herramientas más importantes de Unix. Proporciona
una interfaz a pantalla completa que incluye elementos de ayuda muy útiles. No nos detendremos más en cómo usar el mencionado 
<command>elm</command> sino que trataremos las opciones de configuración.
</para>

<para>
Teóricamente, se puede ejecutar<command>elm</command> que no esté configurado, y todo funcionará correctamente&mdash;con suerte. Sin embargo hay algunas
opciones que hay que configurar, aunque serán requeridas tan solo en ocasiones. </para>

<para>
Cuando se inicia<command>elm</command>,  tenemos un conjunto de variables de configuración del fichero<filename>elm.rc</filename> en
<filename>/etc/elm</filename>.
El fichero <filename>.elm/elmrc</filename> aparece en su directorio local. Usted no tendrá que elaborar este fichero, ya que se crea al seleccionar &ldquo;Save new options&rdquo; en el menú opciones de <command>elm</command>
</para>

<para>
Las opciones correspondientes al fichero <filename>elmrc</filename> están también  disponibles en el fichero global <filename>elm.rc</filename>. Muchos elementos de la configuración 
del fichero<filename>elmrc</filename> personal, invalidan los del global.
</para>

<sect2 id="X-087-2-mail.elm.global"><title>opciones globales de elm</title>
<para>
<?troff .hw following>
En el fichero global <filename>elm.rc</filename>, siempre hay que establecer las opciones correspondientes al nombre del anfitrión. Por ejemplo, en la Cervecera Virtual, 
el fichero <systemitem role="sitename">vlager</systemitem> contiene la siguiente información:

<screen>
#
# Nombre local del anfitrión
hostname = vlager
#
# Nombre del dominio
hostdomain = .vbrew.com
#
# Nombre completamente cualificado del dominio
hostfullname = vlager.vbrew.com
</screen>
</para>

<para>
Estas opciones de <command>elm</command> están ideadas por el nombre del anfitrión local. Cierto es que esta información tal vez no 
se llegue a usar nunca, pero de todas maneras hay que establecer las opciones.
Tenga en cuenta que estas opciones privadas sólo serán válidas en el fichero de configuración; cuando se trate del
<filename>elmrc</filename> privado, serán ignoradas.
</para>
</sect2>

<sect2 id="X-087-2-mail.elm.charsets"><title>Juegos de caracteres Nacionales</title>
<indexterm><primary>elm (electronic mail)</primary><secondary>juegos de caracteres nacionales</secondary></indexterm>
<indexterm><primary>internacionalización de elm</primary></indexterm>
<indexterm><primary>juegos de caracteres nacionales en elm</primary></indexterm>
<indexterm><primary>juegos de carateres en elm</primary></indexterm>
<indexterm><primary>ISO-8859-1</primary></indexterm>
<indexterm><primary>juego de caracteres Latin-1 </primary></indexterm>
<indexterm><primary>MIME (Multipurpose Internet Mail Extensions) </primary><secondary>formato</secondary></indexterm> 

<para>
Se han desarrollado un conjunto de estándares y RFC que preparan al RFC-822 para poder recibir varios tipos de mensajes, tanto de texto, datos binarios, 
como ficheros PostScript y demás. Estos estándares son conocidos como MIME  o Multipurpose Internet Mail Extensions (Extensiones Multipropósito del Correo Internet). 
Entre otras cosas, MIME permite que el receptor del mensaje sepa si se han utilizado caracteres distintos a los del estándar ASCII, por ejemplo, los acentos del francés 
o la diéresis del alemán. <command>elm</command> mantiene este juego de caracteres hasta cierto punto.
</para>

<para>
El juego de caracteres interno de GNU/Linux que se usa para representar los caracteres es conocido como ISO-8859-1, que es el nombre del estándar correspondiente. 
También se conoce como Latin-1.  Cualquier mensaje que utilice cualquier carácter específico de este juego de caracteres, deberá llevar el siguiente encabezado:

<screen>
Content-Type: text/plain; charset=iso-8859-1
</screen>
</para>

<para>
El sistema receptor del mensaje deberá reconocer ese campo y adaptar las medidas adecuadas para que su visualización sea la correspondiente. En cuanto a los mensajes de  
<systemitem role="keyword">texto</systemitem> lo correspondiente es el
<systemitem role="keyword">juego de caracteres</systemitem> 
<systemitem role="keyword">us-ascii</systemitem>.
</para>


<para>
Para ser capaz de mostrar mensajes con conjuntos de caracteres distintos al código ASCII, 
<command>elm</command> debe saber cómo imprimir tales caracteres. Por omisión, cuando <command>elm</command> recibe un mensaje con un campo <replaceable>charset</replaceable> distinto a <systemitem role="keyword">us-ascii</systemitem> (o con contenido distinto al tipo
<systemitem role="keyword">texto</systemitem>), intenta mostrar el mensaje usando una orden llamada <command>metamail</command>. Los mensajes que requieren de <command>metamail</command>, para poder ser visualizados, se muestran con una  
<command>M</command> en la primera columna  en la pantalla de resumen. 
</para>

<para>
Como el caracter patrón de Linux es ISO-8859-1, no es necesario el uso de <command>metamail</command> cuando sea éste el juego de caracteres presente. 
Si <command>elm</command> tiene la orden de que el sistema puede leer ISO-8859-1, no usará <command>metamail</command>, sino que en su lugar mostrará el mensaje directamente. Esto 
es posible si se configura la siguiente opción en <filename>elm.rc</filename>:

<screen>
displaycharset = iso-8859-1
</screen>
</para>

<para>
Tenga en cuenta que se debe configurar esta opción incluso cuando no tenga por seguro que va a mandar o recibir mensajes con caracteres 
distintos a los de ASCII. La razón es porque los usuarios que sí los utilizan, normalmente configuran el correo con el fin de poner el
<literal>tipo de contenido:</literal> de campo apropiado en la cabecera, aunque no utilizen sólo caracteres ASCII. 
</para>

<para>
Sin embargo, activar esta opción en <filename>elm.rc</filename> no es suficiente. Cuando se muestra un mensaje con su paginador incorporado,
<command>elm</command> llama a una funcion de biblioteca para cada carácter con el fin de determinar si es imprimible. Por omisión, 
esta función sólo reconocerá los caracteres ASCII como imprimibles y visualizará el resto como <literal>^?</literal>. 
Puede pasar por alto esta función tan sólo con indicar la variable de entorno <systemitem role="keyword">LC_CTYPE</systemitem> con 
<systemitem role="keyword">ISO-8859-1</systemitem>, que le indica a la biblioteca que acepte los caracteres Latin-1 como imprimibles. el soporte para esta y otras características está disponible desde la versión 4.5.8 de la biblioteca estándar de Linux.
</para>

<para>
Cuando envía mensajes que contienen caracteres especiales de ISO-8859-1, debe asegurarse de poner dos variables más en el fichero
<filename>elm.rc</filename> :

<screen>
charset = iso-8859-1
textencoding = 8bit
</screen>
</para>
<?troff .Nd 10>
<para>
Esto hace que <command>elm</command> reporte el conjunto de caracteres como 
ISO-8859-1 en la cabecera del correo, y lo envía como un valor de 8 bits 
(la opción predeterminada es cortar los caracteres a 7 bits).
</para>

<para>
También se pueden configurar todas estas opciones sobre los caracteres que hemos tratado en el fichero privado 
<filename>elmrc</filename>, de tal forma que cada usuario puede tener sus propia configuración predeterminada 
aunque el fichero global no se adapte. 
</para>

<indexterm class="endofrange" startref="chem.email.elm"> 
<indexterm class="endofrange" startref="chem.email.1"> 
<indexterm class="endofrange" startref="idx-commandelmcommand-1">
<indexterm class="endofrange" 
startref="idx-configuringcommandelmcommand-1">

</sect2>
</sect1>
</chapter>
