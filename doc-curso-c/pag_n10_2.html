<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
	<TITLE></TITLE>
	<META NAME="GENERATOR" CONTENT="StarOffice/5.1 (Linux)">
	<META NAME="AUTHOR" CONTENT=" ">
	<META NAME="CREATED" CONTENT="20000309;8490500">
	<META NAME="CHANGEDBY" CONTENT=" ">
	<META NAME="CHANGED" CONTENT="20000310;15041200">
</HEAD>
<BODY>
<P STYLE="page-break-before: always"><BR><BR>
</P>
<CENTER>
	<TABLE WIDTH=95% BORDER=0 CELLPADDING=4 CELLSPACING=0>
		<COL WIDTH=71*>
		<COL WIDTH=45*>
		<COL WIDTH=69*>
		<COL WIDTH=71*>
		<THEAD>
			<TR VALIGN=TOP>
				<TD WIDTH=28% BGCOLOR="#ffffff">
					<P ALIGN=CENTER STYLE="margin-bottom: 0cm"><BR>
					</P>
					<P ALIGN=CENTER><A HREF="indice.html"><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">contenido</FONT></FONT></B></A></P>
				</TD>
				<TD WIDTH=18% BGCOLOR="#ffffff">
					<P ALIGN=CENTER STYLE="margin-bottom: 0cm"><BR>
					</P>
					<P ALIGN=CENTER><A HREF="index.html"><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">Home</FONT></FONT></B></A></P>
				</TD>
				<TD WIDTH=27% BGCOLOR="#ffffff">
					<P ALIGN=CENTER STYLE="margin-bottom: 0cm"><BR>
					</P>
					<P ALIGN=CENTER><A HREF="index.html#colaborar"><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">colaborar</FONT></FONT></B></A></P>
				</TD>
				<TD WIDTH=28% BGCOLOR="#ffffff">
					<P ALIGN=CENTER STYLE="margin-bottom: 0cm"><BR>
					</P>
					<P ALIGN=CENTER><A HREF="file:///root/cursoc.tar.gz"><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">download</FONT></FONT></B></A></P>
				</TD>
			</TR>
		</THEAD>
	</TABLE>
</CENTER>
<P STYLE="margin-bottom: 0cm"><BR>
</P>
<P STYLE="margin-bottom: 0cm"><BR>
</P>
<P STYLE="margin-bottom: 0cm"><BR>
</P>
<UL>
	<LI><P><FONT FACE="lucida, sans-serif"><FONT SIZE=3><B>10.-
	Abriendo, escribiendo, borrando y cerrando archivos (por el
	dr7tbien)</B></FONT></FONT></P>
	<UL TYPE=DISC>
		<LI><P ALIGN=LEFT><A HREF="pag_n10_1.html"><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">10.1,.
		Introduci&oacute;n</FONT></FONT></B></A><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">
		<FONT SIZE=3><FONT FACE="lucida, sans-serif">(por el dr7tbien)</FONT></FONT></FONT></FONT></B></P>
		<LI><P ALIGN=LEFT><A HREF="pag_n10_2.html"><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">10.2.-Streams,
		funciones de apertura de archivos y archivos</FONT></FONT></B></A><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">n
		<FONT SIZE=3><FONT FACE="lucida, sans-serif">(por el dr7tbien)</FONT></FONT></FONT></FONT></B></P>
		<LI><P><A HREF="pag_n10_3.html"><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">10.3.-
		Funci&oacute;n fopen()</FONT></FONT></B></A><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">
		(por el dr7tbien)</FONT></FONT></B></P>
		<LI><P><A HREF="pag_n10_4.html"><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">10.4.-
		Funcion fclose()</FONT></FONT></B></A><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">
		<FONT SIZE=3><FONT FACE="lucida, sans-serif">(por el dr7tbien)</FONT></FONT></FONT></FONT></B></P>
		<LI><P><A HREF="pag_n10_5.html"><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">10.5.-
		Escribiendo caracteres en los ficheros: fgetc(), fputc(), putc() y
		getc()</FONT></FONT></B></A><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">
		<FONT SIZE=3><FONT FACE="lucida, sans-serif">(por el dr7tbien)</FONT></FONT></FONT></FONT></B></P>
		<LI><P><A HREF="pag_n10_6.html"><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">10.6.-
		Reapertura de archivos mediante freopen()</FONT></FONT></B></A><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">
		<FONT SIZE=3><FONT FACE="lucida, sans-serif">(por el dr7tbien)</FONT></FONT></FONT></FONT></B></P>
		<LI><P><A HREF="pag_n10_7.html"><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">10.7.-
		Entrada y salida de cadenas de caracteres, fputs() y fgets()</FONT></FONT></B></A><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">
		<FONT SIZE=3><FONT FACE="lucida, sans-serif">(por el dr7tbien)</FONT></FONT></FONT></FONT></B></P>
		<LI><P><A HREF="pag_n10_8.html"><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">10.8.-
		Funciones fprintf() y fscanf()</FONT></FONT></B></A><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">
		(por el dr7tbien)</FONT></FONT></B></P>
		<LI><P><A HREF="pag_n10_9.html"><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">10.9.-
		Escritura y lectura de datos en bloques, fwrite() y fread()</FONT></FONT></B></A><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">
		<FONT SIZE=3><FONT FACE="lucida, sans-serif">(por el dr7tbien)</FONT></FONT></FONT></FONT></B></P>
		<LI><P><A HREF="pag_n10_10.html"><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">10.10.-
		Desarrollo del programa articulo.exe usando estructuras de datos</FONT></FONT></B></A><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">
		<FONT SIZE=3><FONT FACE="lucida, sans-serif">(por el dr7tbien)</FONT></FONT></FONT></FONT></B></P>
		<LI><P><A HREF="pag_n10_11.html"><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">10.11.-
		Borrado de datos en archivos</FONT></FONT></B></A><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">
		<FONT SIZE=3><FONT FACE="lucida, sans-serif">(por el dr7tbien)</FONT></FONT></FONT></FONT></B></P>
		<LI><P><A HREF="pag_n10_12.html"><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">10.12.-
		Acceso a los ficheros de forma no secuencial, fseek()</FONT></FONT></B></A><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">
		<FONT SIZE=3><FONT FACE="lucida, sans-serif">(por el dr7tbien)</FONT></FONT></FONT></FONT></B></P>
		<LI><P><A HREF="pag_n10_13.html"><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">10.13.-
		&iquest;Donde est&aacute; el puntero de L/E? La funci&oacute;n
		ftell()</FONT></FONT></B></A><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">
		<FONT SIZE=3><FONT FACE="lucida, sans-serif">(por el dr7tbien)</FONT></FONT></FONT></FONT></B></P>
		<LI><P><A HREF="pag_n10_14.html"><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">10.14.-
		Funci&oacute;n rewind()</FONT></FONT></B></A><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">n
		<FONT SIZE=3><FONT FACE="lucida, sans-serif">(por el dr7tbien)</FONT></FONT></FONT></FONT></B></P>
		<LI><P><A HREF="pag_n10_15.html"><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">10.15.-
		Borrando ficheros con remove()</FONT></FONT></B></A><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">
		<FONT SIZE=3><FONT FACE="lucida, sans-serif">(por el dr7tbien)</FONT></FONT></FONT></FONT></B></P>
		<LI><P><A HREF="pag_n10_16.html"><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">10.16.-
		Renombrando ficheros con rename()</FONT></FONT></B></A><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">
		<FONT SIZE=3><FONT FACE="lucida, sans-serif">(por el dr7tbien)</FONT></FONT></FONT></FONT></B></P>
		<LI><P><A HREF="pag_n10_17.html"><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">10.17.-
		A&ntilde;adiendo funciones de borrado al programa articulo.exe</FONT></FONT></B></A><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">
		<FONT SIZE=3><FONT FACE="lucida, sans-serif">(por el dr7tbien)</FONT></FONT></FONT></FONT></B></P>
		<LI><P><A HREF="pag_n10_18.html"><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">10.18.-
		Detecci&oacute;n del fin de fichero con feof()</FONT></FONT></B></A><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">
		<FONT SIZE=3><FONT FACE="lucida, sans-serif">(por el dr7tbien)</FONT></FONT></FONT></FONT></B></P>
	</UL>
</UL>
<P ALIGN=LEFT><A NAME="10.2"></A><FONT FACE="lucida, sans-serif"><FONT SIZE=3><IMG SRC="d0ac.gif" NAME="Imagen5" ALIGN=BOTTOM WIDTH=93 HEIGHT=36 BORDER=0><B>
<FONT SIZE=4>10.2.- Streams, funciones de apertura de archivos y
archivos. Qu&eacute; son?</FONT><SPAN STYLE="text-decoration: none">
</SPAN>
<IMG SRC="images/blurulr4.gif" NAME="Imagen6" ALIGN=BOTTOM WIDTH=665 HEIGHT=5 BORDER=0></B></FONT></FONT></P>
<P ALIGN=LEFT><BR><BR>
</P>
<P><FONT FACE="lucida, sans-serif"><FONT SIZE=3>En la &quot;apertura&quot;
de un archivo de datos intervienen tres objetos: </FONT></FONT>
</P>
<UL>
	<LI><P><FONT FACE="lucida, sans-serif"><FONT SIZE=3>El propio
	archivo.</FONT></FONT></P>
	<LI><P><FONT FACE="lucida, sans-serif"><FONT SIZE=3>Una fuente de
	entrada de datos, teclado(stdin), otro archivo, etc</FONT></FONT></P>
	<LI><P><FONT FACE="lucida, sans-serif"><FONT SIZE=3>Un canal por el
	que transcurrir&aacute; la informaci&oacute;n desde la fuente de
	entrada de datos hacia el archivo o viceversa (stream). </FONT></FONT>
	</P>
</UL>
<P><FONT FACE="lucida, sans-serif"><FONT SIZE=3>Cuando decimos que
&quot;abrimos&quot; un archivo es una buena forma de entendernos,
pero lo que realmente hacemos es apuntar con la fuente de datos al
archivo que queremos manipular. Podr&iacute;amos compararlo a una
manguera o fuente que apunta a un caldero. Los archivos son
susceptibles de recibir datos en cualquier momento, sin ning&uacute;n
tipo de manipulaci&oacute;n, lo &uacute;nico que tenemos que hacer
para ello es apuntarles con una manguera de datos y enviarles datos.
La manguera con la que apuntamos a un determinado archivo es lo que
llamamos <B>stream. </B><SPAN STYLE="font-weight: medium">Para poder
dirigir la entrada de datos a un archivo, necesitamos un puntero al
stream o flujo de datos, nada m&aacute;s. La &quot;apertura&quot; de
un archivo la realizamos de la siguiente manera:</SPAN></FONT></FONT></P>
<P STYLE="font-weight: medium"><FONT FACE="lucida, sans-serif"><FONT SIZE=3>Declaramos
un puntero de tipo <B>FILE </B>de la siguiente manera:</FONT></FONT></P>
<P><FONT FACE="lucida, sans-serif"><FONT SIZE=3><B>FILE *pf;</B></FONT></FONT></P>
<P><FONT FACE="lucida, sans-serif"><FONT SIZE=3><SPAN STYLE="font-weight: medium">A
partir de esta l&iacute;nea ya tenemos un puntero a un <B>stream </B>o
fuente de datos. Despues hemos de apuntar con el <B>stream </B>declarado
a un archivo que nosotros determinemos mediante la funci&oacute;n
</SPAN><B>fopen(),</B><SPAN STYLE="font-weight: medium"> funci&oacute;n
que comentaremos a continuaci&oacute;n.</SPAN><B> </B><SPAN STYLE="font-weight: medium">Para
simplificar, diremos que teemos un puntero a un archivo <B>*pf </B>aunque
realmente lo que tenemos es un puntero a un <B>stream</B> . Decimos
que la cantidad de archivos que pueden tener abiertos en un sistema,
difieren de los fabricantes, de hecho, lo que estamos dicuiendo es
que el n&uacute;mero de streams es limitado, por eso una vez
manipulado el archivo es conveniente cerrarlo, es decir anular el
stream o flujo de datos asociado al fichero. Esto se consigue con la
funci&oacute;n </SPAN><B>fclose(). </B></FONT></FONT>
</P>
<P STYLE="font-weight: medium"><FONT FACE="lucida, sans-serif"><FONT SIZE=3>Adem&aacute;s
del puntero al stream, disponemos de otro puntero de lectura y
escritura <B>L/E</B>. Cuando escribimos en un fichero un bloque de
datos, estos no quedan escritos aleatoriamente, sino que lo hacen en
el sitio indicado por el puntero de <B>L/E</B>. A medida que vamos
escribiendo en el fichero el puntero de <B>L/E </B>va avanzando
puestos (bytes). </FONT></FONT>
</P>
<P STYLE="font-weight: medium"><FONT FACE="lucida, sans-serif"><FONT SIZE=3>No
nos preocupemos!! No hemos de manipular este puntero para que avance
o se retrase, lo hace de manera autom&aacute;tica, aunque para leer
ciertos datos veremos m&aacute;s adelante c&oacute;mo manipularlo
para nuestro inter&eacute;s. Si abrimos un nuevo fichero para
escritura y lectura, el fichero no contendr&aacute; datos y el
puntero de lectura - escritura L/E, estar&aacute; en la posici&oacute;n
0. Si escribimos datos en dicho archivo del tama&ntilde;o de 15 bytes
por ejemplo, el puntero L/E avanzar&aacute; 15 bytes. Para poder
situar el puntero <B>L/E</B> en el principio del fichero y poder leer
los datos escritos, podemos cerrar el fichero y volver a abrirlo con
lo que el puntero volver&aacute; a la posici&oacute;n 0 y podremos
leer los datos introducidos anteriormente.</FONT></FONT></P>
<P STYLE="font-weight: medium"><FONT FACE="lucida, sans-serif"><FONT SIZE=3>El
concepto de archivo queda explicado y a partir de este momento
diremos que &quot;abrimos&quot; y &quot;cerramos&quot; archivos<B> </B>en
lugar de decir que tenemos un puntero a un stream para entrada de
datos.</FONT></FONT></P>
<P STYLE="font-weight: medium"><FONT FACE="lucida, sans-serif"><FONT SIZE=3>Hasta
el momento hemos trabajado con programas en tiempo de ejecuci&oacute;n,
es decir, los datos que pasamos al programa se pierden una vez
finalizado. Para poder almacenar los datos que le pasamos a un
fichero, usamos los ficheros o archivos en disco, HD, cinta, CDRom,
etc. La biblioteca de C est&aacute; dotada de varias funciones que
permiten abrir escribir, leer y guardar los archivos en los que
estamos almacenando datos.</FONT></FONT></P>
<P STYLE="font-weight: medium"><FONT FACE="lucida, sans-serif"><FONT SIZE=3>Las
funciones de C sobre archivos permiten abrir archivos, escribir datos
en ellos, incluso sobreescribir dichos datos. Lamentablemente no
existe una funci&oacute;n que nos permita borrar datos y que el
fichero disminuya de tama&ntilde;o a medida que vamos borrando datos.
Aunque no lo parezca, esto es una ventaja, pues si bien origina un
poquito m&aacute;s de c&oacute;digo, nos permite mantener un control
total sobrte las estructuras de datos que guardamos en ellos, en todo
caso, veremos alguna forma para borrar datos de ficheros de una forma
definitiva, incluso de una forma parcial. </FONT></FONT>
</P>
<P STYLE="font-weight: medium"><FONT FACE="lucida, sans-serif"><FONT SIZE=3>A
diferencia de otros cap&iacute;tulos en los que comenzamos con un
programa y luego lo explicamos, la aparici&oacute;n de nuevos
conceptos nos obliga a enfocar este cap&iacute;tulo de otra manera.
Antes de comenzar a desarrollar el programa ejemplo, haremos un
recorrido por todas las funciones que tienen que ver con la
manpulaci&oacute;n de archivos, para terminar desarrollando un
programa consistente en crear una estructura, alamacenar diferentes
estructuras del tipo creado en un archivo, ordenar las estructuras
seg&uacute;n nuestro inter&eacute;s y por supuesto poder consultar
los datos almacenados en el archivo de una manera ordenada. </FONT></FONT>
</P>
<P STYLE="font-weight: medium"><FONT FACE="lucida, sans-serif"><FONT SIZE=3><BR>Sin
m&aacute;s pre&aacute;mbulos vamos a ver las funciones que vamos a
usar en la apertura, cierre, escritura y lectura de datos en
ficheros.</FONT></FONT></P>
<P STYLE="margin-bottom: 0cm"><BR>
</P>
<P STYLE="margin-bottom: 0cm"><BR>
</P>
<CENTER>
	<TABLE WIDTH=95% BORDER=0 CELLPADDING=4 CELLSPACING=0>
		<COL WIDTH=71*>
		<COL WIDTH=44*>
		<COL WIDTH=1*>
		<COL WIDTH=69*>
		<COL WIDTH=71*>
		<THEAD>
			<TR VALIGN=TOP>
				<TD WIDTH=28% BGCOLOR="#ffffff">
					<P ALIGN=CENTER><A HREF="indice.html"><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">contenido</FONT></FONT></B></A></P>
				</TD>
				<TD WIDTH=17% BGCOLOR="#ffffff">
					<P ALIGN=CENTER><A HREF="index.html"><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">Home</FONT></FONT></B></A></P>
				</TD>
				<TD COLSPAN=2 WIDTH=27% BGCOLOR="#ffffff">
					<P ALIGN=CENTER><A HREF="index.html#colaborar"><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">colaborar</FONT></FONT></B></A></P>
				</TD>
				<TD WIDTH=28% BGCOLOR="#ffffff">
					<P ALIGN=CENTER><A HREF="../cursoc.tar.gz"><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">download</FONT></FONT></B></A></P>
				</TD>
			</TR>
		</THEAD>
		<TBODY>
			<TR VALIGN=TOP>
				<TD COLSPAN=3 WIDTH=45% BGCOLOR="#ffffff">
					<P><BR>&nbsp; 
					</P>
					<P ALIGN=CENTER><IMG SRC="sologo.gif" NAME="Imagen9" ALIGN=MIDDLE WIDTH=97 HEIGHT=34 BORDER=0></P>
				</TD>
				<TD COLSPAN=2 WIDTH=55% BGCOLOR="#ffffff">
					<P ALIGN=LEFT><BR><BR>
					</P>
					<ADDRESS STYLE="margin-bottom: 0.5cm; font-weight: medium; text-align: left">
					<FONT FACE="lucida, sans-serif"><FONT SIZE=3>Ultima modificaci&oacute;n
					<SDFIELD TYPE=DATETIME SDVAL="36588,0897280093" SDNUM="1034;0;D/MM/AA">3/03/00</SDFIELD></FONT></FONT></ADDRESS>
					<ADDRESS STYLE="margin-bottom: 0.5cm; font-weight: medium; text-align: left">
					<FONT FACE="lucida, sans-serif"><FONT SIZE=3>autor: dr7tbien </FONT></FONT>
					</ADDRESS>
					<ADDRESS STYLE="text-align: left"><SPAN STYLE="font-weight: medium"><FONT FACE="lucida, sans-serif"><FONT SIZE=3>Para
					consultar cualquier cosilla o alguna sugerencia
					</FONT><A HREF="mailto:dr7tbien@mixmail.com"><FONT SIZE=3>dr7tbien@mixmail.com<BR></FONT></A></FONT></SPAN><BR>
					</ADDRESS>
				</TD>
			</TR>
		</TBODY>
	</TABLE>
</CENTER>
<P STYLE="margin-bottom: 0cm"><BR>
</P>
</BODY>
</HTML>