<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
	<TITLE></TITLE>
	<META NAME="GENERATOR" CONTENT="StarOffice/5.1 (Linux)">
	<META NAME="AUTHOR" CONTENT=" ">
	<META NAME="CREATED" CONTENT="20000309;8490500">
	<META NAME="CHANGEDBY" CONTENT=" ">
	<META NAME="CHANGED" CONTENT="20000310;14560200">
</HEAD>
<BODY>
<P STYLE="page-break-before: always"><BR><BR>
</P>
<CENTER>
	<TABLE WIDTH=95% BORDER=0 CELLPADDING=4 CELLSPACING=0>
		<COL WIDTH=71*>
		<COL WIDTH=45*>
		<COL WIDTH=69*>
		<COL WIDTH=71*>
		<THEAD>
			<TR VALIGN=TOP>
				<TD WIDTH=28% BGCOLOR="#ffffff">
					<P ALIGN=CENTER STYLE="margin-bottom: 0cm"><BR>
					</P>
					<P ALIGN=CENTER><A HREF="indice.html"><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">contenido</FONT></FONT></B></A></P>
				</TD>
				<TD WIDTH=18% BGCOLOR="#ffffff">
					<P ALIGN=CENTER STYLE="margin-bottom: 0cm"><BR>
					</P>
					<P ALIGN=CENTER><A HREF="index.html"><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">Home</FONT></FONT></B></A></P>
				</TD>
				<TD WIDTH=27% BGCOLOR="#ffffff">
					<P ALIGN=CENTER STYLE="margin-bottom: 0cm"><BR>
					</P>
					<P ALIGN=CENTER><A HREF="index.html#colaborar"><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">colaborar</FONT></FONT></B></A></P>
				</TD>
				<TD WIDTH=28% BGCOLOR="#ffffff">
					<P ALIGN=CENTER STYLE="margin-bottom: 0cm"><BR>
					</P>
					<P ALIGN=CENTER><A HREF="file:///root/cursoc.tar.gz"><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">download</FONT></FONT></B></A></P>
				</TD>
			</TR>
		</THEAD>
	</TABLE>
</CENTER>
<P STYLE="margin-bottom: 0cm"><BR>
</P>
<P STYLE="margin-bottom: 0cm"><BR>
</P>
<P STYLE="margin-bottom: 0cm"><BR>
</P>
<UL>
	<LI><P><FONT FACE="lucida, sans-serif"><FONT SIZE=3><B>10.-
	Abriendo, escribiendo, borrando y cerrando archivos (por el
	dr7tbien)</B></FONT></FONT></P>
	<UL TYPE=DISC>
		<LI><P ALIGN=LEFT><A HREF="pag_n10_1.html"><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">10.1,.
		Introduci&oacute;n</FONT></FONT></B></A><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">
		<FONT SIZE=3><FONT FACE="lucida, sans-serif">(por el dr7tbien)</FONT></FONT></FONT></FONT></B></P>
		<LI><P ALIGN=LEFT><A HREF="pag_n10_2.html"><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">10.2.-Streams,
		funciones de apertura de archivos y archivos</FONT></FONT></B></A><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">n
		<FONT SIZE=3><FONT FACE="lucida, sans-serif">(por el dr7tbien)</FONT></FONT></FONT></FONT></B></P>
		<LI><P><A HREF="pag_n10_3.html"><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">10.3.-
		Funci&oacute;n fopen()</FONT></FONT></B></A><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">
		(por el dr7tbien)</FONT></FONT></B></P>
		<LI><P><A HREF="pag_n10_4.html"><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">10.4.-
		Funcion fclose()</FONT></FONT></B></A><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">
		<FONT SIZE=3><FONT FACE="lucida, sans-serif">(por el dr7tbien)</FONT></FONT></FONT></FONT></B></P>
		<LI><P><A HREF="pag_n10_5.html"><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">10.5.-
		Escribiendo caracteres en los ficheros: fgetc(), fputc(), putc() y
		getc()</FONT></FONT></B></A><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">
		<FONT SIZE=3><FONT FACE="lucida, sans-serif">(por el dr7tbien)</FONT></FONT></FONT></FONT></B></P>
		<LI><P><A HREF="pag_n10_6.html"><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">10.6.-
		Reapertura de archivos mediante freopen()</FONT></FONT></B></A><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">
		<FONT SIZE=3><FONT FACE="lucida, sans-serif">(por el dr7tbien)</FONT></FONT></FONT></FONT></B></P>
		<LI><P><A HREF="pag_n10_7.html"><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">10.7.-
		Entrada y salida de cadenas de caracteres, fputs() y fgets()</FONT></FONT></B></A><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">
		<FONT SIZE=3><FONT FACE="lucida, sans-serif">(por el dr7tbien)</FONT></FONT></FONT></FONT></B></P>
		<LI><P><A HREF="pag_n10_8.html"><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">10.8.-
		Funciones fprintf() y fscanf()</FONT></FONT></B></A><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">
		(por el dr7tbien)</FONT></FONT></B></P>
		<LI><P><A HREF="pag_n10_9.html"><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">10.9.-
		Escritura y lectura de datos en bloques, fwrite() y fread()</FONT></FONT></B></A><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">
		<FONT SIZE=3><FONT FACE="lucida, sans-serif">(por el dr7tbien)</FONT></FONT></FONT></FONT></B></P>
		<LI><P><A HREF="pag_n10_10.html"><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">10.10.-
		Desarrollo del programa articulo.exe usando estructuras de datos</FONT></FONT></B></A><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">
		<FONT SIZE=3><FONT FACE="lucida, sans-serif">(por el dr7tbien)</FONT></FONT></FONT></FONT></B></P>
		<LI><P><A HREF="pag_n10_11.html"><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">10.11.-
		Borrado de datos en archivos</FONT></FONT></B></A><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">
		<FONT SIZE=3><FONT FACE="lucida, sans-serif">(por el dr7tbien)</FONT></FONT></FONT></FONT></B></P>
		<LI><P><A HREF="pag_n10_12.html"><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">10.12.-
		Acceso a los ficheros de forma no secuencial, fseek()</FONT></FONT></B></A><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">
		<FONT SIZE=3><FONT FACE="lucida, sans-serif">(por el dr7tbien)</FONT></FONT></FONT></FONT></B></P>
		<LI><P><A HREF="pag_n10_13.html"><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">10.13.-
		&iquest;Donde est&aacute; el puntero de L/E? La funci&oacute;n
		ftell()</FONT></FONT></B></A><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">
		<FONT SIZE=3><FONT FACE="lucida, sans-serif">(por el dr7tbien)</FONT></FONT></FONT></FONT></B></P>
		<LI><P><A HREF="pag_n10_14.html"><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">10.14.-
		Funci&oacute;n rewind()</FONT></FONT></B></A><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">n
		<FONT SIZE=3><FONT FACE="lucida, sans-serif">(por el dr7tbien)</FONT></FONT></FONT></FONT></B></P>
		<LI><P><A HREF="pag_n10_15.html"><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">10.15.-
		Borrando ficheros con remove()</FONT></FONT></B></A><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">
		<FONT SIZE=3><FONT FACE="lucida, sans-serif">(por el dr7tbien)</FONT></FONT></FONT></FONT></B></P>
		<LI><P><A HREF="pag_n10_16.html"><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">10.16.-
		Renombrando ficheros con rename()</FONT></FONT></B></A><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">
		<FONT SIZE=3><FONT FACE="lucida, sans-serif">(por el dr7tbien)</FONT></FONT></FONT></FONT></B></P>
		<LI><P><A HREF="pag_n10_17.html"><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">10.17.-
		A&ntilde;adiendo funciones de borrado al programa articulo.exe</FONT></FONT></B></A><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">
		<FONT SIZE=3><FONT FACE="lucida, sans-serif">(por el dr7tbien)</FONT></FONT></FONT></FONT></B></P>
		<LI><P><A HREF="pag_n10_18.html"><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">10.18.-
		Detecci&oacute;n del fin de fichero con feof()</FONT></FONT></B></A><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">
		<FONT SIZE=3><FONT FACE="lucida, sans-serif">(por el dr7tbien)</FONT></FONT></FONT></FONT></B></P>
	</UL>
</UL>
<P STYLE="margin-bottom: 0cm"><BR>
</P>
<P ALIGN=LEFT><A NAME="10.11"></A><A NAME="B2"></A><FONT FACE="lucida, sans-serif"><FONT SIZE=3><IMG SRC="d0ac.gif" NAME="Imagen25" ALIGN=BOTTOM WIDTH=93 HEIGHT=36 BORDER=0><FONT SIZE=4>
<B>10.11.- Borrado de datos en archivos</B></FONT><B><IMG SRC="images/blurulr4.gif" NAME="Imagen26" ALIGN=BOTTOM WIDTH=665 HEIGHT=5 BORDER=0></B></FONT></FONT></P>
<P ALIGN=LEFT><BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm; font-weight: medium"><FONT FACE="lucida, sans-serif"><FONT SIZE=3>La
t&eacute;cnica de borrado de datos en archivos es simple. Se trata de
insertar una &quot;bandera&quot; o variable <B>int</B> o <B>char</B>
de manera que cuando adquiera determinados valores, el programa
ignore esos datos. Por ejemplo, en la estructura <B>articulo
</B>podr&iacute;amos insertar la siguiente variable bandera:</FONT></FONT></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><BR>
</P>
<CENTER>
	<TABLE WIDTH=90% BORDER=0 CELLPADDING=4 CELLSPACING=0>
		<COL WIDTH=256*>
		<THEAD>
			<TR>
				<TD WIDTH=100% VALIGN=TOP BGCOLOR="#ffff99">
					<P><FONT FACE="lucida, sans-serif"><FONT SIZE=3><B>struct</B>
					articulo<BR>{<BR><B>char</B> NombreArticulo[10];<BR><B>int</B>
					Precio;<BR><B>int </B>bandera;<BR>};</FONT></FONT></P>
				</TD>
			</TR>
		</THEAD>
	</TABLE>
</CENTER>
<P ALIGN=LEFT STYLE="font-weight: medium"><FONT FACE="lucida, sans-serif"><FONT SIZE=3><BR>Podr&iacute;amos
suponer que en una operaci&oacute;n de lectura de datos del archivo
no leyera los datos de las estructuras que su int bandera valga 0 por
ejemplo. En la funci&oacute;n <B>ConsultarDatos() </B>podr&iacute;amos
insertar unas l&iacute;neas que evitaran la lectura por pantalla de
las estructuras cuyas banderas valgan 0: </FONT></FONT>
</P>
<P ALIGN=LEFT><BR><BR>
</P>
<CENTER>
	<TABLE WIDTH=95% BORDER=0 CELLPADDING=4 CELLSPACING=0>
		<COL WIDTH=14*>
		<COL WIDTH=242*>
		<THEAD>
			<TR>
				<TD WIDTH=5% VALIGN=BOTTOM BGCOLOR="#ffff99" SDVAL="32" SDNUM="1034;">
					<P ALIGN=RIGHT><FONT FACE="lucida, sans-serif"><FONT SIZE=3><B>32</B></FONT></FONT></P>
				</TD>
				<TD WIDTH=95% VALIGN=TOP BGCOLOR="#ffff99">
					<P><FONT FACE="lucida, sans-serif"><FONT SIZE=3><B>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while</B>((chivato
					= <B>fread</B>(&amp;el_articulo, sizeof(el_articulo), 1,</FONT></FONT></P>
				</TD>
			</TR>
		</THEAD>
		<TBODY>
			<TR>
				<TD WIDTH=5% VALIGN=BOTTOM BGCOLOR="#ffff99" SDVAL="33" SDNUM="1034;">
					<P ALIGN=RIGHT><FONT FACE="lucida, sans-serif"><FONT SIZE=3><B>33</B></FONT></FONT></P>
				</TD>
				<TD WIDTH=95% VALIGN=TOP BGCOLOR="#ffff99">
					<P><FONT FACE="lucida, sans-serif"><FONT SIZE=3>&nbsp;&nbsp;stream))
					== 1)</FONT></FONT></P>
				</TD>
			</TR>
			<TR>
				<TD WIDTH=5% VALIGN=BOTTOM BGCOLOR="#ffff99" SDVAL="34" SDNUM="1034;">
					<P ALIGN=RIGHT><FONT FACE="lucida, sans-serif"><FONT SIZE=3><B>34</B></FONT></FONT></P>
				</TD>
				<TD WIDTH=95% VALIGN=TOP BGCOLOR="#ffff99">
					<P><FONT FACE="lucida, sans-serif"><FONT SIZE=3>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR><B>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if</B>(el_articulo.bandera
					== 0)<BR><B>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue;</B>
					</FONT></FONT>
					</P>
				</TD>
			</TR>
			<TR>
				<TD WIDTH=5% VALIGN=BOTTOM BGCOLOR="#ffff99" SDVAL="35" SDNUM="1034;">
					<P ALIGN=RIGHT><FONT FACE="lucida, sans-serif"><FONT SIZE=3><B>35</B></FONT></FONT></P>
				</TD>
				<TD WIDTH=95% VALIGN=TOP BGCOLOR="#ffff99">
					<P><FONT FACE="lucida, sans-serif"><FONT SIZE=3>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>printf</B>(&quot;referencia--&gt;
					%s\n&quot;, el_articulo.NombreArticulo);</FONT></FONT></P>
				</TD>
			</TR>
			<TR>
				<TD WIDTH=5% VALIGN=BOTTOM BGCOLOR="#ffff99" SDVAL="36" SDNUM="1034;">
					<P ALIGN=RIGHT><FONT FACE="lucida, sans-serif"><FONT SIZE=3><B>36</B></FONT></FONT></P>
				</TD>
				<TD WIDTH=95% VALIGN=TOP BGCOLOR="#ffff99">
					<P><FONT FACE="lucida, sans-serif"><FONT SIZE=3>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</FONT></FONT></P>
				</TD>
			</TR>
		</TBODY>
	</TABLE>
</CENTER>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm; font-weight: medium"><FONT FACE="lucida, sans-serif"><FONT SIZE=3>Con
lo que evitar&iacute;amos la lectura por pantalla de estos datos.</FONT></FONT></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm; font-weight: medium"><FONT FACE="lucida, sans-serif"><FONT SIZE=3>Otra
manera de borrar datos es eliminarlos definitivamente del fichero. La
forma de hacerlo ser&iacute;a copiar secuencialmente los datos del
fichero &quot;<B>datos.dat</B>&quot; a otro fichero &quot;<B>auxiliar</B>&quot;
a excepci&oacute;n de los que su bandera valga 0, eliminar el fichero
<B>datos.dat</B> y renombrar el fichero &quot;<B>auxiliar</B>&quot; a
&quot;<B>datos.dat</B>&quot;.</FONT></FONT></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm; font-weight: medium"><FONT FACE="lucida, sans-serif"><FONT SIZE=3>Para
poder usar corectamente estos m&eacute;todos de borrado de datos en
archivos hemos de echar un vistazo a nuevas funciones de C que nos
servir&aacute;n de gran ayuda: <B>fseek()</B>, <B>ftell()</B>,
<B>remove()</B> y <B>rename().</B></FONT></FONT></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><BR>
</P>
<CENTER>
	<TABLE WIDTH=95% BORDER=0 CELLPADDING=4 CELLSPACING=0>
		<COL WIDTH=71*>
		<COL WIDTH=44*>
		<COL WIDTH=1*>
		<COL WIDTH=69*>
		<COL WIDTH=71*>
		<THEAD>
			<TR VALIGN=TOP>
				<TD WIDTH=28% BGCOLOR="#ffffff">
					<P ALIGN=CENTER><A HREF="indice.html"><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">contenido</FONT></FONT></B></A></P>
				</TD>
				<TD WIDTH=17% BGCOLOR="#ffffff">
					<P ALIGN=CENTER><A HREF="index.html"><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">Home</FONT></FONT></B></A></P>
				</TD>
				<TD COLSPAN=2 WIDTH=27% BGCOLOR="#ffffff">
					<P ALIGN=CENTER><A HREF="index.html#colaborar"><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">colaborar</FONT></FONT></B></A></P>
				</TD>
				<TD WIDTH=28% BGCOLOR="#ffffff">
					<P ALIGN=CENTER><A HREF="../cursoc.tar.gz"><B><FONT SIZE=3><FONT FACE="lucida, sans-serif">download</FONT></FONT></B></A></P>
				</TD>
			</TR>
		</THEAD>
		<TBODY>
			<TR VALIGN=TOP>
				<TD COLSPAN=3 WIDTH=45% BGCOLOR="#ffffff">
					<P><BR>&nbsp; 
					</P>
					<P ALIGN=CENTER><IMG SRC="sologo.gif" NAME="Imagen9" ALIGN=MIDDLE WIDTH=97 HEIGHT=34 BORDER=0></P>
				</TD>
				<TD COLSPAN=2 WIDTH=55% BGCOLOR="#ffffff">
					<P ALIGN=LEFT><BR><BR>
					</P>
					<ADDRESS STYLE="margin-bottom: 0.5cm; font-weight: medium; text-align: left">
					<FONT FACE="lucida, sans-serif"><FONT SIZE=3>Ultima modificaci&oacute;n
					<SDFIELD TYPE=DATETIME SDVAL="36588,0897280093" SDNUM="1034;0;D/MM/AA">3/03/00</SDFIELD></FONT></FONT></ADDRESS>
					<ADDRESS STYLE="margin-bottom: 0.5cm; font-weight: medium; text-align: left">
					<FONT FACE="lucida, sans-serif"><FONT SIZE=3>autor: dr7tbien </FONT></FONT>
					</ADDRESS>
					<ADDRESS STYLE="text-align: left"><SPAN STYLE="font-weight: medium"><FONT FACE="lucida, sans-serif"><FONT SIZE=3>Para
					consultar cualquier cosilla o alguna sugerencia
					</FONT><A HREF="mailto:dr7tbien@mixmail.com"><FONT SIZE=3>dr7tbien@mixmail.com<BR></FONT></A></FONT></SPAN><BR>
					</ADDRESS>
				</TD>
			</TR>
		</TBODY>
	</TABLE>
</CENTER>
<P STYLE="margin-bottom: 0cm"><BR>
</P>
</BODY>
</HTML>