<?xml version="1.0" encoding="iso-8859-1" ?>
<!DOCTYPE article PUBLIC "-//OASIS//DTD DocBook V4.1.2//EN"
"http://www.oasis-open.org/docbook/xml/4.1.2/docbookx.dtd">

<article>

<articleinfo>

<title>Instalación y configuración de un servidor de IRC</title>

<author>
<firstname>Diego Berrueta Muñoz, <ulink
url="mailto:berrueta@geocities.com"
>berrueta@geocities.com</ulink
> y
José Alfredo Oslé Posadas, <ulink
url="mailto:aosle@pinon.ccu.uniovi.es"
>aosle@pinon.ccu.uniovi.es</ulink
></firstname>
</author>

<pubdate>Julio 1998</pubdate>

<abstract>

<para>
Este documento describe los pasos y el software necesarios para crear un
servidor de IRC con Linux: el demonio de IRC, el bot de gestión del
servidor y un programa cliente de IRC.
</para>

</abstract>

</articleinfo>

<sect1>
<title>Nota de los autores </title>

<para>
Este documento es el resultado de un trabajo realizado para el curso
"Administración de un sistema UNIX con Linux", impartido en el verano de
1998 en la Escuela Universitaria de Ingeniería Técnica en Informática de
Oviedo (<emphasis remap="it">EUITIO</emphasis>). 
</para>

<para>
Los autores quieren aclarar que no son, ni pretenden ser, expertos en
IRC. Por eso, este documento puede contener errores. Esperamos
que sepan perdonarlos y nos los comuniquen.
</para>

<para>
Para obtener más información sobre Linux, no olvide visitar la página web
del <emphasis remap="it">Proyecto Lucas</emphasis>, (<literal remap="tt"><ulink
url="http://lucas.ctv.es/"
>http://lucas.ctv.es/</ulink
></literal>) donde se encargan de traducir las guías
de Linux al castellano, y la página de <emphasis remap="it">INSFLUG</emphasis> (<literal remap="tt"><ulink
url="http://www.insflug.org/"
>http://www.insflug.org/</ulink
></literal>), que
coordina la traducción de los documentos <emphasis remap="it">HOWTO</emphasis> y <emphasis remap="it">FAQ</emphasis>).
</para>

</sect1>

<sect1>
<title>Introducción </title>

<sect2>
<title>¿Qué es el IRC? </title>

<para>
El IRC (<emphasis remap="it">Internet Relay Chat</emphasis>) surgió como una ampliación del
programa <emphasis remap="it">talk</emphasis>, tratando de superar sus limitaciones. Se trata de
un sistema de conversación en tiempo real a través de redes de ordenadores
y, por supuesto, de Internet. Las principales diferencias con el
<emphasis remap="it">talk</emphasis> son las siguientes: 
</para>

<para>

<itemizedlist>
<listitem>

<para>
 Incorpora un protocolo mucho más elaborado, independiente de la
plataforma. 

</para>
</listitem>
<listitem>

<para>
 Posibilidad de conversaciones en las que intervengan más de dos
participantes: el límite depende sólo de las posibilidades de los
servidores. 

</para>
</listitem>
<listitem>

<para>
 Organización de las charlas en forma de múltiples <emphasis remap="it">canales</emphasis>: 
por establecer un símil, los canales son <emphasis remap="it">salones</emphasis> donde se dan
cita un cierto número de usuarios. Esta posibilidad se aprovecha
generalmente para realizar canales temáticos, que son el punto de
encuentro de personas con inquietudes parecidas. 

</para>
</listitem>
<listitem>

<para>
 Posibilidad de conectar varias redes, para poner en comunicación
un gran número de usuarios. 

</para>
</listitem>
<listitem>

<para>
 Los usuarios pueden ocultar su identidad, lo que facilita
conversaciones más espontáneas, pero también puede crear riesgos de
seguridad. 

</para>
</listitem>

</itemizedlist>

</para>

<para>
El IRC nació hace diez años, cuando el finlandés Jarkko Oikarinen escribió
el primer programa para poder efectuar conversaciones con una estructura
cliente-servidor. Su expansión fue muy rápida, puesto que pronto se
implantó en la red nacional finlandesa (<emphasis remap="it">FUNET</emphasis>), y posteriormente
en Noruega, Suiza y Estados Unidos. 
</para>

<para>
La primera gran red de IRC fue <emphasis remap="it">EFNet</emphasis> (1990), y después surgieron
otras como <emphasis remap="it">Undernet</emphasis> (<literal remap="tt"><ulink
url="http://www.undernet.org"
>http://www.undernet.org</ulink
></literal>), <emphasis remap="it">IRCNet</emphasis>, <emphasis remap="it">DALNet</emphasis>,
<emphasis remap="it">StarChat</emphasis>, <emphasis remap="it">StarLink</emphasis>, <emphasis remap="it">NewLet</emphasis>. También existen
redes para las personas de habla hispana, como <emphasis remap="it">RedLatina</emphasis>,
<emphasis remap="it">IRC-Hispano</emphasis> (<literal remap="tt"><ulink
url="http://www.irc-hispano.org"
>http://www.irc-hispano.org</ulink
></literal>) o la más reciente, <emphasis remap="it">Esnet</emphasis>
(<literal remap="tt"><ulink
url="http://www.esnet.org"
>http://www.esnet.org</ulink
></literal>).
Algunas de estas redes son de grandes magnitudes: por ejemplo, en
<emphasis remap="it">Undernet</emphasis> existen más de diez mil canales. 
</para>

</sect2>

<sect2>
<title>¿Qué es un servidor de IRC? </title>

<para>
Como se ha comentado, el IRC se basa en redes de ordenadores. En estas
redes, al menos un de los ordenadores trabaja como <emphasis remap="it">servidor</emphasis>, y
sus funciones son recoger todos los mensajes enviados por los usuarios y
reenviarlos. Por tanto, los mensajes no son enviados directamente del
emisor al destinatario, sino que pasan por el servidor.
</para>

<para>
Esta filosofía de funcionamiento permite al administrador del servidor
ejercer un cierto control: por ejemplo, puede impedir el acceso a
determinados usuarios, ampliar las posibilidades de conversación
comunicando varios servidores o limitar las posibilidades de los usuarios.
Además, hace que todos los usuarios se conecten, en principio, en igualdad
de condiciones, excepto el administrador, por supuesto. 
</para>

</sect2>

<sect2>
<title>¿Qué necesita un servidor de IRC? </title>

<para>
Para que un sistema UNIX pueda hacer las funciones de un servidor de IRC,
es suficiente con lo siguiente: 
</para>

<para>

<itemizedlist>
<listitem>

<para>
 Tener acceso a la red.
</para>
</listitem>
<listitem>

<para>
 Instalar el software apropiado.
</para>
</listitem>

</itemizedlist>

</para>

<para>
Dando por supuesto el primer apartado, vamos a puntualizar más en el
segundo. ¿Qué tipo de software se requiere? En principio, para el
establecimiento de un servicio básico, es suficiente con ejecutar un
<emphasis remap="it">demonio</emphasis> de IRC, que se encargará de las tareas descritas en el
apartado anterior. Sin embargo, esto proporcionará un servicio precario: 
para un gestión eficiente y automática de la red de IRC, se hace necesario
un <emphasis remap="it">bot</emphasis> o <emphasis remap="it">script</emphasis>, que se encargue de la gestión de
usuarios y canales sin intervención por parte del administrador.
</para>

<para>
Con el fin de poder monitorizar y administrar la red, es conveniente que
el servidor disponga también de un software cliente de IRC. 
</para>

</sect2>

<sect2>
<title>Comandos básicos de IRC </title>

<para>
Antes de describir los comandos, es necesario conocer cuál es, a grandes
rasgos, la filosofía del funcionamiento del IRC. Como ya ha quedado dicho,
las conversaciones se organizan en canales, que a su vez se identifican
por un nombre (generalmente comienza con el símbolo <literal remap="tt">&amp;</literal>), y un
<emphasis remap="it">topic</emphasis>, que es una breve descripción de los temas a los que está
dedicado el canal.
</para>

<para>
Para poder dar coherencia a las conversaciones, los usuarios también están
identificados por un nombre, que se llama <emphasis remap="it">nick</emphasis> o <emphasis remap="it">apodo</emphasis>. 
Con el fin de poder mostrar una información más explícita sobre el
usuario, muchas redes exigen introducir el nombre completo y dirección de
correo electrónico para poder acceder; sin embargo, la mayoría de usuarios
aprovecha estos campos para introducir algún comentario más o menos
gracioso. 
</para>

<para>
Cuando un usuario está dentro de un canal, cualquier texto que escriba y
que no sea reconocido como un comando, será enviado a todos los demás
usuarios que forman parte del canal, y se indicará el apodo del usuario
emisor. De la misma forma, la recepción de mensajes es automática;
simplemente aparecen en la pantalla cuando son enviados.
</para>

<para>
Dentro de un canal existe al menos un usuario que tiene más privilegios
que el resto. Se conoce como <emphasis remap="it">operador</emphasis> (<emphasis remap="it">Op</emphasis>), y tiene,
entre otros, el poder de expulsar a otros usuarios del canal. 
</para>

<para>
Un usuario puede estar presente en varios canales, aunque para poder
disfrutar plenamente de esta posibilidad, es necesario tener un software
cliente potente y manejable. 
</para>

<para>
Los comandos que se van a describir ahora son los más elementales que debe
conocer un usuario para participar en las conversaciones. Estos comandos
son enviados por el cliente al servidor, quien se encarga de reaccionar de
forma adecuada ante ellos. 
</para>

<para>

<itemizedlist>
<listitem>

<para>
<literal remap="tt">/HELP</literal>: permite obtener ayuda.

</para>
</listitem>
<listitem>

<para>
<literal remap="tt">/JOIN &amp;nombre_canal, /CHANNEL &amp;nombre_canal</literal>:

introduce al usuario en el canal especificado. Si este canal no existe, se
crea (la gestión dinámica de canales es otra de las posibilidades del
IRC), y además confiere al usuario el privilegio de ser el operador del
canal. 

</para>
</listitem>
<listitem>

<para>
<literal remap="tt">/WHO nombre_canal</literal>: muestra una lista de los usuarios del
IRC. Si se indica un nombre de canal, restringe el listado a las personas
que están presentes en ese canal. 

</para>
</listitem>
<listitem>

<para>
<literal remap="tt">/WHOIS nick</literal>: muestra más información sobre un usuario del
que conocemos su nick. Sin embargo, por las razones ya comentadas, la
información no suele ser cierta. 

</para>
</listitem>
<listitem>

<para>
<literal remap="tt">/TOPIC cadena</literal>: cambia el <emphasis remap="it">topic</emphasis> o descripción del
canal (si tenemos privilegios para poder hacerlo).

</para>
</listitem>
<listitem>

<para>
<literal remap="tt">/NICK nuevo_nick</literal>: permite cambiar nuestro nick o apodo.

</para>
</listitem>
<listitem>

<para>
<literal remap="tt">/MSG nick mensaje</literal>: envía un mensaje personal a un usuario
determinado, sin que los demás usuarios lo vean en su pantalla.

</para>
</listitem>
<listitem>

<para>
<literal remap="tt">/SIGNOFF, /SI, /BYE, /EXIT, /QUIT</literal>: cualquiera de ellos
sirve para abandonar la conversación. Si se añade un texto detrás del
comando, será enviado como mensaje de despedida. 

</para>
</listitem>
<listitem>

<para>
<literal remap="tt">/USERS</literal>: muestra una lista de todos los usuarios conectados
al servidor. 

</para>
</listitem>
<listitem>

<para>
<literal remap="tt">/AWAY</literal>: se utiliza para anunciar que, sin abandonar el
servidor, vamos a estar unos minutos sin atender a la conversación. 

</para>
</listitem>
<listitem>

<para>
<literal remap="tt">/QUERY nick</literal>: invita al usuario indicado a participar en una
conversación privada. Si el receptor responde con un comando similar, el
diálogo particular dará comienzo.

</para>
</listitem>

</itemizedlist>

</para>

<para>
Los siguientes comandos los utilizan exclusivamente los operadores:
</para>

<para>

<itemizedlist>
<listitem>

<para>
<literal remap="tt">/OPER nick password</literal>: da al usuario indicado los privilegios
de operador (si la contraseña es válida). 

</para>
</listitem>
<listitem>

<para>
<literal remap="tt">/KICK nick</literal>: expulsa al usuario indicado del servidor. 

</para>
</listitem>
<listitem>

<para>
<literal remap="tt">/quote comando</literal>: permite enviar comandos al servidor. Se
puede utilizar para matar el demonio o realizar operaciones privilegiadas. 

</para>
</listitem>

</itemizedlist>

</para>

<para>
Para una lista más completa de los posibles comandos de IRC, se puede
acudir a <literal remap="tt"><ulink
url="ftp://ftp.rediris.es/docs/rfc/14xx/1459"
>ftp://ftp.rediris.es/docs/rfc/14xx/1459</ulink
></literal>. 
</para>

</sect2>

<sect2>
<title>Ataques en el IRC </title>

<para>
Como veremos más adelante, tanto el <emphasis remap="it">demonio</emphasis> de IRC como el
<emphasis remap="it">bot</emphasis> de gestión de los canales dedican una parte importante de su
funcionalidad a impedir la entrada de algunos usuario en las redes de IRC. 
¿Por qué es tan importante poder hacer esto? 
</para>

<para>
La razón es que existen usuarios con grandes conocimientos sobre el IRC, y
que muestran una actitud beligerante respecto a las más desprevenidos, los
usuarios noveles. Aprovechándose de las grietas del sistema, son capaces
de expulsar a otros usuarios e incluso <emphasis remap="it">colgar</emphasis> máquinas remotas,
mediante diversos tipos de estrategias: 
</para>

<para>

<itemizedlist>
<listitem>

<para>
<emphasis remap="it">Flood</emphasis>: consiste en requerir mucha información de un usuario
de manera continua (mediante <literal remap="tt">version, whois, ping, dcc</literal>, etc.),
con el objeto de que la máquina atacada devuelva todas las peticiones,
llegando a poner en peligro de saturación al servidor, que procederá a
expulsarla. 

</para>
</listitem>
<listitem>

<para>
<emphasis remap="it">Floodnets</emphasis>: son grupos de usuarios coordinados mediante
<emphasis remap="it">scripts</emphasis>, que consiguen hacer el trabajo de <emphasis remap="it">flood</emphasis> más
efectivo. 

</para>
</listitem>
<listitem>

<para>
<emphasis remap="it">Botnets</emphasis>: se trata de una versión automatizada (mediante
<emphasis remap="it">scripts</emphasis>) del <emphasis remap="it">flood</emphasis>. 

</para>
</listitem>
<listitem>

<para>
<emphasis remap="it">ICMP</emphasis>: este tipo de ataques son mucho más sofisticados y
malignos. Como dato, baste decir que existe un <emphasis remap="it">script</emphasis> escrito en
sólo cinco líneas de <emphasis remap="it">perl</emphasis> y capaz de bloquear una máquina Windows
remota. 

</para>
</listitem>
<listitem>

<para>
<emphasis remap="it">Smurf</emphasis>: consiste en enviar un <emphasis remap="it">ping</emphasis> a la dirección
<emphasis remap="it">broadcast</emphasis> de una gran red, con la identidad del remitente
falseada para que apunte a la persona atacada. Las respuestas de las
máquinas de la red irán directamente a esta persona, rompiéndole la
conexión. 

</para>
</listitem>

</itemizedlist>

</para>

<para>
Al crear un servidor de IRC, se debe poner mucha atención en la prevención
de ataques. Los ataques por saturación son relativamente fáciles de evitar
mediante un <emphasis remap="it">bot</emphasis> capaz de detectarlos sobre la marcha y anularlos. 
Sin embargo, contra los ataques <emphasis remap="it">ICMP</emphasis>, la mejor manera de
defenderse es utilizar la última versión del núcleo y los parches.
</para>

<para>
Para dificultar aún más el seguimiento de los atacantes, éstos suelen
emplear <emphasis remap="it">bouncers</emphasis>, que son demonios colocados en una tercera
máquina y que se limitan a redirigir todos los paquetes que les lleguen.
De esta forma, el pirata puede actuar sin temor a que descubran su IP. 
</para>

<para>
Se puede consultar más información sobre estos temas (ataques, defensas y
monitorización) en las siguientes direcciones: <literal remap="tt"><ulink
url="http://www.irchelp.org/irchelp/nuke/"
>http://www.irchelp.org/irchelp/nuke/</ulink
></literal> y <literal remap="tt"><ulink
url="http://www.esi.us.es/~roman/tacticas.html"
>http://www.esi.us.es/~roman/tacticas.html</ulink
></literal>. 
</para>

</sect2>

</sect1>

<sect1>
<title>Demonio de IRC: <literal remap="tt">ircd</literal> </title>

<sect2>
<title>Función de un demonio <literal remap="tt">ircd</literal> </title>

<para>
En una arquitectura centralizada como es la <emphasis remap="it">arquitectura
cliente-servidor</emphasis> se distinguen precisamente estas dos partes: 
<emphasis remap="it">cliente</emphasis>, que es el que demanda un servicio; y el
<emphasis remap="it">servidor</emphasis>, que es el que lo oferta. En la máquina servidor
coexistirán tantos programas esperando a la escucha de nuevas peticiones
como servicios diferentes se oferten.
</para>

<para>
Estos programas, denominados <emphasis remap="it">demonios</emphasis> (<emphasis remap="it">daemons</emphasis> en la
terminología inglesa) son programas que están en ejecución, cargados en
memoria, y que están encargados de responder a las peticiones que hacen
los programas clientes, que generalmente están ubicados en otras máquinas,
pero que pueden ejecutarse también en la propia máquina servidor. Por
tanto, siempre hay una correspondencia directa entre el programa o demonio
del servidor y el programa cliente de la máquina cliente. 
</para>

<para>
En nuestro caso particular de IRC, el servidor será la máquina que ejecute
el demonio <emphasis remap="it">ircd</emphasis> y los clientes serán los programas que los
usuarios utilicen para <emphasis remap="it">engancharse</emphasis> a este servidor. 
</para>

</sect2>

<sect2>
<title>Descripción de <literal remap="tt">ircd-hybrid</literal> </title>

<para>
A la hora de instalar un servidor de IRC hay que elegir un demonio de
<literal remap="tt">ircd</literal>. Existen algunos como el <literal remap="tt">irdu</literal>, utilizado en la red
<emphasis remap="it">Undernet</emphasis>, o el más básico, <literal remap="tt">ircd</literal>, sin modificación alguna.
Pero nosotros hemos escogido el <literal remap="tt">ircd-hybrid</literal> versión <literal remap="tt">5.2p1</literal> por ser
el más completo. Es el usado en la red <emphasis remap="it">Efnet</emphasis>.
</para>

</sect2>

<sect2>
<title>Obtención e instalación </title>

<para>
Algunas distribuciones como <emphasis remap="it">Debian</emphasis> incluyen este software entre
sus paquetes básicos. Si utilizamos otra distribución, se puede recurrir
al FTP o contactar con sus autores en la dirección <literal remap="tt"><ulink
url="mailto:ircd-hybrid@vol.com"
>ircd-hybrid@vol.com</ulink
></literal>.
</para>

<para>
El primer paso es descomprimir el paquete con el comando:
</para>

<para>

<screen>
tar xvzf ircd.tar.gz
</screen>

</para>

<para>
Los ficheros descomprimidos los alojaremos en el directorio
<literal remap="tt">/usr/src/ircd-hybrid-5.2p1/</literal>.
</para>

<para>
Algunos de los ficheros más importantes son:
</para>

<para>

<itemizedlist>
<listitem>

<para>
<literal remap="tt">INSTALL</literal>: describe los pasos a realizar para la instalación.

</para>
</listitem>
<listitem>

<para>
<literal remap="tt">README.FIRST, README.hybrid, README.small_nets</literal>: como
siempre, conviene leerlos antes de proceder a la instalación. 

</para>
</listitem>
<listitem>

<para>
<literal remap="tt">Opers.txt</literal>: describe los comandos para el operador del
servidor IRC. 

</para>
</listitem>
<listitem>

<para>
<literal remap="tt">Doc/</literal>: este directorio contiene documentación sobre IRC.
</para>
</listitem>

</itemizedlist>

</para>

</sect2>

<sect2>
<title>Configuración previa a la compilación </title>

<para>
Como sugiere la documentación, es preciso revisar algunos ficheros donde
se definen varios parámetros, por lo que será necesario compilar el
programa.  Sin embargo, el primer paso es adaptar los ficheros de
configuración y compilación a nuestro sistema. Esto lo haremos ejecutando
el <emphasis remap="it">script</emphasis> <literal remap="tt">./configure</literal>.
</para>

<para>
A continuación, editaremos parte del código fuente (por motivos de
optimización): puesto que nuestra red no va a tener las pretensiones de
afluencia de usuarios que tiene <emphasis remap="it">Efnet</emphasis>, acortaremos un poco los
recursos reservados por el <emphasis remap="it">ircd</emphasis> para que consuma menos memoria.
</para>

<para>
El primer fichero que cambiaremos será <literal remap="tt">include/config.h</literal>, que
define muchas de las directrices de comportamiento del servidor.
Modificaremos dos líneas <emphasis remap="it">define</emphasis> de esta forma: 
</para>

<para>

<screen>
#define HARD_FDLIMIT    256
#define INIT_MAXCLIENTS 150
</screen>

</para>

<para>
También quitaremos la línea
</para>

<para>

<screen>
#define DO_IDENTD
</screen>

</para>

<para>
para que no chequee constantemente la identidad de todo aquel que entre,
ralentizando los accesos al servidor. 
</para>

<para>
El fichero <literal remap="tt">src/list.c</literal> define el tamaño de algunas tablas mediante
símbolos del preprocesador. Pondremos el valor 64 a las variables
<literal remap="tt">LINK_PREALLOCATE</literal> y <literal remap="tt">CLIENTS_PREALLOCATE</literal>, lo que es
suficiente para una red donde no se prevee un acceso mayor a 60 usuarios. 
</para>

<para>
El último paso antes de la compilación es editar el fichero
<literal remap="tt">Makefile</literal> resultante de ejecutar el <emphasis remap="it">script</emphasis>
<literal remap="tt">./configure</literal>, para que la línea que especifica los parámetros que
usará el compilador <literal remap="tt">gcc</literal> quede de la siguiente forma: 
</para>

<para>

<screen>
# Default CFLAGS
CFLAGS= -g -O2 -DCPU=586 -m486
</screen>

</para>

<para>
Los dos últimos parámetros son opcionales, y sirven para optimizar el
código generado para máquinas <emphasis remap="it">Pentium</emphasis>/<emphasis remap="it">AMD</emphasis>. 
</para>

</sect2>

<sect2>
<title>Compilación </title>

<para>
Una vez hechos todos los ajustes pertinentes, se puede proceder a la
compilación propiamente dicha, con el comando: 
</para>

<para>

<screen>
make
</screen>

</para>

<para>
La compilación transcurrirá durante unos minutos, tras los cuales, si no
se ha producido ningún error, sólo faltará crear el directorio
<literal remap="tt">/usr/local/ircd/</literal>, donde se instalarán los ficheros ejecutables
gracias a la orden: 
</para>

<para>

<screen>
make install
</screen>

</para>

</sect2>

<sect2>
<title>El fichero <literal remap="tt">ircd.conf</literal> </title>

<para>
Ahora se configura el servidor de IRC. Esto se hace editando el fichero
<literal remap="tt">/usr/local/ircd/ircd.conf</literal>, que se estructura en diferentes
líneas, identificadas con una letra, y que contienen parámetros separados
por el signo ':'. Algunas de las líneas más importantes son: 
</para>

<para>

<itemizedlist>
<listitem>

<para>
<literal remap="tt">A</literal>: información sobre los administradores:


<orderedlist>
<listitem>

<para>
Compañía
</para>
</listitem>
<listitem>

<para>
Localización
</para>
</listitem>
<listitem>

<para>
Dirección de contacto
</para>
</listitem>

</orderedlist>


</para>
</listitem>
<listitem>

<para>
<literal remap="tt">M</literal>: información sobre el servidor:


<orderedlist>
<listitem>

<para>
Nombre del host
</para>
</listitem>
<listitem>

<para>
Dirección IP (opcional)
</para>
</listitem>
<listitem>

<para>
Nombre del servidor IRC
</para>
</listitem>
<listitem>

<para>
Puerto (generalmente, 6667).
</para>
</listitem>

</orderedlist>


</para>
</listitem>
<listitem>

<para>
<literal remap="tt">K</literal>: restricciones de acceso a usuarios o redes completas:


<orderedlist>
<listitem>

<para>
Nombre del host.
</para>
</listitem>
<listitem>

<para>
Horario.
</para>
</listitem>
<listitem>

<para>
Nombre de usuario.
</para>
</listitem>

</orderedlist>


</para>
</listitem>
<listitem>

<para>
<literal remap="tt">C</literal> y <literal remap="tt">N</literal>: conexiones a otros servidores de IRC.

</para>
</listitem>
<listitem>

<para>
<literal remap="tt">R</literal>: establece restricciones a través de un programa externo
de validación. 

</para>
</listitem>
<listitem>

<para>
<literal remap="tt">D</literal>: otra forma de impedir conexiones a redes enteras,
mostrando un comentario. 

</para>
</listitem>
<listitem>

<para>
<literal remap="tt">E</literal>: excepciones a la línea <literal remap="tt">K</literal>.

</para>
</listitem>
<listitem>

<para>
<literal remap="tt">F</literal>: super-excepción (similar a la anterior, pero se salta
los límites de clases de usuarios). 

</para>
</listitem>
<listitem>

<para>
<literal remap="tt">Y</literal>: define una clase de usuario:


<orderedlist>
<listitem>

<para>
Número de clase.
</para>
</listitem>
<listitem>

<para>
Frecuencia de ping (segundos).
</para>
</listitem>
<listitem>

<para>
Usuarios por IP.
</para>
</listitem>
<listitem>

<para>
Número máximo de enlaces.
</para>
</listitem>
<listitem>

<para>
Tamaño de la cola de envío.
</para>
</listitem>

</orderedlist>


</para>
</listitem>
<listitem>

<para>
<literal remap="tt">I</literal>: permite el acceso a algunas máquinas:


<orderedlist>
<listitem>

<para>
Dominio o dirección IP.
</para>
</listitem>
<listitem>

<para>
Password del cliente.
</para>
</listitem>
<listitem>

<para>
No documentado (generalmente '*').
</para>
</listitem>
<listitem>

<para>
No documentado.
</para>
</listitem>
<listitem>

<para>
Número de clase asociada.
</para>
</listitem>

</orderedlist>


</para>
</listitem>
<listitem>

<para>
<literal remap="tt">o</literal>: define operadores locales (recomendado):


<orderedlist>
<listitem>

<para>
usuario@host.
</para>
</listitem>
<listitem>

<para>
Clave encriptada.
</para>
</listitem>
<listitem>

<para>
<emphasis remap="it">Nick</emphasis> del operador.
</para>
</listitem>
<listitem>

<para>
No documentado (generalmente 0).
</para>
</listitem>
<listitem>

<para>
No documentado (generalmente 0).
</para>
</listitem>

</orderedlist>


</para>
</listitem>
<listitem>

<para>
<literal remap="tt">O</literal>: define operadores globales.
</para>
</listitem>
<listitem>

<para>
<literal remap="tt">P</literal>: configura puertos adicionales.
</para>
</listitem>

</itemizedlist>

</para>

<para>
Tras las modificaciones oportunas, nuestro fichero <literal remap="tt">ircd.conf</literal> es:
</para>

<para>

<screen>
M:maquina.euitio.uniovi.es:156.35.98.138:IRC EUITIO:6667
A:Universidad de Oviedo EUITIO:Asturias:SysAdm &#60;root@maquina.euitio.uniovi.es&#62;
Y:0:90:3:2:100000
Y:1:90:3:20:100000
I:*.euitio.uniovi.es::*::1
I:156.35.53.*::*::1
Y:3:90:1:100:100000
I:NOMATCH::*@*PPP*::3
I:NOMATCH::*@*slip*::3
o:root@maquina.euitio.uniovi.es:mAJif8plpvVls:Operador:0:0
# Fin del fichero
# No especificamos nada en las líneas
# - C, N, L y N: porque no nos conectamos a ningún otro servidor
# - K, R, D, E y F: porque no establecemos restricciones tan fuertes
# - P: porque no tenemos más puertos
</screen>

</para>

<para>
Nota: para obtener el campo <emphasis remap="it">clave encriptada</emphasis> de la línea <literal remap="tt">o</literal>,
hay que utilizar la herramienta <literal remap="tt">mkpasswd</literal>, ubicada en el directorio
<literal remap="tt">tools</literal>, que toma una cadena de texto y la devuelve encriptada.
</para>

<para>
Podemos verificar la correcta sintaxis del fichero de configuración
<literal remap="tt">ircd.conf</literal> mediante la utilización de la herramienta
<literal remap="tt">tools/chkconf</literal>. 
</para>

<para>
También podemos modificar el fichero <literal remap="tt">ircd.motd</literal> para establecer el
mensaje del día que aparecerá a los usuarios que establezcan contacto con
el servidor.
</para>

</sect2>

<sect2>
<title>Ejecución del demonio </title>

<para>
Por motivos de seguridad, no es posible lanzar el demonio como <literal remap="tt">root</literal>,
así que, o bien se lanza a mano como usuario <literal remap="tt">irc</literal>, simplemente con:
</para>

<para>

<screen>
/usr/local/ircd/ircd
</screen>

</para>

<para>
o añadiendo la siguiente línea en el fichero <literal remap="tt">/etc/inetd.conf</literal>:
</para>

<para>

<screen>
ircd stream tcp wait irc /etc/ircd ircd -i
</screen>

</para>

<para>
para que arranque automáticamente cada vez que se inicie el equipo servidor.
Sin embargo, este segundo método no lo hemos podido confirmar porque,
aparentemente, no ha funcionado.
</para>

</sect2>

</sect1>

<sect1>
<title>El <emphasis remap="it">bot</emphasis> de gestión del servidor </title>

<sect2>
<title>Función de un <emphasis remap="it">bot</emphasis> de gestión del servidor</title>

<para>
La función de un <emphasis remap="it">bot</emphasis> o <emphasis remap="it">script</emphasis> de gestión del servidor es
ampliar las posibilidades del IRC, y a la vez permitir un cierto control sobre
los usuarios. El <emphasis remap="it">bot</emphasis> se introduce como un usuario más, pero adquiere
el poder del operador, lo que le permite administrar de manera eficiente los
canales. Entre sus posibilidades están:
</para>

<para>

<itemizedlist>
<listitem>

<para>
Envío de mensajes periódicos a ciertos canales.
</para>
</listitem>
<listitem>

<para>
Impedir la entrada de usuarios no deseados.
</para>
</listitem>
<listitem>

<para>
Reconocer a los administradores del servidor y cederles el poder.
</para>
</listitem>
<listitem>

<para>
Aumentar la seguridad general del servidor.
</para>
</listitem>
<listitem>

<para>
Impedir que los usuarios puedan expulsarse entre ellos.
</para>
</listitem>

</itemizedlist>

</para>

<para>
Existen multitud de <emphasis remap="it">bots</emphasis> disponibles. Entre los más importantes,
podemos destacar:
</para>

<para>

<itemizedlist>
<listitem>

<para>
<emphasis remap="it">Eggdrop</emphasis>: posiblemente el más conocido, pero también el más
complejo de instalar y mantener. Requiere TCL.
</para>
</listitem>
<listitem>

<para>
<emphasis remap="it">Uworld</emphasis>.
</para>
</listitem>
<listitem>

<para>
<emphasis remap="it">Cservice</emphasis>.
</para>
</listitem>
<listitem>

<para>
<emphasis remap="it">Argobot</emphasis>.
</para>
</listitem>

</itemizedlist>

</para>

</sect2>

<sect2>
<title><emphasis remap="it">Argobot</emphasis> </title>

<para>
El <emphasis remap="it">Argobot</emphasis> es un <emphasis remap="it">bot</emphasis> relativamente sencillo escrito por el
español Jesús Cea Avión (<literal remap="tt"><ulink
url="http://www.argo.es/~jcea"
>http://www.argo.es/~jcea</ulink
></literal>), aunque algunas grandes redes hispanas
de IRC están adoptándolo. Soporta todas las características antes enunciadas,
pero sin profundizar en ellas, de forma que no resulta tan grande y complejo
como <emphasis remap="it">Eggdrop</emphasis>. Como ventaja añadida, ocupa muy poca memoria y es muy
eficiente. Es un <emphasis remap="it">bot</emphasis> multicanal capaz de:
</para>

<para>

<itemizedlist>
<listitem>

<para>
Proteger los modos de un canal.
</para>
</listitem>
<listitem>

<para>
Dar y quitar los privilegios de operador de forma manual y automática.
</para>
</listitem>
<listitem>

<para>
Enviar mensajes (<emphasis remap="it">notices</emphasis>) a los usuarios recién llegados a
un canal.
</para>
</listitem>
<listitem>

<para>
Controlar el acceso y configuración de modos y permisos
independientemente para cada canal.
</para>
</listitem>
<listitem>

<para>
Acceder a redes que exigen claves.
</para>
</listitem>

</itemizedlist>

</para>

<para>
Otras características del Argobot son:
</para>

<para>

<itemizedlist>
<listitem>

<para>
Se distribuye con el código fuente completo (escrito en lenguaje C), y
que además puede compilarse bajo UNIX o en plataformas Windows.
</para>
</listitem>
<listitem>

<para>
Utiliza un fichero de configuración.
</para>
</listitem>
<listitem>

<para>
Lleva registros (ficheros <emphasis remap="it">log</emphasis>) de toda la actividad que se
produce en el servidor.
</para>
</listitem>
<listitem>

<para>
Puede reconfigurarse sin necesidad de detener su actividad, es decir,
puede modificarse su configuración y cargar de nuevo el <emphasis remap="it">bot</emphasis> sin que
los usuarios adviertan ningún cambio ni interrupción del servicio.
</para>
</listitem>

</itemizedlist>

</para>

</sect2>

<sect2>
<title>Instalación </title>

<para>
El <emphasis remap="it">Argobot</emphasis> se puede conseguir en la página web de su creador
(<literal remap="tt"><ulink
url="http://www.argo.es/~jcea/irc/argobot.htm"
>http://www.argo.es/~jcea/irc/argobot.htm</ulink
></literal>). Existen multitud de
versiones, algunas desarrolladas específicamente para alguna gran red, y además
se pueden conseguir una veintena de <emphasis remap="it">parches</emphasis> que corrigen algunos
defectos y añaden nuevas características.
</para>

<para>
Si optamos por obtener el <emphasis remap="it">Argobot</emphasis> por Internet, descubriremos que
apenas incluye unos pocos ficheros (código fuente C), y como única
documentación un fichero <literal remap="tt">README</literal> muy breve. Para paliar esta
deficiencia, su autor a puesto toda la documentación disponible a través de
Internet, en forma de páginas web. Es necesario, por tanto, descargar estas
páginas y leerlas detenidamente. 
</para>

<para>
El <emphasis remap="it">Argobot</emphasis> se suministra en forma de un fichero <literal remap="tt">.tgz</literal>, que una
vez descomprimido (en nuestro caso, en el directorio
<literal remap="tt">/usr/src/argobot/</literal>) da lugar a cuatro ficheros:
</para>

<para>

<itemizedlist>
<listitem>

<para>
<literal remap="tt">argobot.c</literal>: fichero principal del código fuente.
</para>
</listitem>
<listitem>

<para>
<literal remap="tt">argo_parser.c</literal>: código fuente que interpreta el fichero de
configuración.
</para>
</listitem>
<listitem>

<para>
<literal remap="tt">argobot.conf</literal>: fichero de configuración.
</para>
</listitem>
<listitem>

<para>
<literal remap="tt">argobot.log</literal>: mantiene un registro de los comandos enviados
al bot.
</para>
</listitem>

</itemizedlist>

</para>

<para>
Es importante comprobar que este último fichero se ha creado realmente.
Debido a algunas configuraciones de <literal remap="tt">tar</literal>, es posible que no se
genere este fichero (porque está vacío), lo que provocará errores al intentar
ejecutar el <emphasis remap="it">Argobot</emphasis>. En este caso, es necesario crear el fichero
manualmente (con la orden <literal remap="tt">touch</literal>, por ejemplo), y darle los permisos
apropiados. 
</para>

<para>
Nota: si queremos utilizar una de las características más avanzadas del
<emphasis remap="it">Argobot</emphasis>, como es la propagación de líneas <literal remap="tt">K</literal> (sólo tiene
sentido en redes de varios servidores), será necesario seguir las
instrucciones relativas a los permisos y el fichero <literal remap="tt">ircd.conf</literal>.
</para>

</sect2>

<sect2>
<title>Edición del código fuente </title>

<para>
Antes de compilar, es conveniente comprobar que el código fuente esta bien
adaptado a nuestro sistema. Las modificaciones que debemos hacer dependen de la
forma en la que vamos a ejecutar el <emphasis remap="it">bot</emphasis>:
</para>

<para>

<itemizedlist>
<listitem>

<para>
Si vamos a ejecutar el <emphasis remap="it">bot</emphasis> como <emphasis remap="it">root</emphasis> (es el método
recomendado), nos aseguraremos de que está definido <literal remap="tt">SEGURIDAD</literal> (con la
sentencia <literal remap="tt">#define SEGURIDAD</literal>), y que las macros <literal remap="tt">UID</literal> y
<literal remap="tt">GID</literal> tienen valores apropiados. Si además vamos a hacer un
<emphasis remap="it">CHROOT</emphasis> (que es una medida adicional de seguridad), definiremos el
directorio que debe tomar como raíz con la sentencia <literal remap="tt">#define CHROOT
&lt;directorio&gt;</literal>.
</para>
</listitem>
<listitem>

<para>
Si vamos a ejecutar el <emphasis remap="it">bot</emphasis> como un usuario distinto a
<emphasis remap="it">root</emphasis>, debemos eliminar el símbolo <literal remap="tt">SEGURIDAD</literal> (con la
sentencia <literal remap="tt">#undef SEGURIDAD</literal>).
</para>
</listitem>

</itemizedlist>

</para>

<para>
Además de estas modificaciones, podemos definir el símbolo <literal remap="tt">VERBOSE</literal>
para que se impriman en la pantalla todos los mensajes que el servidor
envía al <emphasis remap="it">Argobot</emphasis>. Otro símbolo interesante es <literal remap="tt">CONTROL_FLOOD</literal>,
que por defecto está activado, pero que deberemos eliminar si el nodo al que
conectamos está preparado para controlar los ataques por <emphasis remap="it">flood</emphasis>.
</para>

</sect2>

<sect2>
<title>Compilación </title>

<para>
Como ya se ha indicado, el <emphasis remap="it">Argobot</emphasis> puede ser compilado bajo múltiples
plataformas. En Linux, es suficiente con hacer:
</para>

<para>

<screen>
gcc -Wall -g argobot.c -o argobot
chown root argobot
chgrp root argobot
</screen>

</para>

<para>
La primera instrucción realiza la compilación, generando el fichero
<literal remap="tt">argobot</literal>. Con las dos siguientes, establecemos los propietarios de
este fichero.
</para>

</sect2>

<sect2>
<title>Configuración </title>

<para>
La tarea de configuración se limita al fichero <literal remap="tt">argobot.conf</literal>, aunque
también es necesario crear una nueva cuenta de usuario para el operador del
servidor IRC.
</para>

<para>
El fichero <literal remap="tt">argobot.conf</literal> es un fichero de texto que contiene líneas con
comandos. Al hacer la instalación, se genera un fichero de ejemplo, pero lo más
conveniente es modificarlo para adaptarlo a nuestras necesidades. Los comandos
son:
</para>

<para>

<itemizedlist>
<listitem>

<para>
<literal remap="tt">IRCnick &lt;nick&gt;</literal>: indica cuál es el <emphasis remap="it">nick</emphasis> que debe
emplear el <emphasis remap="it">bot</emphasis> para identificarse como operador ante el nodo IRC.

</para>
</listitem>
<listitem>

<para>
<literal remap="tt">IRCpasswd &lt;password&gt;</literal>: complementa al comando anterior,
indicando la clave necesaria para adquirir los privilegios de operador.

</para>
</listitem>
<listitem>

<para>
<literal remap="tt">nick &lt;nick&gt;</literal>: especifica el <emphasis remap="it">nick</emphasis> bajo el que
aparecerá el <emphasis remap="it">bot</emphasis> a los usuarios.

</para>
</listitem>
<listitem>

<para>
<literal remap="tt">server &lt;servidor&gt;</literal>: sirve para indicar el servidor a
que va a conectarse.

</para>
</listitem>
<listitem>

<para>
<literal remap="tt">port &lt;puerto&gt;</literal>: indica el puerto al que se va a
conectar (generalmente, el 6667).

</para>
</listitem>
<listitem>

<para>
<literal remap="tt">passwd &lt;password&gt;</literal>: clave que será enviada al servidor
al principio de la conexión, con lo que se podrá acceder a otras redes que
necesiten claves.

</para>
</listitem>
<listitem>

<para>
<literal remap="tt">away &lt;mensaje&gt;</literal>: mensaje que se muestra a los usuarios
al entrar.

</para>
</listitem>
<listitem>

<para>
<literal remap="tt">nick_collide &lt;mensaje&gt;</literal>: mensaje enviado a aquellos
usuarios que estén utilizando el <emphasis remap="it">nick</emphasis> indicado en el comando
<literal remap="tt">nick</literal>. Inmediatamente después, se les expulsará mediante un
<emphasis remap="it">kick</emphasis>.

</para>
</listitem>
<listitem>

<para>
<literal remap="tt">umbral_kline &lt;valor&gt;</literal>: indica cuántos intentos de
conexión se permitirán antes de poner una <emphasis remap="it">línea k</emphasis> local. El valor
más corriente es cinco. Esto es una medida de protección contra los usuarios
que tengan una actitud sospechosa.

</para>
</listitem>
<listitem>

<para>
<literal remap="tt">timeout_klines &lt;valor&gt;</literal>: indica cuántos segundos
permanecerá activa una <emphasis remap="it">línea k</emphasis> local. El valor más aconsejable es en
torno a 900 (es decir, 15 minutos).

</para>
</listitem>
<listitem>

<para>
<literal remap="tt">timeout_whowas &lt;valor&gt;</literal>: indica cada cuántos segundos
hay que comprobar la presencia de <emphasis remap="it">clones</emphasis> (usuarios que están
presentes bajo varios <emphasis remap="it">nicks</emphasis>, lo que suele ser síntoma de actividades
peligrosas). Es conveniente un valor en torno a cinco.

</para>
</listitem>
<listitem>

<para>
<literal remap="tt">timer &lt;offset&gt; &lt;periodo&gt; &lt;comando&gt;</literal>:
se utiliza para enviar comandos periódicos al servidor de IRC, que se
repetirán cada cierto número de segundos. El <emphasis remap="it">offset</emphasis> indica el retraso
del primer envío.

</para>
</listitem>
<listitem>

<para>
<literal remap="tt">set &lt;alias&gt; &lt;máscara&gt; [clave]</literal>: define un
usuario. El nombre de referencia (interno al <emphasis remap="it">Argobot</emphasis> será el
<emphasis remap="it">alias</emphasis>, y se aplicará a aquel usuario que satisfaga las condiciones de
la <emphasis remap="it">máscara</emphasis>, que tiene la forma <literal remap="tt">nick!usuario@dominio</literal> (se
admiten comodines).

</para>
</listitem>
<listitem>

<para>
<literal remap="tt">group &lt;nombre_grupo&gt; &lt;alias&gt; [&lt;alias&gt;...]</literal>:
define un grupo de usuarios, cuyo nombre será el indicado, y al que
pertenecerán los usuarios indicados a continuación.

</para>
</listitem>
<listitem>

<para>
<literal remap="tt">join &lt;canal&gt; [clave]</literal>: indica al <emphasis remap="it">bot</emphasis> que
debe gestionar el canal indicado, entrando con la clave proporcionada, que
es opcional. Si utilizamos la clave <literal remap="tt">GOD</literal>, se forzará la entrada del
<emphasis remap="it">bot</emphasis>. NOTA: dado que el carácter '#' se emplea para indicar
comentarios, no debe escribirse en el campo <emphasis remap="it">canal</emphasis>. Por tanto, si
escribimos <literal remap="tt">linux</literal>, estamos refiriéndonos al canal <literal remap="tt">#linux</literal>.
</para>
</listitem>

</itemizedlist>

</para>

<para>
Puede haber tantos comandos <literal remap="tt">join</literal> como sean necesarios. Para cada uno
de ellos, se pueden indicar opciones específicas para el canal, mediante los
siguientes comandos:
</para>

<para>

<itemizedlist>
<listitem>

<para>
<literal remap="tt">autoop &lt;grupo&gt;</literal>: cualquier usuario del grupo indicado
será automáticamente dotado de los privilegios de operador cuando entre en
el canal.

</para>
</listitem>
<listitem>

<para>
<literal remap="tt">privil &lt;grupo&gt;</literal>: declara privilegiados a los miembros del
grupo indicado, lo que les permitirá enviar comandos al <emphasis remap="it">bot</emphasis>.

</para>
</listitem>
<listitem>

<para>
<literal remap="tt">mode_default &lt;modos&gt;</literal>: indica el modo por defecto del
canal.

</para>
</listitem>
<listitem>

<para>
<literal remap="tt">mode_disallow &lt;modos&gt;</literal>: prohibe algunos modos en el
canal.

</para>
</listitem>
<listitem>

<para>
<literal remap="tt">log &lt;fichero&gt;</literal>: almacena toda la actividad del canal
en un fichero. Se incluyen marcas temporales cada diez minutos.

</para>
</listitem>
<listitem>

<para>
<literal remap="tt">notice &lt;texto&gt;</literal>: indica un mensaje que será enviado
a todos los usuarios que entren en el canal.

</para>
</listitem>
<listitem>

<para>
<literal remap="tt">allow_any_ban</literal>: permite a los operadores del canal hacer
prácticamente todo, lo que no es muy aconsejable.
</para>
</listitem>

</itemizedlist>

</para>

<para>
Para nuestro sistema, el fichero <literal remap="tt">argobot.conf</literal> es el siguiente:
</para>

<para>

<screen>
#
# Parámetros globales
#

# Nick utilizado a la hora de identificarse como IRCop, así como
# para el WHOIS
IRCnick ArgoBot

# Password correspondiente al nick anterior
IRCpasswd miclave
# Nick bajo el cual debe aparecer el bot
nick _ArgoBOT
passwd miclave

# Nombre del dominio al que se va a conectar el bot
server maquina.euitio.uniovi.es
port 6667

# Mensaje que aparece en el away del bot
away Bot de control de maquina.euitio.uniovi.es. No respondemos \
de los fallos.

# Mensaje enviado con el KILL a cualquier usuario que esté utilizando el
# nick definido en el comando NICK anterior
nick_collide Escoge otro Nick, por favor

# Las siguientes líneas configuran distintos aspectos de la seguridad
umbral_kline 5  # Máximo número de intentos (desconectado)
timeout_klines 15  # 15 minutos
timeout_whowas 5 # Tiempo entre whowas

#
#
# Grupos de usuarios
#
#

# Define el grupo de usuarios al que pertenecen todos
set todos *!*@*      # Comodines
group todos todos

# Define el grupo de IRCops
set diego *!diego@maquina.euitio.uniovi.es
set alfredo *!alfredo@maquina.euitio.uniovi.es
group IRCops diego alfredo

# Define el grupo de proveedores
group proveedores diego alfredo

# Canal ayuda-esnet
group ayuda-esnet diego alfredo

#
#
# Canales
#
#

join linux GOD
autoop IRCops
mode_default ntm
mode_disallow silpko
notice Canal dedicado a los amantes del Linux. \
Prohibido a Bill Gates.
timer 60 60 privmsg #linux :Mensaje enviado al canal linux de forma \
automática
timer 60 9999 topic #linux :Canal para los autenticos entendidos en \
informática y sistemas operativos.

# Pone un modo para reducir el consumo de ancho de banda
timer 60 600 mode _argobot :+d
</screen>

</para>

</sect2>

<sect2>
<title>Ejecución </title>

<para>
Para ejecutar el <emphasis remap="it">bot</emphasis>, basta con escribir (preferiblemente como
<emphasis remap="it">root</emphasis>):
</para>

<para>

<screen>
cd /usr/src/argobot
./argobot
</screen>

</para>

<para>
Si iniciamos <emphasis remap="it">Argobot</emphasis> de esta manera, imprimirá por la pantalla toda
la actividad que registre (como entradas y salidas de usuarios), lo que puede
ser conveniente por motivos de depuración, pero resulta innecesario durante
una ejecución normal. Por tanto, es muy frecuente ejecutar el <emphasis remap="it">Argobot</emphasis>
en segundo plano y redireccionando la salida:
</para>

<para>

<screen>
nohup argobot &#38;
</screen>

</para>

<para>
Esto nos evitará ver todos los mensajes por la pantalla, pero los enviará
a un fichero llamado <literal remap="tt">nohup.out</literal> situado en el directorio actual. El
problema es que este fichero puede crecer muy rápidamente, de manera que en
grandes redes se suele enlazar con el dispositivo nulo, para convertirlo en
un <emphasis remap="it">agujero negro</emphasis>:
</para>

<para>

<screen>
ln -s /dev/null nohup.out
</screen>

</para>

<para>
Durante la ejecución de una sesión de IRC, los usuarios autorizados pueden
enviar mensajes al <emphasis remap="it">bot</emphasis> para cambiar su funcionamiento. Para realizar
esta tarea, se emplea el comando <literal remap="tt">MSG</literal> del IRC:
</para>

<para>

<screen>
/MSG _argobot &lt;clave&gt; &lt;comando&gt; &lt;canal&gt; [nick]
</screen>

</para>

<para>
Donde <emphasis remap="it">comando</emphasis> puede ser:
</para>

<para>

<itemizedlist>
<listitem>

<para>
<literal remap="tt">op</literal>: da privilegios de operador al usuario indicado.
</para>
</listitem>
<listitem>

<para>
<literal remap="tt">deop</literal>: quita los privilegios de operador al usuario indicado.
</para>
</listitem>
<listitem>

<para>
<literal remap="tt">invite</literal>: invita a un usuario a un canal.
</para>
</listitem>

</itemizedlist>

</para>

</sect2>

</sect1>

<sect1>
<title>Cliente de IRC</title>

<sect2>
<title>Función de un cliente de IRC </title>

<para>
La función de un cliente de IRC es conectarse al servidor y filtrar la
información disponible para cada usuario. Además, debe encargarse de enviar
los mensajes y comandos que escribe el usuario mediante el protocolo de IRC.
</para>

<para>
El cliente habitualmente reside en la máquina del usuario y se conecta al
servidor a través de un puerto (generalmente el 6667). Existen clientes de
IRC para todas las plataformas, dado que no es necesario que la plataforma
cliente coincida con la del servidor. En los sistemas Windows, el cliente más
popular es el <emphasis remap="it">mIRC</emphasis>, que nosotros elegimos para hacer las primeras
pruebas y asegurarnos de que el <emphasis remap="it">demonio</emphasis> estaba funcionando
correctamente. Una vez confirmado el buen funcionamiento del servidor,
instalamos un cliente para Linux. Para esta plataforma, la oferta es muy
grande. Los más conocidos son:
</para>

<para>

<itemizedlist>
<listitem>

<para>
<emphasis remap="it">Kirc</emphasis> (<literal remap="tt"><ulink
url="ftp://ftp.kde.org/"
>ftp://ftp.kde.org/</ulink
></literal>): el más antiguo cliente en el entorno
<emphasis remap="it">KDE</emphasis>.  Tiene un entorno gráfico muy cuidado, pero carece de algunas
características básicas.

</para>
</listitem>
<listitem>

<para>
<emphasis remap="it">Ksirc</emphasis> (<literal remap="tt"><ulink
url="http://www.ksirc.org/"
>http://www.ksirc.org/</ulink
></literal>): también para el <emphasis remap="it">KDE</emphasis> y resultado
de la evolución de un cliente en modo texto (el <emphasis remap="it">Sirc</emphasis>). Está todavía en
fase de desarrollo.  

</para>
</listitem>
<listitem>

<para>
<emphasis remap="it">Keric</emphasis> (<literal remap="tt"><ulink
url="http://www.indonesia-undernet.org/keirc"
>http://www.indonesia-undernet.org/keirc</ulink
></literal>): otro más que funciona
bajo <emphasis remap="it">KDE</emphasis> y es uno de los más prometedores, aunque aún está muy lejos
de poder ofrecer una versión completamente estable.

</para>
</listitem>
<listitem>

<para>
<emphasis remap="it">BitchX</emphasis> (<literal remap="tt"><ulink
url="http://www.bitchx.com/"
>http://www.bitchx.com/</ulink
></literal>): el cliente en modo texto preferido por los
usuarios de Linux.

</para>
</listitem>
<listitem>

<para>
<emphasis remap="it">ScrollZ</emphasis> (<literal remap="tt"><ulink
url="http://www.scrollz.com/"
>http://www.scrollz.com/</ulink
></literal>): tiene características similares al
<emphasis remap="it">BitchX</emphasis>, y es el más veterano de todos, lo que le permite alcanzar una
buena velocidad y un gran nivel de optimización (menor consumo de recursos).

</para>
</listitem>
<listitem>

<para>
<emphasis remap="it">YagIRC</emphasis> (<literal remap="tt"><ulink
url="http://www.sicom.fi/~ikioma/yagirc.html"
>http://www.sicom.fi/~ikioma/yagirc.html</ulink
></literal>). Cliente para el entorno
<emphasis remap="it">GNOME</emphasis>, bastante reciente y capaz de mostrar un interfaz en modo texto
o en modo gráfico.
</para>
</listitem>

</itemizedlist>

</para>

</sect2>

<sect2>
<title>Descripción de <emphasis remap="it">BitchX</emphasis> </title>

<para>
Entre sus características están:
</para>

<para>

<itemizedlist>
<listitem>

<para>
Varias conversaciones en el mismo canal.
</para>
</listitem>
<listitem>

<para>
Múltiples servidores.
</para>
</listitem>
<listitem>

<para>
Autocompletado de <emphasis remap="it">nicks</emphasis>.
</para>
</listitem>
<listitem>

<para>
Soporte para <emphasis remap="it">scripts</emphasis>.
</para>
</listitem>
<listitem>

<para>
Cliente de FTP incorporado.
</para>
</listitem>
<listitem>

<para>
Nuevas características exclusivas, como son: cliente de correo
integrado y un reproductor de CDs musicales.
</para>
</listitem>

</itemizedlist>

</para>

</sect2>

<sect2>
<title>Obtención e instalación </title>

<para>
El <emphasis remap="it">BitchX</emphasis> puede conseguirse en <literal remap="tt"><ulink
url="http://www.bitchx.com/"
>http://www.bitchx.com/</ulink
></literal>, desde donde
se pueden conseguir varios ficheros: uno de ellos contiene el paquete básico y
los demás son accesorios opcionales.
</para>

<para>
Tras descomprimir y desempaquetar el fichero con la orden <emphasis remap="it">tar</emphasis> en el
directorio <literal remap="tt">/usr/local/BitchX/</literal>, obtendremos directamente los
ejecutables, puesto que se distribuye con los fuentes ya compilados.
</para>

</sect2>

<sect2>
<title>Configuración </title>

<para>
No contiene ningún fichero de configuración, sino que las opciones se
establecen mediante variables de entorno. Las principales son:
</para>

<para>

<itemizedlist>
<listitem>

<para>
<literal remap="tt">IRCNICK</literal>: establece el <emphasis remap="it">nick</emphasis> por defecto.
</para>
</listitem>
<listitem>

<para>
<literal remap="tt">IRCUSER</literal>: establece el nombre de usuario por defecto.
</para>
</listitem>
<listitem>

<para>
<literal remap="tt">IRCNAME</literal>: permite escribir el nombre real del usuario.
</para>
</listitem>
<listitem>

<para>
<literal remap="tt">IRCSERVER</literal>: nombre del servidor a utilizar.
</para>
</listitem>
<listitem>

<para>
<literal remap="tt">IRCPORT</literal>: puerto a utilizar.
</para>
</listitem>

</itemizedlist>

</para>

<para>
Es conveniente dar valor a estas variables en los <emphasis remap="it">scripts</emphasis> de
arranque o bien en el fichero <literal remap="tt">&tilde;/.profile</literal> de cada usuario del sistema.
</para>

</sect2>

<sect2>
<title>Ejecución </title>

<para>
El ejecutable se llama <literal remap="tt">BitchX-tcl</literal>, pero resulta conveniente crear un
enlace simbólico llamado <literal remap="tt">irc</literal> situado en un directorio que forme parte
del <emphasis remap="it">path</emphasis> para simplificar el trabajo de los usuarios.
</para>

</sect2>

</sect1>

<sect1 id="Insflug">
<title>Anexo: El INSFLUG </title>

<para>
El <emphasis remap="it">INSFLUG</emphasis> forma parte del grupo internacional <emphasis remap="it">Linux Documentation
Project</emphasis>, encargándose de las traducciones al castellano de los Howtos,
así como de la producción de documentos originales en aquellos casos en los
que no existe análogo en inglés, centrándose, preferentemente, en documentos
breves, como los <emphasis>COMOs</emphasis> y <emphasis>PUFs</emphasis> (<emphasis remap="bf">P</emphasis>reguntas de <emphasis remap="bf">U</emphasis>so
<emphasis remap="bf">F</emphasis>recuente, las <emphasis remap="it">FAQs</emphasis>. <literal remap="tt">:)</literal> ), etc.
</para>

<para>
Diríjase a la sede del Insflug para más información al respecto.
</para>

<para>
En ella encontrará siempre las <emphasis remap="bf">últimas</emphasis> versiones de las traducciones
«oficiales»:  <literal remap="tt"><ulink
url="http://www.insflug.org"
>www.insflug.org</ulink
></literal>. Asegúrese de comprobar cuál es la última
versión disponible en el Insflug antes de bajar un documento de un
servidor réplica. 
</para>

<para>
Además, cuenta con un sistema interactivo de gestión de fe de erratas y
sugerencias en línea, motor de búsqueda específico, y más servicios en los
que estamos trabajando incesantemente.
</para>

<para>
Se proporciona también una lista de los servidores réplica (<emphasis remap="it">mirror</emphasis>)
del Insflug más cercanos a Vd., e información relativa a otros recursos en
castellano.
</para>

<para>
En <literal remap="tt"><ulink
url="http://www.insflug.org/insflug/creditos.php3"
>http://www.insflug.org/insflug/creditos.php3</ulink
></literal> cuenta con una
detallada relación de las personas que hacen posible tanto esto como las
traducciones.
</para>

<para>
¡Diríjase a <literal remap="tt"><ulink
url="http://www.insflug.org/colaboracion/index.php3"
>http://www.insflug.org/colaboracion/index.php3</ulink
></literal> si desea
unirse a nosotros!.
</para>

<para>
«Cartel» Insflug, <literal remap="tt"><ulink
url="mailto:cartel@insflug.org"
>cartel@insflug.org</ulink
></literal>. 
</para>

</sect1>

</article>
