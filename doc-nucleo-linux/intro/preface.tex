\chapter*{Prefacio}
\addcontentsline{toc}{chapter}{\protect{Prefacio}}


\linux\ es un fenómeno producto de Internet.  Concebido como un
proyecto para el entretenimiento de un estudiante, ha crecido hasta
sobrepasar en popularidad a todos los demás sistemas operativos de
distribución libre.  Para muchos Linux es un enigma.  ¿Cómo puede
valer la pena algo que es gratis?  En un mondo dominado por un puñado
de enormes corporaciones de software, ¿cómo puede ser que algo escrito
por una manada de «hackers» (sic) tenga la esperanza de competir?.
¿Cómo puede ser que las contribuciones de software realizadas por
tantas personas distintas, con tan diferentes países de origen de todo
el mundo, tengan la esperanza de ser estables y efectivas?  Y sin
embargo, es estable y efectivo, y también compite.  Muchas
universidades y establecimientos de investigación lo utilizan para
satisfacer sus necesidades de cómputo cotidianas.  La gente lo hace
funcionar en las PCs de sus casas, y yo puedo apostar a que la mayoría
de las compañías lo están utilizando en algún lugar, aún cuando puede
que no estén al tanto de ello.  \linux\ se utiliza para navegar en la
«web», para hospedar sitios «web», escribir tesis, enviar correo
electrónico y, como desde siempre se ha hecho con las computadoras,
para divertirse con juegos.  Debo expresar enfáticamente que \linux\ 
no es un juguete; es un sistema operativo completamente desarrollado,
y escrito de manera profesional, y que utilizan los entusiastas por
todo el mundo.

Las raíces de \linux\ pueden rastrearse hasta los orígenes de Unix\tm\
.  En 1969, Ken Thompson\index{Thompson, Ken} perteneciente al «Grupo
de investigación» (\textit{Research Group}) de los «Laboratorios
Bell», comenzó a experimentar con un sistema operativo multiusuario,
multiprogramado\footnote{N. del T.: en inglés \textit{multi-task}}
trabajando sobre una PDP-7\index{PDP-7} que nadie utilizaba.  Pronto
se le unió Dennis Richie\index{Richie, Dennis} y entre ambos, junto
con otros miembros del Grupo de Investigación, produjeron las primeras
versiones de Unix\tm.  Richie estab fuertemente influído por un
proyecto anterior denominado MULTICS, y el nombre Unix\tm\ es en sí
mismo un gracioso juego de palabras derivado de MULTICS.  Las primeras
versiones se escribieron en lenguaje ensamblador, pero la tercer
versión se escribió en el nuevo lenguaje C.  Richie diseñó y escribió
el lenguaje de programación C expresamente para que sea utilizado en
la escritura de sistemas operativos.  Al rescribir Unix\tm\ en C, fue
posible llevarlo a las computadoras más poderosas
PDP-11/45\index{PDP-11/45} y 11/70\index{PDP-11/70} que por ese
entonces fabricaba DIGITAL\index{DIGITAL}.  El resto, como se suele
decir, es historia.  Unix\tm\  salió de los laboratorios y se
introdujo en la corriente principal de los sistemas de cómputo, y muy
pronto los más importantes fabricantes de computadoras estaban
produciendo sus propias versiones.

\linux\ fue en un principio la solución a una simple necesidad.  Al
único software que Linus Torvalds\index{Torvalds, Linus} ---autor y
principal encargado de mantenimiento de \linux--- podía acceder era
\texttt{Minix}\index{Minix}.  \texttt{Minix}\index{Minix} es un
sistema operativo sencillo, del estilo Unix\tm\, que se utiliza
ampliamente como herramienta didáctica.  Linus no estaba muy
impresionado por sus características, y para solucionarlo se decidió a
escribir su propio software.  Como modelo, eligió a Unix\tm\, pues ése
era el sistema operativo con el cual estaba familiarizado en su vida
estudiantil.  Con una PC basada en el Intel 386 comenzó a escribir.
El progreso fue rápido y esto lo entusiasmó, decidió entonces ofrecer
el resultado de sus esfuerzos a otros estudiantes a través de la
emergente red mundial de computadoras, que por ese entonces era
utilizada principalmente por la comunidad académica.  Otros vieron así
el software y comenzaron a contribuir.  La mayoría del nuevo software
que se agregaba a través de las contribuciones tenía su origen en la
solución a un problema que tenía quien contribuía.  Poco tiempo
después, \linux\ se había transformado en un sistema operativo.  Es
importante destacar que \linux\ no contiene código Unix\tm\, pues se
trata de una rescritura basada en los estándares POSIX publicados.
\linux\ se construyó con el software GNU\index{GNU} (GNU's Not
Unix\tm) producido por la Free Software Foundation\index{Free Software
  Foundation} (de Cambridge, Massachusetts en los Estados Unidos de
América) y utiliza muchos de los productos de software de GNU.


La mayoría de las personas utilizan \linux\ simplemente como una
herramienta, y con frecuencia lo instalan a partir de una de las
buenas distribuciones basadas en CD-ROM.\ Un montón de usuarios de
\linux\ lo utilizan para escribir aplicaciones, o para correr
aplicaciones escritas por otros.  Muchos leen ávidamente los
COMOs\footnote{Un COMO es, como dice la palabra, un documento que
  describe como hacer algo.  En inglés se denominan \textit{HOWTO}s.}
y sienten la emoción del éxito cuando configuran correctamente alguna
parte del sistema, y la frustración del fracaso cuando no pueden
hacerlo.  Una minoría es lo suficientemente avezada como para escribir
controladores de dispositivo, y para ofrecer parches para el núcleo a
Linus Torvalds, el creador y responsable del mantenimiento del núcleo
de \linux.  Linus acepta las adiciones y modificaciones a los fuentes
del núcleo, no importa de donde provengan o quien las envíe.  Esto
puede sonar como una invitación a la anarquía, pero Linus ejerce un
estricto control de calidad e introduce el código nuevo por sí mismo.
En un momento dado, sólo un puñado de gente contribuye fuentes al
núcleo de \linux.

La mayoría de los usuarios de \linux\ no se fijan en cómo funciona el
sistema operativo, o cómo es que forma una unidad.  Es una lástima que
así suceda, porque una muy buena forma de aprender el funcionamiento
de un sistema operativo es mirar como lo hace \linux.  Se trata de un
sistema bien escrito, y no sólo eso, sino que sus fuentes están
disponibles libremente (y gratis) para que les eche una ojeada.  Las
cosas están así dispuestas porque si bien los autores retienen los
derechos («copyright») que les son propios sobre su software, permiten
la libre distribución de los fuentes bajo la Licencia Pública de GNU,
un proyecto de la \textit{Free Software Foundation}.  Sin embargo, a
primera vista los fuentes pueden confundirnos un poco; verá usted
directorios con nombres como \fn{kernel}, \fn{mm} y \fn{net}, pero
¿que contienen? y ¿cómo funciona todo ese código?  Lo que se necesita
entonces es un entendimiento más amplio de la estructura general y
propósito de \linux.  Para alcanzar esta finalidad, se ha escrito este
libro: para promover una clara comprensión de como trabaja el sistema
operativo \linux.  Deseo proporcionarle un modelo mental que le
permita imaginarse que es lo que sucede en el sistema cuando usted
copia un fichero de un lado a otro, o cuando lee su correo
electrónico.  Recuerdo muy bien el entusiasmo que sentí cuando me di
cuenta por primera vez de la manera que el sistema funcionaba.  Ese
entusiasmo es lo que quiero transmitir a los lectores de este libro.

Mi compromiso con \linux\ comienza a finales de 1994 cuando visité a
Jim Paradis\index{Paradis, Jim} que estaba trabajando para transportar
\linux\ a sistemas basados en el procesador \axp.  He trabajado para
\textit{Digital Equipment Co. Limited} desde 1984, la mayor parte en
redes y comunicaciones, y en 1992 comencé a trabajar en la
recientemente formada división \textit{Digital Semiconductor}.  La
meta de esta división era meterse completamente en el mercado de
fabricantes de chips, en particular el rango de microprocesadores
\axp\ y sus placas de sistema, y vender esos productos fuera de
Digital.  Cuando escuché acerca de \linux\ por primera vez,
inmediatamente vi una oportunidad para vender más hardware \axp.  El
entusiasmo de Jim era atrapante, y comencé a ayudarlo en el transporte
del código.  A medida que trabajaba en esto, empecé a apreciar cada
vez más el sistema operativo, pero sobre todo a la comunidad de
ingenieros que lo produce.  Se trata de un grupo de gente destacable,
con cualquier parámtero que se los mida, y al involucrarme con ellos y
con el núcleo de \linux\ viví tal vez el período más satisfactorio del
tiempo que dediqué al desarrollo de software.  La gente muchas veces
me pregunta acerca de \linux\ en el trabajo y en casa, y me hace muy
feliz complacerles.  Cuanto más uso \linux\ tanto en mi vida
profesional como personal, más me transformo en un «celote» de \linux.
Debe advertir que utilizo el término «entusiasta», y no «fanático»; mi
definición de entusiasta es una persona que reconoce la existencia de
otros sistemas operativos, pero prefiere no utilizarlos.  Como mi
esposa, Gill, que utiliza Windows 95, cierta vez comentó: «Nunca
hubiera pensado que tuviéramos el sistema operativo `de él' y el `de
ella'».  Para mí, como ingeniero, \linux\ satisface plenamente mis
necesidades.  Es una herramienta de ingeniería súper, flexible y
adaptable.  La mayoría del software disponible en forma libre puede
compilarse fácilmente para \linux, y con frecuencia sólo necesito
obtener los binarios ya listos para ejecutar, o los instalo desde un
CD ROM.  ¿Qué otra cosa podría utilizar para aprender a programar en
C++, Perl, o Java, y encima gratis?

\axp\ es sólo una de las varias plataformas sobre las cuales corre
\linux.  La mayoría de los núcleos de \linux\ están funcionando sobre
sistemas basados en procesadores Intel, pero los sistemas \linux\ que
corren en plataformas de hardware distintas de Intel están creciendo
en número, y están disponibles de manera más rutinaria.  Entre ellos
están \axp, MIPS, Sparc y PowerPC.  Podría haber escrito este libro
utilizando cualquiera de esas plataformas, pero mi conocimiento previo
y experiencias técnicas con \linux\ se han dado con \linux\ en el
\axp, y ése es el motivo por el cual en este libro se usa dicho
hardware para ilustrar algunos puntos clave.  Debe destacarse que
cerca del 95\% de los fuentes del núcleo de \linux\ es común a todas
las plataformas de hadrware en las que corre.  En el mismo sentido,
alrededor del 95\% de este libro trata de las partes del núcleo de
\linux\ independientes de la máquina.


\section*{Perfil del lector}
Este libro no hace ninguna presunción acerca del conocimiento o
experiencia del lector.  Creo que el interés en el tema en cuestión
fomentará el proceso de autoaprendizaje cuando sea requerido.  Dicho
esto, debo agregar que para que el lector obtenga un beneficio real a
partir de este material, ayudará un cierto grado de familiaridad con
las computadoras, preferiblemente del tipo PC, y algún conocimiento
del lenguaje de programación C.


\section*{Organización de este libro}
Este libro \emph{no} está pensado para usarse como un manual de los
aspectos internos de \linux.  En lugar de ello, se trata de una
introducción a los sistemas operativos en general, y a linux\ en
particular.  Cada uno de los capítulos siguen mi regla de «trabajar
desde lo general a lo particular».  Primero se presenta un panorama
del subsistema en cuestión, antes de lanzarse sobre los detalles
específicos.

En forma deliberada, no se describen los algoritmos del núcleo, que
son los métodos que utiliza para hacer las tareas, en términos de la
\texttt{rutina\_X} llama a la \texttt{rutina\_Y}, la cual incrementa el
campo \texttt{foo} en la estructura de datos \texttt{bar}.  Si desea
ver eso, no tiene más que mirar el código.  Cada vez que necesito
comprender una porción de código, o tengo de explicársela a otra
persona, con frecuencia comienzo por dibujar sus estructuras de datos
en una pizarra.  Por ello, he descripto con cierto detalle muchas de
las estructuras de datos relevantes del núcleo.


Cada capítulo es relativamente independiente, como los subsistemas del
núcleo de \linux\ que desribe cada uno de ellos.  algunas veces, sin
embargo, hay conexiones; por ejemplo, no se puede describir un proceso
sin entender como funciona la memoria virtual.

El capítulo «Aspectos básicos del hardware»
(Capítulo~\ref{hw-basics-chapter}) nos da una breve introducción a la
PC moderna.  Un sistema operativo debe trabajar íntimamente asociado
con el hardware del sistema que funciona como su cimiento.  El sistema
operativo necesita ciertos servicios que sólo pueden ser provistos por
el hardware.  Para entender completamente el sistema operativo \linux,
deberá usted entender los aspectos básicos del hardware subyacente.

El capítulo «Aspectos básicos del software»
(Capítulo~\ref{sw-basics-chapter}) introduce principios básicos de
software y pone una mirada en los lenguajes ensamblador y C.  Aquí se
aprecian las herramientas que se utilizan para construir un sistema
como \linux\ y se da un panorama de la finalidad y funciones de un
sistema operativo.

El capítulo «Gestión de memoria» (Capítulo~\ref{mm-chapter}) describe
la forma en la cual \linux\ administra las memorias física y virtual
en el sistema.

El capítulo «Procesos» (Capítulo~\ref{processes-chapter}) describe que
es un proceso, y como hace el núcleo para crear, gestionar y eliminar
los procesos en el sistema.

Los procesos se comunican entre sí y con el núcleo a los fines de
coordinar sus actividades.  En \linux\ hay disponibles cierto número
de mecanismos de comunicación inter-proceso (\textit{Inter-Process
  Communication}: IPC) mechanisms.  Dos de ellos son las señales y las
tuberías; también se dispone del mecanismo de IPC conocido como
\textit{tipo System V}, y que toma ese nombre a partir de su entrega
con el sistema Unix\tm, en el cual apareció por vez primera.  Estos
mecanismos de comunicación entre procesos se describen en el
Capítulo~\ref{IPC-chapter}.

El estándar \textit{Peripheral Component Interconnect} (PCI) se ha
establecido firmemente en la actualidad como el bus de alta perfomance
y bajo costo para las PCs.  El capítulo sobre «PCI»
(Capítulo~\ref{PCI-chapter}) describe como hace el núcleo \linux\ para
inicializar y utilizar los buses y dispositivos PCI existentes en el
sistema.

El capítulo sobre «Interrupciones y gestión de interrupciones»
(Capítulo~\ref{interrupt-chapter}) nos muestra como maneja las
interrupciones el núcleo \linux.  Si bien el núcleo tiene mecanismos e
interfaces genéricos para la gestión de las interrupciones, parte de
los detalles de esta gestión es dependiente del hardware y de las
cuestiones específicas de la arquitectura.

Uno de los puntos fuertes de \linux\ es su capacidad de funcionar con
muchos de los dispositivos de hardware disponibles para la PC
moderna.  El capítulo sobre «Controladores de dispositivos»
(Capítulo~\ref{dd-chapter}) describe como se controlan los
dispositivos físicamente conectados al sistema.

El capítulo sobre el «Sistema de ficheros» (Capítulo~\ref{filesystem-chapter})
describe como se mantienen los ficheros en el sistema de ficheros que
les da sostén.  Se describe el «Sistema de ficheros virtual»
(\textit{Virtual File System}: VFS) y como se gestionan los sistemas
de ficheros reales desde el núcleo \linux.

Redes y \linux\ son casi sinónimos.  En cierta forma (muy real por
cierto) \linux\ es un producto de la Internet o de la \textit{World
  Wide Web} (WWW).  Sus desarrolladores y usuarios utilizan la
\textit{web} para intercambiar información, ideas, código, y \linux\
en sí mismo con frecuencia se utiliza para sustentar las necesidades
en el tema redes que tienen las organizaciones. El
Capítulo~\ref{networks-chapter} describe como funciona \linux\ con los
protocolos conocidos colectivamente como TCP/IP.

El capítulo «Mecanismos del núcleo» (Capítulo~\ref{kernel-chapter})
nos muestra algunas de las tareas y mecanismos generales que el núcleo
\linux\ tiene que proveer, de manera que las otras secciones del
núcleo puedan trabajar efectivamente juntas.

El capítulo «Módulos» (Capítulo~\ref{modules-chapter}) describe la
manera en la cual el núcleo \linux\ puede cargar funciones
dinámicamente , por ejemplo un sistema de ficheros, sólo cuando se
necesitan.

El capítulo «Fuentes» (Capítulo~\ref{sources-chapter}) describe dónde
buscar una función en particular, entre todos los fuentes del núcleo.

\section*{Convenciones utilizadas en el libro}

La siguiente es una lista de convenciones tipográficas que se utilizan
a lo largo del libro.

\begin{tabular}{ll}
  \textsf{tipo lineal} & identifica órdenes, u otro texto que deba\\
                       & ser ingresado literalmente por el usuario.\\
  \texttt{tipo monoespaciado}   & para referirnos a estructuras de
                       datos, \\
                       & o campos dentro de las estructuras de datos.

\end{tabular}

A lo largo del texto existen referencias a ciertas porciones de código
dentro del árbol de directorios del núcleo de \linux\ (por ejemplo, la
nota al márgen encerrada en un recuadro y adyacente a este
texto\SeeCode{foo()}{foo/\-bar.c}).  Si usted desea echar una ojeada
al código por sí mismo, encontrará de utilidad estas referencias;
todas las rferencias a los ficheros son relativas a
\fn{/usr/\-src/\-linux}.  Tomemos \fn{foo/bar.c} como ejemplo,
entonces el nombre completo será
\fn{/usr/\-src/\-linux/\-foo/\-bar.c}.  Si usted está utilizando
\linux\ (y debería), entonces puede obtener una provechosa experiencia
al mirar el código, y puede utilizar este libro como ayuda para
entender tanto el código como sus múltiples estructuras de datos.

\section*{Marcas registradas}
Caldera, OpenLinux y el logotipo ``C'' son marcas registradas de
\textit{Caldera, Inc}.

Caldera OpenDOS 1997 es una marca registrada de \textit{Caldera, Inc}.

DEC es una marca registrada de \textit{Digital Equipment Corporation}.

DIGITAL es una marca registrada de \textit{Digital Equipment
  Corporation}.

Linux es una marca registrada de Linus Torvalds.

Motif es una marca registrada de \textit{The Open System Foundation,
  Inc}.

MSDOS es una marca registrada de \textit{Microsoft Corporation}.

Red Hat, glint y el logotipo Red Hat logo son marcas registradas de
\textit{Red Hat Software, Inc}.

UNIX es una marca registrada de \textit{X/Open}.

XFree86 es una marca registrada de \textit{XFree86 Project, Inc}.

X Window System es una marca registrada de el \textit{X Consortium} y
del \textit{Massachusetts Institute of Technology}.

\section*{Agradecimientos}

Debo agradecer a las muchas personas que han sido tan amables como
para tomarse el tiempo para enviarme por correo electrónico sus
comentarios acerca de este libro.  He intentado incorporar dichos
comentarios en cada nueva versión que he producido.  Estoy
especialmente agradecido a John Rigby y Michael Bauer que me
proporcionaron completas y detalladas notas de revisión de todo el
libro.  Una tarea nada fácil.

