<?xml version="1.0" encoding="ISO-8859-1" ?>

<appendix id="openldap-nscd">

	<title>Demonio de caché para el servicio de nombres: <application>nscd</application></title>

<sect1 id="openldap-nscd-introduccion">
	<title>Introducción</title>

	<para>Este demonio evita, en los equipos donde se encuentra instalado, que las órdenes del
	tipo <command>/bin/ls -l /home</command> constantemente consulten
	al servidor <acronym>LDAP</acronym> con cada ejecución.
	<application>nscd</application> mantiene una caché con información
	sobre los datos de los usuarios, que refresca cada cierto tiempo, de forma que las estaciones
	de trabajo la utilizarán en lugar de consultar al servidor <acronym>LDAP</acronym>.</para>

	<para>Las siguientes secciones comprenderán el proceso de instalación y configuración
	de este demonio.</para>
</sect1>

<sect1 id="openldap-nscd-instalacion">
	<title>Instalación</title>

	<para>La instalación es muy sencilla, como se verá a continuación:</para>

	<example id="openldap-nscd-ejemplo1">
		<title>Instalación de <application>nscd</application></title>

<screen><prompt>#</prompt> <userinput>/usr/bin/apt-get install nscd</userinput>
<computeroutput>Leyendo lista de paquetes... Hecho
Creando árbol de dependencias... Hecho
Se instalarán los siguientes paquetes NUEVOS:
  nscd
0 actualizados, 1 se instalarán, 0 para eliminar y 0 no actualizados.
Se necesita descargar 0B/90,4kB de archivos.
Se utilizarán 217kB de espacio de disco adicional después de desempaquetar.
(Leyendo la base de datos ...
273953 ficheros y directorios instalados actualmente.)
Desempaquetando nscd (de .../nscd_2.3.2.ds1-16_i386.deb) ...
Configurando nscd (2.3.2.ds1-16) ...
Starting Name Service Cache Daemon: nscd.

</computeroutput></screen>
	</example>

	<para>Para ver la información acerca del paquete, teclee:</para>

	<example id="openldap-nscd-ejemplo2">
		<title>Instalación de <application>nscd</application></title>

<screen><prompt>$</prompt> <userinput>/usr/bin/apt-cache show nscd</userinput>
<computeroutput><![CDATA[Package: nscd
Priority: optional
Section: admin
Installed-Size: 212
Maintainer: GNU Libc Maintainers <debian-glibc@lists.debian.org>
Architecture: i386
Source: glibc
Version: 2.3.2.ds1-16
Replaces: libc6 (<< 2.1-4)
Depends: libc6 (>= 2.3.2.ds1-16)
Filename: pool/main/g/glibc/nscd_2.3.2.ds1-16_i386.deb
Size: 90436
MD5sum: 4830a171d3ef40bef18315bcfb47be3a
Description: GNU C Library: Name Service Cache Daemon
 A daemon which handles passwd, group and host lookups
 for running programs and caches the results for the next
 query. You should install this package only if you use
 slow Services like LDAP, NIS or NIS+

]]></computeroutput></screen>
	</example>

</sect1>

<sect1 id="openldap-nscd-configuracion">
	<title>Configuración</title>

	<para><application>nscd</application> se configura a través del archivo
	<filename>/etc/nscd.conf</filename> (puede encontrar un ejemplo del mismo en el
	<xref linkend="openldap-nscd_conf"/>). Los únicos parámetros que se tocarán de
	ese archivo de configuración son los siguientes:</para>

<programlisting>        logfile                 /var/log/nscd.log
        server-user             nscd
</programlisting>

	<para>El primer parámetro especifica el archivo de log que va a emplear el demonio
	<application>nscd</application> y el segundo el usuario con el que se ejecutará en el
	sistema. Como el usuario <emphasis>nscd</emphasis> no existe en la máquina, se
	crea:</para>

	<example id="openldap-nscd-ejemplo3">
		<title>Creación del usuario <emphasis>nscd</emphasis></title>

<screen><prompt>#</prompt> <userinput>/usr/sbin/addgroup --system nscd</userinput>
<computeroutput>
Añadiendo el grupo nscd (135)...
Hecho.</computeroutput>
<prompt>#</prompt> <userinput>/usr/sbin/adduser --system --no-create-home --shell /bin/false \
--ingroup nscd --disabled-password --disabled-login nscd</userinput>
<computeroutput>
Añadiendo usuario del sistema nscd...
No se crea el directorio home.</computeroutput></screen>
	</example>

	<para>Antes de arrancar el demonio <application>nscd</application>, se modifican el
	propietario y grupo del archivo de log y, si es necesario, el del archivo
	<filename>/var/run/nscd.pid</filename>.</para>

	<example id="openldap-nscd-ejemplo4">
		<title>Cambio del propietario y grupo de algunos archivos relativos a <emphasis>nscd</emphasis></title>

<screen><prompt>#</prompt> <userinput>/bin/chown nscd\:nscd /var/log/nscd.log /var/run/nscd.pid</userinput></screen>
	</example>

	<para>Ahora ya se puede arrancar el demonio:</para>

	<example id="openldap-nscd-ejemplo5">
		<title>Arranque del demonio <emphasis>nscd</emphasis></title>

<screen><prompt>#</prompt> <userinput>/etc/init.d/nscd start</userinput>
<computeroutput>Starting Name Service Cache Daemon: nscd.</computeroutput></screen>
	</example>

</sect1>
</appendix>
