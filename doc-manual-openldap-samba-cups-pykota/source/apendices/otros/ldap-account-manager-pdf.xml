<?xml version="1.0" encoding="ISO-8859-1" ?>

<appendix id="ldap-account-manager-instalacion-conf">
	<title>Instalación y configuración de <emphasis>LAM</emphasis> (<acronym>LDAP</acronym>
	Account Manager)</title>

<sect1 id="ldap-account-manager-instalacion">
	<title>Instalación</title>

	<para><acronym>LAM</acronym> es un <emphasis>frontend</emphasis> web para la administración de usuarios
	para cuentas unix y Samba dentro de un directorio <acronym>LDAP</acronym>. Su
	descripción es la siguiente:</para>

	<example id="ldap-account-manager-descripcion">
		<title>Descripción de <acronym>LAM</acronym></title>

<screen><prompt>$</prompt> <userinput>/usr/bin/apt-cache show ldap-account-manager</userinput>
<computeroutput><![CDATA[Package: ldap-account-manager
Priority: extra
Section: web
Installed-Size: 2208
Maintainer: Roland Gruber <post@rolandgruber.de>
Architecture: all
Version: 0.4.6-2
Depends: php4 | php4-cgi | libapache2-mod-php4, php4-ldap,
apache | apache-ssl | httpd, perl, wwwconfig-common, debconf
Recommends: php4-mhash
Suggests: ldap-server, sudo, php4-mcrypt
Conflicts: php4-apc
Filename: pool/main/l/ldap-account-manager/ldap-account-manager_0.4.6-2_all.deb
Size: 406002
MD5sum: 03bb45d124c8783415631f884c97692e
Description: Webfrontend for managing Unix and Samba accounts in a LDAP directory
 LDAP Account Manager (LAM) runs on an existing webserver. LAM
 supports LDAP connections via SSL and TLS. It uses the
 Samba 2.x or Samba 3 schema and manages user, group and host
 accounts. You can use templates for account creation and use
 multiple configuration profiles. Account information can be
 exported as PDF file. There is also a script
 included which manages quota and homedirectories, you have to
 setup sudo if you want to use it. LAM is translated to
 English, French, German, Hungarian and Japanese.
 .
 Homepage: http://lam.sourceforge.net/

]]></computeroutput></screen>
	</example>

	<para>La manera de instalar este software se muestra a continuación:</para>

	<important><para>Debido a un problema con la generación de la documentación en formato
	<acronym>DVI</acronym>, <acronym>PS</acronym>, <acronym>PDF</acronym> y
	<acronym>RTF</acronym>, en esta sección se han omitido algunas de las imágenes del proceso
	de instalación<footnote><para>Se han sustituído por un texto explicativo.</para></footnote>.
	Para ver el documento completo, vea la documentación en formato
	<acronym>HTML</acronym>.</para></important>

	<example id="ldap-account-manager-ejemplo-instalacion-1">
		<title>Instalación de <acronym>LAM</acronym> (primera parte)</title>

<screen><prompt>#</prompt> <userinput>/usr/bin/apt-get install ldap-account-manager</userinput>
<computeroutput>Leyendo lista de paquetes... Hecho
Creando árbol de dependencias... Hecho
Se instalarán los siguientes paquetes extras:
  apache apache-common apache-utils libapache-mod-php4 libapache-mod-ssl libmm13 php4
  php4-common php4-ldap wwwconfig-common
Paquetes sugeridos:
  apache-doc apache-ssl apache-perl sudo php4-mcrypt php4-pear libapache-mod-ssl-doc
  mysql-client postgresql-client
Paquetes recomendados
  php4-mhash
Se instalarán los siguientes paquetes NUEVOS:
  apache apache-common apache-utils ldap-account-manager libapache-mod-php4 libapache-mod-ssl
  libmm13 php4 php4-common php4-ldap wwwconfig-common
0 actualizados, 11 se instalarán, 0 para eliminar y 2 no actualizados.
Se necesita descargar 0B/3958kB de archivos.
Se utilizarán 11,3MB de espacio de disco adicional después de desempaquetar.
¿Desea continuar? [S/n]
Preconfiguring packages ...</computeroutput></screen>
	</example>
<!--
	<figure>
		<title>¿Arrancar <application>Apache</application> en el arranque?</title>
		<mediaobject>
			<imageobject>
				<imagedata fileref="./imagenes/lam-instalacion1.png" format="PNG"/>
			</imageobject>
	
			<caption>
				<para>Adapte la respuesta a esta pregunta a sus necesidades, en este caso
				se ha decidido arrancar <application>Apache</application> en el arranque.</para>
			</caption>
		</mediaobject>
	</figure>
-->

	<formalpara>
		<title>¿Arrancar <application>Apache</application> en el arranque?</title>

		<para>En esta pantalla se le preguntará si quiere arrancar <application>Apache</application>
		con cada arranque del sistema. Adapte la respuesta a sus necesidades, en este caso
		se ha decidido arrancar <application>Apache</application> en el arranque.</para>
	</formalpara>

<!--
	<figure>
		<title>¿Activar suExec?</title>
		<mediaobject>
			<imageobject>
				<imagedata fileref="./imagenes/lam-instalacion2.png" format="PNG"/>
			</imageobject>
	
			<caption>
				<para>La respuesta a esta pregunta es negativa, de momento no se va a necesitar esta
				funcionalidad, por lo que así se evita tener un archivo <emphasis>setuid</emphasis>
				más en el sistema.</para>
			</caption>
		</mediaobject>
	</figure>
-->

	<formalpara>
		<title>¿Activar suExec?</title>

		<para>La respuesta a esta pregunta es negativa, de momento no se va a necesitar esta
        funcionalidad, por lo que así se evita tener un archivo <emphasis>setuid</emphasis>
        más en el sistema.</para>
	</formalpara>

<!--
	<figure>
		<title>¿Para qué servidor(es) web se ha de configurar <acronym>LAM</acronym>?</title>
		<mediaobject>
			<imageobject>
				<imagedata fileref="./imagenes/lam-instalacion3.png" format="PNG"/>
			</imageobject>
	
			<caption>
				<para>En esta documentación sólo se ha instalado el servidor web <application>Apache</application>,
				por lo que se elige esta opción. La funcionalidad <acronym>SSL</acronym> en
				<application>Apache</application> se provee mediante el módulo <emphasis>mod_ssl</emphasis>
				(paquete <emphasis>libapache-mod-ssl</emphasis>).</para>
			</caption>
		</mediaobject>
	</figure>
-->

	<formalpara>
		<title>¿Para qué servidor(es) web se ha de configurar <acronym>LAM</acronym>?</title>

		<para>En esta documentación sólo se ha instalado el servidor web <application>Apache</application>,
                por lo que se elige esta opción. La funcionalidad <acronym>SSL</acronym> en
                <application>Apache</application> se provee mediante el módulo <emphasis>mod_ssl</emphasis>
                (paquete <emphasis>libapache-mod-ssl</emphasis>).</para>
	</formalpara>

<!--
	<figure>
		<title>Alias para el acceso a <acronym>LAM</acronym> desde el servidor web</title>
		<mediaobject>
			<imageobject>
				<imagedata fileref="./imagenes/lam-instalacion4.png" format="PNG"/>
			</imageobject>
	
			<caption>
				<para>Teclee en esta pantalla el alias con el que quiera acceder a la aplicación
				<acronym>LAM</acronym> desde su servidor web. En este caso se ha seleccionado
				el alias <emphasis>lam</emphasis>, por lo que para acceder a la herramienta,
				se hará a través de: <emphasis>http://gsr.pt/lam/</emphasis>.</para>
			</caption>
		</mediaobject>
	</figure>
-->

	<formalpara>
		<title>Alias para el acceso a <acronym>LAM</acronym> desde el servidor web</title>

		<para>Teclee en esta pantalla el alias con el que quiera acceder a la aplicación
                <acronym>LAM</acronym> desde su servidor web. En este caso se ha seleccionado
                el alias <emphasis>lam</emphasis>, por lo que para acceder a la herramienta,
                se hará a través de: <emphasis>http://gsr.pt/lam/</emphasis>.</para>
	</formalpara>

<!--
	<figure id="lam-instalacion5">
		<title>Clave para el administrador de los perfiles dentro de <acronym>LAM</acronym></title>
		<mediaobject>
			<imageobject>
				<imagedata fileref="./imagenes/lam-instalacion5.png" format="PNG"/>
			</imageobject>
	
			<caption>
				<para>Teclee la clave, en texto plano, que desee para el administrador de perfiles de la herramienta
				<acronym>LAM</acronym>.</para>
			</caption>
		</mediaobject>
	</figure>
-->

	<formalpara id="lam-instalacion5">
		<title>Clave para el administrador de los perfiles dentro de <acronym>LAM</acronym></title>

		<para>Teclee la clave, en texto plano, que desee para el administrador de perfiles de la herramienta
                <acronym>LAM</acronym>.</para>
	</formalpara>

	<example id="ldap-account-manager-ejemplo-instalacion-2">
		<title>Instalación de <acronym>LAM</acronym> (segunda parte)</title>

<screen><computeroutput>Seleccionando el paquete apache-utils previamente no seleccionado.
(Leyendo la base de datos ...
134049 ficheros y directorios instalados actualmente.)
Desempaquetando apache-utils (de .../apache-utils_1.3.31-6_i386.deb) ...
Seleccionando el paquete apache-common previamente no seleccionado.
Desempaquetando apache-common (de .../apache-common_1.3.31-6_i386.deb) ...
Seleccionando el paquete apache previamente no seleccionado.
Desempaquetando apache (de .../apache_1.3.31-6_i386.deb) ...
Seleccionando el paquete libmm13 previamente no seleccionado.
Desempaquetando libmm13 (de .../libmm13_1.3.0-3_i386.deb) ...
Seleccionando el paquete libapache-mod-ssl previamente no seleccionado.
Desempaquetando libapache-mod-ssl (de .../libapache-mod-ssl_2.8.19-1_i386.deb) ...
Seleccionando el paquete php4-common previamente no seleccionado.
Desempaquetando php4-common (de .../php4-common_4%3a4.3.8-12_i386.deb) ...
Seleccionando el paquete libapache-mod-php4 previamente no seleccionado.
Desempaquetando libapache-mod-php4 (de .../libapache-mod-php4_4%3a4.3.8-12_i386.deb) ...
Seleccionando el paquete php4 previamente no seleccionado.
Desempaquetando php4 (de .../php4_4%3a4.3.8-12_all.deb) ...
Seleccionando el paquete php4-ldap previamente no seleccionado.
Desempaquetando php4-ldap (de .../php4-ldap_4%3a4.3.8-12_i386.deb) ...
Seleccionando el paquete wwwconfig-common previamente no seleccionado.
Desempaquetando wwwconfig-common (de .../wwwconfig-common_0.0.40_all.deb) ...
Seleccionando el paquete ldap-account-manager previamente no seleccionado.
Desempaquetando ldap-account-manager (de .../ldap-account-manager_0.4.6-2_all.deb) ...
Configurando apache-utils (1.3.31-6) ...
Configurando apache-common (1.3.31-6) ...

Configurando apache (1.3.31-6) ...
</computeroutput></screen>
	</example>
<!--
	<figure>
		<title>Módulos que cargará <application>Apache</application></title>
		<mediaobject>
			<imageobject>
				<imagedata fileref="./imagenes/lam-instalacion6.png" format="PNG"/>
			</imageobject>
	
			<caption>
				<para>Asegúrese de que están marcados los módulos <emphasis>mod_ssl</emphasis> y
				<emphasis>mod_php4</emphasis>. El primero será necesario para activar el
				soporte <acronym>SSL</acronym> en <application>Apache</application> y el
				segundo para activar el soporte <acronym>PHP4</acronym>.</para>
			</caption>
		</mediaobject>
	</figure>
-->

	<formalpara>
		<title>Módulos que cargará <application>Apache</application></title>

		<para>Asegúrese de que están marcados los módulos <emphasis>mod_ssl</emphasis> y
                <emphasis>mod_php4</emphasis>. El primero será necesario para activar el
                soporte <acronym>SSL</acronym> en <application>Apache</application> y el
                segundo para activar el soporte <acronym>PHP4</acronym>.</para>
	</formalpara>

<!--
	<figure>
		<title>Nombre del dominio que servirá <application>Apache</application> por defecto</title>
		<mediaobject>
			<imageobject>
				<imagedata fileref="./imagenes/lam-instalacion7.png" format="PNG"/>
			</imageobject>
	
			<caption>
				<para>Teclee en esta pantalla el <acronym>FQDN</acronym> de su servidor web.</para>
			</caption>
		</mediaobject>
	</figure>
-->

	<formalpara>
		<title>Nombre del dominio que servirá <application>Apache</application> por defecto</title>

		<para>Teclee en esta pantalla el <acronym>FQDN</acronym> de su servidor web.</para>
	</formalpara>

<!--
	<figure>
		<title>Dirección de correo electrónico del administrador de <application>Apache</application></title>
		<mediaobject>
			<imageobject>
				<imagedata fileref="./imagenes/lam-instalacion8.png" format="PNG"/>
			</imageobject>
	
			<caption>
				<para>Complete el campo de la captura con la dirección del administrador
				encargado del servidor <application>Apache</application>.</para>
			</caption>
		</mediaobject>
	</figure>
-->

	<formalpara>
		<title>Dirección de correo electrónico del administrador de <application>Apache</application></title>

		<para>Complete el campo de la captura con la dirección del administrador
                encargado del servidor <application>Apache</application>.</para>
	</formalpara>

<!--
	<figure>
		<title>Directorio raíz de <application>Apache</application> por defecto</title>
		<mediaobject>
			<imageobject>
				<imagedata fileref="./imagenes/lam-instalacion9.png" format="PNG"/>
			</imageobject>
	
			<caption>
				<para>Sería recomendable dejar la sugerencia que se muestra en esta pantalla como
				directorio raíz de su servidor web.</para>
			</caption>
		</mediaobject>
	</figure>
-->

	<formalpara>
		<title>Directorio raíz de <application>Apache</application> por defecto</title>

		<para>Sería recomendable dejar la sugerencia que se muestra en esta pantalla como
                directorio raíz de su servidor web.</para>
	</formalpara>

<!--
	<figure>
		<title>Puerto de escucha de <application>Apache</application></title>
		<mediaobject>
			<imageobject>
				<imagedata fileref="./imagenes/lam-instalacion10.png" format="PNG"/>
			</imageobject>
	
			<caption>
				<para>Establezca el puerto donde ha de escuchar <application>Apache</application>.</para>
			</caption>
		</mediaobject>
	</figure>
-->

	<formalpara>
		<title>Puerto de escucha de <application>Apache</application></title>

		<para>Establezca el puerto donde ha de escuchar <application>Apache</application>.</para>
	</formalpara>

	<example id="ldap-account-manager-ejemplo-instalacion-3">
		<title>Instalación de <acronym>LAM</acronym> (tercera parte)</title>

<screen><computeroutput>
Creating config file /etc/apache/httpd.conf with new version

Creating config file /etc/apache/srm.conf with new version

Creating config file /etc/apache/access.conf with new version

Creating config file /etc/apache/modules.conf with new version
Starting web server: apache.

Configurando libmm13 (1.3.0-3) ...

Configurando libapache-mod-ssl (2.8.19-1) ...
./snakeoil-ca-rsa.crt ... e52d41d0.0
./ca-bundle.crt ... Skipped
./snakeoil-dsa.crt ... 5d8360e1.0
./snakeoil-rsa.crt ... 82ab5372.0
./snakeoil-ca-dsa.crt ... 0cf14d7d.0

Configurando php4-common (4.3.8-12) ...
Configurando libapache-mod-php4 (4.3.8-12) ...

Configurando php4 (4.3.8-12) ...

Configurando php4-ldap (4.3.8-12) ...
</computeroutput></screen>
	</example>
<!--
	<figure>
		<title>Activar la extensión <acronym>LDAP</acronym> en <acronym>PHP4</acronym></title>
		<mediaobject>
			<imageobject>
				<imagedata fileref="./imagenes/lam-instalacion11.png" format="PNG"/>
			</imageobject>
	
			<caption>
				<para>Seleccione <emphasis>Sí</emphasis> si desea activar la extensión
				<acronym>LDAP</acronym> en <acronym>PHP4</acronym>, sería recomendable, para
				que <acronym>LAM</acronym> funcionase.</para>
			</caption>
		</mediaobject>
	</figure>
-->
	<formalpara>
		<title>Activar la extensión <acronym>LDAP</acronym> en <acronym>PHP4</acronym></title>

		<para>Seleccione <emphasis>Sí</emphasis> si desea activar la extensión
                <acronym>LDAP</acronym> en <acronym>PHP4</acronym>, sería recomendable, para
                que <acronym>LAM</acronym> funcionase.</para>
	</formalpara>

	<example id="ldap-account-manager-ejemplo-instalacion-4">
		<title>Instalación de <acronym>LAM</acronym> (cuarta parte)</title>

<screen><computeroutput>
Configurando wwwconfig-common (0.0.40) ...
Configurando ldap-account-manager (0.4.6-2) ...

localepurge: checking system for new locale ...
localepurge: processing locale files ...
localepurge: processing man pages ...</computeroutput></screen>
	</example>

	<note><para>Si no ve alguna de las pantallas de configuración que aquí se muestran, tal vez
	sea necesario forzar la configuración de algunos paquetes a <quote>bajo nivel</quote>.
	Para ello puede teclear:</para>

<screen><prompt>#</prompt> <userinput>/usr/sbin/dpkg-reconfigure ldap-account-manager</userinput></screen>

	<para>O</para>

<screen><prompt>#</prompt> <userinput>/usr/sbin/dpkg-reconfigure apache</userinput></screen>

	<para>O</para>

<screen><prompt>#</prompt> <userinput>/usr/sbin/dpkg-reconfigure php4-ldap</userinput></screen></note>
</sect1>

<sect1 id="ldap-account-manager-configuracion">
	<title>Configuración</title>

	<sect2 id="ldap-account-manager-configuracion-apache">
		<title>Configuración relativa a <application>Apache</application></title>

		<note><para>Si desea ver como se configura <application>Apache</application> para
		el soporte <acronym>SSL</acronym>, vea el
		<xref linkend="apache-creacion-certificados"/>.</para></note>

		<para>Antes de proceder a la configuración de la herramienta, se va a obligar al
		servidor web <application>Apache</application> a servir las páginas relacionadas
		con <acronym>LAM</acronym> en modo <acronym>SSL</acronym>. Para ello, edite el
		archivo <filename>/etc/ldap-account-manager/apache.conf</filename> y añada
		las siguientes líneas al final del archivo:</para>

<programlisting><![CDATA[# redirect to https when available (thanks omen@descolada.dartmouth.edu)
<IfModule mod_rewrite.c>
    <IfModule mod_ssl.c>
        <Location /lam>
            RewriteEngine on
            RewriteCond %{HTTPS} !=on
            RewriteRule . https://%{HTTP_HOST}%{REQUEST_URI}  [L]
        </Location>
    </IfModule>
</IfModule>]]></programlisting>

		<para>El siguiente paso será hacer que el servidor <application>Apache</application>
		relea su configuración:</para>

		<example id="ldap-account-manager-configuracion-apache-ejemplo-1">
			<title>Releyendo la configuración de <application>Apache</application></title>

<screen><prompt>#</prompt> <userinput>/etc/init.d/apache reload</userinput>
<computeroutput>Reloading apache configuration.</computeroutput></screen>
		</example>
	</sect2>

	<sect2 id="ldap-account-manager-configuracion-interfaz-web">
		<title>Configuración desde la interfaz web</title>

		<para>Ahora que ya está instalado <acronym>LAM</acronym> en el sistema, el siguiente paso será
		acceder a la interfaz <acronym>LAM</acronym> con un
		navegador web. Para ello se ha de teclear la siguiente <acronym>URL</acronym> en su navegador favorito:
		<emphasis>http://gsr.pt/lam</emphasis> (suponiendo que <quote>gsr.pt</quote> sea
		su dominio).</para>
		
		<para>En las siguientes capturas se mostrará el proceso de configuración de
		<acronym>LAM</acronym> desde la interfaz web. Durante el proceso se creará un nuevo perfil.</para>
		
		<important><para>No utilice caracteres especiales al reyenar los campos,
		pues <acronym>LAM</acronym> no los reconoce.</para></important>

<!--
	   <figure>
	   	<title><acronym>URL</acronym> donde está instalado <acronym>LAM</acronym></title>
	   	<mediaobject>
	   		<imageobject>
	   			<imagedata fileref="./imagenes/lam-configuracion1.png" format="PNG"/>
	   		</imageobject>
	   
	   		<caption>
	   			<para>Si se encuentra en un entorno de escritorio con <acronym>KDE</acronym>, teclee
	   			<keycombo action='simul'><keycap>Alt</keycap><keycap>F2</keycap></keycombo> e introduzca
	   			la dirección donde se encuentre instalado <acronym>LAM</acronym>.</para>
	   		</caption>
	   	</mediaobject>
	   </figure>
-->

	<formalpara>
		<title><acronym>URL</acronym> donde está instalado <acronym>LAM</acronym></title>

		<para>Si se encuentra en un entorno de escritorio con <acronym>KDE</acronym>, teclee
                <keycombo action='simul'><keycap>Alt</keycap><keycap>F2</keycap></keycombo> e introduzca
                la dirección donde se encuentre instalado <acronym>LAM</acronym>.</para>
	</formalpara>

		<para>Tiene un ejemplo de la ventana que obtendría al pulsar esta combinación
		de teclas en la <xref linkend="phpldapadmin1"/>.</para>

<!--
		<figure>
			<title>Aviso acerca del certificado del servidor web I</title>
				<mediaobject>
					<imageobject>
						<imagedata fileref="./imagenes/lam-configuracion-certificado1.png" format="PNG"/>
					</imageobject>
				
					<caption><para>Si ha configurado correctamente el servidor web, a la hora
					de acceder a la aplicación <acronym>LAM</acronym> por el protocolo
					<emphasis>http</emphasis>, <application>Apache</application> le tendría
					que redireccionar a la misma dirección, pero bajo el protocolo
					<emphasis>https</emphasis>.</para>

					<para>Esto es lo que ha ocurrido en esta pantalla, <application>Apache</application>
					ha redirigido la petición realizada (http://gsr.pt/lam/) hacia el protocolo
					<emphasis>https</emphasis>. Por este motivo, y debido a que la entidad
					certificadora que se ha creado es desconocida, sale este aviso. Pulse sobre
					el botón <emphasis>Detalles</emphasis> para obtener más información.</para></caption>
			</mediaobject>
		</figure>
-->

	<formalpara>
		<title>Aviso acerca del certificado del servidor web I</title>

		<para>Si ha configurado correctamente el servidor web, a la hora
                    de acceder a la aplicación <acronym>LAM</acronym> por el protocolo
                    <emphasis>http</emphasis>, <application>Apache</application> le tendría
                    que redireccionar a la misma dirección, pero bajo el protocolo
                    <emphasis>https</emphasis>.</para>
	</formalpara>

		<para>Esto es lo que ha ocurrido en esta pantalla, <application>Apache</application>
                    ha redirigido la petición realizada (http://gsr.pt/lam/) hacia el protocolo
                    <emphasis>https</emphasis>. Por este motivo, y debido a que la entidad
                    certificadora que se ha creado es desconocida, sale este aviso. Pulse sobre
                    el botón <emphasis>Detalles</emphasis> para obtener más información.</para>

		<para>Tiene un ejemplo de la pantalla que aparecería aquí en la
		<xref linkend="phpldapadmin-configuracion-certificado1"/>.</para>

<!--
		<figure>
			<title>Información <acronym>SSL</acronym></title>
				<mediaobject>
					<imageobject>
						<imagedata fileref="./imagenes/lam-configuracion-certificado2.png" format="PNG"/>
					</imageobject>
				
					<caption><para>En esta pantalla se muestra la información del certificado y la
					entidad certificadora que ha creado dicho certificado. Si se fija, aquí aparecerán
					los datos tecleados en el <xref linkend="apache-creacion-certificados"/>. Pulse
					sobre el botón <emphasis>Cerrar</emphasis> para continuar.</para></caption>
			</mediaobject>
		</figure>
-->

	<formalpara>
		<title>Información <acronym>SSL</acronym></title>

		<para>En esta pantalla se muestra la información del certificado y la
                    entidad certificadora que ha creado dicho certificado. Si se fija, aquí aparecerán
                    los datos tecleados en el <xref linkend="apache-creacion-certificados"/>. Pulse
                    sobre el botón <emphasis>Cerrar</emphasis> para continuar.</para>
	</formalpara>

		<para>Tiene un ejemplo de la pantalla que aparecería aquí en la
		<xref linkend="phpldapadmin-configuracion-certificado2"/>.</para>

<!--
		<figure>
			<title>Aviso acerca del certificado del servidor web II</title>
				<mediaobject>
					<imageobject>
						<imagedata fileref="./imagenes/lam-configuracion-certificado3.png" format="PNG"/>
					</imageobject>
				
					<caption><para>Pulse ahora sobre el botón <emphasis>Continuar</emphasis> para
					seguir con la carga de la página.</para></caption>
			</mediaobject>
		</figure>
-->

	<formalpara>
		<title>Aviso acerca del certificado del servidor web II</title>

		<para>Pulse ahora sobre el botón <emphasis>Continuar</emphasis> para
                    seguir con la carga de la página.</para>
	</formalpara>

		<para>Tiene un ejemplo de la pantalla que aparecería aquí en la
		<xref linkend="phpldapadmin-configuracion-certificado3"/>.</para>

<!--
		<figure>
			<title>Período de aceptación del certificado</title>
				<mediaobject>
					<imageobject>
						<imagedata fileref="./imagenes/lam-configuracion-certificado4.png" format="PNG"/>
					</imageobject>
				
					<caption><para>Seleccione la opción deseada y pulse sobre ella.</para></caption>
			</mediaobject>
		</figure>
-->

	<formalpara>
		<title>Período de aceptación del certificado</title>

		<para>Seleccione la opción deseada y pulse sobre ella.</para>
	</formalpara>

		<para>Tiene un ejemplo de la pantalla que aparecería aquí en la
		<xref linkend="phpldapadmin-configuracion-certificado4"/>.</para>

<!--
	   <figure>
	   	<title>Pantalla de ingreso</title>
	   	<mediaobject>
	   		<imageobject>
	   			<imagedata fileref="./imagenes/lam-configuracion2.png" format="PNG"/>
	   		</imageobject>
	   
	   		<caption>
	   			<para>Pantalla principal de <acronym>LAM</acronym> antes del ingreso. Como
	   			es la primera vez que se accede, se creará un nuevo perfil adaptado a las necesidades
	   			del sistema. Para ello pulse sobre <emphasis>Configuration Login</emphasis>.</para>
	   		</caption>
	   	</mediaobject>
	   </figure>
-->
	<formalpara>
		<title>Pantalla de ingreso</title>

		<para>Pantalla principal de <acronym>LAM</acronym> antes del ingreso. Como
                es la primera vez que se accede, se creará un nuevo perfil adaptado a las necesidades
                del sistema. Para ello pulse sobre <emphasis>Configuration Login</emphasis>.</para>
	</formalpara>

<!--
	   <figure>
	   	<title>Pantalla de configuración</title>
	   	<mediaobject>
	   		<imageobject>
	   			<imagedata fileref="./imagenes/lam-configuracion3.png" format="PNG"/>
	   		</imageobject>
	   
	   		<caption>
	   			<para>Esta imagen presenta la pantalla de configuración de <acronym>LAM</acronym>,
	   			aquí seleccione el enlace: <emphasis>Configuration wizard</emphasis>.</para>
	   		</caption>
	   	</mediaobject>
	   </figure>
-->

	<formalpara>
		<title>Pantalla de configuración</title>

	   	<para>Esta imagen presenta la pantalla de configuración de <acronym>LAM</acronym>,
		aquí seleccione el enlace: <emphasis>Configuration wizard</emphasis>.</para>
	</formalpara>

<!--	
	   <figure>
	   	<title>Asistente de configuración, datos del perfil</title>
	   	<mediaobject>
	   		<imageobject>
	   			<imagedata fileref="./imagenes/lam-configuracion4.png" format="PNG"/>
	   		</imageobject>
	   
	   		<caption>
	   			<para>A partir de esta pantalla, se irán completando las distintas opciones que
	   			presente el asistente de configuración de <acronym>LAM</acronym>. Aquí se pide el
	   			nombre para el nuevo perfil (<emphasis>Profile name</emphasis>), la clave para
	   			acceder al nuevo perfil creado (<emphasis>Password</emphasis>) y la
	   			clave principal (<emphasis>Master password</emphasis>) de <acronym>LAM</acronym>,
				recuerde que esta clave se estableció en el proceso de instalación
				(<xref linkend="lam-instalacion5"/>).</para>
	   		</caption>
	   	</mediaobject>
	   </figure>
-->

	<formalpara>
		<title>Asistente de configuración, datos del perfil</title>

		<para>A partir de esta pantalla, se irán completando las distintas opciones que
		presente el asistente de configuración de <acronym>LAM</acronym>. Aquí se pide el
		nombre para el nuevo perfil (<emphasis>Profile name</emphasis>), la clave para
		acceder al nuevo perfil creado (<emphasis>Password</emphasis>) y la
		clave principal (<emphasis>Master password</emphasis>) de <acronym>LAM</acronym>,
		recuerde que esta clave se estableció en el proceso de instalación
		(<xref linkend="lam-instalacion5"/>).</para>
	</formalpara>

<!--
	   <figure>
	   	<title>Asistente de configuración, datos del servidor <acronym>LDAP</acronym> y Samba</title>
	   	<mediaobject>
	   		<imageobject>
	   			<imagedata fileref="./imagenes/lam-configuracion5.png" format="PNG"/>
	   		</imageobject>
	   
	   		<caption>
	   			<para>Pantalla dedicada a la localización del servidor <acronym>LDAP</acronym> y
	   			la versión de Samba:</para>
	
	   			<itemizedlist mark="opencilcle">
	   				<listitem>
	   					<para><emphasis>Server address</emphasis>: dirección del servidor
	   					<acronym>LDAP</acronym> que se va a utilizar.</para>

						<note><para> Como no especifíca en ningún lugar la forma de activar
						el uso de <acronym>TLS</acronym> para las comunicaciones contra
						el servidor <acronym>LDAP</acronym>, si quiere asegurarse una conexión
						cifrada entre <acronym>LAM</acronym> y el servidor <acronym>LDAP</acronym>,
						especifique aquí la dirección mediante el protocolo
						<emphasis>ldaps</emphasis>, para utilizar <acronym>SSL</acronym>
						en las comunicaciones.</para></note>
	   				</listitem>
	   				<listitem>
	   					<para><emphasis><acronym>LDAP</acronym> admin <acronym>DN</acronym></emphasis>:
	   					administrador del directorio <acronym>LDAP</acronym>.</para>
	   				</listitem>
	   				<listitem>
	   					<para><emphasis>Password</emphasis>: clave para el administrador del directorio
	   					<acronym>LDAP</acronym>.</para>
	   				</listitem>
	   				<listitem>
	   					<para><emphasis>Samba version</emphasis>: versión de Samba que se va a emplear,
	   					en este caso es la versión 3.*</para>
	   				</listitem>
	   			</itemizedlist>
	   		</caption>
	   	</mediaobject>
	   </figure>
-->

	<formalpara>
		<title>Asistente de configuración, datos del servidor <acronym>LDAP</acronym> y Samba</title>

	   	<para>Pantalla dedicada a la localización del servidor <acronym>LDAP</acronym> y
	   	la versión de Samba:</para>
	</formalpara>
	
	<itemizedlist mark="opencilcle">
		<listitem>
			<para><emphasis>Server address</emphasis>: dirección del servidor
			<acronym>LDAP</acronym> que se va a utilizar.</para>

		<note><para> Como no especifíca en ningún lugar la forma de activar
		el uso de <acronym>TLS</acronym> para las comunicaciones contra
		el servidor <acronym>LDAP</acronym>, si quiere asegurarse una conexión
		cifrada entre <acronym>LAM</acronym> y el servidor <acronym>LDAP</acronym>,
		especifique aquí la dirección mediante el protocolo
		<emphasis>ldaps</emphasis>, para utilizar <acronym>SSL</acronym>
		en las comunicaciones.</para></note>
		</listitem>
		<listitem>
			<para><emphasis><acronym>LDAP</acronym> admin <acronym>DN</acronym></emphasis>:
			administrador del directorio <acronym>LDAP</acronym>.</para>
		</listitem>
		<listitem>
			<para><emphasis>Password</emphasis>: clave para el administrador del directorio
			<acronym>LDAP</acronym>.</para>
		</listitem>
		<listitem>
			<para><emphasis>Samba version</emphasis>: versión de Samba que se va a emplear,
			en este caso es la versión 3.*</para>
		</listitem>
	</itemizedlist>

   <figure>
	   	<title>Asistente de configuración, creando la estructura para el directorio <acronym>LDAP</acronym></title>
	   	<mediaobject>
	   		<imageobject>
	   			<imagedata fileref="./imagenes/lam-configuracion6.png" format="PNG"/>
	   		</imageobject>
	   
	   		<caption>
	   			<para>Las cuentas que se crearán a través de <acronym>LAM</acronym> se almacenarán
	   			en el directorio <acronym>LDAP</acronym> de la forma que se indique en este paso:</para>
	
	   			<itemizedlist mark="opencilcle">
	   				<listitem>
	   					<para><emphasis>UserSuffix</emphasis>: lugar donde se almacenarán las cuentas
	   					de los usuarios.</para>
	   				</listitem>
	   				<listitem>
	   					<para><emphasis>GroupSuffix</emphasis>: lugar donde se almacenarán las cuentas
	   					de los grupos de usuarios.</para>
	   				</listitem>
	   				<listitem>
	   					<para><emphasis>HostSuffix</emphasis>: lugar donde se almacenará la información
	   					sobre las máquinas Samba.</para>
	   				</listitem>
	   				<listitem>
	   					<para><emphasis>DomainSuffix</emphasis>: lugar donde se almacenará la información
	   					sobre los dominios Samba.</para>
	   				</listitem>
	   				<listitem>
	   					<para><emphasis>Password hash type</emphasis>: tipo de algoritmo de hash a utilizar
	   					para almacenar las claves, en este caso se ha elegido el tipo
	   					<acronym>MD5</acronym>.</para>
	   				</listitem>
	   				<listitem>
	   					<para><emphasis>Cache timeout</emphasis>: tiempo que <acronym>LAM</acronym>
	   					mantendrá en su caché las búsquedas <acronym>LDAP</acronym> realizadas.</para>
	   				</listitem>
	   				<listitem>
	   					<para><emphasis>Optional settings</emphasis>: las opciones por defecto
	   					se adaptan a las necesidades del proyecto, por lo que no se selecciona ninguna
	   					opción en este cuadro.</para>
	
	   					<para>La última opción: <emphasis>Lamdaemon settings and
	   					<acronym>PDF</acronym> text</emphasis> sirve para ajustar, entre otras cosas,
	   					la ruta al script <filename>lamdaemon.pl</filename>. Este script permite
	   					la creación/eliminación de los directorios home de los usuarios y el
	   					establecimiento de quotas para los mismos.</para>
	
	   					<para>En esta documentación no se ha empleado dicho script, en su lugar
	   					se ha empleado el script del <xref linkend="make-deleteHomedirectory"/>.</para>
	   				</listitem>
	   			</itemizedlist>
	   		</caption>
	   	</mediaobject>
	   </figure>
	
	   <figure>
	   	<title>Asistente de configuración, confirmación de la creación de entradas <acronym>LDAP</acronym></title>
	   	<mediaobject>
	   		<imageobject>
	   			<imagedata fileref="./imagenes/lam-configuracion7.png" format="PNG"/>
	   		</imageobject>
	   
	   		<caption>
	   			<para>Confirmación para la creación de las nuevas entradas en el directorio
	   			<acronym>LDAP</acronym>.</para>
	   		</caption>
	   	</mediaobject>
	   </figure>
	
	   <figure>
	   	<title>Asistente de configuración, creación de un dominio</title>
	   	<mediaobject>
	   		<imageobject>
	   			<imagedata fileref="./imagenes/lam-configuracion8.png" format="PNG"/>
	   		</imageobject>
	   
	   		<caption>
	   			<para>Aquí se introducirá el dominio que se va a utilizar en Samba así como el
	   			<acronym>SID</acronym> del servidor donde está alojado, las demás opciones
	   			se dejarán como están. De esta forma, en la
	   			opción <emphasis>Domain name</emphasis> se ha de teclear el dominio
	   			correspondiente (en este caso GSRDOMAIN).</para>
	
	   			<para>La forma de obtener el <acronym>SID</acronym> se muestra en el
	   			<xref linkend="ldap-account-manager-configuracion-obtencion-sid"/>,
	   			su resultado se ha de introducir en la opción
	   			<emphasis>Domain SID</emphasis>.</para>
	
	   		</caption>
	   	</mediaobject>
	   </figure>

		<example id="ldap-account-manager-configuracion-obtencion-sid">
	   		<title>Obtención del <acronym>SID</acronym></title>

<screen><prompt>#</prompt> <userinput>/usr/bin/net getlocalsid</userinput>
<computeroutput>SID for domain TODOSCSI is: S-1-5-21-2817058862-34499604-3382793611</computeroutput></screen>
		</example>	

		<figure id="ldap-account-manager-configuracion-creacion-grupos-samba">
			<title>Asistente de configuración, creación de grupos para Samba</title>
			<mediaobject>
				<imageobject>
					<imagedata fileref="./imagenes/lam-configuracion9.png" format="PNG"/>
				</imageobject>
		
				<caption>
					<para>El asistente pide confirmación para la creación de una serie de grupos esenciales
					para Samba, se pulsa sobre <emphasis>Create</emphasis> para continuar.</para>
				</caption>
			</mediaobject>
		</figure>
	
<!--
		<figure>
			<title>Información sobre el nuevo perfil creado</title>
			<mediaobject>
				<imageobject>
					<imagedata fileref="./imagenes/lam-configuracion10.png" format="PNG"/>
				</imageobject>
		
				<caption>
					<para>Esta pantalla muestra la información que se a almacenado para el perfil
					<emphasis>GSR</emphasis> que se acaba de crear. A continuación se regresará
					a la pantalla de ingreso, pulsando sobre el enlace <emphasis>Back to Login</emphasis>.</para>
	
					<para>Como se ha creado un nuevo perfil adaptado a las necesidades del
					sistema, <emphasis>GSR</emphasis>, sería recomendable modificar el archivo
					<filename>/etc/ldap-account-manager/config.cfg</filename> para indicar
					que el perfil por defecto pasa a ser <emphasis>GSR</emphasis> y no
					<emphasis>lam</emphasis>. Para ello, se ha de asignar el valor
					<emphasis>GSR</emphasis> a la variable: <emphasis>default</emphasis>.</para>
				</caption>
			</mediaobject>
		</figure>
-->

		<formalpara>
			<title>Información sobre el nuevo perfil creado</title>

			<para>Esta pantalla muestra la información que se a almacenado para el perfil
			<emphasis>GSR</emphasis> que se acaba de crear. A continuación se regresará
			a la pantalla de ingreso, pulsando sobre el enlace <emphasis>Back to Login</emphasis>.</para>
		</formalpara>
	
			<para>Como se ha creado un nuevo perfil adaptado a las necesidades del
			sistema, <emphasis>GSR</emphasis>, sería recomendable modificar el archivo
			<filename>/etc/ldap-account-manager/config.cfg</filename> para indicar
			que el perfil por defecto pasa a ser <emphasis>GSR</emphasis> y no
			<emphasis>lam</emphasis>. Para ello, se ha de asignar el valor
			<emphasis>GSR</emphasis> a la variable: <emphasis>default</emphasis>.</para>

<!--
		<figure>
			<title>Ingreso en <acronym>LAM</acronym></title>
			<mediaobject>
				<imageobject>
					<imagedata fileref="./imagenes/lam-configuracion11.png" format="PNG"/>
				</imageobject>
		
				<caption>
					<para>En estos momentos, ya se puede ingresar al sistema con el perfil que se acaba de
					añadir. Para ello, si no está seleccionado, elija el perfil
					<emphasis>GSR</emphasis> y pulse sobre: <emphasis>Change Profile</emphasis>. Una
					vez seleccionado el perfil adecuado, se ha de teclear la clave del administrador
					del directorio <acronym>LDAP</acronym> y pulsar sobre <emphasis>Login</emphasis>.</para>
				</caption>
			</mediaobject>
		</figure>
-->

		<formalpara>
			<title>Ingreso en <acronym>LAM</acronym></title>

			<para>En estos momentos, ya se puede ingresar al sistema con el perfil que se acaba de
			añadir. Para ello, si no está seleccionado, elija el perfil
			<emphasis>GSR</emphasis> y pulse sobre: <emphasis>Change Profile</emphasis>. Una
			vez seleccionado el perfil adecuado, se ha de teclear la clave del administrador
			del directorio <acronym>LDAP</acronym> y pulsar sobre <emphasis>Login</emphasis>.</para>
		</formalpara>

<!--
		<figure>
			<title>Pantalla principal de <acronym>LAM</acronym></title>
			<mediaobject>
				<imageobject>
					<imagedata fileref="./imagenes/lam-configuracion12.png" format="PNG"/>
				</imageobject>
		
				<caption>
					<para>Nada más ingresar en la herramienta, se muestran los usuarios que posee
					el directorio <acronym>LDAP</acronym> bajo la unidad organizacional
					<emphasis>people</emphasis>
					(en estos momentos no hay ningún usuario, ya que se acaba de crear la estructura
					y todavía no se ha añadido ningún usuario).</para>
				</caption>
			</mediaobject>
		</figure>
-->
		<formalpara>
			<title>Pantalla principal de <acronym>LAM</acronym></title>

			<para>Nada más ingresar en la herramienta, se muestran los usuarios que posee
			el directorio <acronym>LDAP</acronym> bajo la unidad organizacional
			<emphasis>people</emphasis>
			(en estos momentos no hay ningún usuario, ya que se acaba de crear la estructura
			y todavía no se ha añadido ningún usuario).</para>
		</formalpara>
	
<!--
		<figure>
			<title>Dominios existentes</title>
			<mediaobject>
				<imageobject>
					<imagedata fileref="./imagenes/lam-configuracion13.png" format="PNG"/>
				</imageobject>
		
				<caption>
					<para>Si se pulsa sobre el enlace <emphasis>Domains</emphasis>, se listan los
					dominios existentes bajo la unidad organizacional <emphasis>domains</emphasis>.
					En estos momentos, sólo hay un dominio: <emphasis>GSRDOMAIN</emphasis>, creado
					en el proceso de configuración.</para>
				</caption>
			</mediaobject>
		</figure>
-->

		<formalpara>
			<title>Dominios existentes</title>

					<para>Si se pulsa sobre el enlace <emphasis>Domains</emphasis>, se listan los
					dominios existentes bajo la unidad organizacional <emphasis>domains</emphasis>.
					En estos momentos, sólo hay un dominio: <emphasis>GSRDOMAIN</emphasis>, creado
					en el proceso de configuración.</para>
		</formalpara>
	
<!--
		<figure>
			<title>Grupos existentes</title>
			<mediaobject>
				<imageobject>
					<imagedata fileref="./imagenes/lam-configuracion14.png" format="PNG"/>
				</imageobject>
		
				<caption>
					<para>Bajo el enlace <emphasis>Groups</emphasis>, se listan los grupos
					existentes bajo la unidad organizacional <emphasis>groups</emphasis>.
					Actualmente los grupos existentes únicamente son tres, los que se han creado
					durante el proceso de configuración.</para>

					<note><para>Si no ha cambiado el grupo del directorio
					<filename class="directory">/home/samba/netlogon/</filename>, este sería un buen
					momento para hacerlo. Más detalles en el
					<xref linkend="samba-ajustes-finales-sistema-directorios-samba-ejemplo1"/>.</para></note>
				</caption>
			</mediaobject>
		</figure>
-->

		<formalpara>
			<title>Grupos existentes</title>
					<para>Bajo el enlace <emphasis>Groups</emphasis>, se listan los grupos
					existentes bajo la unidad organizacional <emphasis>groups</emphasis>.
					Actualmente los grupos existentes únicamente son tres, los que se han creado
					durante el proceso de configuración.</para>
		</formalpara>

					<note><para>Si no ha cambiado el grupo del directorio
					<filename class="directory">/home/samba/netlogon/</filename>, este sería un buen
					momento para hacerlo. Más detalles en el
					<xref linkend="samba-ajustes-finales-sistema-directorios-samba-ejemplo1"/>.</para></note>
	
<!--
		<figure>
			<title>Hosts existentes</title>
			<mediaobject>
				<imageobject>
					<imagedata fileref="./imagenes/lam-configuracion15.png" format="PNG"/>
				</imageobject>
		
				<caption>
					<para>Al pulsar sobre <emphasis>Hosts</emphasis>, se muestran las máquinas de Samba
					existentes bajo la unidad organizacional <emphasis>machines</emphasis>. Como
					se puede ver, todavía no se ha introducido ninguna máquina.</para>
				</caption>
			</mediaobject>
		</figure>
-->

		<formalpara>
			<title>Hosts existentes</title>

					<para>Al pulsar sobre <emphasis>Hosts</emphasis>, se muestran las máquinas de Samba
					existentes bajo la unidad organizacional <emphasis>machines</emphasis>. Como
					se puede ver, todavía no se ha introducido ninguna máquina.</para>
		</formalpara>
	
<!--
		<figure>
			<title>Saliendo de la herramienta</title>
			<mediaobject>
				<imageobject>
					<imagedata fileref="./imagenes/lam-configuracion16.png" format="PNG"/>
				</imageobject>
		
				<caption>
					<para>Una vez se ha finalizado el uso de la herramienta, se ha de salir de la misma,
					para ello se ha de pulsar sobre el enlace <emphasis>Logout</emphasis>.</para>
				</caption>
			</mediaobject>
		</figure>
-->

		<formalpara>
			<title>Saliendo de la herramienta</title>

					<para>Una vez se ha finalizado el uso de la herramienta, se ha de salir de la misma,
					para ello se ha de pulsar sobre el enlace <emphasis>Logout</emphasis>.</para>
		</formalpara>

			<para><acronym>LAM</acronym> ya se encuentra completamente instalado y adaptado a las necesidades
		del sistema, por lo que ya se puede comenzar a utilizar para la administración de usuarios y
		demás aspectos relativos.</para>
	
		<para>En las secciones
		<xref linkend="samba-configuracion-samba-opciones-ldap-prueba-funcionamiento-adduser"/> y
		<xref linkend="samba-aniadiendo-clientes-dominio-winnt-creaacion-cuentas-maquina"/>
		tiene un ejemplo sobre como crear cuentas de usuario y máquina, respectivamente.</para>
	</sect2>
</sect1>

</appendix>
