<html><head><title>Habilitar alarmas en el repositorio</title><link rel=next href="Usando-alarmas-durante-el-desarrollo.html">
<link rel=previous href="Cómo-funcionan-las-alarmas.html">
<link rel=up href="Alarmas--CVS-como-telefono-.html">
</head>
<body>
<p>
Node:<a name="Habilitar-alarmas-en-el-repositorio.html">Habilitar alarmas en el repositorio</a>,
Next:<a rel=next href="Usando-alarmas-durante-el-desarrollo.html">Usando alarmas durante el desarrollo</a>,
Previous:<a rel=previous href="Cómo-funcionan-las-alarmas.html">Cómo funcionan las alarmas</a>,
Up:<a rel=up href="Alarmas--CVS-como-telefono-.html">Alarmas (CVS como telefono)</a>
<hr><br>

<h3>Habilitar alarmas en el repositorio</h3>

<p>Primero se debe activar la notificación mediante correo electrónico
editando el fichero CVSROOT/notify. Uno de los dos desarrolladores debe
hacer esto o el administrador del repositorio si los desarrolladores no
tienen permiso para cambiar los ficheros administrativos del repositorio. 
En cualquier caso la primera cosa es obtener el área administrativa y
editar el fichero notify:

<pre>floss$ cvs -q co CVSROOT
U CVSROOT/checkoutlist
U CVSROOT/commitinfo
U CVSROOT/config
U CVSROOT/cvswrappers
U CVSROOT/editinfo
U CVSROOT/loginfo
U CVSROOT/modules
U CVSROOT/notify
U CVSROOT/rcsinfo
U CVSROOT/taginfo
U CVSROOT/verifymsg
floss$ cd CVSROOT
floss$ emacs notify
...
</pre>

<p>Cuando se edita el fichero notify por primera vez nos encontramos con
algo como esto:

<pre># Versión en castellano
# El fichero 'notify' especifica donde van se envían las notificaciones
# procedentes de alarmas establecidas mediante "cvs watch add" ó "cvs
# edit". La primera entrada de una línea es una expresión regular que se
# compara con el directorio donde el cambio se está haciendo relativo a
# $CVSROOT. Si coincide el resto de la línea es un programa filtro que
# debería contener una ocurrencia %s que indica el usuario a notificar, e
# informcación de su entrada de datos estándar.
#
# "ALL" o "DEFAULT" puede ser usada en lugar de la expresión regular.
#
# Por ejemplo:
# ALL mail %s -s "notificación de CVS"
</pre>

<p>En realidad todo lo que hay que hacer es descomentar la última línea
quitando el carácter <code>#</code>. Aunque <code>notify</code> proporciana la misma
flexibilidad que otros ficheros administrativos a través de las
expresiones regulares normalmente no se va usar. La única razón de
tener múltiples lineas, cada una con un expresión regular para cada
parte del repositorio es si se van usar otros métodos de notificación
distintos para cada proyecto. Normalmente la mayoría de los proyectos usan
correo electrónico ya que es un buen método de notificación.

<p>Para especificar la notificación mediante correo electrónico, la línea

<pre>ALL mail %s -s "notificación de CVS"
</pre>

<p>debería funcionar en cualquier Unix estándar. Éste comando hace que las
notificaciones o avisos sean enviadas mediante correo electrónico
con la línea de <code>subject</code> <code>notificación de CVS</code> (La expresión se
compara contra cualquier directorio). Cuando se haya descomentado la
línea hay que entregar el fichero notify para que el repositoria sea
consciente del cambio:

<pre>floss$ cvs ci -m "establecido notificación por alarma"
cvs commit: Examining .
Checking in notify;
/usr/local/newrepos/CVSROOT/notify,v  &lt;--  notify
new revision: 1.2; previous revision: 1.1
done
cvs commit: Rebuilding administrative file database
floss$
</pre>

<p>Editar este fichero es todo lo que hay que hacer para establecer alarmas
en el repositorio. Sin embargo si hay desarrolladores trabajando en
máquinas remotas es necesario editar el fichero <code>CVSROOT/users</code>
también. La función de este fichero es indicar a CVS a qué direcciones
de correo enviar las notificaciones para los usuarios remotos. 
El formato de cada línea del fichero users sería:

<pre>CVS_USERNAME:EMAIL_ADDRESS
</pre>

<p>Por ejemplo,

<pre>qsmith:quentinsmith@farawayplace.com
</pre>

<p>El nombre de usuario al principio de la línea corresponde a un usuario
de CVS del fichero <code>CVSROOT/password</code> (si está presente y el
método de acceso por servidor está siendo usado), o el usuario
del servidor ejecutando CVS. Siguiendo los dos puntos viene la
dirección de correo de ese usuario a la que el CVS enviará las
notificaciones.

<p>Desgraciadamente en el momento de la escritura de este documeto el
fichero users no existe en la distribución estándar de CVS. Debido a que
es un fichero administrativo no sólo se debe crearlo, añadirlo
<code>cvs add ...</code> y entregarlo <code>commit ...</code> de la forma usual sino que
hay que añadirlo al fichero <code>CVSROOT/checkoutlist</code> para que una
copia sea mantenida en el repositorio.

<p>Lo siguiente es una sesión de ejemplo:

<pre>floss$ emacs checkoutlist
  ... (añade la línea para el fichero users) ...
floss$ emacs users
  ... (añade la línea para el usuario qsmith) ...
floss$ cvs add users
floss$ cvs ci -m "añade users a checkoutlist, qsmith a users"
cvs commit: Examining .
Checking in checkoutlist;
/usr/local/newrepos/CVSROOT/checkoutlist,v  &lt;--  checkoutlist
new revision: 1.2; previous revision: 1.1
done
Checking in users;
/usr/local/newrepos/CVSROOT/users,v  &lt;--  users
new revision: 1.2; previous revision: 1.1
done
cvs commit: Rebuilding administrative file database
floss$
</pre>

<p>Es posible usar direcciones de correo de formato expandido en
<code>CVSROOT/usres</code>, pero hay que tener cuidado en poner todos los
espacios en blanco entre comillas. Veamos el siguiente ejemplo

<pre>qsmith:"Quentin Q. Smith &lt;quentinsmith@farawayplace.com&gt;"
</pre>

<p>o

<pre>qsmith:'Quentin Q. Smith &lt;quentinsmith@farawayplace.com&gt;'
</pre>

<p>Sin embargo, esto no funcionará:

<pre>qsmith:"Quentin Q. Smith" &lt;quentinsmith@farawayplace.com&gt;
</pre>

<p>Si hay dudas debería probar ejecutando la orden del fichero notify
directamente reemplazando <code>%s</code> en

<pre>mail %s -s "CVS notification"
</pre>

<p>por lo que sigue después de los dos puntos en el fichero users. 
Si funciona desde el prompt debería hacerlo también en el fichero de
usuarios.

<p>Cuando está terminado el fichero checkout debería aparecer como:

<pre># El fichero 'checkoutlist' se usa para soportar ficheros adicionales de
# control de versión administrativos de $CVSROOT/CVSROOT, como plantillas.
#
# La primera entrada de una línea es un nombre de fichero que será obtenido
# del correspondiente RCS fichero del directorio $CVSROOT/CVSROOT.
# El resto de la línea será el mensaje de error que aparecerá si el fichero
# no se puede obtener.
#
# Formato del fichero:
#
#       [&lt;espacio en blaco&gt;]&lt;nombre del fichero&gt;&lt;espcio en blanco&gt;
&lt;mensaje de error&gt;&lt;find de línea&gt;
#
# líneas de comentario enmpiezan con '#'

users   No ha sido posible obtener <code>users</code> file in CVSROOT.
</pre>

<p>Ya hemos visto como se prepara el repositorio para las alarmas. Pasemos
ahora a lo que los desarrolladores tienen que hacer en sus copias de trabajo.

</body></html>

