<html><head><title>La Copia de Trabajo del Área Administrativa</title><link rel=next href="Permisos-del-Repositorio.html">
<link rel=up href="Causas-Usualmente-Sospechosas.html">
</head>
<body>
<p>
Node:<a name="La-Copia-de-Trabajo-del-Área-Administrativa.html">La Copia de Trabajo del Área Administrativa</a>,
Next:<a rel=next href="Permisos-del-Repositorio.html">Permisos del Repositorio</a>,
Up:<a rel=up href="Causas-Usualmente-Sospechosas.html">Causas Usualmente Sospechosas</a>
<hr><br>

<h3>La Copia de Trabajo del Área Administrativa</h3>

<p>Ya vimos la estructura de la copia de trabajo en <a href="Una-introduccion-a-CVS.html">Una introduccion a CVS</a>; en esta sección entraremos un poco más en detalle. 
Casi todos los detalles conciernen a los ficheros de los directorios
administrativos bajo CVS/. Ya conocemos los ficheros Entries, Root y
Repository, pero en el directorio CVS/ también puede haber otros
ficheros, según las circunstancias. Describiré esos ficheros aquí,
parcialmente para que no nos sorprenda encontrarlos, y también para que
sepamos cómo corregir errores que eventualmente se produzcan en ellos.

<h2><code>CVS/Entries.Log</code></h2>

<p>A veces, aparecerá un extraño fichero <code>CVS/Entries.Log</code>. El único
propósito de este fichero es hacer de cache temporal de los cambios
menores de CVS/Entries, hasta que haya suficientes cambios acumulados
para modificar este fichero. CVS no es capaz de editar directamente el
fichero Entries, por el contrario tiene que leerlo y sobreescribirlo por
completo para cualquier cambio. Para evitar excesiva carga, CVS a veces
guarda los cambios pequeños en Entries.log, hasta la próxima vez que
necesite reescribir el fichero Entries.

<p>El formato de Entries.log es como el de Entries, salvo que además
incluye una letra al principio de cada línea. <code>A</code> significa que la
línea será añadida al fichero Entries, y <code>R</code> significa que esa
línea será borrada.

<p>Casi siempre podemos ignorar el fichero Entries.log; es raro que un
administrador tenga que entender la información que contiene. Sin
embargo, si estamos depurando algún problema que nos pide examinar el
fichero Entries, probablemente tengamos que echar un vistazo también a
Entries.log.

<h2><code>CVS/Entries.Backup</code></h2>

<p>El fichero CVS/Entries.backup es el que usa CVS para escribir un fichero
Entries nuevo, antes de renombrarlo a <code>Entries</code> (similarmente al
mecanismo de escribir en ficheros temporales RCS y luego renombrarlos
convenientemente). Debido a que se renombra a Entries cuando está
acabado, serán pocas las veces que veremos el fichero Entries.Backup; si
lo vemos alguna vez se deberá probablemente a la interrupción de un
proceso CVS en medio de alguna operación.

<h2><code>CVS/Entries.Static</code></h2>

<p>Si existe el fichero CVS/Entries.Static, significa que el directorio
completo no ha sido extraido del repositorio. (Cuando CVS sabe que un
directorio está en un estado incompleto, él no añadirá ficheros
adicionales a ese directorio.)

<p>El fichero Entries.Static existe durante las operaciones de checkout y
actualización, y se borra inmediatamente al completar la operación. Si
vemos el fichero, significará que CVS fue interrumpido, y su existencia
impide a CVS crear cualquier fichero nuevo en la copia de
trabajo. (Ahora bien , ejecutando <code>cvs&nbsp;update&nbsp;-d</code> se soluciona
el problema y se borra Entries.Static.)

<p>La ausencia de Entries.Static no implica necesariamente que la copia de
trabajo incluya todos los ficheros del proyecto. Tan pronto se crea un
nuevo directorio en el repositorio del proyecto, y alguien actualiza su
copia sin incluir el flag -d a la orden update, el nuevo directorio no
se creará en la copia de trabajo. Localmente, CVS no sabe que existe el
nuevo directorio, luego él mismo borrará el fichero Entries.Static
cuando la actualización termine, aunque el nuevo directorio no se haya
creado en la copia de trabajo.

<h2><code>CVS/Tag</code></h2>

<p>Si existe el fichero CVS/Tag, nombrará a un tag asociado, en cierto
sentido, con el directorio. Digo "en cierto sentido" ya que, como
sabemos, CVS no mantiene información sobre versiones de directorios y,
hablando con precisión, no puede asociar tags a ellos. Los tags se
asocian solo a ficheros normales o, más precisamente, a revisiones
concretas de ficheros normales.

<p>Sin embargo, si cada fichero de un directorio está en un tag concreto,
CVS presupone que el directorio también está en ese tag. Por ejemplo, si
íbamos a extraer de CVS una copia de trabajo de una rama concreta:

<pre>floss$ cvs co -r Bugfix_Rama_1
</pre>

<p>y luego insertamos un fichero en ella, querremos que la versión inicial
del fichero esté en esa rama también. Por razones similares, CVS
también necesita conocer si el directorio tiene un tag de que no es rama
(non-branch) o la fecha puesta en él.

<p>Los ficheros de tags contienen una línea. El primer carácter de la línea
es un código de una letra que indica qué clase de tag es, y el resto es
el nombre del tag. Actualmente, CVS solo utiliza las siguientes tres
letras como código:

<ul>

<li>T - Tag de rama

<li>N - Tag de que no es rama (regular tag)

<li>D - Fecha "pegada", que se utiliza si un comando como

<pre>floss$ cvs checkout -D 1999-05-15 myproj
</pre>

<p>o

<pre>floss$ cvs update -D 1999-05-15 myproj
</pre>

<p>se ejecuta.

</ul>

<p>(Si vemos cualquier otro código de una letra, simplemente nos indicará
que CVS ha añadido un nuevo tipo de tag posteriormente a la escritura de
este libro.)

<p>El fichero Tag no debe ser borrado manualmente; en su lugar use <code>cvs&nbsp;update&nbsp;-A</code>.

<h2>Rarezas</h2>

<p>Hay otros ficheros que ocasionalmente se encontrarán en un directorio CVS/:

<ul>
<li>CVS/Checkin.prog, CVS/Update.prog
<li>CVS/Notify, CVS/Notify.tmp
<li>CVS/Base/, CVS/Baserev, CVS/Baserev.tmp
<li>CVS/Template
</ul>

<p>Estos ficheros no son, normalmente, causa de problemas, por lo que
simplemente los vamos a listar (véase <a href="Referencia-de-CVS.html">Referencia de CVS</a> para conocer
su significado completo).

<h2>Portabilidad y extensiones futuras.</h2>

<p>Conforme se añadan nuevas características a CVS, podrán aparecer nuevos
ficheros (no listados aquí) en las áreas administrativas. Conforme
dichos ficheros sean añadidos, probablemente serán documentados en el
manual de Cederqvist, en la sección <cite>Working Directory
Storage</cite>. También podemos mirar en el código fuente, en src/cvs.h, si
preferimos aprender a partir de las fuentes.

<p>Finalmente, observemos que todos los ficheros CVS/* - actuales y
futuros - siguen las convenciones de final de línea apropiadas al
sistema en uso (por ejemplo, LF para Unix o CR/LF para Windows). Esto
significa que si llevamos una copia de trabajo desde una plataforma a
otra, puede suceder que CVS no pueda manejarla (además, podemos tener
otros problemas, debido a que los ficheros controlados por el sistema de
versiones pueden tener ellos mismos un fin de línea inapropiado).

</body></html>

