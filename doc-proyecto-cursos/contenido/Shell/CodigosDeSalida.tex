\porcion{Códigos de salida}
\autor{\NC}
\colaborador{}
\revisor{}
\traductor{}

Una vez que termina cada programa, puede brindar al entorno un 
\emph{Código de salida} para que otros programas o el intérprete
sepan como concluyó la aplicación.

Tomemos un ejemplo de la vida de un administrador. Es común que la
administración sea remota, por lo que vamos a considerar que en
nuestra tarea no tenemos conocimiento de lo que está pasando en una
máquina alejada en la que se está ejecutando
\comando{arreglar-base-de-datos}.

El script \comando{arreglar-base-de-datos} es un script que corrige
posibles errores en una hipotética gran base de datos. Y el resultado de
esa corrección interesa, especialmente, si no se pudo arreglar.

Vamos a suponer que hay 2 posibles alternativas:

\begin{description}
  
\item[Salida exitosa] La base de datos no tuvo ningún error. En este
  caso sólo hay que agregar al archivo \archivo{/var/log/BD.registro}
  una línea con la fecha de comprobación y el responsable en ese momento.

%\item[Se efectuaron correcciones exitosamente] La base de datos tenia
%  errores, el script los detecto y los corrigió. Este caso es un poco
%  más grave por lo tanto no sólo hay que agregar al archivo
%  \archivo{/var/log/BD.registro} una línea con la fecha de chequeo y
%  el responsable en ese momento sino también un mail al responsable
%  con los errores encontrados y posteriormente corregidos para que no
%  vuelva a ocurrir
  
\item[Se detectaron errores pero no se repararon] Esta situación es 
  peor. Hay que escribir información detallada
  en \archivo{/var/log/BD.registro} y además enviar correo-e\footnote{Por 
ridículo que parezca es la forma correcta de mencionar a los \emph{emails}}
 a una lista  de encargados y directivos de la empresa.
\end{description}

Para diferenciar cada caso se asigna un \emph{código de salida} a cada uno.
Luego de ejecutar \comando{arreglar-base-de-datos} se verifica en base al
código, los comandos a ejecutar.

El algoritmo sería algo similar a:

\begin{vscreen}
if arreglar-base-de-datos
then
  date >> /var/log/BD.registro
  echo $RESPONSABLE_BD >>  /var/log/BD.registro 
else
  informar-errores.sh >> /var/log/BD.registro
  enviar-mail "Errores en BD" lista-encargados lista-directivos
fi
\end{vscreen}
%$

?`Y dónde están los códigos de salida? Bueno, el \emph{comando
  interno}\footnote{\emph{Built-in command} en inglés.}  \comando{if}
analiza el código de salida, y si es {\tt 0} (cero) ejecuta la lista
de comandos después del \comando{then}, en caso contrario (y si
existe) la lista de comandos después del \comando{else} hasta
encontrar un \comando{fi}.

Por lo tanto el script \comando{arreglar-base-de-datos} tiene que devolver
{\tt 0} en caso de éxito. \'{E}ste es  el comportamiento normal de la mayoría de los 
comandos en Linux y otros Unix, y un valor para varios errores.

Las páginas \comando{man} suelen tener una sección llamada \textbf{Exit Status}
que contiene los códigos que devuelve el programa.

