\porcion{El comando \comando{if}}
\autor{\NC}
\colaborador{}
\revisor{}
\traductor{}

Ya vimos un ejemplo sencillo utilizando \comando{if}, que a su vez 
puede ser de gran utilidad. Ya hablamos de la equivalencia 
entre el <<;>> y el <<Enter>> pero hay veces que pasa desapercibido
el detalle de que \comando{if} y \comando{then} deben estar en diferentes
 líneas por lo que: 

\begin{vscreen}
# if COMANDO then COMANDO fi
\end{vscreen}

Este último ejemplo va a dar error de sintaxis. La forma
correcta de expresar es:

\begin{vscreen}
# if COMANDO; then COMANDO ; fi
\end{vscreen}

o bien:

\begin{vscreen}
# if COMANDO
> then COMANDO
> fi
\end{vscreen}

No hace falta crear una archivo que contenga las instrucciones, en cambio,
esta programación se puede ir realizando <<en línea>>. Es decir, introducirla
por línea de comandos en una terminal.

Muchas veces es necesario hacer comparaciones o comprobaciones para
tomar decisiones.  Por ejemplo ``Si el usuario no posee el archivo
\archivo{~/.configuracion} 
%$
con la configuración por defecto'' o bien ``Si el número de archivos
es mayor a 20 escribir {\tt no se puede transferir}''

Existe el comando \comando{test} para hacer estas evaluaciones y en
base al resultado, código de error de \comando{test} será {\tt 0} u
otro número. Por ejemplo, para saber si un archivo
\archivo{.configuracion} existe en el \emph{home} del usuario el comando
puede ser:

\begin{vscreen}
# test -e $HOME/.configuracion
\end{vscreen}
%$

para facilitar la notación dentro del comando \comando{if} se
hace un \emph{enlace simbólico}\footnote{\emph{symbolic link} en inglés, utilizando
el comando \comando{ln -s}}
a un comando llamado \comando{[}. Parece extraño llamar a un comando con un corchete
abierto pero veamos un ejemplo:

\begin{vscreen}
if test -e $HOME/.configuracion
\end{vscreen}
%$

Puede traducirse a:

\begin{vscreen}
if [ -e $HOME/.configuracion ]
\end{vscreen}
%$

donde el \comando{]} \emph{(corchete cerrado)} final no tiene importancia 
y la programación queda menos engorrosa.

Podríamos utilizar lo aprendido para crear un script que
 ``Si el usuario no posee el archivo
\archivo{~/HOME/.configuracion} 
%$
con la configuracion por defecto entonces crearlo.'' en unas pocas líneas:

\begin{vscreen}
if [ -e $HOME/.configuracion ]
then
  crear-configuracion >> $HOME/.configuracion
fi 
\end{vscreen}

El comando test permite la composición de condiciones con
AND y OR lógicos con los modificadores {\tt -a} y {\tt -o}
respectivamente y el modificador NOT con {\tt !}. Se podría agregar a la linea
del \comando{if} anterior la condición ``y además no posee el archivo 
\archivo{SinConfiguracion}'' de la siguiente forma

\begin{vscreen}
if [ -e $HOME/.configuracion -a ! -e SinConfiguracion]
\end{vscreen}
%$

Ejemplos mucho más interesantes de analizar se pueden encontrar en el
directorio \archivo{/etc/rc.d/init.d}\footnote{Este directorio puede
  variar según las distribuciones, también puede ser
  \archivo{/etc/init.d}}.

