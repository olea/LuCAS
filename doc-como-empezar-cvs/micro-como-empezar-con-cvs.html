<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Micro-cómo empezar a trabajar con cvs</title><meta name="generator" content="DocBook XSL Stylesheets V1.65.1" /></head><body><div class="article" lang="es" xml:lang="es"><div class="titlepage"><div><div><h1 class="title"><a id="id2476509"></a>Micro-cómo empezar a trabajar con cvs</h1></div><div><div class="author"><h3 class="author"><span class="firstname">Ismael</span> <span class="surname">Olea</span></h3></div></div><div><p class="pubdate"> $Id: micro-como-empezar-con-cvs.xml,v 1.3 2003/12/04 14:08:24 olea Exp $</p></div></div><div></div><hr /></div><div class="toc"><p><b>Tabla de contenidos</b></p><dl><dt><span class="sect1"><a href="#id2580774">Introducción</a></span></dt><dt><span class="sect1"><a href="#id2522711">terminología cvs</a></span></dt><dt><span class="sect1"><a href="#id2520084">Invocar a cvs</a></span></dt><dt><span class="sect1"><a href="#id2520112">Configuración</a></span></dt><dd><dl><dt><span class="sect2"><a href="#id2520163">La autenticación</a></span></dt></dl></dd><dt><span class="sect1"><a href="#id2521535">Uso</a></span></dt><dd><dl><dt><span class="sect2"><a href="#id2521540">Modo de uso</a></span></dt><dt><span class="sect2"><a href="#id2521572">Bajar por primera vez el módulo</a></span></dt><dt><span class="sect2"><a href="#id2521622">Actualizar cambios</a></span></dt><dt><span class="sect2"><a href="#id2519687">Publicar nuestras modificaciones</a></span></dt><dt><span class="sect2"><a href="#id2519718">Resolución de conflictos </a></span></dt><dt><span class="sect2"><a href="#id2519796">Añadir ficheros al módulo </a></span></dt><dt><span class="sect2"><a href="#id2519872">Eliminar ficheros del módulo cvs</a></span></dt></dl></dd><dt><span class="sect1"><a href="#id2519916">Cómo configurar un servidor y cómo subir nuevos módulos al repositorio.</a></span></dt><dt><span class="sect1"><a href="#id2519944">Bibliografía</a></span></dt><dt><span class="sect1"><a href="#id2519968">interfaces gráficos</a></span></dt><dt><span class="sect1"><a href="#id2581071">Otros recursos cvs interesantes</a></span></dt><dt><span class="sect1"><a href="#id2581143">Otros recursos cvs más avanzados</a></span></dt><dt><span class="sect1"><a href="#id2581201">Licencia</a></span></dt></dl></div><div class="sect1" lang="es" xml:lang="es"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id2580774"></a>Introducción</h2></div></div><div></div></div><p>
<a href="http://www.cvshome.org/" target="_top">CVS</a> es algo que al principio es difícil de explicar con sencillez pero que
al final resulta indispensable para la vida. Así, como lo oye.
</p><p>
CVS es un sistema de mantenimiento de código fuente extraordinariamente útil
para grupos de desarrolladores que trabajan cooperativamente usando alguna
clase de red.
</p><p>
para ser más concreto, CVS permite a un grupo de desarrolladores trabajar y
modificar concurrentemente ficheros organizados en proyectos. Esto significa
que dos o más personas pueden modificar un mismo fichero sin que se pierdan
los trabajos de ninguna. Además, sus funciones más usadas son muy sencillas
de usar.
</p><p>
Además CVS guarda las versiones antiguas de los ficheros. Esto permite
recuperar en cualquier momento versiones anteriores a la actual.
</p><p>
Dado que trabaja con ficheros ASCII es igual de útil para trabajar con
código fuente de programas o con toda clase de documentos siempre que su
formato sea completamente de texto, como pueden ser ficheros sgml/html/xml.
</p><p>
Este documento es una referencia inmediata para trabajar con cvs. A poco que
le saques partido necesitarás consultar otro más extenso. Sin embargo el 80% o
más de las acciones que desarrollan los usuarios de cvs están documentadas
en este artículo.
</p><p>
Con CVS puede trabajarse de forma local (repositorio y copias de trabajo en
el mismo sistema) o remota (el repositorio está en un sistema servidor y la
copia local en otro que es cliente del primero).
</p><p>
En este artículo sólo prestaré atención al modo de trabajo remoto, que es el
que más impresiona a las visitas.
</p></div><div class="sect1" lang="es" xml:lang="es"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id2522711"></a>terminología cvs</h2></div></div><div></div></div><p>
para que no te pierdas, un brevísimo vocabulario:
</p><div class="variablelist"><dl><dt><span class="term">repositorio</span></dt><dd><p>
jerarquía de directorios alojada en el servidor que contiene diferentes módulos a disposición de los usuarios.
</p></dd><dt><span class="term">módulo</span></dt><dd><p>
árbol de directorios que forma parte del repositorio; cuenta con un nombre identificador gracias al cual podremos bajárnoslo de forma selectiva.
</p></dd></dl></div><p>
</p></div><div class="sect1" lang="es" xml:lang="es"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id2520084"></a>Invocar a cvs</h2></div></div><div></div></div><p>
cvs es un programa que se invoca desde intérpretes de órdenes. según cómo sea
su configuración (y estoy pensando en las diferentes formas de
autenticación) lo podrás usar en procesos por lotes sin ningún problema.
</p><p>
Un aspecto que debes tener en cuenta (sobre todo si este es el primer
documento que lees sobre cvs) es que cvs tiene parámetros para cada una de
sus órdenes. para conocerlas tienes dos métodos: invocar cvs como «cvs help»
o mirar la ayuda.
</p></div><div class="sect1" lang="es" xml:lang="es"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id2520112"></a>Configuración</h2></div></div><div></div></div><p>
Puedes  usar varios ficheros de configuración que cvs reconocerá y usará. 
</p><p>
Yo, que soy el mejor ejemplo que tengo a mano, uso los siguientes:
</p><p>
</p><div class="variablelist"><dl><dt><span class="term">~/.cvsignore</span></dt><dd><p>
que contiene los sufijos de los ficheros que no nos interesa que cvs controle:
</p><p>

</p><pre class="screen">
*.tex *.aux *.dvi *.ps *.log
</pre><p>

</p></dd><dt><span class="term">~/.cvsrc</span></dt><dd><p>
que contiene parámetros que cvs usará cada vez que se invoque:
</p><p>
</p><pre class="screen">
cvs -z 3
update -Pd
diff -uw  
</pre><p>
</p></dd></dl></div><p>
</p><div class="sect2" lang="es" xml:lang="es"><div class="titlepage"><div><div><h3 class="title"><a id="id2520163"></a>La autenticación</h3></div></div><div></div></div><p>
Al trabajar en remoto con cvs pueden elegirse varias alternativas de
autenticación (es decir, de demostrar al servidor que somos quienes decimos que
somos).
</p><p>
Las que más he visto usar son vía pserver y vía ssh.
</p><p>
Deberás elegir alguna de estas técnicas en función de sus necesidades, las
ganas que tengas de complicarte la vida y, sobre todo, del grado de neurosis
obsesiva por la seguridad que padezcas.
</p><div class="sect3" lang="es" xml:lang="es"><div class="titlepage"><div><div><h4 class="title"><a id="id2568317"></a>ssh</h4></div></div><div></div></div><p>
Como uno va por la vida predicando el software libre no puedo más que
recomendar el uso de OpenSSH que puede encontrarse en <a href="http://www.openssh.org" target="_top">http://www.openssh.org</a>. Si no me equivoco, esta herramienta es
compatible con la norma ssh 1.x.
</p><p>
para que cvs use este modo de autenticarse se pueden usar estas variables de entorno:
</p><p>

</p><pre class="screen">
export CVSROOT=":ext:USUARIO@www.vivalavirgen.com:/home/cvs"   
export CVS_RSH=/usr/bin/ssh
</pre><p>

</p><p>
donde 
</p><div class="variablelist"><dl><dt><span class="term"><tt class="literal">USUARIO</tt> </span></dt><dd><p>
es nuestro nombre de usuario;
</p></dd><dt><span class="term">www.vivalavirgen.com</span></dt><dd><p>
es el servidor que aloja al repositorio;
</p></dd><dt><span class="term">/home/cvs</span></dt><dd><p>
es el directorio del servidor en el que está el repositorio;
</p></dd><dt><span class="term">/usr/bin/ssh</span></dt><dd><p>
es la ruta completa al amigo ssh.
</p></dd></dl></div><p>
</p><p>
Tenga en cuenta que, usando esta técnica, tendrá que autenticarse (es decir,
suministrar su contraseña) cada vez que ejecute cvs.
</p></div><div class="sect3" lang="es" xml:lang="es"><div class="titlepage"><div><div><h4 class="title"><a id="id2568429"></a>pserver</h4></div></div><div></div></div><p>
Esta técnica es más de «andar por casa». Se monta rápidamente y no necesita de programas añadidos.
</p><p>

</p><pre class="screen">
export CVSROOT=":pserver:USUARIO@www.vivalavirgen.com:/home/cvs"
</pre><p>

</p><p>
donde
</p><div class="variablelist"><dl><dt><span class="term"><tt class="literal">USUARIO</tt> </span></dt><dd><p>
es nuestro nombre de usuario;
</p></dd><dt><span class="term">www.vivalavirgen.com</span></dt><dd><p>
es el servidor que aloja al repositorio;
</p></dd><dt><span class="term">/home/cvs</span></dt><dd><p>
es el directorio del servidor en el que está el repositorio.
</p></dd></dl></div><p>
</p><p>
Si usa esta técnica, antes de poder trabajar con cvs debe autenticarse con el servidor. Eso se hace con la orden login:
</p><p>

</p><pre class="screen">
$ cvs login
</pre><p>

</p><p>
CVS le pedirá la contraseña del usuario que haya configurado.
</p><p>
Si la contraseña es correcta cvs guardará la información que necesita en el
fichero
</p><p>

</p><pre class="screen">
~/.cvspass
</pre><p>

</p><p>
y no tendrá que volver a autenticarse.
</p><p>
Si por algún motivo exotérico quisiera «cerrar la sesión cvs» bastará con hacer:
</p><p>

</p><pre class="screen">
$ cvs logout
</pre><p>

</p></div></div></div><div class="sect1" lang="es" xml:lang="es"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id2521535"></a>Uso</h2></div></div><div></div></div><div class="sect2" lang="es" xml:lang="es"><div class="titlepage"><div><div><h3 class="title"><a id="id2521540"></a>Modo de uso</h3></div></div><div></div></div><p>
A continuación se propone una sencilla metodología de trabajo con cvs para
evitar trabajos redundantes. Piénsese por ejemplo en la eliminación de
erratas o errores en documentos o en código fuente.
</p><p>
Antes de cada sesión de trabajo es conveniente hacer «cvs update» para
asegurarnos de que disponemos de las últimas modificaciones.
</p><p>
Justo al acabar cada sesión de trabajo es conveniente hacer «cvs ci»
para que todas nuestras modificaciones se propaguen en el servidor. 
</p></div><div class="sect2" lang="es" xml:lang="es"><div class="titlepage"><div><div><h3 class="title"><a id="id2521572"></a>Bajar por primera vez el módulo</h3></div></div><div></div></div><p>
para crear una copia de trabajo local del módulo cvs deseado debemos usar la
orden co (o su equivalente checkout):
</p><p>

</p><pre class="screen">
$ cd [padre-de-directorio-donde-se-alojará-el-módulo]
$ cvs co [nombre-del-módulo]
</pre><p>

</p><p>
Esto creará una jerarquía de directorios donde se almacenará el módulo.
</p><p>
Este paso sólo hay que hacerlo una vez por cada módulo.
</p><p>
A partir de este momento no es necesario configurar las variables de entorno
porque cvs sabe a qué repositorio pertenece el módulo con sólo examinar los
subdirectorios CVS. No debes modificar nunca esos subdirectorios o volverás
loco al pobre cvs.
</p></div><div class="sect2" lang="es" xml:lang="es"><div class="titlepage"><div><div><h3 class="title"><a id="id2521622"></a>Actualizar cambios</h3></div></div><div></div></div><p>
Cuando queramos actualizar la copia local del módulo con los cambios que hayan podido hacer otros usuarios y
que yan han sido enviados al repositorio deberemos hacer:
</p><p>

</p><pre class="screen">
$ cd [directorio-del-módulo]
$ cvs update
</pre><p>

</p><p>
Observaréis que cvs informa acerca de qué está haciendo con cada fichero y
para eso utiliza un código de un letra. Este es el significado:

 </p><div class="variablelist"><dl><dt><span class="term">U</span></dt><dd><p>
		Se ha bajado un fichero completamente nuevo.
	</p></dd><dt><span class="term">P</span></dt><dd><p>
		Se ha bajado una modificación del fichero y ahora éste está actualizado.
	</p></dd><dt><span class="term">A</span></dt><dd><p>
		El fichero lo ha añadido usted pero no lo ha subido todavía al repositorio.
	</p></dd><dt><span class="term">R</span></dt><dd><p>
		El fichero ha sido borrado (pero podría recuperarse del histórico que se almacena en el repositorio).
	</p></dd><dt><span class="term">C</span></dt><dd><p>
		Hay un conflicto: otra persona ha modificado antes las mismas partes del fichero y no le queda más remedio que revisarlo manualmente antes de poder subir los cambios de ese fichero.
	</p></dd><dt><span class="term">M</span></dt><dd><p>
		Usted ha modificado el fichero pero aún no lo ha subido al repositorio.
	</p></dd><dt><span class="term">?</span></dt><dd><p>
		CVS se ha encontrado un fichero que no tiene registrado y simplemente avisa y lo deja en paz.
	</p></dd></dl></div><p>
</p></div><div class="sect2" lang="es" xml:lang="es"><div class="titlepage"><div><div><h3 class="title"><a id="id2519687"></a>Publicar nuestras modificaciones</h3></div></div><div></div></div><p>
Se usa la orden ci (o su equivalente commit):
</p><p>

</p><pre class="screen">
$ cd [directorio-del-módulo]
$ cvs ci
</pre><p>

</p><p>
Tras lo cual el sistema mostrará la pantalla de un editor de textos (el que
tengamos configurado como nuestro favorito en las variables de entorno) para
que describamos el cambio.
</p></div><div class="sect2" lang="es" xml:lang="es"><div class="titlepage"><div><div><h3 class="title"><a id="id2519718"></a>Resolución de conflictos </h3></div></div><div></div></div><p>
 
</p><p>
Tal cual la ONU habrá ocasiones en las que tengamos que resolver los
conflictos que surjan entre diferentes versiones para que cvs continúe
trabajando. Estos conflictos son normales y ocurren cuando dos o más
personas modifican a la vez exactamente la mismas partes de un fichero.
</p><p>
El procedimiento es simple:

</p><div class="itemizedlist"><ul type="disc"><li><p>
cvs se quejará de un fichero;
</p></li><li><p>
editamos ese fichero;
</p></li><li><p>
encontraremos unas marcas del tipo


</p><pre class="screen">
[...]
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
taca
===========
tacataca
&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
[...]
</pre><p>

</p></li><li><p>
El texto entre marcas es el que produce el conflicto. Hay que elegir
qué modificación nos gusta y borramos todo lo demás.
</p></li><li><p>
si no quedan conflictos volvemos a hacer el «ci» y a ser
felices.
</p></li></ul></div><p>

</p></div><div class="sect2" lang="es" xml:lang="es"><div class="titlepage"><div><div><h3 class="title"><a id="id2519796"></a>Añadir ficheros al módulo </h3></div></div><div></div></div><p>
No olvides que cvs controlará sólo los ficheros que se le hayan indiciado expresamente. Cualquier otro fichero en el directorio cvs será ignorado.
</p><p>
Si quieres incluir un nuevo fichero o directorio
al módulo cvs hay que seguir los siguientes pasos:
</p><p>

</p><pre class="screen">
$ cd [directorio-del-módulo]
$ cvs add [fichero]
</pre><p>

pero si el fichero es binario hay que tener la precaución de hacer:
</p><p>

</p><pre class="screen">
$ cd [directorio-del-módulo]
$ cvs add -kb [fichero]
</pre><p>

</p><p>
¿Por qué?, se preguntará el lector más intrépido. Resulta que CVS usa varias
variables (en realidad son de RCS, que funciona por debajo de CVS). Si el
fichero es binario es posible que se de una combinación de bytes que
coincidan con alguna de estas variables. Si así fuera, RCS/CVS modificaría
el contenido y lo corrompería. También se debe a que el sistema de cálculo
de diferencias que usan estos sistemas no está diseñado para trabajar con
información binaria. Si se obra equivocadamente es probable que corrompamos
los datos.
</p><p>
También quiero señalar que si bien se pueden gestionar ficheros binarios, no
se hará control de versiones de los mismos. Sólo se guardará la última
versión.
</p><p>
Tras el «add» hay que hacer un «cvs ci» para actualizar el servidor
con los nuevos ficheros.
</p></div><div class="sect2" lang="es" xml:lang="es"><div class="titlepage"><div><div><h3 class="title"><a id="id2519872"></a>Eliminar ficheros del módulo cvs</h3></div></div><div></div></div><p>
para eliminar un fichero del módulo cvs hay que hacer lo
siguiente una vez borrado el fichero: 
</p><p>

</p><pre class="screen">
$ cd [directorio-del-módulo]  
$ cvs remove [fichero]
</pre><p>

</p><p>
En cambio, si queremos borrar físicamente los ficheros a la vez que los
eliminamos del módulo deberemos usar:
</p><p>

</p><pre class="screen">
$ cd [directorio-del-módulo]  
$ cvs remove -f [fichero]
</pre><p>

</p></div></div><div class="sect1" lang="es" xml:lang="es"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id2519916"></a>Cómo configurar un servidor y cómo subir nuevos módulos al repositorio.</h2></div></div><div></div></div><p>
Si este documento es tu referencia favorita sobre cvs no merece la pena que te explique cómo se hacen estas cosas porque de todas formas no te ibas a enterar. Espabila un poco porque es bien fácil una vez que uno se ha mirado los manuales.
</p><p>
Si alguien con mejor corazón que yo tiene tiempo, que amplíe esta sección para beneficio de todos.
</p></div><div class="sect1" lang="es" xml:lang="es"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id2519944"></a>Bibliografía</h2></div></div><div></div></div><p>
Por un lado hay un completísimo fichero info dedicado a cvs. Si usa GNU/Linux es muy probable que ya lo tenga instalado en su sistema.
</p><p>
Por otro lado en <a href="http://cvsbook.red-bean.com/" target="_top">http://cvsbook.red-bean.com/</a> está disponible
otro libro documentando cvs.
</p></div><div class="sect1" lang="es" xml:lang="es"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id2519968"></a>interfaces gráficos</h2></div></div><div></div></div><p>
Espero que si llegas a este punto es por curiosidad  o por la inercia de la
lectura porque los verdaderos tecnófilos tienen que saber exactamente qué es
lo que hacen en cada momento sin que ninguna clase de software intente
facilitarles la vida encapsulando complejidades. Sobre todo cuando ese
software ofrece interfaces gráficos.
</p><p>
En cualquier caso y para que nadie pueda dudar de mi profesionalidad voy a enumerar unos cuantos interfaces gráficos cvs en mayor o menor estado de desarrollo:

</p><div class="itemizedlist"><ul type="disc"><li><p>
<a href="http://pharmacy.sourceforge.net/index.html" target="_top">pharmacy</a>
</p></li><li><p>
<a href="http://freshmeat.net/projects/gcvs/?highlight=gcvs" target="_top">gcvs</a>
</p></li><li><p>
<a href="http://www.twobarleycorns.net/tkcvs.html" target="_top">tkcvs</a>, para unix y windows y que además saca un bonito grafo con el historial de desarrollo.
</p></li><li><p>
<a href="http://www.tortoisecvs.org/" target="_top">Tortoise</a>, para windows, integrado en el gestor de ficheros.
</p></li><li><p>
<a href="http://www.wincvs.org" target="_top">wincvs</a>, para windows, como bien sugiere el nombre. He oído hablar mal de él, pero como no lo he probado no puedo asegurar nada.
</p></li><li><p>
<a href="http://freshmeat.net/projects/cervisia/?highlight=cvs" target="_top">cervisia</a>, para KDE.
</p></li><li><p>
	<a href="http://freshmeat.net/projects/lincvs/" target="_top">lincvs</a>
</p></li></ul></div><p>

Bueno, ya me aburrí. para encontrar los enlaces que faltan, la mayoría aparecerán en <a href="http://freshmeat.net" target="_top">http://freshmeat.net</a> y con el tiempo tal vez aparezcan nuevas herramientas.
</p></div><div class="sect1" lang="es" xml:lang="es"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id2581071"></a>Otros recursos cvs interesantes</h2></div></div><div></div></div><p>

</p><div class="itemizedlist"><ul type="disc"><li><p>
La página principal que creo que ahora está en <a href="http://www.cvshome.org/" target="_top">http://www.cvshome.org/</a>.
</p></li><li><p>
cvsq, una utilidad para trabajar sin conexión permanente a la red: <a href="http://freshmeat.net/news/2000/07/02/962595201.html" target="_top">http://freshmeat.net/news/2000/07/02/962595201.html</a>.
</p></li><li><p>
<a href="http://www.loria.fr/~molli/cvs-index.html" target="_top">Enlaces</a> a documentación y otros recursos.
</p></li><li><p>
cvs2cl.pl, que es una herramienta para crear ficheros <span class="emphasis"><em>Changelog</em></span> al estilo GNU y que puede encontrarse en <a href="http://www.red-bean.com/cvs2cl/" target="_top">http://www.red-bean.com/cvs2cl/</a>
</p></li></ul></div><p>

</p></div><div class="sect1" lang="es" xml:lang="es"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id2581143"></a>Otros recursos cvs más avanzados</h2></div></div><div></div></div><p>

</p><div class="itemizedlist"><ul type="disc"><li><p>
<a href="http://freshmeat.net/projects/cvsadmin/?highlight=cvsadmin" target="_top">cvsadmin</a> es una herramienta para administrar las cuentas de un repositorio.
</p></li><li><p>
<a href="http://alexm.here.ru/cvs-nserver/" target="_top">cvs-nserver</a> es una reescritura y extensión de cvs para mejorar sus capacidades en red.
</p></li><li><p>
<a href="http://freshmeat.net/projects/cvsauth/?highlight=cvsauth" target="_top">cvsauth</a> sirve para autenticar usuarios sin ejecutar en el servidor cvs como root.
</p></li></ul></div><p>

</p></div><div class="sect1" lang="es" xml:lang="es"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id2581201"></a>Licencia</h2></div></div><div></div></div><p>
Este documento está bajo los auspicios de la licencia de documentación libre de GNU que puede encontrarse en <a href="http://www.gnu.org" target="_top">http://www.gnu.org</a>
</p></div></div></body></html>
