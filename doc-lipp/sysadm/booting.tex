% Linux Installation and Getting Started    -*- TeX -*-
% chap-sysadm.tex
% Copyright (c) 1993 by Matt Welsh and Lars Wirzenius
%
% This file is freely redistributable, but you must preserve this copyright 
% notice on all copies, and it must be distributed only as part of "Linux 
% Installation and Getting Started". This file's use is covered by
% the copyright for the entire document, in the file "copyright.tex".
%
% Copyright (c) 1998 by Specialized Systems Consultants Inc. 
% <ligs@ssc.com>
%
% Este fichero es de distribución libre, pero debe mantenerse esta 
% información de Copyright en todas las copias, y debe distribuirse solo como
% parte de "Instalación y Primeros Pasos en Linux". El uso de este fichero esta
% cubierto por el Copyright del documento completo, en el fichero "copyright.tex"
% Copyright (c) 1995 por Gerardo Izquierdo para la versión al Castellano

%
% Versión para lipp 2.0 por Alberto Molina. Comentarios a:
%            alberto@nucle.us.es 
%

\section{Iniciando el Sistema}
\markboth{Administración del Sistema}{Iniciando el Sistema}
\label{sec-bootfloppy} %% legacy of deleted sub-hed -- rk

\index{arrancando|(}
\index{administración del sistema!arrancando Linux|(}
Hay varias maneras de arrancar el sistema, bien sea desde disquete o 
bien desde el disco duro.

\subsection{Utilizando un disquete de arranque}

\index{arrancando Linux!con un disquete de arranque}
Mucha gente arranca Linux utilizando un disquete de inicio que contiene 
una copia del núcleo de Linux. Este núcleo tiene la partición raíz de Linux 
codificada en él, para que sepa dónde buscar en el disco duro el 
sistema de ficheros raíz. (La orden {\tt rdev} puede ser utilizada 
para poner la partición raíz en la imagen del núcleo; ver más 
adelante.) Por ejemplo, éste es el tipo de disquete creado por Slackware 
durante la instalación.

\index{/Image@{\tt /Image}}
\index{/etc/Image@{\tt /etc/Image}}
\index{/vmlinux@{\tt /vmlinux}}
\index{disquete de arranque!creando}
\index{núcleo!nombre de fichero de la imagen del}
Para crear un disquete de arranque propio, hay que localizar en primer lugar la 
imagen del núcleo en su disco duro. Debe estar en el fichero {\tt /Image} o
{\tt /etc/Image}. Algunas instalaciones utilizan el fichero {\tt /vmlinux}
para el núcleo.

\index{núcleo!imagen comprimida del}
\index{/zImage@{\tt /zImage}}
\index{/etc/zImage@{\tt /etc/zImage}}
\index{/vmlinuz@{\tt /vmlinuz}}
En su lugar, puede que haya un núcleo comprimido. Un núcleo comprimido se
descomprime a sí mismo en memoria en tiempo de arranque, y utiliza mucho 
menos 
espacio en el disco duro. Si se tiene un núcleo comprimido, puede encontrarse
en el fichero {\tt /zImage} o {\tt /etc/zImage}. Algunas instalaciones utilizan el fichero
{\tt /vmlinuz} para el núcleo comprimido.

\index{raíz, dispositivo!poniendo el nombre de con} 
\index{rdev@poniendo el nombre de con {\tt rdev}}
\index{rdev@{\tt rdev}}
Una vez que se sabe dónde está el núcleo, hay que poner el nombre de la 
partición raíz de un dispositivo raíz en la imagen del 
núcleo, utilizando la orden {\tt rdev}. El formato de este orden es
\begin{tscreen}
rdev \cparam{nombre-de-núcleo} \cparam{dispositivo-raíz}
\end{tscreen}
donde \cparam{nombre-del-núcleo} es el nombre de la imagen del núcleo, y 
\cparam{dispositivo-raíz} es el nombre de la partición raíz de 
Linux. Por ejemplo, para hacer que el dispositivo raíz en el núcleo {\tt /etc/Image}
sea {\tt /dev/hda2}, utilice la orden
\begin{tscreen}
\# {\em rdev /etc/Image /dev/hda2}
\end{tscreen}

Con {\tt rdev} también se pueden poner otras opciones en el núcleo, como puede ser el
modo SVGA predeterminado que se utilizará en tiempo de arranque. Utilizando
{\tt rdev -h} se obtiene un mensaje de ayuda.

Una vez puesto el dispositivo raíz, tan sólo hay que copiar la 
imagen del núcleo al disquete. Siempre que se copia datos a un 
disquete, es una buena idea formatear previamente el disquete, usando
el {\tt FORMAT.COM} en MS-DOS o el programa {\tt fdformat} de Linux. 
Esto establece la información de pista y sector en el disquete con la 
que puede detectarse como de alta o baja densidad.

El formateo de disquetes y las controladoras de los mismos se discuten
más tarde en la página~\pageref{sec-backfloppy}.

Para copiar el núcleo desde el fichero {\tt /etc/Image} al disquete
en {\tt /dev/fd0}, se puede utilizar la orden:
\begin{tscreen}
\# {\em cp /etc/Image /dev/fd0}
\end{tscreen}

Este disquete debe arrancar ahora Linux.

\subsection{Utilizando LILO}\label{sec-lilo}

\index{LILO|(}
\index{arrancando!con LILO|(}
Otro método de arranque es utilizar LILO, un programa que reside en el 
sector de arranque del disco duro. Este programa se ejecuta cuando el 
sistema se inicia desde el disco duro, y puede arrancar automáticamente
Linux desde una imagen de núcleo almacenada en el propio disco duro.

\index{LILO!como cargador de arranque}
\index{sistemas operativos!arrancando no-Linux}
\index{arrancando sistemas no-Linux}
LILO puede utilizarse también como una primera etapa de carga de varios
sistemas operativos, permitiendo seleccionar en tiempo de arranque qué 
sistema operativo (como Linux o MS-DOS) arrancar. Cuando se arranca
utilizando LILO, se inicia el sistema operativo predeterminado, a menos que
pulse \key{shift} durante la secuencia de arranque o se especifique el
fichero {\tt /etc/lilo.conf}.
En cualquiera de estos casos, se presentará un indicador de
arranque, donde debe teclear el nombre del sistema operativo a arrancar
(como puede ser ``{\tt linux}'' o ``{\tt msdos}''). Si se pulsa la tecla
\key{tab} en el indicador de arranque, se le presentará una lista de los 
sistemas operativos disponibles.

\index{LILO!instalación}
La forma más simple de instalar LILO es editar el fichero de 
configuración, {\tt /etc/lilo.conf},
y ejecutar la instrucción
\begin{tscreen}
\# {\em /sbin/lilo}
\end{tscreen}

El fichero de configuración de LILO contiene un párrafo para cada 
sistema operativo que se pueda querer arrancar. La mejor forma de mostrarlo
es con un ejemplo de un fichero de configuración LILO. El ejemplo siguiente 
es para un sistema que tiene una partición raíz Linux en {\tt /dev/hda1} y
una partición MS-DOS en {\tt /dev/hda2}.

\begin{tscreen}\begin{verbatim}
# Le indicamos a LILO que modifique el registro de arranque de
# /dev/hda (el primer disco duro no-SCSI). Si se quiere arrancar desde
# una unidad distinta de /dev/hda, se debe cambiar la siguiente línea
boot = /dev/hda

# Modo de vídeo
vga = normal

# Tiempo de respuesta en milisegundos. Tiempo del que se dispone para
# pulsar ``SHIFT''.
delay = 60

# Nombre del cargador de arranque. No hay razón para cambiarlo, a menos
# que se este haciendo una modificación seria del LILO
install = /boot/boot.b

# Esto fuerza a LILO a solicitar el Sistema Operativo con el que se va
# a arrancar. Si se pulsa 'TAB' se presentan las distintas opciones,
# de acuerdo con los 'label=' siguientes.
indicador de órdenes

# Dejemos a LILO efectuar alguna optimización.
compact

# Parrafo para la partición raíz de Linux en /dev/hda1.
image = /etc/Image   # Ubicación del núcleo
   label = linux     # Nombre del SO (para el menú de arranque de LILO)
   root = /dev/hda1  # Ubicación de la partición raíz
   vga = ask         # Indicar al núcleo que pregunte por modos SVGA
                     #   en tiempo de arranque

# Párrafo para la partición MSDOS en /dev/hda2.
other = /dev/hda2    # Ubicación de la partición
   table = /dev/hda  # Ubicación de la tabla de partición para /dev/hda2 
   label = msdos     # Nombre del SO (para el menú de arranque)
\end{verbatim}\end{tscreen}

\index{LILO!seleccionando el sistema operativo predeterminado para}
\index{sistemas operativos!arrancando no-Linux}
El primer párrafo de sistema operativo en el menú del fichero de 
configuración será el sistema operativo predeterminado que arrancará LILO.
Se puede seleccionar otro sistema operativo en el indicador de arranque de
LILO, tal y como se indicó anteriormente.

El instalador de Microsoft Windows '95 sobreescribe el sector de
arranque. Si va a instalar Windows '95 en su sistema después de
instalar LILO, debe asegurarse de crear un disquete de inicio antes,
ver~\ref{sec-bootfloppy}). Con el disquete de inicio, puede iniciar
Linux y reinstalar LILO tras la instalación Windows '95. Simplemente
escribiendo como ``root'' la orden {\tt /sbin/lilo}. 
Las particiones con Windows '95 se pueden configurar de forma
totalmente equivalente a la vista anteriormente con particiones de MS-DOS.

Las FAQ (Preguntas frecuentemente formuladas) (ver Apéndice~\ref{app-info})
dan más información sobre LILO, incluyendo cómo utilizar LILO con el 
``OS/2's~Boot~Manager''.
\index{arrancando!con LILO|)}
\index{LILO|)}
\index{arrancando|)}
\index{administración del sistema!arrancando Linux|)}

