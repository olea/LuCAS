% Linux Installation and Getting Started    -*- TeX -*-
% xwindows.tex
% Copyright (c) 1992, 1993 by Matt Welsh <mdw@sunsite.unc.edu>
%
% This file is freely redistributable, but you must preserve this copyright 
% notice on all copies, and it must be distributed only as part of "Linux 
% Installation and Getting Started". This file's use is covered by the 
% copyright for the entire document, in the file "copyright.tex".
%
% Copyright (c) 1998 by Specialized Systems Consultants Inc. 
% <ligs@ssc.com>
% Revisión 1 7 de julio 2002 por F Javier Fernandez <serrador@arrakis.es>
% Revisión 2 13 de julio de 2002 por F. javier Fernandez <serrador@arrakis.es>
% Revisión 3 13 de julio de 2002 12:26:00 por JFS <serrador@arrakis.es>
%Gold
\section{Requerimientos hardware de X-Window}
\label{sec-xwindows-reqs}
\subsection{Gráficos}
\index{XFree86!requerimientos hardware para}
\index{XFree86!chipsets de vídeo soportados por}
\index{hardware!tarjeta de vídeo}
%% As of XFree86 version 3.3, released in June, 1997, the following video
%% chip sets are supported. 
La documentación para su adaptador de vídeo debería especificar el chip
gráfico. Si está dispuesto a comprar una nueva tarjeta, o va a comprar una
máquina que viene con tarjeta de vídeo, pregunte a su distribuidor cuál es
exactamente la marca, modelo y chip de la tarjeta que tiene. El distribuidor
puede que necesite llamar al departamento de apoyo técnico del fabricante.
Muchos distribuidores de hardware de ordenadores personales afirman que su
tarjeta de vídeo es ``Super VGA estándar,'' que ``debería funcionar,'' con su
ordenador. Explique que su software (mencione {\linux} y XFree86!) no permite
todos los chips gráficos y que debería tener información detallada.

También puede determinar el chip de la tarjeta de vídeo ejecutando el 
programa {\tt SuperProbe} incluido junto con el paquete XFree86. Esto se 
detalla más abajo.

 Concretamente se permiten los siguientes chips de vídeo para la versión
de XFree86 3.3 liberada en Junio 1997:
 
 \begin{itemize}
 \item Ark Logic ARK1000PV, ARK1000VL, ARK2000PV, ARK2000MT
 \item Alliance AP6422, AT24
 \item ATI 18800, 18800-1, 28800-2, 28800-4, 28800-5, 28800-6, 68800-3,
             68800-6, 68800AX, 68800LX, 88800GX-C, 88800GX-D, 88800GX-E,
             88800GX-F, 88800CX, 264CT, 264ET, 264VT, 264VT2, 264GT (esta lista
             incluye los Mach8, Mach32, Mach64, 3D Rage y 3D Rage II)
 \item Avance Logic ALG2101, ALG2228, ALG2301, ALG2302, ALG2308, ALG2401
 \item Chips \& Technologies
             65520, 65530, 65540, 65545, 65520, 65530, 65540, 65545, 65546,
             65548, 65550, 65554
 \item Cirrus Logic
             CLGD5420, CLGD5422, CLGD5424, CLGD5426, CLGD5428, CLGD5429,
             CLGD5430, CLGD5434, CLGD5436, CLGD5440, CLGD5446, CLGD5462,
             CLGD5464, CLGD5465, CLGD5480, CLGD6205, CLGD6215, CLGD6225,
             CLGD6235, CLGD6410, CLGD6412, CLGD6420, CLGD6440, CLGD7541,
             CLGD7543, CLGD7548, CLGD7555
 \item Digital Equipment Corporation TGA
 \item Compaq AVGA
 \item Genoa GVGA
 \item IBM 8514/A (y clones auténticos), XGA-2
 \item IIT AGX-014, AGX-015, AGX-016
 \item Matrox MGA2064W (Millennium), MGA1064SG (Mystique)
 \item MX MX68000, MX680010
 \item NCR 77C22, 77C22E, 77C22E+
 \item Number Nine I128 (series I y II)
 \item NVidia/SGS Thomson NV1, STG2000
 \item OAK OTI067, OTI077, OTI087
 \item RealTek RTG3106
 \item S3 86C911, 86C924, 86C801, 86C805, 86C805i, 86C928, 86C864, 86C964,
             86C732, 86C764, 86C765, 86C775, 86C868, 86C968, 86C325, 86C375,
             86C385, 86C988, 86CM65
 \item SiS 86C201, 86C202, 86C205
 \item Tseng ET3000, ET4000AX, ET4000/W32, ET4000/W32i, ET4000/W32p, ET6000
 \item Trident
             TVGA8800CS, TVGA8900B, TVGA8900C, TVGA8900CL, TVGA9000, TVGA9000i,
             TVGA9100B, TVGA9200CXR, TVGA9320, TVGA9400CXi, TVGA9420,
             TGUI9420DGi, TGUI9430DGi, TGUI9440AGi, TGUI9660XGi, TGUI9680, 
             ProVidia 9682, ProVidia 9685, ProVidia 9692, Cyber 9382, Cyber 9385
 \item Video 7/Headland Technologies HT216-32
 \item Weitek P9000
 \item Western Digital/Paradise PVGA1
 \item Western Digital WD90C00, WD90C10, WD90C11, WD90C24, WD90C24A, WD90C30, 
              WD90C31, WD90C33
 \end{itemize}

Las tarjetas de vídeo con estos chips se permiten en todos los tipos de buses.
Todas las tarjetas permiten virtualmente los modos gráficos de 256 colores. 
Además, algunas de ellas permiten modos de color como monocromo,  15-bit, 
16-bit, 24-bit y 32-bit. Para profundidades de color superiores a 
256 (8-bit), debe tener instalada la cantidad requerida de RAM dinámica de 
vídeo (DRAM). La configuración típica es 16 bits por pixel (65536 colores).

El servidor monocromo permite asimismo tarjetas VGA genéricas, la tarjeta 
monocroma Hercules, las tarjetas monocromas Hyundai HGC1280, Sigma LaserView 
y Apollo.

Las anotaciones de la versión actual de XFree86 deberían contener la
lista completa de chips permitidos. La distribución XFree86 tiene 
ficheros README específicos para cada chip que dan información detallada
sobre la posibilidad de utilizar ese chip.

Un problema al que se enfrentaron los desarrolladores del XFree86 es que
algunos fabricantes de tarjetas de vídeo utilizan mecanismos no estándar
para determinar las frecuencias del reloj utilizadas para trabajar con la
tarjeta. O no publican especificaciones que describan como programar la 
tarjeta o exigen a los programadores que firmen declaraciones de no 
revelación para conseguir la información. Esta práctica restringe la 
libre distribución de XFree86 y el equipo de desarrollo de XFree86 no 
está dispuesto a aceptarla. Esto ha sido un problema con las tarjetas de
vídeo más antiguas de Diamond, pero a partir de la versión 3.3, Diamond
apoya activamente el Proyecto XFree86.

%% Note however, that the Diamond SpeedStar 24 and possibly some SpeedStar+ board
%% are NOT supported, even though they use the ET4000 chipset. Also, there are
%% many of the newer chipsets are not supported yet due to lack of documentation
%% from the manufacturer and/or lack of programmer resources to dedicate to the
%% coding.
Nótese sin embargo que las tarjetas Diamond SpeedStar 24 y posiblemente algunas
tarjetas SpeeedStar+ NO son soportadas, incluso aunque usen el chipset ET4000.
También, hay muchos de los chipsets más modernos que no se soportan debido
a la escasez de documentación del fabricante y/o la escasez de programadores
dedicados a la codificación.

Se recomienda usar una tarjeta aceleradora, como el chip S3. Debería 
revisar la documentación del XFree86 y verificar que su propia tarjeta 
está permitida antes de dar el paso decisivo y comprar hardware caro.
Se envían comparaciones de rendimiento de tarjetas de vídeo de forma
rutinaria a los grupos de noticias de Usenet 
{\tt comp.windows.x.i386unix} y {\tt comp.os.linux.misc}.

Es importante fijarse en que la tarjeta aceleradora media es 
significativamente más rápida que la tarjeta gráfica estándar de la 
mayoría de las estaciones de trabajo. Un sistema {\linux} 80486DX2 a 
66-MHz con 20 megabytes de RAM equipado con tarjeta S3-864 
VESA Local Bus (VLB) con 2 megabytes de DRAM podrá por consiguiente
ser unas 7 veces más rápido que una estación de trabajo Sun Sparc IPX
en pruebas de rendimiento con el servidor XFree86 versión 3.1. La 
versión 3.3 es aún más rápida. En general, un sistema {\linux} con una
SVGA acelerada dará un rendimiento mucho mayor que las estaciones de
trabajo UNIX comerciales, que normalmente emplean buffers de cuadro 
único para gráficos.

\subsection{Memoria, CPU y espacio en disco}
La instalación recomendada para XFree86 bajo GNU/Linux es un 80486 o 
mejor con al menos 16 megabytes de RAM.
Cuanta más RAM física haya instalada, menos intercambio a disco habrá
que hacer cuando quede poca memoria libre. Como el intercambio es
inherentemente lento (los discos son muy lentos comparados con la
memoria) tener 16 megabytes de RAM o más es necesario para ejecutar
XFree86 cómodamente. Un sistema con 4 megabytes de RAM física podría
funcionar de 10 a 100 veces más despacio que uno con 16 megabytes o
más.

Una instalación estándar de XFree86 necesita de 60 a 80 megabytes de
espacio en disco, como mínimo. Esto incluye espacio para los 
servidores X, fuentes, bibliotecas y utilidades estándar. Si tiene 
en mente añadir aplicaciones, probablemente podrá ejecutar XFree86 
con comodidad con 200 megabytes de espacio en disco.

\section{Instalación de XFree86}
\index{XFree86!instalación}

La distribución binaria de XFree86 para {\linux} se halla en todas
las distribuciones {\linux} en CD y también puede ser encontrada en 
un cierto número de sitios FTP. En {\tt sunsite.unc.edu} se encuentra en 
el directorio {\tt /pub/X11/XFree86}. En el momento de la redacción
de este documento, la versión actual es la 3.3.1. Periódicamente, 
salen versiones más nuevas. Si obtiene XFree86 como parte de una
distribución {\linux}, no es necesario descargar el software de forma
separada.

% When you download XFree86 directly, be sure that you have the correct
% version. Recent releases of many of Linux distributions use the GNU
% version of the C libraries. There are now two versions of the XFree86
% distribution: one linked against the GNU C libraries and another
% version linked against the older, non-GNU version. There is no
% signficant difference functionally between the two versions.

Estos ficheros están presentes en la distribución XFree86-3.3.1

Uno de los siguientes servidores es necesario:

\begin{center}
\small\begin{tabular}{lll} 
\hline
Fichero                                 & Descripción     \\
\hline
{\tt X338514.tgz}                 & Servidor para tarjetas basadas en 8514. \\
{\tt X33AGX.tgz}                  & Servidor para tarjetas basadas en AGX. \\
{\tt X33I128.tgz}                 & Servidor para las tarjetas Imagine I128.\\
{\tt X33Ma64.tgz}                 & Servidor para tarjetas basadas en Mach64.\\
{\tt X33Ma32.tgz}                 & Servidor para tarjetas basadas en Mach32.\\
{\tt X33Ma8.tgz}                  & Servidor para tarjetas basadas en Mach8. \\
{\tt X33Mono.tgz}                 & Servidor para modos de vídeo monocromos. \\
{\tt X33P9K.tgz}                  & Servidor para tarjetas basadas en P9000. \\
{\tt X33S3.tgz}                   & Servidor para tarjetas basadas en S3. \\
{\tt X33S3V.tgz}                  & Servidor para tarjetas tipo S3/Virge. \\
{\tt X33SVGA.tgz}                 & Servidor para tarjetas Super VGA. \\
{\tt X33VGA16.tgz}                & Servidor para tarjetas VGA/EGA. \\
{\tt X33W32.tgz}                  & Servidor para tarjetas tipo ET4000/W32.\\

\hline
\end{tabular}\normalsize\rm
\end{center}

Todos los ficheros siguientes son necesarios:
\begin{center}
\small\begin{tabular}{lll} 
\hline
Fichero                                 & Descripción     \\
\hline    
{\tt preinst.sh }    & Script de preinstalación \\
{\tt postinst.sh}    & Script de postinstalación \\
{\tt X33bin.tgz }    & Clientes, bibliotecas de tiempo de ejecución y ficheros de aplicación predeterminados \\
{\tt X33doc.tgz }    & Documentación \\
{\tt X33fnts.tgz}    & Fuentes 75dpi, misc y PEX \\
{\tt X33lib.tgz }    & Ficheros de datos necesarios en tiempo de ejecución \\ 
{\tt X33man.tgz }    & Páginas del manual \\
{\tt X33set.tgz }    & Utilidad XF86Setup \\
{\tt X33VG16.tgz}    & Servidor VGA de 16 colores (XF86Setup lo necesita) \\
\hline
\end{tabular}\normalsize\rm
\end{center}

Lo siguiente es necesario para nuevas instalaciones y opcionalmente 
para instalaciones existentes:
\begin{center}
\small\begin{tabular}{lll} 
\hline
Fichero                                 & Descripción     \\
\hline
{\tt X33cfg.tgz}     & ficheros ejemplo de configuración para xinit y xdm \\
\hline
\end{tabular}\normalsize\rm
\end{center}


\blackdiamond 
No instalar {\tt X33cfg.tgz} sobre una instalación XFree86 existente
sin crear una copia de seguridad de los ficheros de configuración.
Desempaquetar {\tt X33cfg.tgz} sobreescribe éstos y otros ficheros. 
De todas formas, si usted sí que tiene ficheros de configuración 
personalizados, no hay necesidad de instalar este paquete.

\blackdiamond 
Las fuentes de mapa de bits distribuidas con la versión 3.3.1 están
comprimidas con el programa {\tt gzip} en vez de con {\tt compress}.
Probablemente tendrá antes de  borrar las fuentes antiguas  hacer
copia de seguridad de ellas. Los servidores X y servidores de fuentes
de las versiones anteriores no podían leer fuentes comprimidas por
{\tt gzip}, así que copie las fuentes antiguas si desea utilizar los
servidores más antiguos.

Los siguientes ficheros son opcionales:
\begin{center}
\small\begin{tabular}{lll} 
\hline
Fichero                                 & Descripción     \\
\hline
{\tt X33f100.tgz}   & Fuentes 100dpi \\
{\tt X33fcyr.tgz}   & Fuentes del alfabeto cirílico \\
{\tt X33fnon.tgz}   & Otras fuentes (chino, japonés, koreano, hebreo) \\
{\tt X33fscl.tgz}   & Fuentes escalables (Speedo y Type1) \\
{\tt X33fsrv.tgz}   & Servidor de fuentes y ficheros de configuración \\
{\tt X33prog.tgz}   & Ficheros de cabecera de X, ficheros de configuración y bibliotecas de tiempo de compilación \\
{\tt X33nest.tgz}   & Servidor X anidado \\
{\tt X33vfb.tgz }   & Servidor X de framebuffer virtual \\
{\tt X33prt.tgz }   & Servidor de impresión X \\
{\tt X33ps.tgz  }   & Versión PostScript de la documentación \\
{\tt X33html.tgz}   & Versión HTML de la documentación \\
{\tt X33jdoc.tgz}   & Documentación en japonés (para la versión 3.2) \\
{\tt X33jhtm.tgz}   & Versión HTML de la documentación en japonés (3.2) \\
{\tt X33lkit.tgz}   & Kit de enlazado del servidor X \\
\hline
\end{tabular}\normalsize\rm
\end{center}

El directorio XFree86 debería contener ficheros {\tt README} y
apuntes de instalación para la versión actual.

Después, como root, cree el directorio {\tt /usr/X11R6} si no 
existe todavía. Después ejecute el script de preinstalación, 
{\tt preinst.sh}. Debería copiar del directorio {\tt /var/tmp} 
este fichero y todos los ficheros comprimidos para su sistema 
antes de ejecutar {\tt preinst.sh}. {\tt /usr/X11R6} debe ser 
el directorio actual cuando se ejecute el script de 
preinstalación y descomprima todos los ficheros.

\begin{tscreen}
\# cd /usr/X11R6 \\
\# sh /var/tmp/preinst.sh \\
\end{tscreen}

A continuación debe descomprimir los ficheros desde 
{\tt /var/tmp} a {\tt /usr/X11R6} con una instrucción como:
\begin{tscreen}
\# gzip -d < /var/tmp/X33prog.tgz  $\mid$ tar vxf - \\
\end{tscreen}

\blackdiamond 
Estos archivos {\tt tar} están comprimidos con la ruta
relativa a {\tt /usr/X11R6}. Debe descomprimir los ficheros
ahí. En algunas distribuciones {\linux}, el directorio raíz es
{\tt /var/X11R6}.

Después de haber descomprimido los ficheros necesarios y 
todos los ficheros opcionales que haya seleccionado, ejecute
el script de postinstalación {\tt postinst.sh}.
\begin{tscreen}
\# cd /usr/X11R6 \\
\# sh /var/tmp/postinst.sh \\
\end{tscreen}

Ahora enlace el fichero {\tt /usr/X11R6/bin/X} al servidor
que permite su tarjeta gráfica. Por ejemplo el servidor de
color de SVGA, {\tt /usr/bin/X11/X} debería estar enlazado
con {\tt /usr/X11R6/bin/XF86\_SVGA}. Para utilizar el 
servidor monocromo enlace {\tt X} a {\tt XF86\_MONO} con 
la instrucción:

\begin{tscreen}
\# ln --sf /usr/X11R6/bin/XF86\_MONO\ \ /usr/X11R6/bin/X
\end{tscreen}
Lo mismo sirve para el resto de servidores.

También tendrá que asegurarse de que el directorio 
{\tt /usr/X11R6/bin} está en el path. Esto puede hacerse 
editando los valores por omisión del sistema 
{\tt /etc/profile} o {\tt /etc/csh.login} (basado en el
shell que usted u otros usuarios utilizan). También puede
simplemente añadir el directorio a su path personal 
modificando {\tt /etc/.bashrc} o {\tt /etc/.cshrc}, basado
en su shell.

Finalmente, asegúrese de que {\tt /usr/X11R6/lib} puede ser
localizado por {\tt ld.so}, el enlazador en tiempo de 
ejecución. Para esto, añada la línea
\begin{tscreen}
/usr/X11R6/lib
\end{tscreen}
al fichero {\tt /etc/ld.so.conf}, y ejecute 
{\tt /sbin/ldconfig}, como {\tt root}. 

\section{Examinando la configuración hardware}

Si no está seguro de qué servidor usar o no sabe cuál 
es el chip de la tarjeta gráfica, el programa 
{\tt SuperProbe}, que está en {\tt /usr/X11R6/bin} puede 
intentar determinarlo, así como más información. Anote
estos datos para uso posterior.

Para ejecutar SuperProbe desde la línea de ordenes, 
escriba simplemente
\begin{tscreen}
\# SuperProbe
\end{tscreen}

\blackdiamond Es posible que {\tt SuperProbe} se confunda
con hardware que utilice direcciones de puertos de 
entrada/salida que puedan ser utilizadas por tarjetas de
vídeo. Para evitar que SuperProbe compruebe estas 
direcciones, utilice el argumento {\tt excl} seguido de la
lista de direcciones que {\tt SuperProbe} no va a examinar.
Por ejemplo:

\begin{tscreen}
\# SuperProbe -excl 0x200-0x230,0x240
\end{tscreen}
Las direcciones vienen dadas como números hexadecimales 
que están precedidos por {\tt 0x}.

Para mostrar una lista de los dispositivos de vídeo que 
SuperProbe conoce, utilice la instrucción
\begin{tscreen}
\# SuperProbe -info
\end{tscreen}

{\tt SuperProbe} puede escribir gran cantidad de 
información si le añade el argumento {\tt -verbose}. 
Puede redireccionar la salida a un fichero:
\begin{tscreen}
\# SuperProbe -verbose >superprobe.out 
\end{tscreen}

\blackdiamond Ejecutar SuperProbe puede provocar que
el sistema se cuelgue. Asegúrese de que no están 
ejecutándose aplicaciones esenciales, o al menos de
que tienen todos sus datos grabados en disco de manera
segura, y cerciórese de que todos los usuarios están
desconectados. Similarmente, un sistema cargado (que
está imprimiendo en segundo plano, por ejemplo) puede
tergiversar la salida de software como SuperProbe o de
un servidor X que está intentando medir las 
especificaciones de tiempo de una tarjeta de vídeo.


\section{Generar de forma automática el fichero {\tt XF86Config}}

Crear el fichero {\tt XF86Config} a mano es una tarea ardua, 
pero no imposible. Varias herramientas de la versión 3.3.1 de 
XFree86 podrán ayudarle. Una de ellas, el programa 
{\tt XF86Setup} puede generar automáticamente un fichero
XF86Config con formato correcto. Debe conocer las 
especificaciones exactas de su tarjeta de vídeo así como
los valores de refresco vertical y horizontal de su monitor.
La mayor parte de la información puede ser encontrada en los
propios manuales.

Hay otros tantos programas de configuración, dependiendo de
la distribución {\linux}. Los más comunes son 
{\tt Xconfigurator} y {\tt xf86config}. El último es una 
versión antigua de {\tt XF86Setup} y está incluido en versiones
anteriores de XFree86. Debería usar siempre {\tt XF86Setup} en
caso de que tenga disponibles éste y {\tt xf86config}.

\section{Configurar XFree86}
\label{chap-advanced-xconfiguration}
\index{XFree86!configuring}
% Setting up XFree86 is not difficult. However, if you happen to be
% using hardware for which drivers are under development, or wish to
% obtain the best performance or resolution from an accelerated graphics
% card, configuring XFree86 can be somewhat time-consuming.
Configurar XFree86 no es difícil. Sin embargo si ocurre que se está
usando hardware para el cuál los controladores están en desarrollo,
o se desea obtener el mejor rendimiento o resolución de una tarjeta
aceleradora, configurar XFree86 puede tomar su tiempo.

En este apartado, se describe cómo crear y editar el fichero
{\tt XF86Config}, que configura el servidor XFree86. En la mayoría
de los casos lo mejor es empezar con una configuración XFree86 que
utilice baja resolución como 640x480, que sea permitida por la
práctica totalidad de las tarjetas de vídeo y monitores. Una vez
que XFree86 trabaje a una resolución estándar baja, podrá 
modificar la configuración para aprovechar las capacidades de su
tarjeta de vídeo. Esto asegura que XFree86 funcione en su sistema y
que la instalación es esencialmente correcta antes de que empiece
con la a menudo difícil tarea de configurar XFree86 para un alto
rendimiento.

Además de la información listada aquí, debería leer los siguientes
documentos:
\begin{itemize}
\item La documentación de XFree86 en {\tt /usr/X11R6/lib/X11/doc} 
(del paquete {\tt XFree86-3.1-doc}). Debería revisar especialmente
el fichero {\tt README.Config}, que es un tutorial de configuración
de XFree86.
\item Varios chips de vídeo tienen ficheros separados en el 
directorio arriba mencionado (como {\tt README.Cirrus} y 
{\tt README.S3}). Lea el fichero que concierne a su tarjeta de
vídeo. 
\item La página del manual de {\tt XFree86}.
\item La página del manual de {\tt XF86Config}.
\item La página del manual del servidor que está utilizando, como
{\tt XF86\_SVGA} o {\tt XF86\_S3}.
\end{itemize}

\index{XFree86!fichero de configuracio para}
\index{/usr/X11R6/lib/X11/XF86Config@{\tt /usr/X11R6/lib/X11/XF86Config}}
\index{XF86Config@{\tt XF86Config}}
El fichero principal de configuración de XFree86 es 
{\tt /usr/X11R6/lib/X11/XF86Config}. Este fichero contiene 
información sobre su ratón, parámetros de su tarjeta de vídeo, 
etc. El fichero {\tt XF86Config.eg} viene con la distribución
XFree86 como ejemplo. Copie este fichero a {\tt XF86Config} y
edítelo como punto de inicio.

La página del manual de {\tt XF86Config} explica el formato
del fichero {\tt XF86Config}. Lea la página del manual si aún
no lo ha hecho. 

Se va a describir un ejemplo de {\tt XF86Config}, una sección 
de cada vez. Este fichero puede no resultar exactamente igual
al fichero de ejemplo incluido en la distribución de XFree86, 
pero la estructura es la misma.

\blackdiamond Observe que el formato del fichero {\tt XF86Config}
puede cambiar con cada versión de XFree86. Lea las notas de su 
distribución para erratas.

\blackdiamond {\bf No copie el fichero de configuración mostrado aquí
 a su sistema y trate de utilizarlo.} Un fichero de
configuración que no se corresponda con su hardware puede
poner el monitor en frecuencias demasiado altas. Se han dado
casos de daños del monitor, especialmente monitores de 
frecuencia fija, esto ha sido provocado por ficheros 
{\tt XF86Config} mal configurados. {\bf Cerciórese 
completamente de que su fichero {\tt XF86Config}} se 
corresponde con el hardware antes de utilizarlo.

Todas las secciones del fichero {\tt XF86Config} están 
rodeadas por un par de líneas con la sintaxis 
{\tt Section ``\cparam{section-name}''}\ldots{\tt EndSection}. 

La primera sección del fichero {\tt XF86Config} es {\tt Files},
que tiene este aspecto:
\begin{tscreen}\begin{verbatim}
Section "Files"
    RgbPath     "/usr/X11R6/lib/X11/rgb"
    FontPath    "/usr/X11R6/lib/X11/fonts/misc/"
    FontPath    "/usr/X11R6/lib/X11/fonts/75dpi/"
EndSection
\end{verbatim}\end{tscreen}
La línea {\tt RgbPath} establece la ruta a la base de datos
de colores RGB de X11R6, y cada línea {\tt FontPath} pone la
ruta a un directorio que contiene fuentes X11. No debería 
tener por qué modificar estas líneas. Simplemente asegúrese 
de que hay una entrada {\tt FontPath} para cada tipo de fuente
que haya instalado; esto es, para cada directorio en 
{\tt /usr/X11R6/lib/X11/fonts}.

La siguiente sección es {\tt ServerFlags}, que especifica 
varios flags globales para el servidor. En general esta
sección está vacía.
\begin{tscreen}\begin{verbatim}
Section "ServerFlags"
# Elimine este comentario para provocar un volcado de memoria en el
# punto donde se reciba una señal. Esto puede dejar la terminal en 
# estado inutilizable, pero puede ofrecer una mejor traza de la pila
# para ayudar a depurar en caso de volcado de memoria
#    NoTrapSignals
# Elimine este comentario para deshabilitar la secuencia 
# <Crtl><Alt><BS> de abortar el servidor
#    DontZap
EndSection
\end{verbatim}\end{tscreen}
En esta sección de {\tt ServerFlags} todas las líneas están 
comentadas.

La siguiente sección es {\tt Keyboard}. Este ejemplo muestra una
configuración básica que debería funcionar en la mayoría de los
sistemas. El fichero {\tt XF86Config} describe como modificar la
configuración.
\begin{tscreen}\begin{verbatim}
Section "Keyboard"
    Protocol    "Standard"
    AutoRepeat  500 5
    ServerNumLock
EndSection
\end{verbatim}\end{tscreen}

La siguiente sección es {\tt Pointer}, que especifica parámetros
para el dispositivo de ratón:
\begin{tscreen}\begin{verbatim}
Section "Pointer"

    Protocol    "MouseSystems"
    Device      "/dev/mouse"

# Baudrate y SampleRate se aplican solo a algunos ratones Logitech
#    BaudRate   9600
#    SampleRate 150

# Emulate3Buttons es una opción para ratones Microsoft de 2 botones
#    Emulate3Buttons

# ChordMiddle es una opción para algunos ratones Logitech de 3 botones
#    ChordMiddle

EndSection
\end{verbatim}\end{tscreen}
De momento las únicas opciones que le preocupan son {\tt Protocol} y 
{\tt Device}. {\tt Protocol} especifica el ratón {\em protocol,\/} que
no es necesariamente el mismo que el del fabricante. XFree86 bajo {\linux}
reconoce los siguientes protocolos de ratón:
\begin{itemize}
\item {\tt BusMouse} 
\item {\tt Logitech}
\item {\tt Microsoft}
\item {\tt MMSeries}
\item {\tt Mouseman}
\item {\tt MouseSystems}
\item {\tt PS/2}
\item {\tt MMHitTab}
\end{itemize}
{\tt BusMouse} debería ser usado con los ratones de bus Logitech. Los
ratones Logitech más antiguos utilizan {\tt Logitech}, y los nuevos 
ratones serie Logitech utilizan protocolos {\tt Microsoft} o 
{\tt Mouseman}. 

{\tt Device} especifica el fichero de dispositivo por el cual el ratón
podrá ser accedido. En la mayoría de los sistemas {\linux}, es 
{\tt /dev/mouse}, que generalmente es un enlace al puerto serie 
apropiado, como {\tt /dev/cua0} para ratones serie y el dispositivo 
de ratón de bus apropiado para los ratones de bus. En cualquier caso
asegúrese de que el fichero de dispositivo existe.

La sección siguiente es {\tt Monitor}, que especifica las 
características de su monitor. Como en otras secciones del fichero
{\tt XF86Config} puede haber más de una sección {\tt Monitor}. Esto es
útil si tiene varios monitores conectados al sistema o si utiliza el
mismo fichero {\tt XF86Config} para varias configuraciones de hardware.

\begin{tscreen}\begin{verbatim}
Section "Monitor"

    Identifier  "CTX 5468 NI"

    # !`Estos valores son para un CTX 5468NI sólo! No intente usarlos 
    # con su monitor (a menos que posea este modelo)

    Bandwidth    60
    HorizSync    30-38,47-50
    VertRefresh  50-90

    # Modos: Nombre    dotclock  horiz                vert 

    ModeLine "640x480"  25       640 664 760 800      480 491 493 525
    ModeLine "800x600"  36       800 824 896 1024     600 601 603 625
    ModeLine "1024x768" 65       1024 1088 1200 1328  768 783 789 818

EndSection
\end{verbatim}\end{tscreen}
{\tt Identifier} es un nombre arbitrario para la entrada {\tt Monitor}.
Puede ser cualquier cadena y se utiliza para referirse más tarde a la 
entrada {\tt Monitor} en el fichero {\tt XF86Config}.

{\tt HorizSync} especifica las frecuencias válidas horizontales
para su monitor, en kHz. Los monitores multisync pueden tener
un rango de valores o varios rangos separados por comas. Los
monitores de frecuencia fija exigen una lista de valores discretos,
por ejemplo:
\begin{tscreen}\begin{verbatim}
    HorizSync    31.5, 35.2, 37.9, 35.5, 48.95
\end{verbatim}\end{tscreen}
El manual del monitor debería listar estos valores en la sección de
especificaciones técnicas. Si no es así, póngase en contacto con el
fabricante o proveedor del monitor para obtenerlos.

{\tt VertRefresh} especifica los valores válidos de refresco vertical
(o frecuencias de sincronización vertical) para su monitor, en kHz.
Al igual que {\tt HorizSync}, puede ser un rango o una lista de valores
discretos. El manual de su monitor debería listarlos.

{\tt HorizSync} y {\tt VertRefresh} se utilizan solamente para
comprobar que las resoluciones del monitor están en rangos válidos. 
Esto reduce la posibilidad de que se dañe el monitor haciéndolo trabajar
a una frecuencia para la que no está preparado.

La directiva {\tt ModeLine} se utiliza para especificar los modos de 
resolución para su monitor. El formato es
\begin{tscreen}
ModeLine \cparam{name} \cparam{clock} \cparam{horiz-values} \cparam{vert-values}
\end{tscreen}
\textsl{name} es una cadena arbitraria que se utiliza para referirse al
modo de resolución más tarde en el fichero. \textsl{dot-clock} es la
frecuencia de reloj o ``dot clock'' asociada al modo de resolución.
La dot clock se expresa normalmente en MHz. Esta es la proporción a
la que la tarjeta de vídeo envía pixels al monitor a esta resolución.
\textsl{horiz-values} y \textsl{vert-values} son cuatro números cada
uno que especifican cuándo debe disparar la pistola de electrones del
monitor y cuando disparan los pulsos de sincronización horizontal y 
vertical en cada barrido.

El fichero {\tt VideoModes.doc}, incluido en la distribución XFree86 
describe con detalle como determinar los valores de {\tt ModeLine}
para cada modo de resolución que permita su monitor. \textsl{clock}
ha de corresponderse con uno de los valores de dot clock que permita
su tarjeta de vídeo. Más tarde en el fichero {\tt XF86Config}, podrá
especificarlos. 

Dos ficheros, {\tt modeDB.txt} y {\tt Monitors}, pueden contener
los datos de {\tt ModeLine} para su monitor. Están en 
{\tt /usr/X11R6/lib/X11/doc}.

Empiece con valores de {\tt ModeLine} para los tiempos de monitores
VESA estándar porque la mayoría de los monitores los permiten. 
{\tt ModeDB.txt} incluye los valores de tiempo para las resoluciones
VESA estándar. Por ejemplo la entrada
\begin{tscreen}\begin{verbatim}
# 640x480@60Hz Modo no entrelazado
# Sincronización horizontal = 31.5kHz
# Tiempos: H=(0.95us, 3.81us, 1.59us), V=(0.35ms, 0.064ms, 1.02ms)
#
# nombre       reloj   tiempo horizontal     tiempo vertical     flags
 "640x480"     25.175  640  664  760  800    480  491  493  525
\end{verbatim}\end{tscreen}
es el tiempo VESA estándar para un modo 640x480. Tiene un dot clock
de 25.175 que debe ser permitido por su tarjeta de vídeo como se 
describe más abajo. Para incluir esta entrada en el fichero 
{\tt XF86Config} utilice la línea 
\begin{tscreen}
ModeLine "640x480" 25.175\ \ 640 664 760 800\ \ 480 491 493 525
\end{tscreen}
El argumento \textsl{name} a {\tt ModeLine} ({\tt\verb+"640x480"+})
es una cadena arbitraria. Por convención los modos se llaman por sus
resoluciones, pero \textsl{name} puede técnicamente ser una etiqueta
descriptiva.

Para cada {\tt ModeLine} el servidor comprueba las especificaciones
del modo y se asegura de que caen dentro del rango de valores 
especificado por {\tt Bandwidth}, {\tt HorizSync} y {\tt VertRefresh}. 
Si no es así, el servidor se quejará cuando intente iniciar X. Por 
alguna razón, el dot clock utilizado por el modo no debería ser mayor
que el valor utilizado para {\tt Bandwidth}. Sin embargo, en muchos
casos, es seguro utilizar un modo que tenga un ancho de banda 
ligeramente mayor que el que permite su monitor.

Si los tiempos de VESA estándar no funcionan (lo sabrá después de que
intente utilizarlos) mire los ficheros {\tt modeDB.txt} y 
{\tt Monitors}, que incluyen valores de modo específicos para muchos
tipos de monitor. También puede crear las entradas {\tt ModeLine} a 
partir de estos valores. Asegúrese de utilizar sólo valores para su
monitor concreto. Muchos monitores de 14 y 15 pulgadas no permiten
modos de resolución mayores y a menudo las resoluciones de 1024x768
son a valores de dot clock bajos. Si no puede encontrar modos de alta
resolución para su monitor en estos ficheros, seguramente se debe a
que su monitor no los permite.

Si está completamente perdido y no puede encontrar valores de 
{\tt ModeLine} para su monitor, siga las instrucciones del fichero
{\tt VideoModes.doc}, que está incluido en la distribución XFree86
y genere valores a partir de las especificaciones del manual de su
monitor. Su recorrido seguramente variará cuando intente valores de
{\tt ModeLine} a mano. Pero este es un buen lugar donde mirar si no
puede encontrar los valores que necesita. {\tt VideoModes.doc} 
describe también el formato de la directiva {\tt ModeLine} y otros
aspectos del servidor XFree86 con detalles escabrosos.

Finalmente si logra obtener valores de {\tt Modeline} que son casi
pero no completamente correctos, podría conseguir modificarlos un
poco para alcanzar el resultado deseado. Por ejemplo, si la imagen
de XFree86 está ligeramente desplazada o la imagen parece 
``movida,'' siga las instrucciones del fichero {\tt VideoModes.doc}
y corrija los valores. Asegúrese de comprobar los controles del 
monitor. En muchos casos deberá cambiar el tamaño horizontal y 
vertical de la pantalla tras arrancar XFree86 para centrar y calibrar
la imagen.

\blackdiamond No utilice los valores de tiempo del monitor o los 
valores de {\tt ModeLine} para monitores distintos de su modelo. Si
intenta hacer funcionar el monitor a una frecuencia para la que no
fue diseñado, puede dañarlo o incluso destruirlo.

La siguiente sección del fichero {\tt XF86Config} es {\tt Device},
que especifica parámetros para la tarjeta de vídeo. Este es un ejemplo.
\begin{tscreen}\begin{verbatim}
Section "Device" 
        Identifier "#9 GXE 64"

        # De momento nada, después se completarán estos valores

EndSection
\end{verbatim}\end{tscreen}

Esta sección define propiedades para una tarjeta de vídeo concreta. 
{\tt Identifier} es una cadena arbitraria descriptiva. Se utilizará
para referirse a la tarjeta más tarde.

En principio no necesita incluir nada en la sección {\tt Device} 
aparte de {\tt Identifier}. Se usará el propio servidor X para
comprobar las propiedades de su tarjeta de vídeo y ponerlas en la
sección {\tt Device} más tarde. El servidor XFree86 es capaz de 
comprobar el chip de vídeo, relojes, RAMDAC y la cantidad de RAM de
vídeo de la tarjeta. Esto se describe en la sección
\ref{sec-video-card-info}.

Antes de hacer esto, hay que acabar de escribir el fichero
{\tt XF86Config}. La siguiente sección es {\tt Screen}, que
especifica la combinación monitor/tarjeta de vídeo a utilizar
con cada servidor concreto.
\begin{tscreen}\begin{verbatim}
 Section "Screen"
     Driver     "Accel"
     Device     "#9 GXE 64"
     Monitor    "CTX 5468 NI"
     Subsection "Display"
         Depth      16
         Modes      "1024x768" "800x600" "640x480"
         ViewPort   0 0
         Virtual    1024 768
     EndSubsection
 EndSection
\end{verbatim}\end{tscreen}

La línea {\tt Driver} especifica el servidor X que va a utilizar.
Valores válidos de {\tt Driver} son:
\begin{itemize}
\item {\tt Accel}: Para los servidores {\tt XF86\_S3}, {\tt XF86\_Mach32}, {\tt XF86\_Mach8}, {\tt XF86\_8514}, {\tt XF86\_P9000}, {\tt XF86\_AGX} y {\tt XF86\_W32}.
\item {\tt SVGA}: Para el servidor {\tt XF86\_SVGA}.
\item {\tt VGA16}: Para el servidor {\tt XF86\_VGA16}.
\item {\tt VGA2}: Para el servidor {\tt XF86\_Mono}.
\item {\tt Mono}: Para los drivers monocromos no VGA en servidores {\tt XF86\_Mono} y {\tt XF86\_VGA16}.
\end{itemize}
Asegúrese de que {\tt /usr/X11R6/bin/X} es un enlace simbólico a este servidor.

La línea {\tt Device} especifica el {\tt Identifier} de la sección 
{\tt Device} que se corresponde con la tarjeta de vídeo que va a 
utilizar con este servidor. Anteriormente se creó una sección 
{\tt Device} con la línea
\begin{tscreen}\begin{verbatim}
Identifier "#9 GXE 64"
\end{verbatim}\end{tscreen}
Por ello se emplea {\tt\verb+"#9 GXE 64"+} en la línea {\tt Device} ahora.

De forma similar, la línea {\tt Monitor} especifica el nombre de la
sección {\tt Monitor} que se va a utilizar con este servidor. Aquí
{\tt\verb+"CTX 5468 NI"+} es el {\tt Identifier} utilizado en la 
sección {\tt Monitor} arriba descrita.

{\tt\verb+Subsection "Display"+} define varias propiedades del
servidor XFree86 correspondientes a su combinación monitor/tarjeta.
El fichero {\tt XF86Config} describe todas estas opciones en detalle,
pero la mayoría de ellas no son necesarias para conseguir que el 
sistema funcione.

Las opciones que debería conocer son:
\begin{itemize}
\item {\tt Depth}. Define el número de planos de color, es decir, el
número de bits por pixel. Normalmente {\tt Depth} tiene el valor 16. 
Para el servidor {\tt VGA16} debería utilizar una profundidad de 4 y
para el servidor monocromo una profundidad de 1. Si utiliza una tarjeta
de vídeo acelerada con bastante memoria para permitir más bits por
pixel, puede poner {\tt Depth} a 24 o 32. Si tiene problemas con 
profundidades mayores de 16, déjelo otra vez en 16 e intente resolver
el problema más tarde.

\item {\tt Modes}. Esta es la lista de nombres de modos que han sido 
definidos con las directivas {\tt ModeLine} en la sección anterior.
Se emplearon {\tt ModeLine}s llamadas {\tt\verb+"1024x768"+}, 
{\tt\verb+"800x600"+} y {\tt\verb+"640x48"0+}. Por tanto, se utilizó
una línea {\tt Modes} con
\begin{tscreen}\begin{verbatim}
         Modes    "1024x768" "800x600" "640x480"
\end{verbatim}\end{tscreen}
El primer modo mostrado en esta línea es el empleado por omisión
cuando arranca XFree86. Una vez que XFree86 está funcionando, puede
cambiar entre los modos mostrados aquí con las teclas 
\key{Ctrl}-\key{Alt}-\key{Numeric +} y
\key{Ctrl}-\key{Alt}-\key{Numeric -}. 

Lo mejor sería que cuando configure XFree86 utilice modos de vídeo
de resolución más bajos como 640x480, que tienden a funcionar en
la mayoría de los sistemas. Una vez que tenga la configuración 
básica funcionando, puede modificar {\tt XF86Config} para permitir
resoluciones más altas.

\item {\tt Virtual}. Pone el tamaño del escritorio virtual. XFree86
puede utilizar memoria adicional de su tarjeta de vídeo para extender
el tamaño del escritorio. Cuando mueva el puntero del ratón al borde
de la pantalla, el escritorio se desplaza poniendo en primer plano
el espacio adicional. Incluso si ejecuta el servidor con una 
resolución de vídeo como 800x600 puede poner {\tt Virtual} a la 
resolución total permitida por la tarjeta de vídeo. Una tarjeta de
vídeo de 1 megabyte puede permitir 1024x768 con una profundidad de
8 bits por pixel, una tarjeta de 2 megabytes permite 1280x1024 con
una profundidad 8 o 1024x768 con profundidad 16. Por supuesto el
área completa no será visible a la vez, pero puede ser utilizada.

La característica {\tt Virtual} es bastante limitada. Si desea 
utilizar un auténtico escritorio virtual los gestores de ventanas 
como {\tt fvwm} y similares le permitirán tener escritorios 
virtuales grandes tapando ventanas y utilizando otras técnicas, en
vez de almacenar el escritorio entero en memoria de vídeo. Vea las
páginas del manual de {\tt fvwm} para más detalles acerca de esto. 
Muchos sistemas {\linux} utilizan {\tt fvwm} por omisión.

\item {\tt ViewPort}. Si está utilizando la opción {\tt Virtual}
descrita anteriormente, {\tt ViewPort} pone las coordenadas de la
esquina superior izquierda del escritorio virtual cuando se inicia
XFree86. {\tt Virtual 0 0} es un valor utilizado a menudo. Si no
está especificado, el escritorio se centra en la pantalla del 
escritorio virtual, lo que puede no ser lo deseado.
\end{itemize}

Hay muchas otras opciones para esta sección, vea la página del 
manual de {\tt XF86Config} para una descripción exhaustiva. En la
práctica estas opciones no son necesarias para que funcione XFree86
inicialmente. 

\section{Rellenando la información de la tarjeta de vídeo}
\label{sec-video-card-info}

Ahora ya tiene el fichero {\tt XF86Config} listo a excepción de la
información completa de la tarjeta de vídeo. Se utilizará el 
servidor X para comprobar estos datos y añadirlos a {\tt XF86Config}.

En vez de comprobar esta información con el servidor X, los 
valores de {\tt XF86Config} para muchas tarjetas están listados en 
los ficheros {\tt modeDB.txt}, {\tt AccelCards} y {\tt Devices}. 
Estos ficheros se encuentran todos en {\tt /usr/X11R6/lib/X11/doc}. 
Además hay varios ficheros {\tt README} para ciertos chips. Debería
mirar estos ficheros para información de su tarjeta de vídeo y 
utilizarla (clock values, tipo de chip y otras opciones) en el 
fichero {\tt XF86Config}. Si falta algún dato, puede comprobarlo.

En la mayoría de estos ejemplos se prueban configuraciones de una
tarjeta \#9 GXE 64, que utiliza el chip {\tt XF86\_S3}. En primer
lugar determine el chip de vídeo de la tarjeta. Ejecutar 
{\tt SuperProbe} (en {\tt /usr/X11R6/bin}) le dirá estos datos,
pero debe conocer el nombre del chip tal como es conocido por el 
servidor X.

Para ello, ejecute la instrucción
\begin{tscreen}
X -showconfig
\end{tscreen}
Esto le dará los nombres de chips conocidos por el servidor X. (La
página del manual para cada servidor X los lista también.) Por ejemplo
con el servidor acelerado {\tt XF86\_S3} se obtiene:
\begin{tscreen}\begin{verbatim}
XFree86 Version 3.1 / X Window System
(protocol Version 11, revision 0, vendor release 6000)
Operating System: Linux 
Configured drivers:
  S3: accelerated server for S3 graphics adaptors (Patchlevel 0)
      mmio_928, s3_generic
\end{verbatim}\end{tscreen}

Los nombres válidos de los chips para este servidor son {\tt mmio\_928}
y {\tt s3\_generic}. La página del manual de {\tt XF86\_S3} describe
estos chips y las tarjetas de vídeo que las usan. En el caso de la
tarjeta de vídeo \#9 GXE 64, es apropiado {\tt mmio\_928}.

Si no sabe qué chip se está utilizando, el servidor X puede comprobarlo
por usted. Para hace esto, ejecute la instrucción
\begin{tscreen}
\verb!X -probeonly > /tmp/x.out 2>&1 !
\end{tscreen}
si utiliza {\tt bash} como shell. 
Si utiliza {\tt csh}, pruebe:
\begin{tscreen}
\verb!X -probeonly &> /tmp/x.out !
\end{tscreen}

Debería ejecutar esta instrucción mientras el sistema no ha sido
cargado, es decir, mientras ninguna otra actividad ocurre en el 
sistema. Esta instrucción también comprueba dot clocks para su 
tarjeta de vídeo (como se verá más abajo) y la carga del sistema
puede sesgar este cálculo.

La salida de arriba, en {\tt /tmp/x.out} debería contener líneas como:
\begin{tscreen}
\verb!XFree86 Version 3.1 / X Window System !\\
\verb!(protocol Version 11, revision 0, vendor release 6000) !\\
\verb!Operating System: Linux  !\\
\verb!Configured drivers: !\\
\verb!  S3: accelerated server for S3 graphics adaptors (Patchlevel 0) !\\
\verb!      mmio_928, s3_generic !\\
{\em Several lines deleted\ldots} \\
\verb!(--) S3: card type: 386/486 localbus !\\
\verb!(--) S3: chipset:   864 rev. 0 !\\
\verb!(--) S3: chipset driver: mmio_928 !
\end{tscreen}
Aquí se ve que los dos chips válidos para este servidor (en este caso
{\tt XF86\_S3}) son {\tt mmio\_928} y {\tt s3\_generic}. El servidor
comprobó y encontró una tarjeta de vídeo que tiene el chip 
{\tt mmio\_928}.

En la sección {\tt Device} del fichero {\tt XF86Config} añada una línea
{\tt Chipset} que tenga el nombre del chip determinado como arriba. Por
ejemplo,
\begin{tscreen}\begin{verbatim}
Section "Device" 
        # Ya tenemos Identifier aquí ...
        Identifier "#9 GXE 64"  
        # Añada esta línea:
        Chipset "mmio_928"
EndSection
\end{verbatim}\end{tscreen}

Ahora hay que determinar las frecuencias de funcionamiento del reloj
utilizadas por la tarjeta de vídeo. Una frecuencia de funcionamiento
del reloj o dot clock, es simplemente la frecuencia a la que la tarjeta
de vídeo puede enviar pixels al monitor. Como se describió más arriba,
cada resolución de monitor tiene un dot clock asociado a ella. Se
requiere determinar qué dot clocks se ofrecen con la tarjeta de vídeo.

En primer lugar, debería mirar la documentación arriba mencionada y ver
si los dot clocks de la tarjeta están listados allí. Los dot clocks son
generalmente una lista de 8 o 16 valores, todos en MHz. Por ejemplo, si
mira en {\tt modeDB.txt} verá una entrada para la tarjeta Cardinal ET4000
que tiene este aspecto:
\begin{tscreen}\begin{verbatim}
# chip    ram   virtual   clocks                           default-mode  flags
 ET4000   1024  1024 768   25  28  38  36  40  45  32   0  "1024x768"    
\end{verbatim}\end{tscreen}
Los dot clocks para esta tarjeta son 25, 28, 38, 36, 40, 45, 32 y 0 MHz.

En la sección {\tt Devices} del archivo {\tt XF86Config} añada una línea
{\tt Clocks} que contenga la lista de los dot clocks para su tarjeta. Por
ejemplo, para los dot clocks de arriba, añada la línea
\begin{tscreen}\begin{verbatim}
        Clocks 25 28 38 36 40 45 32 0
\end{verbatim}\end{tscreen}
a la sección {\tt Devices} del fichero, después de {\tt Chipset}.

\blackdiamond {\bf El orden de los dot clocks es importante.} No reordene
la lista o elimine duplicados.

Si no puede encontrar los dot clocks asociados con su tarjeta, el 
servidor X puede comprobarlos también. Utilice {\tt X -probeonly} como
se describió arriba. La salida debería contener líneas similares a la
siguiente:
\begin{tscreen}\begin{verbatim}
(--) S3: clocks:  25.18  28.32  38.02  36.15  40.33  45.32  32.00  00.00
\end{verbatim}\end{tscreen}
Se puede añadir una línea {\tt Clocks} que contenga todos estos valores.
Puede utilizar más de una línea {\tt Clocks} en {\tt XF86Config} si 
todos los valores (a veces hay más de 8 valores de clock) no caben en
una única línea. De nuevo asegúrese de poner la lista de clocks en el
orden en que aparecen.

\blackdiamond
Asegúrese de que no hay líneas de {\tt Clocks} (o de que están comentadas)
en la sección {\tt Devices} del fichero cuando utilice {\tt X -probeonly}.
Si hay una línea {\tt Clocks} presente, el servidor no comprueba los
clocks, emplea los valores de {\tt XF86Config}.

Algunas tarjetas de vídeo utilizan un chip de reloj programable. Mire
la página del manual de su servidor X o el fichero {\tt README} de 
XFree86 que describe su tarjeta de vídeo. Esencialmente, el chip 
permite que el servidor X le diga a la tarjeta los dot clocks a usar.
Para tarjetas de vídeo que tienen clock chips, puede ser que no 
encuentre una lista de los dot clocks para la tarjeta en ninguno de 
los ficheros arriba mencionados o que la lista de dot clocks impresa 
cuando utilice {\tt X -probeonly} contenga uno o dos valores discretos
de clock, siendo los demás duplicados o cero. O también puede que el
servidor X sólo facilite un aviso explícito de que la tarjeta de vídeo
tiene un chip de reloj programable como:
\begin{tscreen}\begin{verbatim}
(--) SVGA: cldg5434: Specifying a Clocks line makes no sense for this driver
\end{verbatim}\end{tscreen}
Este ejemplo está sacado de un servidor {\tt XF86\_SVGA} con tarjeta Cirrus
Logic PCI.

Para tarjetas que emplean chips de reloj programables, utilice una 
línea {\tt ClockChip} en vez de una línea de {\tt Clocks} en el fichero
{\tt XF86Config}. {\tt ClockChip} es el nombre del chip de reloj tal
como es usado por la tarjeta de vídeo. Las páginas del manual de cada
servidor los describen. Por ejemplo en el fichero {\tt README.S3}, se
puede observar que varias tarjetas de vídeo S3-864 utilican un chip de 
reloj ``ICD2061A'' y que se debe utilizar la línea
\begin{tscreen}
\verb!        ClockChip "icd2061a" !
\end{tscreen}
en vez de {\tt Clocks} en el fichero {\tt XF86Config}. Esta línea como
la de {\tt Clocks}, va dentro de la sección {\tt Devices}, tras 
{\tt Chipset}.

De modo similar, algunas tarjetas de vídeo exigen que especifique el
tipo de chip RAMDAC en el fichero {\tt XF86Config}. Esto puede hacerse
con una línea {\tt Ramdac}. La página del manual {\tt XF86\_Accel} 
describe esta opción. A menudo el servidor X será capaz de calcular el
RAMDAC correctamente.

Algunas tarjetas de vídeo exigen que especifique varias opciones en la
sección {\tt Devices} de {\tt XF86Config}. Estas opciones se describen
en la página del manual del servidor, así como en varios ficheros como
{\tt README.cirrus} y {\tt README.S3}. Estas opciones se habilitan con
una línea {\tt Option}. Por ejemplo la tarjeta \#9 GXE 64 necesita dos 
opciones: 
\begin{tscreen}
\verb!        Option "number_nine" !\\
\verb!        Option "dac_8_bit" !
\end{tscreen}
Un servidor X puede funcionar sin las líneas {\tt Option}, pero son 
necesarias para lograr el mejor rendimiento de la tarjeta. Hay también
muchas otras opciones que listar aquí, son diferentes para cada tarjeta.
Si debe usar una, las páginas del manual del servidor X y varios ficheros
en /usr/X11R6/lib/X11/doc le dirán cuáles son.

Cuando termine, debería tener una sección {\tt Devices} que se parezca 
a esta:
\begin{tscreen}
\verb!Section "Device"  !\\
\verb!        # !` Sección Device sólo para la \#9 GXE 64 !\\
\verb!        Identifier "#9 GXE 64" !\\
\verb!        Chipset "mmio_928" !\\
\verb!        ClockChip "icd2061a" !\\
\verb!        Option "number_nine" !\\
\verb!        Option "dac_8_bit" !\\
\verb!EndSection !
\end{tscreen}
Hay otras opciones que puede incluir en la entrada {\tt Devices}. Las 
páginas del manual del servidor X ofrecen los detalles exactos.

\section{Ejecutar XFree86.}

Con el fichero {\tt XF86Config} ya configurado, puede arrancar el 
servidor X y darse una vuelta. De nuevo, asegúrese de que el directorio
{\tt /usr/X11R6/bin} está en el path.

La orden para arrancar XFree86 es 
\begin{tscreen}
startx
\end{tscreen}
No es más que una fachada de {\tt xinit}. Inicia el servidor X y 
ejecuta las órdenes del fichero {\tt .xinitrc} de su directorio 
home. {\tt .xinitrc} es un script del shell que contiene las líneas de 
órdenes de los clientes X para ejecutarse cuando arranque el servidor X.
Si este fichero no existe se utiliza por omisión el 
{\tt /usr/X11R6/lib/X11/xinit/xinitrc} del sistema.

Un fichero {\tt .xinitrc} sencillo tiene este aspecto: 
\begin{tscreen}\begin{verbatim}
#!/bin/sh

xterm -fn 7x13bold -geometry 80x32+10+50 &
xterm -fn 9x15bold -geometry 80x34+30-10 &
oclock -geometry 70x70-7+7 &
xsetroot -solid midnightblue &

exec twm 
\end{verbatim}\end{tscreen}
Este script inicia dos clientes {\tt xterm} y un {\tt oclock} y
pone el color de la ventana principal (background) a {\tt midnightblue}.
Inicia {\tt twm}, el gestor de ventanas. {\tt twm} se ejecuta con la
instrucción del shell {\tt exec}. Esto provoca que el proceso {\tt init}
sea reemplazado por {\tt twm}. Después de que el proceso {\tt twm} 
finalice, el servidor X se desconecta. Puede provocar la finalización
de {\tt twm} utilizando el menú principal. Pulse el botón 1 del ratón
en el fondo del escritorio. Se desplegará un menú que le permitirá 
elegir {\tt Exit Twm}.

Asegúrese de que la última instrucción de {\tt .xinitrc} empieza con
{\tt exec} y de que no se lanza en segundo plano (no debe haber ampersand
al final de la línea). Si no, el servidor X se desconectará en cuanto
inicie los programas cliente del fichero {\tt .xinitrc}.

Alternativamente, puede salir de X pulsando a la vez
\key{Ctrl}-\key{Alt}-\key{Backspace}. Esto mata al proceso del 
servidor X directamente, saliendo del sistema de ventanas.

Arriba se muestra una configuración simple del escritorio. 
% Many wonderful
% programs and configurations are available with a bit of work on your
% {\tt .xinitrc} file. For example, the {\tt fvwm} window manager will
% provide a virtual desktop, and you can customize colors, fonts, 
% window sizes and positions, and so forth to your heart's content. 
% Although the X~Window System might appear to be simplistic at first,
% it is extremely powerful once you customize it for yourself.
De nuevo se sugiere que lea un libro como {\em The X~Window System:
A User's Guide\/} (vea Apéndice \ref{app-info}). Las posibles 
variaciones en el uso de X y su configuración son demasiadas para
describirlas aquí. Las páginas de manual de {\tt xterm}, {\tt oclock}
y {\tt twm} le ofrecen pistas acerca de cómo empezar.

\section{Si se lía demasiado el asunto}

A menudo tendrá algún problema con algo que no funcione a la 
perfección la primera vez que inicie el servidor X. Esto está
provocado casi siempre por algo en su fichero {\tt XF86Config}. 
Normalmente los valores de tiempo del monitor o los dot clocks de la
tarjeta gráfica contienen valores incorrectos. Si la pantalla parece
movida o los bordes son borrosos es un indicativo de que los valores
de tiempo del monitor o de los dot clocks son erróneos. Asegúrese 
también de que especificó correctamente el chip de la tarjeta de vídeo
y demás opciones en la sección {\tt Device} de {\tt XF86Config}. 
Cerciórese absolutamente de que está usando el servidor X correcto y
de que {\tt /usr/X11R6/bin/X} es un enlace simbólico a él.

Si algo más falla, intente iniciar X ``desnudo'', es decir con una
orden como:
\begin{tscreen}
\verb!X > /tmp/x.out 2>&1 !
\end{tscreen}
Entonces podrá matar el servidor X (con 
\key{Ctrl}-\key{Alt}-\key{Backspace}) y examinar los contenidos de
{\tt /tmp/x.out}. El servidor X informa de cualquier aviso o error,
por ejemplo, si su tarjeta de vídeo no tiene un dot clock 
correspondiente al modo permitido por su monitor.

El fichero {\tt VideoModes.doc} incluido en la distribución XFree86
contiene muchas ayudas para ajustar los valores de su fichero 
{\tt XF86Config}.

Recuerde que puede utilizar \key{Ctrl}-\key{Alt}-\key{Numeric +} 
y \key{Ctrl}-\key{Alt}-\key{Numeric -} para cambiar entre los modos
de vídeo listados en la línea {\tt Modes} de la sección {\tt Screen}
de {\tt XF86Config}. Si el modo de resolución más alto no tiene 
buen aspecto, intente cambiar a una resolución más baja. Al menos
esto le deja averiguar qué partes de su configuración de X están
funcionando correctamente.

Ajuste también los botones de tamaño vertical y horizontal de su
monitor. En muchos casos, es necesario ajustarlos cuando inicie X.
Por ejemplo si la pantalla parece estar ligeramente desplazada a un
lado, muchas veces puede corregir esto utilizando los controles del
monitor. 

De nuevo, el grupo de noticias de USENET {\tt comp.windows.x.i386unix}
está dedicado a discusiones acerca de XFree86. Sería buena idea leer los
grupos de noticias relacionados con configuración de vídeo. Puede ser
que se encuentre a alguien con el mismo problema.

También hay ficheros {\tt XF86Config} de ejemplo creados por usuarios.
Algunos de ellos están disponibles en el depósito de 
{\tt sunsite.unc.edu} en el directorio {\tt /pub/Linux/X11} y en otros
lugares. También podría encontrar un fichero de configuración que 
alguien haya escrito ya para su hardware.

\index{X~Window~System|)}
