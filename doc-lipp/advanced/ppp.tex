% Linux Installation and Getting Started    -*- TeX -*-
% tcpip.tex
% Copyright (c) 1992, 1993 by Matt Welsh <mdw@sunsite.unc.edu>
%
% This file is freely redistributable, but you must preserve this copyright 
% notice on all copies, and it must be distributed only as part of "{\linux} 
% Installation and Getting Started". This file's use is covered by the 
% copyright for the entire document, in the file "copyright.tex".
%
% Copyright (c) 1998 by Specialized Systems Consultants Inc. 
% <ligs@ssc.com>
%Revisión 1 a 12 de julio de 2002 por Francisco Javier Fernández <serrador@arrakis.es>
%Revision 2 a 12 de julio de 2002 por pakojavi2000 <serrador@arrakis,es>
% Revision 3 a 13 de julio 2002 por pakojavi2000
%Gold
%Revisión 4 Beta1
\section{Redes de Conexión Telefónicas y PPP}%Dial-up networking and PPP.}
\label{sec-ppp}
\markboth{Características avanzadas}{Redes de conexión telefónica y PPP}
\index{PPP}
\index{protocolos!PPP|(}

{\linux} posee una implementación completa de los protocolos de red PPP (punto a punto).
PPP es un mecanismo para crear y ejecutar IP (el protocolo de Internet)
y otros protocolos de red sobre una conexión serie (usando un cable-módem),
sobre un enlace establecido con telnet o un enlace hecho usando 
módems y líneas telefónicas (y por supuesto utilizando líneas
digitales como RDSI). Esta sección cubrirá sólo la configuración de
PPP como cliente, conectando el equipo a través de un módem analógico
a una máquina remota que proporciona el servicio de conexión PPP.

Para una información completa sobre la puesta a punto de PPP bajo {\linux},
recomendamos leer el Linux PPP HOWTO\NT{y el COMO correspondiente disponible en {\insflug}}, 
disponible vía ftp anónimo en {\tt sunsite.unc.edu}. El PPP HOWTO es una guía completa para
la configuración de PPP, incluyendo módem, RDSI y cable-módem bajo {\linux}.
Mucha de la información de esta sección se obtuvo de dicho documento.
La {\em Guía del Administrador de Red Linux}, de {\em tldp-es}, está también disponible. 
Vease apéndice~\ref{app-sources-num} para mayor información sobre estos documentos.

\subsection{Qué se necesita para empezar}

Asumiremos que su núcleo ha sido configurado y compilado para soportar TCP/IP.
Véase la Sección~\ref{sec-sysadm-upgrade} para información acerca de la compilación
del núcleo. Para habilitar la red, se debe contestar ``sí(yes)'' a las preguntas
adecuadas durante el {\tt make config}. Asumiremos también que PPP está compilado
e instalado en el sistema. En cuanto a la versión del núcleo, asumiremos que se
está utilizando {\linux} 1.2.x con la versión 2.1.2 del software PPP o {\linux} 1.3.x/2.0.x
y PPP 2.2.0. Cuando se escribió este libro la última versión estable de PPP disponible
para {\linux} era la PPP-2.2f. Por favor, vea el kerneld mini-HOWTO si planea usar
módulos para cargar PPP en el núcleo. {\em Es muy recomendable usar versiones del
núcleo y PPP que se sepa que son estables conjuntamente}.

Debe leerse también:
\begin{itemize}

\item la documentación que viene con el paquete PPP;
\item las páginas del manual de pppd y chat; (usar {\em man chat} y {\em man pppd} para verlas)
\item La {\linux} Network Administration Guide (NAG);
\item El Net-2/3 HOWTO;
\item Documentación del núcleo de {\linux} instalado en /usr/src/linux/Documentation cuando se instala el código fuente de {\linux};
\item La página de información de configuración del módem, véase Modem Setup Information
(http://www.in.net/info/modems/index.html)
\item Los libros excelentes de {\linux}/Unix publicados por O'Reilly y Asociados. Véase (O'Reilly and Associates On-Line catalog 
({\tt http://www.ora.com/}). Si es nuevo en Unix/Linux, ¡corra (no ande)
a su tienda de libros de informática más cercana e invierta en alguno de ellos
inmediatamente! 
\item La PPP-FAQ mantenida por Al Longyear, disponible en 
({\tt ftp://sunsite.unc.edu/pub/linux/docs/faqs}; ver
Apéndice~\ref{app-ftp}).

Contiene una gran cantidad de información útil en formato pregunta/respuesta
que es muy útil cuando no funciona adecuadamente PPP.
\end{itemize}

\subsection{Una visión de los pasos involucrados}

Hay que dar varios pasos para poner a punto el sistema para usar PPP. Se recomienda
leer atentamente los siguientes pasos antes de intentar establecer una conexión PPP.
Cada uno de estos pasos se discutirá en detalle posteriormente.

\begin{enumerate}
\item Asegurarse de que el soporte para TCP/IP esté compilado en el núcleo.
\item Asegurarse de que el soporte PPP esté compilado en el núcleo de forma estática 
o como un módulo cargable.
\item Asegurarse de que el software PPP está compilado e instalado en el sistema.
\item Asegurarse de que existe un módem configurado e instalado en la computadora
y que se conoce el puerto serie asignado al módem. 
\item Asegurarse que se posee la siguiente información del proveedor de servicio 
de conexión PPP (normalmente un Proveedor de Servicios de Internet o ISP):
\begin{itemize}
\item El número de teléfono que se debe marcar para conectarse al proveedor de
servicio de conexión PPP.
\item Si se está recibiendo una asignación de IP dinámica o estática. En este último caso,
se debe conocer el número IP estático.
\item La dirección IP del servidor de nombres, DNS en sus siglas inglesas; servidor
que se utiliza para identificar las direcciones IP de las máquinas cuando se está
conectado.
\end{itemize}
\end{enumerate}

\subparagraph*{Asegurarse que el núcleo tiene soporte para TCP/IP.}
Las operaciones de {\linux} PPP se dividen en dos: 1) El demonio PPP y el
soporte del núcleo para PPP. Muchas distribuciones proporcionan
soporte para PPP en sus núcleos de instalación predeterminados, pero otras no.
Hay que asegurarse que TCP/IP está compilado en el núcleo. Esto puede hacerse con
la instrucción:
\begin{tscreen}
grep -i ``TCP/IP'' /var/adm/messages 
\end{tscreen}

Si se obtiene una línea similar a

\small
\begin{tscreen} \begin{verbatim}
Jun  8 09:52:08 gemini kernel: Swansea University Computer Society TCP/IP for NET3.019
\end{verbatim} \end{tscreen}
\normalsize
entonces se tiene soporte TCP/IP compilado. Además se debe buscar la información
anterior durante el proceso de arranque de {\linux}. En máquinas muy rápidas, estos
mensajes se desplazan a mucha velocidad. Se puede utilizar \key{May}-\key{RePág}
para desplazar los mensajes de pantalla hacia arriba y leerlos.

\subparagraph*{Asegurarse que el núcleo tiene soporte para PPP.}
Si en el arranque el núcleo proporciona mensajes como

\begin{tscreen}
  PPP Dynamic channel allocation code copyright 1995 Caldera, Inc. \\
  PPP line discipline registered.
\end{tscreen}
entonces es que tiene soporte PPP. También se puede utilizar la orden
\begin{tscreen} 
\# grep -i ``PPP'' /var/adm/messages 
\end{tscreen}
Si se obtiene una línea similar a
\small
\begin{tscreen} \begin{verbatim}
Jun  8 09:52:08 gemini kernel: PPP: version 0.2.7 (4 channels) NEW_TTY_DRIVERS OPTIMIZE_FLAGS
\end{verbatim} \end{tscreen}
\normalsize
significa que el soporte para PPP está presente.

\subparagraph*{Asegurarse que el módem está configurado.}
Hay que estar seguro que el módem está puesto a punto de forma correcta
y que se conoce el puerto serie al que está conectado.

\begin{itemize}
\item DOS com1: = {\linux} /dev/ttyS0  (/dev/cua0)
\item DOS com2: = {\linux} /dev/ttyS1  (/dev/cua1) 
\item etcétera
\end{itemize}

Históricamente {\linux} usaba los dispositivos cua\textsl{x} para enviar
y los dispositivos ttyS\textsl{x} para recibir. Con la versión del 
núcleo 2.0.\textsl{x}, esto cambió y pasaron a utilizarse sólo los
ttyS\textsl{x} tanto para enviar como para recibir. Los dispositivos
cua\textsl{x} desaparecerán en posteriores versiones del núcleo.

Si se está utilizando un módem (externo) de alta velocidad (14.400 baudios
o más), el puerto serie debe ser capaz de manejar y enviar todo lo que 
el módem sea capaz de producir, particularmente cuando el módem
comprime los datos.

Esto requiere utilizar un puerto serie con un UART moderno (Universal
Asynchronous Receiver Transmitter) por ejemplo, un 16550A. Si se está utilizando
una máquina antigua (o un puerto serie antiguo), es posible que el puerto
serie tenga sólo un UART 8250, que producirá problemas importantes al
usarse con módems rápidos.

Se puede usar la instrucción
\begin{tscreen}
\# setserial -a /dev/ttyS\cparam{x}
\end{tscreen}

para que {\linux} informe sobre el tipo de UART que se posee. Si no se tiene
un UART tipo 16550A, invierta en una nueva tarjeta serie.

Es necesario configurar el módem correctamente para PPP, para hacer esto
¡LEA EL MANUAL DEL MÓDEM!. Muchos módems vienen con la
configuración de fábrica que selecciona las opciones necesarias
para utilizar PPP. La configuración específica recomendada (en órdenes
estándar de Hayes) es:

\begin{itemize}
\item Control de flujo por hardware (RTS/CTS) (\&K3 en muchos módems)
\item E1 Eco ON (ver /usr/src/linux/include/linux/serial.h)
(requerido para que chat funcione)
\item Q0 Informar del resultado de operaciones  (requisito para que funcione chat)
\item S0=0 Auto Responder en OFF  (a no ser que se desee que el módem responda el teléfono)
\item \&C1 Detección de portadora en ON sólo después de conectar. 
\item \&S0 Data Set Ready (DSR) siempre ON (
\item (depende) Terminal de datos preparado (Data Terminal Ready)
\end{itemize}

Existe una página que ofrece configuraciones ejemplo para una variedad
creciente de módems en ``Modem setup information''
(http://www.in.net/info/modems/index.html) que puede ayudarle en esto.

Use software de comunicaciones, como minicom o seyon, para obtener
información sobre la configuración del módem y poner los valores requeridos
por PPP. Muchos módems dan su configuración actual en respuesta a AT\&V, pero
debería consultar el manual del módem.

Si se desajusta completamente la configuración, puede obtenerse de nuevo
la configuración de fábrica, utilizando la, normalmente saludable, opción
AT\&F. (En muchos módems he encontrado que la configuración de fábrica
incluye todo lo necesario para PPP, pero debe comprobarse).

Una vez que se ha conseguido la configuración requerida del módem, 
conviene guardarla. Ahora hay que tomar una decisión: guardar estas
características en la memoria no volátil del módem, para que puedan 
ser llamadas por la orden AT apropiada; o bien enviar al módem la
configuración correcta durante el proceso de marcado del PPP.

Si sólo va a utilizarse el módem desde {\linux} para llamar al ISP o
servidor corporativo, lo más sencillo es guardar la configuración 
en la RAM no volátil.

Por otra parte, si el módem va a usarse desde otras aplicaciones o
sistemas operativos, es conveniente pasar la información al módem en
cada llamada. (Además tiene la ventaja que no puede perderse la información
en caso que se borre la memoria del módem).

\subparagraph*{Información del ISP.}
Antes de poder establecer una conexión PPP con un servidor remoto, es 
necesario obtener información del administrador de sistema o del servicio
de atención al cliente  del ISP.

\begin{itemize}
\item El número(s) de teléfono a marcar para el servicio. Si está detrás
de una centralita o similares, el número que da tono para una llamada externa,
este es normalmente el cero (0).

\item ¿Proporciona el servidor direcciones  IP DINÁMICAS o ESTÁTICAS?
        Si el servidor utiliza direcciones IP ESTÁTICAS, entonces es necesario
        conocer el la dirección asignada. Si el ISP proporciona una conexión a una subred
        de direcciones IP válidas, se necesitará saber las direcciones IP que vayan a utilizarse
        y la máscara de red (netmask). 

        Muchos ISPs utilizan direcciones IP DINÁMICAS, Como se mencionó
        anteriormente, esto tiene ciertas implicaciones en los servicios
        que pueden utilizarse.

        Sin embargo, incluso si se utiliza una dirección IP ESTÁTICA, muchos 
        servidores PPP, no permitirán nunca (por razones de seguridad) al
        cliente especificar un número IP, por el riesgo de seguridad. ¡Necesita
        pues esta información!

\item ¿Qué son los números IP del Servidor de Nombres del ISP?

        Debe haber al menos dos, aunque sólo uno es necesario.  

        Puede haber un problema aquí. La configuración del PPP de MS Windows 95, 
        permite que las direcciones DNS pasen al cliente dentro del 
        proceso de la conexión, por lo que su ISP puede comentarle que
        no necesita la dirección IP de los servidores DNS. 

        Para {\linux}, se necesitan las direcciones de al menos un DNS. La
        implementación de {\linux} de PPP, no permite la configuración
        de la dirección IP del DNS dinámicamente en tiempo de conexión y
        posiblemente nunca lo haga.

\item ¿Requiere el servidor el uso de PAP/CHAP?

        Si este es el caso, se necesita conocer el ``id'' y ``secret''
        para usar en la conexión. (Probablemente el nombre de usuario
        y la contraseña proporcionados por el ISP).

\item ¿Lanza automáticamente PPP el servidor o hay que proporcionarle
alguna instrucción para que se lance PPP una vez que hemos conectado? En ese caso, 
¿cual es la instrucción?

\item ¿Es el servidor un sistema Microsoft Windows NT?, y si es así, ¿está
utilizando el sistema PAP/CHAP de MS?. Muchas redes locales utilizan
MS Windows NT.
\end{itemize}

Cada dispositivo conectado a Internet debe tener su propio y único
número IP. Estos se asignan de forma centralizada por una autoridad
designada en cada país. Entonces, para utilizar una conexión PPP, se debe
tener un número IP asignado. Debido al número creciente de máquinas
en Internet (en parte debido al gran número de usuarios PPP), se ha desarrollado
un esquema dinámico para PPP que proporciona un IP al instante cuando 
se establece la conexión PPP. Esto quiere decir que se tendrán diferentes
direcciones IP cada vez que se establezca una conexión PPP con el servidor.
Este es el método más habitual de muchos ISP. El otro método es utilizar
una IP estática. Ústed no puede elegir su propia IP, ésta debe ser
asignada por un organismo estatal encargado de la asignación de direcciones
IP. Esto previene que dos computadores tengan la misma dirección IP, lo que
provocaría problemas en Internet. El proveedor de servicior PPP remoto, debe
decirle si se está utilizando IP estática o dinámica y proporcionarle su
dirección IP en caso de que se utilice el método estático.

Es importante notar que si se utiliza asignación dinámica de IP, es muy muy 
difícil proporcionar algún servicio de Internet permanente como servidores
WWW, servicios de gopher o servidores Chat. Sí se podrán utilizar estos
servicios que estén en otras máquinas, pero no ofrecer dichos servicios
en su máquina sin un gran esfuerzo. Esto queda fuera del alcance de este 
documento.

PAP y CHAP son los dos métodos habituales de autenticación. {\linux} soporta ambos.

\subparagraph*{Probando el módem y el servicio remoto.}

Ahora que se tienen solucionadas la configuración del puerto serie y del
módem, es una buena idea estar seguro de si son las indicadas para conectar
con el ISP y comprobar si se puede realizar la conexión.

Usando un paquete de comunicaciones, como minicom o seyon, ponga a punto la
inicialización del módem requerida por PPP marcando el número del servidor PPP
al que se quiere conectar con una sesión PPP.

(Nota:en este punto NO estamos intentando establecer una conexión PPP, sólo
comprobar si tenemos el número de teléfono correcto y averiguando exactamente
lo que el servidor nos solicita para establecer la conexión y lanzar PPP).

Durante este proceso, o bien se captura (registrándolo en un fichero) el proceso
de ingreso completo, o se escribe exactamente con cuidado (mucho cuidado) todo
lo que el servidor solicite. Es hora de dar el nombre de usuario y la contraseña
(y cualquier otra instrucción que se necesite para establecer la conexión PPP).

Si el servidor usa PAP, no se verá un indicador de órdenes de ingreso, pero puede aparecer
en su lugar la representación en texto del protocolo de control de enlace, como
una cadena de caracteres extraños en la pantalla.

Algunas advertencias:
\begin{itemize}
\item Algunos servidores son muy inteligentes: se puede ingresar usando 
nombre/contraseña mediante texto o usando PAP. Por tanto, si el servidor
ISP usa PAP, pero no se ven los caracteres extraños inmediatamente, no quiere
decir que se esté haciendo algo mal.
\item Algunos servidores solicitan inicicialmente poner algún texto y
entonces comienzan la secuencia PAP. 
\item Algunos servidores PPP son pasivos, es decir simplemente esperan sin
responder hasta que el cliente envía un paquete lcp válido. Si el servidor
PPP al que se va a conectar opera en modo pasivo, ¡nunca verá los caracteres
extraños!
\item Algunos servidores no lanzan PPP hasta que se presiona ENTER, así que
es útil hacerlo si se ha accedido correctamente y no se ven los mensajes extraños.
\end{itemize}
Es útil repetir esta operación al menos dos veces, puesto que algunos
servidores cambian sus indicador de órdeness cada vez que se ingresa. Los dos indicador de órdeness
fundamentales que la configuración debe ser capaz de indentificar cada 
vez que se realice la conexión con:

\begin{itemize}
\item El indicador de órdenes que solicita el nombre de usuario.
\item El indicador de órdenes que solicita la contraseña.
\end{itemize}

Si es necesario dar alguna instrucción para lanzar el PPP en el servidor,
hay que saber cuando el servidor lo solicita.

Si el servidor lanza automáticamente PPP, una vez que se ingresa, aparecerá
en pantalla una cadena de caracteres extraños, esto se debe a que el servidor
envía información a la máquina sobre cómo configurar e iniciar la conexión
PPP.

Puede ser algo como:
\begin{verbatim}
y}#.!}!}!} }8}!}}U}"}\&} } } } }}\& ...}'}"}(}"} .~~y}
\end{verbatim}

En muchos sistemas PPP debe ser explícitamente lanzado en el servidor. Esto
es bastante normal, porque el servidor ha sido configurado para permitir 
ingresos PPP y de shell usando la misma pareja nombre/contraseña. Si este es
el caso, hay que dar la instrucción una vez que se ha ingresado. De nuevo
aparecerán los caracteres extraños en pantalla.

Si no se observan inmediatamente, presione Enter para verlos y lanzar PPP
en el servidor.

En este momento, puede colgarse el módem (normalmente tecleando +++ rápidamente
y entonces introduciendo la instrucción ATH0 una vez que el módem responda
con OK).

Si no puede hacerse funcionar el módem, es conveniente leer el manual del 
módem, las paginas del manual del software de comunicaciones y el Serial HOWTO.
Una vez arreglado, comenzar de nuevo.

\subparagraph*{Utilizando servidores de Internet con direcciones IP dinámicas.}
Si se utilizan direcciones IP dinámicas (y muchos proveedores de servicios lo
harán a menos que pague más por su conexión), se deben conocer las limitaciones
impuestas.

Lo primero, los servicios de salida funcionarán correctamente. Esto es,
se puede enviar correo electrónico usando sendmail (configurándolo correctamente
claro), obtener ficheros de servidores ftp remotos, hacer {\tt finger} a usuarios
en otras máquinas, navegar por la web, etc. 

En particular, se puede responder correo electrónico que se haya bajado
a la máquina mientras se está desconectado. El mensaje permanecerá en la
cola de correo hasta que se establezca de nuevo conexión con el ISP.

Sin embargo, su máquina no está conectada a Internet 24 horas al día, ni tiene
el mismo número IP cada vez que se conecta, por lo que es imposible recibir
directamente correo en dicha máquina y es muy difícil poner a punto un servidor
web o ftp al que sus amigos puedan acceder. En lo que concierne a Internet,
su máquina no existe como una única, permanentemente conectada máquina, puesto
que no posee una dirección IP única.

Si se levanta un WWW (u otro servidor), éste es totalmente desconocido
para cualquier usuario en Internet, salvo que sepan que su máquina
está actualmente conectada y cual es su número IP. Hay varias formas
de obtener esta información, desde llamarlos, enviarles un mensaje de correo
o usar el fichero ``.plan'' en una cuenta shell en su proveedor de 
servicios (suponiendo que el proveedor permita acceso mediante shell y finger).

Para muchos usuarios, esto no es un problema, mucha gente lo que quiere
es enviar y recibir correo electrónico (usando su cuenta en el proveedor
de servicios) y conectarse a servidores WWW, ftp y otros. Si necesita
conexiones a servidores propios en su máquina, necesitará un número
IP estático.

\subparagraph*{Ficheros de configuración de la  conexión PPP.}
\index{PPP!ficheros}
Ahora es necesario entrar como root para crear los directorios y editar los
ficheros necesarios para poner a punto PPP. PPP usa una serie de ficheros
para realizar y configurar una conexión PPP. Difieren en el nombre
y la ubicación entre PPP 2.1.2 y 2.2.

Para PPP 2.1.2 los ficheros son:
\small
\begin{center}
\begin{tabular}{lll}
/usr/sbin/pppd          & \# el binario PPP \\
/usr/sbin/ppp-on        & \# el guión de marcado/conexión \\
/usr/sbin/ppp-off       & \# el guión de desconexión \\
/etc/ppp/options        & \# las opciones que pppd usa para todas las conexiones \\
/etc/ppp/options.tty{\em XX}  & \# las opciones específicas para una conexión en este puerto \\
\end{tabular}
\end{center}
\normalsize
\rm

Para PPP 2.2 los ficheros son:
\small
\begin{center}
\begin{tabular}{lll}
/usr/sbin/pppd                & \# el binario PPP   \\
/etc/ppp/scripts/ppp-on       & \# el guión de marcado/conexión \\
/etc/ppp/scripts/ppp-on-dialer& \# parte 1 del guión de marcado  \\
/etc/ppp/scripts/ppp-off      & \# el guión de chat  \\
/etc/ppp/options              & \# las opciones que pppd usa para todas las conexiones  \\
/etc/ppp/options.tty{\em XX}    & \# las opciones específicas para una conexión en este puerto \\
\end{tabular}
\end{center}
\normalsize
\rm

Los usuarios de Red Hat {\linux} deben notar que la instalación estándar de
Red Hat 4.X pone estos guiones en /usr/doc/PPP-2.2.0f-2/scripts.

En el directorio {\tt /etc} debe haber un directorio ppp:
\begin{verbatim}
drwxrwxr-x   2 root     root         1024 Oct  9 11:01 ppp
\end{verbatim}

Si no existiese, debe crearse con estos propietarios y permisos.

Si el directorio existiese ya, debe contener un fichero patrón de opciones
llamado options.tpl. Este fichero se incluye más abajo en caso de que fuese 
necesario.

Imprímalo ya que contiene explicaciones de casi todas las opciones de
PPP (es útil leerlo a la vez que la página del manual de pppd). Mientras
puede utilizaarse este fichero como base para el fichero /etc/ppp/options,
es posiblemente mejor crear su propio fichero, que no incluya todos los
comentarios del fichero patrón, éste será más corto y fácil de leer y
mantener.

Algunas distribuciones de PPP no incluyen el fichero options.tpl. Debe
examinarse el documento PPP-HOWTO de la versión completa.
  
\subparagraph*{¿Qué opciones debo usar?}

Bueno, como en todo eso depende. Las opciones especificadas aquí
deben funcionar en muchos servidores.

Sin embargo, si no funcionase, LEA EL FICHERO PATRÓN (/etc/ppp/options.tpl)
y las páginas del manual de pppd y pregunte a los administradores/usuarios
que manejan el servidor al cual quiere conectarse.

Hay que fijarse que los guiones de conexión presentados aquí utilizan
algunas opciones de la línea de instrucciones para hacer las cosas un poco 
más fáciles de cambiar.

\small
\begin{tscreen}
\begin{verbatim}
# /etc/ppp/options (sin soporte PAP/CHAP)
#
# Evitar que pppd se bifurque al segundo plano 
# -detach
#
# utilizar las líneas de control del módem
modem
# usar bloqueos uupc para asegurarse del acceso exclusivo al dispositivo 
# serie
lock
# usar control de flujo por hardware
crtscts
# crear una ruta predeterminada para esta conexión en la tabla de 
# enrutamiento
defaultroute
# No seleccionar ninguna secuencia de control ''escapada''
asyncmap 0
# utilizar un paquete de tamaño máximo de transmisión de 552 bytes
mtu 552
# utilizar un paquete de tamaño máximo de recepción de 552 bytes
mru 552
#
#-------Fin del ejemplo /etc/ppp/options (sin soporte PAP/CHAP)--------------
\end{verbatim}
\end{tscreen}
\normalsize
\rm

\subparagraph*{Configurando la conexión PPP manualmente.}

Una vez que se han creado los ficheros /etc/ppp/options y /etc/resolv.conf
(y, si es necesario, el fichero /etc/ppp/pap|chap-secrets), se pueden probar
las opciones estableciendo manualmente una conexión PPP. Una vez que 
funcione la conexión manual, se automatizará el proceso.

Para hacer esto, el software de comunicaciones debe ser capaz de apagar
SIN reiniciar el módem. Minicom puede hacerlo con la sentencia 
\key{Control}-\key{A} \key{Q} 

\begin{itemize}

\item Estar seguro de entrar como root.

\item   
Lanzar el software de comunicaciones (como minicom), marcar el número
del servidor y entrar. Si necesita escribir una orden para lanzar el 
PPP en el servidor, hágalo. Ahora verá los caracteres extraños que 
vimos antes. 

\item Si se utiliza PAP o CHAP, entonces la simple conexión con el
sistema remoto debe lanzar PPP en el servidor remoto y se observarán los
caracteres extraños en pantalla sin ingresar (esto puede no funcionar en todos 
los servidores, puede funcionar si se presiona Enter).

\item 
Ahora quite el software de comunicaciones sin apagar el módem y teclee
como root:
\begin{tscreen}
\# pppd -d /dev/ttyS0 38400 \& 
\end{tscreen}
Poniendo, por supuesto, el nombre del dispositivo al que esté conectado
el módem.

La opción -d permite la depuración, la conversación de comienzo de la 
conexión PPP será registrada en los ficheros de registro de su sistema, 
lo cual es muy útil para rastrear problemas más tarde.

\item 
Las luces del módem deben parpadear si la conexión PPP se establece.
Para que se establezca la conexión son necesarios unos instantes.

\end{itemize}

En este momento se puede mirar la interfaz PPP, con la instrucción:
\begin{tscreen}
\# ifconfig
\end{tscreen}

Además de algún dispositivo Ethernet y loop back de los que se disponga,
debe aparecer algo como:
\begin{verbatim}
  PPP0     Link encap:Point-Point Protocol
           inet addr:10.144.153.104  P-t-P:10.144.153.51 Mask:255.255.255.0
           UP POINTOPOINT RUNNING  MTU:552  Metric:1
           RX packets:0 errors:0 dropped:0 overruns:0
           TX packets:0 errors:0 dropped:0 overruns:0
\end{verbatim}
Donde
\begin{itemize}
\item inet addr:10.144.153.10 es el número IP del final del enlace.
\item P-t-P:10.144.153.5 es el número IP del SERVIDOR.
\end{itemize}

(Ifconfig no dará estas direccionesIP, sino las usados por su servidor PPP).
Nota: ifconfig también dice que la conexión está hecha y funcionando.

Ahora debe ser posible ver una ruta con el servidor (y más allá). Para hacer esto
se utiliza la instrucción:

\begin{tscreen} 
\# route -n 
\end{tscreen}

Debe obtenerse algo como:
\begin{tscreen} \begin{verbatim}
  Kernel routing table
  Destination     Gateway         Genmask         Flags MSS    Window Use Iface
  10.144.153.3    *               255.255.255.255 UH    1500   0        1 ppp0
  127.0.0.0       *               255.0.0.0       U     3584   0       11 lo
  10.0.0.0        *               255.0.0.0       U     1500   0       35 eth0
  default         10.144.153.3    *               UG    1500   0        5 ppp0
\end{verbatim} \end{tscreen}

Hay que notar que existen DOS entradas apuntando a la interfaz PPP.

La primera es una ruta al HOST (indicada por la etiqueta H) y permite
ver el host al que se conecta la máquina, pero no más.

La segunda es la ruta predeterminada (establecida con la opción defaultroute
dada a pppd). Esta es la ruta que le dice a la máquina donde mandar
los paquetes NO destinados a el/los ethernet(s) local/es, para los que
tenemos rutas de red específicas. El servidor PPP es pues el responsable
de encaminar nuestros paquetes en Internet y captar los paquetes de vuelta
y hacerlos llegar a nuestra máquina.

Si no existe una tabla de rutas con dos entradas, algo está mal. En particular
si el syslog muestra un mensaje diciendo que pppd no está reemplazando 
una ruta existente por omisión, entonces existe una ruta predeterminada
apuntando al interfaz Ethernet, que debe ser reemplazada por una ruta
de red específica: ¡SÓLO SE PUEDE TENER  UNA RUTA PREDETERMINADA!

Debe explorarse el sistema de ficheros de inicialización para encontrar
dónde se está añadiendo esta ruta predeterminada debe contener una instrucción
con route add default ...). Hay que cambiar esto por algo como route add
net ... 

Ahora se puede probar la conexión haciendo 'ping' al número del servidor
que se obtuvo con ifconfig, por ejemplo:

\begin{tscreen}
\# ping 10.144.153.51 
\end{tscreen}

Debe recibirse una respuesta como:

\begin{tscreen} \begin{verbatim}
  PING 10.144.153.51 (10.144.153.51): 56 data bytes
  64 bytes from 10.144.153.51: icmp_seq=0 ttl=255 time=328.3 ms
  64 bytes from 10.144.153.51: icmp_seq=1 ttl=255 time=190.5 ms
  64 bytes from 10.144.153.51: icmp_seq=2 ttl=255 time=187.5 ms
  64 bytes from 10.144.153.51: icmp_seq=3 ttl=255 time=170.7 ms
\end{verbatim} \end{tscreen}

Esta lista seguirá generándose sin límite, para pararla presionar
\key{Control}-\key{C}, al punto que se obtendrá la información:

\begin{tscreen} \begin{verbatim}
  --- 10.144.153.51 ping statistics ---
  4 packets transmitted, 4 packets received, 0% packet loss
  round-trip min/avg/max = 170.7/219.2/328.3 ms
\end{verbatim} \end{tscreen}

Ahora se puede intentar hacer ping a un host por su nombre (no al servidor
de PPP) sino a otro que se conozca el nombre y se piense que debe estar 
funcionando. Por ejemplo:

\begin{tscreen}
\# ping sunsite.unc.edu 
\end{tscreen}

En este momento debe haber una pequeña pausa, puesto que {\linux} está obteniendo
el número IP del servidor DNS especificado en /etc/resolv.conf, así que no hay
 que preocuparse (aunque las luces del módem deben parpadear). En breves instantes
debe recibirse una respuesta como:

\begin{tscreen} \begin{verbatim}
   PING sunsite.unc.edu (152.2.254.81): 56 data bytes
  64 bytes from 152.2.254.81: icmp_seq=0 ttl=254 time=190.1 ms
  64 bytes from 152.2.254.81: icmp_seq=1 ttl=254 time=180.6 ms
  64 bytes from 152.2.254.81: icmp_seq=2 ttl=254 time=169.8 ms
  64 bytes from 152.2.254.81: icmp_seq=3 ttl=254 time=170.6 ms
  64 bytes from 152.2.254.81: icmp_seq=4 ttl=254 time=170.6 ms
\end{verbatim} \end{tscreen}

Una vez más, se para la salida tecleando \key{Control}-\key{C} y
se obtienen las estadísticas...

\begin{tscreen} \begin{verbatim}
  --- sunsite.unc.edu ping statistics ---
  5 packets transmitted, 5 packets received, 0% packet loss 
  round-trip min/avg/max = 169.8/176.3/190.1 ms
\end{verbatim} \end{tscreen}

Si no se obtiene respuesta, debe hacerse ping a la dirección IP del
servidor DNS del ISP. Si dicho servidor responde al ping, entonces
debe existir un problema en /etc/resolv.conf. 

Si no funciona, existe un problema con la ruta o el ISP tiene
problemas al devolver los paquetes. Debe comprobarse la tabla
de rutas como se enseñó anteriormente y si todo está correcto debe 
contactarse con el ISP. Una buena comprobación del ISP es usar
otro sistema operativo para conectarse. Si se puede ir más allá
del ISP, el problema está aquí.

Si todo funciona, cerrar la conexión tecleando:

\begin{tscreen}
\# ppp-off 
\end{tscreen}

Tras una breve pausa, el módem debe colgar.

Si esto no funciona, puede o apagar el módem o lanzar el software
de comunicaciones e interrumpir el módem con +++ y entonces colgar
con ATH0 cuando reciba el OK del módem.

Debe además limpiar el fichero de bloqueo creado por pppd, escribiendo:
\begin{tscreen}
\# rm -f /var/lock/LCK..ttyS{\em x} 
\end{tscreen}

\subsection{Creando los guiones de conexión}

Se puede seguir realizando la conexión manualmente como hemos visto hasta 
ahora, pero es mucho más elegante hacer algunos guiones que lo
hagan automáticamente.


Un conjunto de guiones automatiza la conexión y lanza PPP, así que
todo lo que debe hacerse (como root o miembro del grupo PPP) es escribir
una instrucción para establecer la conexión.

Si el ISP no exige usar PAP/CHAP, éstos son los guiones:

Si el paquete PPP está instalado correctamente, existen dos ficheros
ejemplo. Para PPP 2.1.2 están en /usr/sbin y para PPP 2.2 en /etc/ppp/scripts.
Se llaman:

para PPP-2.1.2
\begin{verbatim}
       ppp-on
       ppp-off
\end{verbatim}

y para PPP-2.2
\begin{verbatim}
       ppp-off
       ppp-on
       ppp-on-dialer
\end{verbatim}

Ahora bien, si se está utilizando PPP 2.1.2, es realmente urgente borrar
los ficheros ejemplo. Hay problemas potenciales con ellos, y no diga que
funcionan bien, yo los he usado durante mucho tiempo también (¡y los recomendé
en la primera versión de este HOWTO!).

Para el beneficio de los usuarios de PPP 2.1.2, existen mejores versiones 
patrón, tomadas de la distribución PPP 2.2. Yo sugiero copiar y utilizar
estos guiones en vez de los antiguos de PPP-2.1.2.


El guión ppp-on:


Este es el primero del PAR de guiones que realmente realizan la conexión.

\small
\begin{tscreen} \begin{verbatim}
  #!/bin/sh
  #
  # Guión para iniciar una conexión PPP. Esta es la primera parte del
  # par de guiones. Este no es un par seguro de guiones porque los códigos
  # son visibles con la ordem 'ps'. Sin embargo  es simple.
  #
  # Éstos son los parámetros. Cámbielos como los necesite.
  TELEPHONE=555-1212      # El número de telefono de la conexión.
  ACCOUNT=george          # El número de cuenta para entrar(en 'George Burns')
  PASSWORD=gracie         # La contraseña para esta cuenta(y 'Gracie Allen')
  LOCAL_IP=0.0.0.0        # La dirección local si se sabe. Dinámica = 0.0.0.0
  REMOTE_IP=0.0.0.0       # La dirección remota si se desea. Normalmente 0.0.0.0
  NETMASK=255.255.255.0   # La máscara de red apropiada.
  #
  # Se exportan para hacerlos disponibles a  'ppp-on-dialer'
  export TELEPHONE ACCOUNT PASSWORD
  #
  # Éste es el lugar donde se encuentra el guión que marca el teléfono.
  # Por favor, use el nombre absoluto porque la variable \$PATH no se usa
  # en la opción de conexión.  (Hacer esto en una cuenta de 'root' sería
  # un agujero de seguridad, así que no pregunte.)
  #
  DIALER_SCRIPT=/etc/ppp/ppp-on-dialer
  #
  # Iniciar la conexión
  #
  #
  exec /usr/sbin/pppd debug /dev/ttySx 38400 \
          \$LOCAL_IP:\$REMOTE_IP \
          connect \$DIALER_SCRIPT
\end{verbatim}  \end{tscreen}
\normalsize
\rm


El guión ppp-on-dialer:


\small
\begin{tscreen} \begin{verbatim}
  #!/bin/sh
  #
  # Esta es la parte 2 del guión ppp-on. Realizará el protocolo de conexión
  # para la conexión deseada.
  #
  /usr/sbin/chat -v                                       \
          TIMEOUT         3                               \
          ABORT           '\nBUSY\r'                      \
          ABORT           '\nNO ANSWER\r'                 \
          ABORT           '\nRINGING\r\n\r\nRINGING\r'    \
          ''              \rAT                            \
          'OK-+++\c-OK'   ATH0                            \
          TIMEOUT         30                              \
          OK              ATDT\$TELEPHONE                 \
          CONNECT         ''                              \
          ogin:--ogin:    \$ACCOUNT                       \
          assword:        \$PASSWORD
\end{verbatim} \end{tscreen}
\normalsize
\rm


Para ppp-2.2, el guión ppp-off es como:


\small
\begin{tscreen} \begin{verbatim} 
  #!/bin/sh
  ######################################################################
  #
  # Determina el dispositivo a ser eliminado.
  #
  if [ "\$1" = "" ]; then
          DEVICE=ppp0
  else
          DEVICE=\$1
  fi

  ######################################################################
  #
  # Si el fichero pid de ppp0 está presente, entonces el programa está ejecutándose. Páralo.
  if [ -r /var/run/\$DEVICE.pid ]; then
          kill -INT `cat /var/run/\$DEVICE.pid`
  #
  # Si kill no funcionó entonces no hay ningún proceso ejecutándose para ése
  # pid. Puede significar también que un fichero cerrojo se ha dejado suelto. Quizá desee borrar
  # el fichero cerrojo al mismo tiempo.
          if [ ! "\$?" = "0" ]; then
                  rm -f /var/run/\$DEVICE.pid
                  echo "ERROR: fichero de bloqueo ya quitado"
                  exit 1
          fi
  #
  # Éxito. Dejar que  pppd limpie su propia porquería.
          echo "Enlace PPP a \$DEVICE finalizado."
          exit 0
  fi
  #
  # El proceso PPP no está corriendo para ppp0
  echo "ERROR: El enlace PPP no está activo en \$DEVICE"
  exit 1
\end{verbatim} \end{tscreen}
\normalsize
\rm

\subsection{Editando los guiones de inicio de PPP suministrados}
Como los guiones nuevos vienen separados en dos, los editaremos
por turnos.

\subparagraph*{El guión {\tt ppp-on}.}


Debe editarse el guión ppp-on para poner SU nombre de usuario en
su ISP, SU contraseña (password) en su ISP y el número de teléfono del ISP.

Cada una de las líneas como TELEPHONE= realmente actualizan
variables del entorno que contienen la información situada
a la derecha del '=' (sin contar los comentarios por supuesto).
Por tanto hay que editar cada una de estas líneas y comprobar si es 
correcta para su ISP y conexión. 

También, como se está configurando el número IP (si es necesario)
en el fichero /etc/ppp/options, BÓRRESE la línea que incluye:

\begin{verbatim}
\$LOCAL_IP:\$REMOTE_IP \
\end{verbatim}

Además, hay que asegurarse que la variable de entrono DIALER\_SCRIPT
apunta al path completo y nombre del guión de marcado que realmente
se va a usar. Por tanto si se ha movido o renombrado el guión, hay 
que asegurarse de corregir la línea correspondiente del guión ppp-on.

\subparagraph*{El guión {\tt ppp-on-dialer}.}


Este es el segundo guión y es el que realmente establece la conexión PPP.

Nota: un guión chat está escrito normalmente en una sola línea, los separadores
\{\} se utilizan para permitir la continuación de la línea en varias líneas
distintas y ser más legibles por las personas, pero no forman parte del
guión.

Sin embargo, es muy útil verlo en detalle, para entender qué es lo que 
realmente (supuestamente) está pasando.

Un guión chat es una secuencia de parejas de ``cadenas de espera'' y ``cadenas
de envío''. En particular, nótese que SIEMPRE se espera alguna respuesta después de
enviar algo.

Si tenemos que enviar algo SIN recibir nada antes, debemos utilizar
una cadena de espera vacía (indicada por ``'') y de forma similar 
para cuando esperamos recibir algo sin mandar nada. También, si una cadena
contiene varias palabras, (por ejemplo NO CARRIER), se debe entrecomillar,
para que chat lo entienda como una sola entidad.

La línea chat en nuestro ejemplo es:
\begin{tscreen}
  exec /usr/sbin/chat -v
\end{tscreen}

Invoca a chat, la opción -v le dice a chat que copie TODAS sus E/S en los
registros del sistema (normalmente /var/log/messages). Una vez que esté 
satisfecho del funcionamiento del guión de chat, se puede editar esta línea
y quitar el -v para evitar registros innecesarios en el syslog.

\begin{tscreen} \begin{verbatim}
  TIMEOUT         3
\end{verbatim} \end{tscreen}

Establece el tiempo máximo de respuesta del módem en 3 segundos. Debe aumentarse
a 5 ó 10 segundos si se utiliza un módem realmente lento.

\begin{tscreen} \begin{verbatim}
  ABORT           '\nBUSY\r'
\end{verbatim} \end{tscreen}

Si la cadena BUSY (ocupado) es recibida, se aborta la operación.

\begin{tscreen} \begin{verbatim}
  ABORT           '\nNO ANSWER\r'
\end{verbatim} \end{tscreen}

Si la cadena NO ANSWER (sin respuesta) es recibida, se aborta la operación.

\begin{tscreen} \begin{verbatim}
  ABORT           '\nRINGING\r\n\r\nRINGING\r'
\end{verbatim} \end{tscreen}

Si la cadena (repetida) RINGING (llamando) es recibida, se aborta la operación.
¡Esto es porque alguien está llamando por teléfono!

\begin{tscreen} \begin{verbatim}
  "              \rAT
\end{verbatim} \end{tscreen}

No se espera respuesta del módem y se envía la cadena AT

\begin{tscreen} \begin{verbatim}
  OK-+++\c-OK   ATH0
\end{verbatim} \end{tscreen}

Esta es un poco más complicada y usa algunas de las capacidades de chat
para recuperar errores.

Lo que dice es: Espera OK, si NO es recibido (porque el módem no está en modo
de recibir órdenes), manda +++ (la cadena estándar para un módem compatible Hayes
que pone el módem en modo de recibir órdenes) y espera recibir OK. Entonces
se envía ATH0 (la cadena para colgar el módem). Esto permite al guión protegerse
de la situación en la que el módem está encendido pero no da respuesta. 

\begin{tscreen} \begin{verbatim}
  TIMEOUT         30
\end{verbatim} \end{tscreen}

Establece 30 segundos como el tiempo necesario para volver a lanzar el guión.
Si tiene problemas porque se aborta el guión de chat por el este tiempo 
muerto, auméntelo a 45 segundos o más.

\begin{tscreen} \begin{verbatim}
  OK              ATDT\$TELEPHONE
\end{verbatim} \end{tscreen}

Espera el OK ( la respuesta del módem a la orden ATH0) y marca el número
de teléfono al que queremos llamar.

\begin{tscreen} \begin{verbatim}
  CONNECT         ''
\end{verbatim} \end{tscreen}

Espera CONNECT (que nuestro módem envía cuando el módem remoto contesta)
y no envía nada.

\begin{tscreen} \begin{verbatim}
  ogin:--ogin:    \$ACCOUNT
\end{verbatim} \end{tscreen}

De nuevo, tenemos un problema. Esperamos el indicador de órdenes de registro (...ogin:)
pero no hemos recibido nada por el tiempo muerto, entonces enviamos de
nuevo respuesta y esperamos el indicador de órdenes de registro. Cuando se recibe el
indicador de órdenes, enviamos el nombre de usuario (almacenado en la variable de
entorno \$ACCOUNT). \NT{En la mayoría de los ISP's de España, esto no es necesario y debe comentarse, debido a que se usa autentificación PAP.
Ver sección PAP.}

\begin{tscreen} \begin{verbatim}
  assword:        \$PASSWORD
\end{verbatim} \end{tscreen}

Esperamos que se solicite la contraseña y se la enviamos (de nuevo almacenada
en una variable de entorno).

Este guión de chat tiene una capacidad razonable de recuperarse de errores.
Chat tiene muchas más características que las mostardas aquí. Para más
información consulte la página del manual de chat (man 8 chat)\NT{En la mayoría de los ISP de España,
esto no es necesario y debe comentarse. Ver sección PAP más adelante.}.

\subsection{Iniciando PPP en el servidor}

Mientras que el guión {\tt ppp-on-dialer} es bueno para servidores
que lanzan el pppd del servidor cuando se ingresa, algunos servidores
requieren que se lance explícitamente.

Si es necesario incluir una instrucción para lanzar PPP en el servidor,
hay que editar el guión ppp-on-dialer.

Al final del guión (tras la línea con la contraseña) hay que añadir
una pareja adicional de ``cadenas de espera y envío'', que tienen un 
significado especial en el shell Bourne como:

%At the END of the script (after the password line) add an additional
%expect send pair---this one would look for your login indicador de órdenes (beware
%of characters that have a special meaning in the Bourne shell, like
\begin{tscreen}\begin{verbatim}
\$[]
\end{verbatim}\end{tscreen}

Una vez que chat encuentra el indicador de órdenes de shell, escribe la instrucción
necesaria para lanzar PPP en el servidor PPP del ISP.

En un caso particular, el servidor utiliza el indicador estándar del 
intérprete de órdenes Bash de {\linux}:

\begin{tscreen}
[hartr@kepler hartr]\$ 
\end{tscreen}
que necesita la respuesta
\begin{tscreen} 
\#   PPP 
\end{tscreen}
para lanzar PPP en el servidor.

Es una buena idea permitir un margen de error aquí, para lo cual utilizar
\begin{tscreen} 
hartr--hartr    ppp
\end{tscreen}
Que dice, si no recibimos el indicador de órdenes en el tiempo muerto, enviar un 
retorno de carro y esperar el indicador de órdenes de nuevo.

Una vez que se recibe el indicador de órdenes, se envía la cadena PPP.



\blackdiamond Nota: No olvidar poner un {\bs} al final de la línea previa, para que
chat piense que el guión es una sola línea.

Lamentablemente, algunos servidores producen un conjunto de indicador de órdenes muy 
diferentes. Es necesario conectarse varias veces usando minicom para 
entender que es lo que hace nuestro servidor y construir las cadenas
de espera necesarias.

\subsection{Si el servidor usa PAP}

Si el servidor al que se quiere conectar utiliza autenticación PAP o CHAP, 
será necesario trabajar un poco más
%Nota del revisor 1
%He añadido esta nota por los problemas que tiene la gente al usar PAP
\NT{Si su servidor usa PAP, y los intentos de conexión fallan mire si
en el guión de chat no ha comentado las líneas correspondientes al login y password. Si no lo están, coméntelas
anteponiendo un \# delante de las dos líneas.
La autentificación PAP requiere que no se usen esas líneas ya que la autentificación se hace mediante 
las opciones name nombre@servidor (en pppd) y el fichero pap-secrets.
Vea {\em Un guión para conexiones autentificadas PAP/CHAP} para ver el 
aspecto del guión de conexión de chat más adelante en este mismo texto.}
\rm.

Al fichero de opciones anterior, hay que añadir las líneas:

\small
\begin{tscreen}
\begin{verbatim}
  #
  # fuerza pppd a  usar el nombre de usuario de tu ISP como nombre de host
  # durante el proceso de autenticación
  # 
  name <nombre de usuario>       # se tiene que editar esta línea.
  #
  #
  # En <nombre de usuario>, hay que poner el nombre con el que te identificas al
  # servidor, es decir, en mi caso  reemplazo <nombre de usuario> por
  # anonimo@servidor
  #
  # Si se está ejecutando un *servidor* PPP y se necesita forzar  PAP o CHAP
  # descomentar la línea apropiada de las siguientes. NO USE ESTO si es un cliente
  # conectándose a un servidor PPP (incluso si usa PAP o CHAP) por que esto haría
  # que el SERVIDOR se autentique a sí mismo a tu máquina (lo que ciertamente
  # no puede hacerse----y el enlace fallará).
  #+chap
  #+pap
  #
  # Si usa secretos ENCRIPTADOS en el fichero  /etc/PPP/pap-secrets
  # entonces descomente la siguiente línea.
  # Nota: esto NO es lo mismo que usar contraseñas encriptadas como en MS, ya que
  # existe una opción llamada así en el acceso telefónico de MS (RAS) en Windows NT.
  #+papcrypt
\end{verbatim}
\end{tscreen}
\normalsize



\subsection*{Uso de MSCHAP}

Microsoft Windows NT RAS puede configurarse para utilizar una variante de CHAP 
(Challenge/Handshake Authentication Protocol). En las fuentes de PPP, puede 
encontrarse un fichero llamado README.MSCHAP80, que informa sobre esto.
Puede averiguarse si el servidor solicita autenticación mediante
este protocolo, habilitando la depuración en pppd. Si el servidor
está utilizando autenticación MS CHAP, aparecerán líneas como:

\begin{tscreen}
\begin{verbatim}
rcvd [LCP ConfReq id=0x2 <asyncmap 0x0> <auth chap 80> <magic 0x46a3>]
\end{verbatim}
\end{tscreen}

Donde la clave está en {\tt auth chap 80.}

Para utilizar MS CHAP, hay que recompilar pppd con soporte para ello. Vea
las instrucciones de README.MSCHAP80 en las fuentes de PPP con las instrucciones
de compilación con esta variante.

Si está usando autenticación pap o chap, debe crearse el fichero ``secrets''. Estos
son 1) /etc/ppp/pap-secrets y 2) /etc/ppp/chap-secrets.
\NT{Sólo es necesario uno de ellos dependiendo de si la autenticación es chap o pap.}
Deben pertenecer al usuario root, grupo root y tener permisos 740 por seguridad.

%They must be owned by user root, group root and have file permissions 740 for 
%security. The first point to note about PAP and CHAP is that they are designed
%to authenticate computer systems not users. In other words, once your 
%computer has made its PPP connection to the server, ANY user on your system 
%can use that connection---not just you. 


El primer punto que hay que decir acerca de PAP y CHAP es que están diseñados 
para autentificar máquinas y no usuarios. En otras palabras, una vez que la máquina
ha realizado su conexión PPP al servidor, CUALQUIER usuario en el sistema
puede usar esa conexión---no sólo usted.

%PAP can (and for CHAP DOES) require bidirectional authentication---that is a 
%valid name and secret is required on each computer for the other computer 
%involved. However, this is NOT the way most PPP servers offering dial up PPP 
%PAP-authenticated connections operate.

PAP puede (y para CHAP LO HACE) requerir autenticación bidireccional---ésto es
un nombre y contraseña válidos se requieren en cada computadora para la correspondiente
computadora involucrada. Sin embargo, ésta no es la manera en la que la mayoría de
los servidores PPP que ofrecen conexiones telefónicas PPP mediante autenticación PAP
operan.


%That being said, your ISP will probably have given you a user name and 
%password to allow you to connect to their system and thence the Internet. 
%Your ISP is not interested in your computer's name at all, so you will 
%probably need to use the user name at your ISP as the name for your computer.
%This is done using the name user name option to pppd. So, if you are to use 
%the user name given you by your ISP, add the line

O lo que es lo mismo, su ISP probablemente le habrá dado un nombre de usuario
y contraseña para permitirle conectar a sus sistemas y de allí a Internet.
Su ISP no está interesado para nada en el nombre de su computadora. 
Esto se consigue utilizando el nombre de usuario que se pone en la opción
name que se le pasa a pppd. Así que si se quiere usar el nombre de usuario
que le ha dado el ISP, añada la línea

\begin{verbatim}
name nombre nombre_usuario_en_el_ISP
\end{verbatim}

%ur /etc/ppp/options file.
al fichero /etc/ppp/options.

%Technically, you should really use {\tt user our\_user name\_at\_your\_ISP} for
%PAP, but pppd is sufficiently intelligent to interpret name as user if it is 
%required to use PAP. The advantage of using the name option is that this is 
%also valid for CHAP.

Técnicamente, se debería usar  {\tt user usuario\_local nombre\_en\_el\_ISP} para
PAP, pero pppd es suficientemente inteligente para interpretar el nombre como usuario  
si se requiere para usar PAP.
La ventaja de usar la opción ``name'' es que también es válida para CHAP.

%As PAP is for authenticating computers, technically you need also to specify 
%a remote computer name. However, as most people only have one ISP, you can 
%use a wild card (*) for the remote host name in the secrets file.

Como PAP es para autenticar computadoras, técnicamente se necesita especificar también
un nombre en la computadora remota. Sin embargo, como mucha gente sólo tiene un único ISP, se
puede usar un comodín (*) para el host remoto en el fichero ``secrets''.

%The {\tt /etc/PPP/pap-secrets} file looks like
El fichero {\tt /etc/ppp/pap-secrets} se asemeja a

\begin{verbatim} 
  # Contraseñas para autenticación usando PAP
  # cliente     servidor    secreto    direcciones IP locales aceptables
\end{verbatim}  

%  The four fields are white space delimited and the last one can be
%  blank (which is what you want for a dynamic and probably static IP
%  allocation from your ISP).

  Los cuatro campos se delimitan por espacios en blanco, y el último puede estar vacío.
(que es lo que se quiere para una adjudicación dinámica o probablemente estática de su dirección IP
por su ISP).

  %Suppose your ISP gave you a user name of fred and a password of
  %flintstone you would set the name fred option in
  %{\tt /etc/ppp/options} and set up your {\tt /etc/ppp/pap-secrets} file as
  %follows
  Supuesto que su ISP le da el nombre de usuario ``pedro'' y la contraseña ``picapiedra''
  se debería poner {\em ``name pedro''} en el fichero {\tt /etc/ppp/options} y poner
el fichero {\tt /etc/ppp/pap-secrets} como sigue:

\begin{verbatim}
  # Contraseñas para autenticación PAP
  # cliente    servidor   secreto      direcciones IP locales aceptables
    pedro        *        picapiedra
\end{verbatim}

  %This says for the local machine name fred (which we have told pppd to
  %use even though it is not our local machine name) and for ANY server,
  %use the password (secret) of flintstone.
  Esto dice para el nombre local de máquina pedro (al que le hemos dicho a
pppd que use incluso si no es nuestro nombre local) y por CUALQUIER servidor,
que use la contraseña picapiedra.

  %Note that we do not need to specify a local IP address, unless we are
  %required to FORCE a particular local, static IP address. Even if you
  %try this, it is unlikely to work as most PPP servers (for security
  %reasons) do not allow the remote system to set the IP number they are
  %to be given.
  Dése cuenta de que no se necesita especificar una dirección IP local a no 
ser que queramos FORZAR una dirección IP local particular estática. Incluso
si se intenta esto, es posible que no funcione en la mayoría de servidores PPP
(por razones de seguridad) puesto que no permiten que los sistemas remotos
pongan la dirección IP que ellos deseen que se les dé.

%  This requires that you have mutual authentication methods---that is
 % you must allow for both your machine to authenticate the remote server
 % AND the remote server to authenticate your machine.

Esto requiere que se tengan métodos de autenticación mutua---esto es 
se debe permitir a la máquina local identificar al servidor remoto y al
servidor remoto identificar la máquina local.

%  So, if your machine is fred and the remote is barney, your machine
%  would set name fred remotename barney and the remote machine would set
%  name barney remotename fred in their respective /etc/ppp/options.ttySx
%  files.

Así que si su máquina es pedro y la remota es pablo, su máquina debería
poner {\em `` name pedro remotename pablo''} y la máquina remota debería poner
{\em ``name pablo remotename pedro''} en sus respectivos ficheros /etc/ppp/options.ttySx

%  The {\tt /etc/chap-secrets} file for fred would look like
Los ficheros {\tt /etc/ppp/chap-secrets} para ``pedro'' deberían parecerse a

\begin{verbatim}
  # Secretos para autentificarse mediante CHAP
  # cliente     servidor  secreto      direcciones IP locales aceptables
  pedro         pablo     picapiedra
  pablo         pedro     wilma
\end{verbatim}
%  and for barney
y para pablo
\begin{verbatim}
  # Secretos para autentificarse mediante  CHAP
  # cliente   servidor  secreto     direcciones IP locales aceptables
  pablo       pedro     picapiedra
  pedro       pablo     wilma
\end{verbatim}

%  Note in particular that both machines must have entries for
%  bidirectional authentication. This allows the local machine to
%  authenticate itself to the remote AND the remote machine to
%  authenticate itself to the local machine.

Fíjese en particular que ambas máquinas deben tener entradas para
autenticación bidirecional. Esto permite a la máquina local autentificarse
ella misma a la remota {\em Y} a la máquina remota autentificarse ella misma
a la máquina local.


\subparagraph*{Un guión para conexiones autentificadas mediante PAP/CHAP}   %A chat script for PAP/CHAP authenticated connections.}
%  If your ISP is using PAP/CHAP, then your chat script is much simpler.
%  All your chat script needs to do is dial the telephone, wait for a
%  connect and then let pppd handle the logging in!

Si su ISP usa PAP/CHAP, entonces el guión de chat es más simple.
Todo lo que necesita hacer el guión es llamar al teléfono, esperar
una conexión y dejar que pppd entre.

\small
\begin{tscreen} \begin{verbatim}
  #!/bin/sh
  #
  # Esta es la segunda parte del guión ppp-on. Realizará el protocolo de conexión
  # para el enlace
  #
  exec /usr/sbin/chat -v                                  \
          TIMEOUT         3                               \
          ABORT           '\nBUSY\r'                      \
          ABORT           '\nNO ANSWER\r'                 \
          ABORT           '\nRINGING\r\n\r\nRINGING\r'    \
          ''              \rAT                            \
          'OK-+++\c-OK'   ATH0                            \
          TIMEOUT         30                              \
          OK              ATDT\$TELEPHONE                 \
          CONNECT         ''                              \
\end{verbatim} \end{tscreen}
\normalsize
\rm

%As we have already seen, you can turn on debug information logging
%with the -d option to pppd. The 'debug' option is equivalent to this.
Como ya hemos visto, se puede activar la información de debug en
el log del sistema con la opción -d a pppd. La opción ``debug'' es
equivalente a ésta. 

%As we are establishing a new connection with a new script, leave in
%the debug option for now. (Warning: if your disk space is tight,
%logging pppd exchanges can rapidly extend your syslog file and run you
%into trouble---but to do this you must fail to connect and keep on
%trying for quite a few minutes).

A medida que establecemos una conexión nueva con un guión nuevo, deje la
opción debug activada por ahora. (Cuidadín: si el espacio de disco escasea,
registrar los intercambios pppd puede hacer que el syslog crezca en demasía
y acabar con todo el espacio---pero para hacer esto debe fallar la conexión
y mantenerse intentándolo por unos minutos).


%Once you are happy that all is working properly, then you can remove
%this option.

Una vez que se está satisfecho y todo esté funcionando como es debido,
entonces se puede quitar esta opción.

\begin{tscreen} \begin{verbatim}
exec /usr/sbin/pppd debug file options.myserver /dev/ttyS0 38400 \
\end{verbatim} \end{tscreen} 

\subparagraph*{Probando el guión de conexión}
%Testing the connection script.}


Abra un Xterm como root (si se está en X) o una consola virtual y entre como root.
%Open a new root Xterm (if you are in X) or open a new virtual console
%and log in as root.

%In this new session, issue the command
En esta sesión nueva, ejecute la siguiente orden:
\begin{tscreen}
\# tail -f /var/log/messages
\end{tscreen}
%Many systems log output to {\tt /var/log/messages}. If it has a
%different name on your system, substitute the name of your system log
%file in the command above.
Muchos sistemas registran la salida al fichero {\tt /var/log/messages}. Si tiene un nombre diferente en el sistema,
sustituya el nobre de fichero de registros del sistema en la orden de arriba.


%In the first window (or virtual console) issue the command
En la primera ventana (o consola virtual) ejecute la orden

\begin{tscreen}
\# ppp-on \& 
\end{tscreen}

%(or whatever name you have called your edited version of
%{\tt /usr/sbin/ppp-on}). If you do not put the script into the background
%by specifying \& at the end of the command, you will not get your
%terminal indicador de órdenes back until PPP exits (when the link terminates).
(o como quiera que haya nombrado su versión editada de {\tt /usr/sbin/ppp-on}). Si no puso
el guión en segundo plano especificando la opción \& al final de la orden, no se le
devolverá al indicador del sistema hasta que PPP termine (cuando el enlace finalice).

%Now switch back to the window that is tracking your system log.
Ahora cambie la ventana donde se está mostrando el registro del sistema.

%% You will see something like the following (provided you specified -v
%% to chat and -d to pppd)....this is the chat script and responses being
%% logged to the system log file followed by the start up information for
%% pppd :-
Se verá entonces algo como lo siguiente (supongo que mantiene todavía las
opciones -v en chat y -d en pppd)\ldots esto es el guión de chat que es registrado
con sus respuestas en el sistema por las opciones de inicio de pppd:
%% En la versión original se ha comentado lo siguiente, pero en la traducción creo que
%es buena idea descomentarlo por el contexto
\small
\begin{tscreen} \begin{verbatim}
   Oct 21 16:09:58 hwin chat[19868]: abort on (NO CARRIER)
   Oct 21 16:09:59 hwin chat[19868]: abort on (BUSY)
   Oct 21 16:09:59 hwin chat[19868]: send (ATZ^M)
   Oct 21 16:09:59 hwin chat[19868]: expect (OK)
   Oct 21 16:10:00 hwin chat[19868]: ATZ^M^M
   Oct 21 16:10:00 hwin chat[19868]: OK -- got it
   Oct 21 16:10:00 hwin chat[19868]: send (ATDT722298^M)
   Oct 21 16:10:00 hwin chat[19868]: expect (CONNECT)
   Oct 21 16:10:00 hwin chat[19868]: ^M
   Oct 21 16:10:22 hwin chat[19868]: ATDT722298^M^M
   Oct 21 16:10:22 hwin chat[19868]: CONNECT -- got it
   Oct 21 16:10:22 hwin chat[19868]: send (^M)
   Oct 21 16:10:22 hwin chat[19868]: expect (ogin:)
   Oct 21 16:10:23 hwin chat[19868]: kepler login: -- got it
   Oct 21 16:10:23 hwin chat[19868]: send (hartr^M)
   Oct 21 16:10:23 hwin chat[19868]: expect (ssword:)
   Oct 21 16:10:23 hwin chat[19868]:  hartr^M
   Oct 21 16:10:23 hwin chat[19868]: Password: -- got it
   Oct 21 16:10:23 hwin chat[19868]: send (??????^M)
   Oct 21 16:10:23 hwin chat[19868]: expect (hartr)
   Oct 21 16:10:24 hwin chat[19868]: [hartr -- got it
   Oct 21 16:10:24 hwin chat[19868]: send (PPP^M)
   Oct 21 16:10:27 hwin pppd[19872]: pppd 2.1.2 started by root, uid 0
   Oct 21 16:10:27 hwin pppd[19873]: Using interface PPP0
   Oct 21 16:10:27 hwin pppd[19873]: Connect: PPP0 <--> /dev/cua1
   Oct 21 16:10:27 hwin pppd[19873]: fsm_sdata(LCP): Sent code 1, id 1.
   Oct 21 16:10:27 hwin pppd[19873]: LCP: sending Configure-Request, id 1
   Oct 21 16:10:27 hwin pppd[19873]: fsm_rconfreq(LCP): Rcvd id 1.
   Oct 21 16:10:27 hwin pppd[19873]: lcp_reqci: rcvd MRU
   Oct 21 16:10:27 hwin pppd[19873]: (1500)
   Oct 21 16:10:27 hwin pppd[19873]:  (ACK)
   Oct 21 16:10:27 hwin pppd[19873]: lcp_reqci: rcvd ASYNCMAP
   Oct 21 16:10:27 hwin pppd[19873]: (0)
   Oct 21 16:10:27 hwin pppd[19873]:  (ACK)
   Oct 21 16:10:27 hwin pppd[19873]: lcp_reqci: rcvd MAGICNUMBER
   Oct 21 16:10:27 hwin pppd[19873]: (a098b898)
   Oct 21 16:10:27 hwin pppd[19873]:  (ACK)
   Oct 21 16:10:27 hwin pppd[19873]: lcp_reqci: rcvd PCOMPRESSION
   Oct 21 16:10:27 hwin pppd[19873]:  (ACK)
   Oct 21 16:10:27 hwin pppd[19873]: lcp_reqci: rcvd ACCOMPRESSION
   Oct 21 16:10:27 hwin pppd[19873]:  (ACK)
   Oct 21 16:10:27 hwin pppd[19873]: lcp_reqci: returning CONFACK.
   Oct 21 16:10:27 hwin pppd[19873]: fsm_sdata(LCP): Sent code 2, id 1.
   Oct 21 16:10:27 hwin pppd[19873]: fsm_rconfack(LCP): Rcvd id 1.
   Oct 21 16:10:27 hwin pppd[19873]: fsm_sdata(IPCP): Sent code 1, id 1.
   Oct 21 16:10:27 hwin pppd[19873]: IPCP: sending Configure-Request, id 1
   Oct 21 16:10:27 hwin pppd[19873]: fsm_rconfreq(IPCP): Rcvd id 1.
   Oct 21 16:10:27 hwin pppd[19873]: ipcp: received ADDR
   Oct 21 16:10:27 hwin pppd[19873]: (10.144.153.51)
   Oct 21 16:10:27 hwin pppd[19873]:  (ACK)
   Oct 21 16:10:27 hwin pppd[19873]: ipcp: received COMPRESSTYPE
   Oct 21 16:10:27 hwin pppd[19873]: (45)
   Oct 21 16:10:27 hwin pppd[19873]:  (ACK)
   Oct 21 16:10:27 hwin pppd[19873]: ipcp: returning Configure-ACK
   Oct 21 16:10:28 hwin pppd[19873]: fsm_sdata(IPCP): Sent code 2, id 1.
   Oct 21 16:10:30 hwin pppd[19873]: fsm_sdata(IPCP): Sent code 1, id 1.
   Oct 21 16:10:30 hwin pppd[19873]: IPCP: sending Configure-Request, id 1
   Oct 21 16:10:30 hwin pppd[19873]: fsm_rconfreq(IPCP): Rcvd id 255.
   Oct 21 16:10:31 hwin pppd[19873]: ipcp: received ADDR
   Oct 21 16:10:31 hwin pppd[19873]: (10.144.153.51)
   Oct 21 16:10:31 hwin pppd[19873]:  (ACK)
   Oct 21 16:10:31 hwin pppd[19873]: ipcp: received COMPRESSTYPE
   Oct 21 16:10:31 hwin pppd[19873]: (45)
   Oct 21 16:10:31 hwin pppd[19873]:  (ACK)
   Oct 21 16:10:31 hwin pppd[19873]: ipcp: returning Configure-ACK
   Oct 21 16:10:31 hwin pppd[19873]: fsm_sdata(IPCP): Sent code 2, id 255.
   Oct 21 16:10:31 hwin pppd[19873]: fsm_rconfack(IPCP): Rcvd id 1.
   Oct 21 16:10:31 hwin pppd[19873]: ipcp: up
   Oct 21 16:10:31 hwin pppd[19873]: local  IP address 10.144.153.104
   Oct 21 16:10:31 hwin pppd[19873]: remote IP address 10.144.153.51
 \end{verbatim} \end{tscreen}
 \normalsize
 \rm

 % (Note---I am using STATIC IP numbers---hence my machine sent that to
 %  the PPP server---you won't see this if you are using DYNAMIC IP
%  numbers.)  Also, this server requires a specific command to start PPP
%  at its end.

%  This looks OK---so test it out as before with pings to IP numbers and
%  host names.

%  Fire up you web browser or whatever and go surfing---you are
%  connected!

(Nota--- Se está usando DIRECCION IP ESTÁTICA--- aquí mi máquina envía la
dirección al servidor PPP--- no verá esto si usa DIRECCION IP DINÁMICA.) Además
este servidor requiere una orden específica para comenzar PPP por su parte.

Parece una buena idea revisar como antes con pings a direcciones IP y nombres
de host.

Inicie el navegador web o lo que sea y a surfear---¡está conectado!

\subsection{Desconexión del enlace PPP}
%Shutting down the PPP link.}

Cuando se haya finalizado la conexión PPP, debe utilizarse la orden estándar
{\tt ppp-off} para cerrarla (hay que recordar que para hacer esto hay que ser
root o miembro del grupo {\tt pppusers}).

%%  In your system log you will see something like:-

    En el registro del sistema se verá algo como:
 \begin{tscreen} \begin{verbatim}
   Oct 21 16:10:45 hwin pppd[19873]: Interrupt received: terminating link
   Oct 21 16:10:45 hwin pppd[19873]: ipcp: down
   Oct 21 16:10:45 hwin pppd[19873]: default route ioctl(SIOCDELRT): Bad address
   Oct 21 16:10:45 hwin pppd[19873]: fsm_sdata(LCP): Sent code 5, id 2.
   Oct 21 16:10:46 hwin pppd[19873]: fsm_rtermack(LCP).
   Oct 21 16:10:46 hwin pppd[19873]: Connection terminated.
   Oct 21 16:10:46 hwin pppd[19873]: Exit.
 \end{verbatim} \end{tscreen}
%% 
%%   Don't worry about the SIOCDELRT---this is just pppd noting that it is
%%   terminating and is nothing to worry about.
No se preocupe aerca de SIOCDELRT---tan sólo es pppd dándose cuenta de que está finalizando
y no es nada de lo que deba preocuparse.

\subsection{Resolviendo problemas comunes una vez que la conexión funciona}

Un problema que se encontrará es que muchos proveedores de servicios, 
darán soporte sólo al paquete de software que ellos mismos distribuyen. 
Éste es típicamente para Microsoft Windows y muchos proveedores de 
servicios parece que no conocen nada de Unix o {\linux}. Por tanto, hay
que estar preparados para obtener asistencia muy limitada de ellos.

\subparagraph*{Resolución de problemas de direccionamiento}
%Address resolution problems.}
De acuerdo, la conexión PPP está establecida y funciona correctamente y
se puede hacer ping al servidor PPP mediante la dirección IP (el segundo
o  número IP ``remoto'' que aparece con ifconfig ppp0), pero no se
puede ir más allá.

Antes que nada, hay que tratar de hacer ping a las direcciones IP especificadas
en /etc/resolv.conf como servidores de nombres. Si esto funciona se puede
ir más allá del servidor PPP ( a menos que éste tenga el mismo número IP
que el IP ``remoto'' de la conexión). Por tanto hay que tratar de hacer 
ping al nombre completo de Internet de su proveedor de servicios:
\begin{tscreen}
ping mi.isp.net
\end{tscreen}
Poniendo, por supuesto, el nombre de su ISP real. Si esto no funciona,
usted tiene un problema con la resolución de nombres. Esto es probablemente
por una errata en el fichero {\tt /etc/resolv.conf}. Compruebe este
fichero cuidadosamente, comparándolo con la información del fichero
ejemplo {\tt /etc/resolv.conf} de la Sección~\ref{sec-resolve.conf}.

Si esto no funciona (y el proveedor confirma que sus servidores de
nombres están funcionando), existe un problema en algún sitio, por lo
que hay que comprobar cuidadosamente la instalación de {\linux} (comprobando
expresamente los permisos de los ficheros). 

%If you still can't {\tt ping} your service provider's IP name
%servers by IP number, either they are down (give them a voice call
%and check) or there is a routing problem at your service provider's
%end.

%One possibility is that the ``remote end'' is a {\linux} PPP server where
%the IP forwarding option has not been specified in the kernel!
¡Una posibilidad es que el servidor remoto sea un servidor {\linux} donde
la opción de reenvío IP (``IP forwarding'') no haya sido especificada en el núcleo!.

\subparagraph*{Inspeccionando un intento fallido (Debugging).}
%Debugging a failed attempt.}
\index{PPP!debugging}
 % There are any number of reasons that your connection does not work---
 % chat has failed to complete correctly, you have a dirty line, etc. So
 % check your syslog for indications.


Hay un buen número de razones por las que la conexión puede no funcionar---
que chat no haya finalizado correctamente, que se tenga una línea con ruido,
etc. Así que revise los registros del sistema para más indicaciones.
 
%  A very common problem is that people compile PPP support into the
%  kernel and yet when they try to run pppd, the kernel complains that it
%  does not support PPP! There are a variety of reasons this can occur.
  Un problema muy común es que la gente compile el soporte PPP en el
núcleo y cuando intentan ejecutar pppd, ¡el núcleo dice que no soporta PPP!
Hay una serie de razones por las que esto puede ocurrir.


\begin{itemize}
\item No se inició el núcleo nuevo que se compiló con soporte PPP. %You failed to boot the new kernel that you compiled with PPP support.
\item Se produjo un error al instalar el módulo PPP que se compiló. %You failed to install the PPP module that you compiled.
\item Se esperaba que los módulos fuesen cargados automáticamente y no lo son.%You expected modules to be loaded automatically and they aren't.
\item Se está usando una versión incorrecta de PPP para el núcleo. %You are using the incorrect version of PPP for your kernel.
\item No se ejecuta pppd como root. %You are not running pppd as root.
\item Se cometió una equivocación al escribir algún guión de inicio. %You mistyped something in your startup scripts.
\item No se inicia sesión correctamente en el servidor. %You are not correctly logging into the server.
\item No se inicia PPP en el servidor. %You are not starting PPP on the server.
\item EL proceso remoto de PPP es lento al empezar. %The remote PPP process is slow to start.
\item La ruta por omisión no está puesta. %Default route not set.
\end{itemize}

%And a host of others. Look in the PPP FAQ (which is really a series of 
%questions and answers). This is a very comprehensive document and the answers 
%are there! If the answer to your problems is not there, the problem is not 
%PPP's fault! 

¡Y un montón de otros! Eche un vistazo al PPP FAQ (el cuál es realmente una serie
de preguntas y respuestas). ¡Este es un documento fácil de entender,  y las respuestas
están allí! Si las respuestas a sus preguntas no se encuentran allí, el problema
no es un fallo de PPP.

\subparagraph*{Obteniendo ayuda cuando se está totalmente atascado.} 
%{Getting help when totally stuck.}
\index{PPP!ayuda}


Si no se es capaz de hacer funcionar el enlace PPP, vuelva a través de este documento
y revíselo todo---junto con la salida creada por ``chat -v'' y ``pppd -d'' el el registro del sistema.

%If you can't get your PPP link to work, go back through this document
%  and check everything---in conjunction with the output created by
%  "chat-v..."  and "pppd -d" in you system log.

%  Also consult the PPP documentation and FAQ plus the other documents
%  mention herein!
También consulte la documentación de PPP y el FAQ además de otros documentos mencionados aquí.

 % If you are still stuck, try the comp.os.linux.misc and
 % comp.os.linux.networking newsgroups are reasonably regularly scanned
 % by people that can help you with PPP as is comp.protocols.PPP

Si todavía está atascado, intente con los grupos de noticias comp.os.linux.misc
y comp.os.linux.networking que son regularmente visitados por gente que puede ayudarle,
así como comp.protocols.ppp


%  If you do choose to seek help in the USENET newsgroups, please
%  don't post a very long message consisting of debugging output. This wastes
%  huge amounts of network bandwidth. It is much better to describe the problem
%  and perhaps include a few lines of debugging output (definitely no more 
%  than one screenful).

Si elige buscar en los grupos USENET, por favor no publique un mensaje muy largo
consistiendo en la salida de debuging, Esto malgasta grandes cantidades de ancho de banda.
Es mucho mejor describir el problema y quizá incluir unas pocas lineas de la salida
de debugeo (definitivamente no más de una pantalla).
