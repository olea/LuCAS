% GNU/Linux Installation and Getting Started    -*- TeX -*-
% generic.tex
% Copyright (c) 1997 by Specialized Systems Consultants, Inc. <ligs@ssc.com>
%
% This file is freely redistributable, but you must preserve this copyright 
% notice on all copies, and it must be distributed only as part of "GNU/Linux 
% Installation and Getting Started". This file's use is covered by the 
% copyright for the entire document, in the file "copyright.tex".
%
% Copyright (c) 1998 by Specialized Systems Consultants Inc. 
% <ligs@ssc.com>


\section{Instalación genérica}
\markboth{Obtención e instalación de Linux}{Instalación genérica}
\namedlabel{generic-instalation}


\index{{\linux}!obtención}
Al contrario que la mayoría del resto de sistemas operativos, {\linux} puede obtenerse gratuitamente.
Debido a la Licencia Pública General de GNU bajo la cual {\linux} se distribuye (vea el apéndice~\ref{app-gpl}), 
nadie puede venderle una licencia de uso del software. Puede usar {\linux} sin coste alguno, y
se le anima a ponerlo a disposición de otros.

Pero eso no significa 
que las empresas no tengan derecho al reembolso de los costes de copia y obtener un
beneficio. Pueden adicionalmente añadir software que no sea libre que funcione
en el sistema.

Esto le otorga la libertad de elegir.

Si comprar un CD-ROM 
no está en su presupuesto, puede simplemente pedir prestado una copia a un amigo o
descargar el original desde Internet. Si lo adquirió de un importante 
distribuidor de {\linux} o lo descargó desde sus sitios de FTP (vea
apéndice~\ref{app-ftp}), consiga el mismo sistema operativo y los
paquetes de software que ofrecen. En realidad, puede conseguir más software libre
desde alguno de los sitios de FTP del que las empresas pueden distribuir en un CD,
debido a las restricciones que algunos autores ponen a la distribución de
su software.

\subsection{Principales distribuciones de {\linux}}

\index{distribuciones}
Una mirada en profundidad de algunas de las distribuiciones de {\linux} comienza en la
página~\pageref{sec-install-distrib}. Estas distribuiciones son: Debian,
Red Hat, Caldera, Slackware, y S.u.S.E. Cada sección tiene más
información del lugar para adquirir esa distribución. Pero recuerde, Linux
es el núcleo. El software es parte de la distribución, no de {\linux}.
La mayoría del software está disponible sin restricciones y puede ser portado
entre varias plataformas UNIX. Después de tener en cuenta lo que el núcleo en sí soportará,
la diferencia más grande se encuentra en lo que soportan las
bibliotecas (software llamado desde dentro de las aplicaciones).

Cada distribución tiene su propia instalación y utilidades de mantenimiento
que facilitan la instalación y la administración del sistema. Cada una tiene
aparentemente puesto el punto de mira en un colectivo diferente. 
%Cualquier distribución le will get you started
%and keep you running. Así que le recomiendo que lea acerca de cada
Cualquier distribución vale para empezar y continuar después con ella.
Así que le recomiendo que lea acerca de cada distribución y hable con algún amigo informado.
La mayoría de las grandes ciudades tienen un Grupo de Usuarios de {\linux} 
\footnote{Vea {\tt http://www.ssc.com/glue/}
con información sobre Grupos de Usuarios de {\linux} de todas partes para encontrar
un grupo local.}, la mayoría con usuarios experimentados,
que debaten demasiado sobre qué distribución es la mejor y porqué. 
Le sugiero que escuche algunos de sus argumentos y después decida.
Se puede suscribir a listas de correo (le recomiendo que se suscriba 
sólo a una a la vez) y leer los correos de los usuarios y las respuestas de los gurús.
Tan diferente como lo es cada distribución, así son también las listas de correo que 
le proporcionan ayuda.
Hacer la elección correcta es importante, ya que cambiar de distribución
generalmente significa reinstalar desde cero.

\subsection{Preocupaciones comunes}

Esta sección asume que el recién llegado a {\linux} dispone de:

\begin{itemize}
\item tiene un ordenador con MS/DOS y Windows u OS/2;
\item tiene conocimientos básicos de MS-DOS pero no de UNIX;
\item conoce o puede encontrar que tipo de hardware tiene instalado;
\item tiene un deseo de poner a prueba {\linux} por cualquier motivo, 
aunque probablemente no se cambiará exclusivamente a {\linux}(todavía); y
\item no tiene una máquina de reserva ni dispone de un segundo disco duro,
pero tiene varios cientos de megabytes libres para usar.
\end{itemize}

Estas suposiciones no son extremistas, y pueden incluso ser un poco conservadoras.
Hay gente que dice que si en su aparato de vídeo todavía parpadean las 12:00, {\linux} no es para usted, pero
entonces eso debería hacerme abandonar a mí también. En mi aparato de vídeo aún parpadean las 12:00.

Antes de comenzar, debemos saber hacia donde vamos. Aunque es ciertamente posible
llegar desde Nueva York hasta California (eventualmente) tomando cualquier dirección al azar, la mayoría de nosotros podría optar 
ir en una ruta más o menos directa. Así es pues al instalar {\linux}.

\subsection{Hardware}

Esta sección explica todos los pasos necesarios para la instalación fuera de 
la instalación actual. Cada distribución trata en forma levemente  distinta
este preparativo. Mientras el aspecto de la instalación es diferente,
todas logran lo mismo y tienen más en común que no. Todas requieren:

\begin{itemize}
\item planificación;
\item reunir información del hardware del sistema;
\item copia de seguridad del viejo sistema (opcional, pero muy recomendado);
\item preparar las particiones de {\linux};
\item decidirse por un cargador de arranque (para sistemas con arranque dual);
\item arrancar un núcleo de Linux;
\item instalar el núcleo;
\item elegir e instalar paquetes de software;
\item cargar el software;
\item realizar ajustes finales de configuración; y
\item reiniciar y arrancar el nuevo sistema.
\end{itemize}

Ahora que he simplificado en exceso el proceso, recorramos la lista.
Escuche atentamente, no es malo que aprenda de los errores de otros.

\subsection{Planificación}
\index{planificación}
No pienso insistir demasiado en este paso. Cualquier piloto le dirá que
el aterrizaje es tan bueno como la aproximación. Lo mismo vale para la instalación de {\linux}.

Primero, determine qué tipo de hardware tiene. Una lista de comprobación ha sido incluida
 para asistirle. Sea tan preciso como pueda, pero no se entusiasme.
Por ejemplo, si tiene una tarjeta ethernet, necesita saber
de qué tipo(p.e., SMC-Ultra, 3Com 3C509, etc.), dirección E/S (p.e.,
io=0x300), interrupción (IRQ 10), pero no la dirección hardware (00 00 a6
27 bf 3c). No toda la información será necesaria para su hardware. Si 
tiene Windows 95 o Windows NT funcionando, puede copiar los  valores
de la pantalla de información de los dispositivos hardware del sistema. Por otra parte,
consulte los manuales del harware o la página web del fabricante.
Dado que es importante, revisaremos esta hoja de trabajo aquí.

\subsection{Hoja de trabajo de la planificación del sistema}

\begin{tabbing}
\hspace{1.5in}\= \hspace{1.5in}\= \hspace{1.5in}\=  \hspace{1.5in}\= \hspace{1.5in}\kill
{\bf General} \\

Procesador: \> Intel AMD Citrix \> Tipo: \> 386 486 Pentium PPro \\
Velocidad  (opcional) \\ 
Fabricante:  \\
Placa base:    \> Fabricación:         \> Chip Set: \\

{\em Ejemplo:} \> {\em Fabricación:  desconocida}  \> {\em Chip Set: triton II }\\

Ratón: \> Fabricante:         \> Tipo: bus  PS/2 serie  \\
Puerto serie: \>  COM1 (ttyS0) \>  COM2 (ttyS1) \\

Unidad(es):  \> Tipo: \> IDE/MFM/RLL/ESDI    SCSI \\
de HD \\ 
Tamaño: \\
(cada unidad) \\

SCSI: \> Fabricación: \> Modelo: \\

{\em Ejemplo:} \> {\em Fabricación: BusLogic}  \> {\em Modelo: 948 }\\

Arranque: \> Linux   \> DOS/Windows \> OS/2 \> Otro \\

Disco: \> Particion:     \> Tamaño:          \> Boot: \\

Disco: \> Particion:     \> Tamaño:          \> Boot: \\

Disco: \> Particion:     \> Tamaño:          \> Boot: \\

Disco: \> Particion:     \> Tamaño:          \> Boot: \\

CD-ROM:\> IDE/ATAPI  SCSI  Propietario   \\ 
Fabricante: \> Modelo:  \\
(Solo Propietario): \\
\\
{\bf X-Window:}\\

Tarjeta de Vídeo: \>  Fabricante: \> Modelo: \> \\ 
RAM: \> 1Mb     2Mb     4Mb     8Mb     16Mb\\

Monitor: \>  Fabricante: \>  Modelo: \>  Frecuencia máx. de refresco: \\
\\
{\bf Red:} \\

Módem: \> Fabricante:  \>  Modelo:     \\
Puerto serie:  \>  COM1 \> COM2 \> COM3 \> COM4 \\

\>(ttyS0)  \>  (ttyS1)   \>  (ttyS2) \>   (ttyS3) \\

Nombre del ordenador:  \> \> {\em Ejemplo: rainier}

\end{tabbing}

Las siguientes respuestas sólo son necesarias si usa una tarjeta de red: 
(no configure la red si no dispone de una instalada).

\begin{tabbing}

\hspace{1.5in}\= \hspace{1.0in}\= \hspace{1.0in}\= \hspace{1.0in}\= \hspace{1.0in}\kill

NIC Tipo: \> ethernet  \> token ring  \> FDDI \>  Otra \\
NIC Fabricante: \>  Modelo: \\
Network domain name: \> \>  {\em (Ejemplo: mountains.net)} \\
Dirección IP: \> \> {\em (Ej.: 192.168.1.2)} \\
Dirección de red: \> \> {\em (Ej.: 192.168.1.0)} \\
Máscara de red: \> \> {\em (Ej.: 255.255.255.0)} \\
Dirección de Broadcast:\> \> {\em (Ej.: 192.168.1.255)} \\
Pasarela(s): \> \> {\em (Ej.: nada o 192.168.1.1)} \\
DNS(s): \> \>  {\em (Ej.: 192.168.1.2)} 

\end{tabbing}

\label{sec-install-generic-general}

Algo de la Sección General está ahí para referencias futuras.
Concretamente, no necesitamos conocer ahora mismo el tipo de CPU.
Podemos también arreglarnos sin saber qué chipset tiene la placa base.
Pero si está disponible la información, es bueno tenerla.

\subsection{Ratón}
\label{sec-install-mice}
Otra información que necesitamos, comienza con el ratón, si contamos con usarlo.
Necesitamos saber el fabricante, porque las diferentes marcas implementan funciones de señales 
internas de distinta forma.
Aquí, atender a los detalles lo es todo. Si tiene un ratón de la marca 
Microsoft, puede tener un interfaz serie o PS/2.
Mirar el conector para el ordenador no ayudará tampoco. Un 
número de ordenadores vienen con ratones que parecen ratones serie y tienen un 
conector tipo serie, pero son conectados a la placa base internamente como un ratón PS/2.

Lea el grabado de la parte inferior del ratón cuidadosamente antes de decidirse.
Además, si tiene un ratón con tres botones, pero éste tiene un selector del botón
con el que puede cambiar entre, digamos, Microsoft y sistemas PC, elija sistemas PC
La configuración de Microsoft no implementa el botón de en medio, 
que sí es útil en UNIX. 
En el fabricante, escoja la configuración de "switch" porque ese es el
protocolo de señales usado. No hay controladores para los ratones
"bonitos", pero sí para la configuración de "switch" de Microsoft y
Mouse System que se encuentran bajo el ratón.

Mientras no se pida específicamente, la única información adicional que puede querer
añadir es el dispositivo a través del que el sistema accede al ratón.
Linux debe conocer cómo el dispositivo es referenciado. Si tiene un ratón PS/2,
normalmente optará entre {\tt /dev/psaux}, el puerto auxiliar para un dispositivo
apuntador  PS/2, o {\tt /dev/psmouse}, un sinónimo a veces disponible para su utilización.
Los ratones de bus son accedidos a través de un fichero creado específicamente para ese 
ratón propietario, como {\tt /dev/atibm} para los ratones de bus ATI, {\tt /dev/logibm} 
para los ratones de bus de Logitech, {\tt /dev/inportbm} para los ratones de bus de de 
InPort, o sus respectivos sinónimos de  {\tt atimouse}, {\tt logimouse}, y así 
sucesivamente. Para ratones serie, si sabe el puerto de {\tt COM:} de MS/DOS, sustituya 
{\tt /dev/ttyS0} para {\tt COM1:} y {\tt /dev/ttyS1} para {\tt COM2:}. Me abstendré de explicar los
orígenes del nombre {\tt tty} de {\tt ttyS0} dado que ocuparía varios
párrafos y está explicado ya en muchas referencias de UNIX.


\subsection{Considerar discos duros y CD-ROMs}

Antes de comenzar la instalación, necesita contar cuánta cantidad real de espacio en disco va 
a dedicar a {\linux} frente a cuánta cantidad dispone.
Decidir durante la instalación cómo dividir su disco duro es sólamente pedir problemas y
probablemente terminará en pérdida de tiempo, pérdida de datos y reinstalación.

Su disco duro será uno de varias clases. Para nuestros propósitos, IDE,
MFM, RLL, y ESDI son equivalentes, y usaré el término IDE. Éste también abarca
EIDE, actualmente el interfaz más común en el mercado de ordenadores domésticos 
favorecido por su bajo precio.

Si el disco duro tiene un interfaz SCSI, se hará evidente durante el arranque.
Necesitará saber el fabricante y el modelo de controladora SCSI.
Las más comunes son las controladoras de Adaptec y BusLogic,
pero en absoluto son la únicas. Éstas también tienen modelos específicos,
como la AHA-1572 o BTC-958. Esta información es a menudo
mostrada durante la inicialización del sistema.

Para asignar espacio, necesitamos evaluar el tamaño del disco duro. Bajo OS/2,
puede usar todo el disco duro para OS/2, después instalar Microsoft
Windows sobre la partición de OS/2 y ejecutarlo bajo OS/2. Si tiene MS-DOS y Microsoft
Windows, u OS/2 en su ordenador, {\linux} debería tener su propia partición.
Puede cargarse en una partición MS-DOS con UMSDOS, lo cual no se cubre aquí.
Mientras {\linux} tiene emuladores de DOS y puede leer e incluso ejecutar algunos 
programas de DOS, DOS no puede generalmente ``ver'' lo que hay en una partición {\linux}.

Si tiene y quiere guardar MS-DOS (se asume), debe determinar cuánto
espacio le va a reservar. Reste este número del tamaño total del disco duro
y eso es con lo que tiene que trabajar. Por ahora, anote el tamaño total de 
la unidad(es) que tiene y cuánto espacio va a dedicar a {\linux}.

Para su(s) unidad(es) de CD-ROM necesita información similar. Una unidad de CD-ROM 
es IDE/ATAPI, la más común en sistemas domésticos hoy día;
SCSI; o una unidad más antigua, unidad propietaria, como aquellas conectadas a las tarjetas de sonido.
Si tiene una unidad IDE o SCSI, mucho mejor. Si tiene una unidad con propietaria, debe conocer 
el fabricante y modelo, puesto que {\linux} las identifica por fabricante y unidad 
concreta.


\subsection{Unidades de discos bajo {\linux}}
Para los recién llegados a {\linux} que estén familiarizados sólo con MS-DOS, 
y para aquellos que provengan de otras plataformas UNIX, los dispositivos 
bajo {\linux} tienen una forma de referenciarse peculiar. Esta forma de 
referenciarse se usa poco menos que desde el inicio, de modo que se 
necesita cierto conocimiento sobre ellos.

Bajo {\linux}, como bajo cualquier UNIX, los {\bf dispositivos} 
son ficheros especiales. Los discos duros son tratados como ficheros y 
referenciados por su nombre, como los modems, su monitor, y otros dispositivos hardware. 
UNIX los trata como ficheros de los que leer y a los que escribir. Puesto que {\linux} 
los ve como ficheros, se encontrarán en un directorio dedicado a los dispositivos. 
Después de la instalación los podrá ver en el directorio {\tt /dev}, por {\em devices}.

Incluso aunque estos dispositivos son vistos por {\linux} como ficheros, son especiales. 
Vienen en dos ``sabores,'' {\bf bloques} y {\bf caracteres}, 
los cuales se refieren a la manera en que los dispositivos se comunican; en bloque de 
datos o en caracteres individuales. Se crean automáticamente durante la instalación.

Estas convenciones sobre nomenclatura de los dispositivos se discuten en la página~\pageref{device-driver-names}.


\subsection{Instalando el sistema de ventanas X-Window}
\label{sec-install-generic-x}
He incluido en su hoja de trabajo información sobre su tarjeta de vídeo y su monitor.
Aunque no es absolutamente necesario, la mayor parte de los que vienen
del mundo de OS/2 o Microsoft Windows quieren instalar una {\bf interfaz gráfica de 
usuario} (IGU). Algunas distribuciones se lo permiten directamente, mientras
que otras lo hacen a través de programas posteriores a la instalación. Esta información 
será importante entonces.

Algunas distribuciones le guían a través de esta configuración, otras le dirigen a programas
posteriores a la instalación. Esta información también será importante.

Debe conocer el fabricante y modelo concreto de su tarjeta de vídeo. A algunas tarjetas se les puede comprobar o ``preguntar'' cuanta RAM tienen o que chipset utilizan,
pero a otras no. En cualquier caso, saber esto es importante, como en las S3 o S3-Virge. Esta información ahorra mucho tiempo y disgustos. La parte más difícil y frustrante
de cualquier instalación y configuración de {\linux} es la del sistema de ventanas X. 

Con frecuencia, los datos de su monitor son más difíciles de obtener. Si
tiene una de las marcas menos conocidas de monitores, es posible que tenga que introducir 
las frecuencias de refresco vertical y horizontal por usted mismo.

\blackdiamond Si tiene dudas, sea siempre conservador. Sobrepasar los límites de su sistema puede dañar su monitor o tarjeta de video.

Ya tenemos la mayor parte de la información que necesitamos para el ratón, 
que también utilizará el servidor X. La información que {\linux} necesita 
conocer sobre el ratón se describe en la página~\pageref{sec-install-mice}.

\subsection{Hardware de sistema de redes}
Esta sección no es aún tan significativa como sugiere la hoja de trabajo.
El sistema de redes se explica en detalle en el Capítulo~\ref{chap-networking}. 
Pero si tiene una {\bf tarjeta de red} \NT{Network Interface Card}, sea Ethernet, Token Ring,
u otro sistema, debe leer encima de la tarjeta antes de proceder.
Esta información se necesitará durante la instalación para usar la tarjeta de red.

Durante la instalación inicial de {\linux}, si no tiene una tarjeta de red, puede
saltarse buena parte de la configuración de red. 
Sin embargo, todos los ordenadores deben tener un nombre en {\linux}.
El ejemplo de la hoja de trabajo, asume que tiene elegido uno, como montañas, y nombrará sus ordenadores 
después con nombres de montañas, pero cualquier nombre que se le ocurra será adecuado.

Si tiene un módem, debe conocer donde está conectado.
Este se encuentra en un puerto serie, {\tt /dev/ttyS0} hasta {\tt /dev/ttyS3}, que corresponde
en MS-DOS a los puertos {\tt COM:} del 1 al 4. La RDSI se trata del mismo modo, pero
normalmente se configura con posterioridad a la instalación con designaciones especiales y
múltiples dispositivos.

Eso finaliza nuestra hoja de trabajo y aproximadamente la mitad de la planificación que necesitamos hacer.
Una notación que no figura en nuestra hoja de trabajo es la cantidad de memoria RAM que tiene el sistema.
{\linux} funciona en un sistema con menos de 4 MB de RAM, pero esto tiene un impacto significante en la instalación 
y subsiguiente uso del sistema. 
Si tiene 4 MB de RAM o menos, debe seguir procedimientos específicos para máquinas de poca memoria donde sea pertinente.
Con el actual bajo precio de RAM y con las pocas máquinas que son vendidas hoy con menos de 16MB de RAM, esto generalmente no es un inconveniente. Si es así, asegúrese
 de comprobar su distribución para instrucciones específicas.
\subsection{Planificación 2ª Parte}

Partes de la sección siguiente, en particular las formas de particionar un disco,
son sumamente beligerantes entre instaladores experimentados, pero yo
le daré mis ideas sobre ello. Se puede ser tan creativo como se quiera.
La mayoría de las diferencias en mi opinión, se originan según sea la finalidad última del sistema, e.j., como una estación de trabajo, servidor web, 
servidor de noticias u otra función.

\subsection{Estrategias de particionado}

Pocos usuarios experimentados de {\linux} le dirán que haga una partición nativa de {\linux}, una partición de intercambio
y que comience la instalación. Hay numerosas razones para esto, y suscribo la mayoría de ellas, así que yo tengo numerosas particiones nativas de {\linux}.
Pero para mí, la razón más convincente de todas es que un día querrá actualizarse, y eso requerirá reformatear el sistema(s) de ficheros.  
De hecho, la distribución Slackware no tiene, en última instancia, medios para
ni siquiera intentar una actualización ``en el momento'', o indicación alguna de
que las tendrá en el futuro. La actualización del núcleo 0.99 al 1.2.13 me exigió reformarlo,
como también de la versión 1.2.13 a la 2.0.0, y sospecho que lo necesitaré de nuevo
para la versión 2.2.0 (o la que sea el próximo núcleo estable).
Lo que no deseo, es perder los ficheros que he acumulado en mi directorio de inicio. 
Sí, tengo una copia de seguridad. Pero conservar mi directorio {\tt
/home} intacto es más sencillo, especialmente desde que moví todos mis ficheros especiales a 
un subdirectorio de allí. 

\blackdiamond 
Otra razón es que cualquier partición arrancable debe estar entre los primeros 1024 cilindros del disco duro.
Cuando algún PC arranca, ocurren una secuencia de eventos que finalizan en la carga del sistema operativo. Debido a las limitaciones de la BIOS (Basic Input/Ouput System), hasta que el sistema operativo es cargado, 
sólo los primeros 1024 cilindros del primer o segundo disco duro pueden ser accedidos.

Para saber exactamente de qué estamos hablando, voy a describir un sistema de ficheros estándar de {\linux} y cómo éste trata las particiones. 

Bajo MS-DOS, cada partición es una unidad diferente, y pocas distinciones son hechas tanto si es una unidad física o una unidad lógica (partición). 
Bajo {\linux}, las unidades físicas o lógicas son nombradas mucho menos rígidamente.

Durante la instalación, debe escoger una partición como su partición raíz.
La partición raíz es designada como ``{\tt /}''. Cuando nos referimos a 
``{\tt /dev}'', esto es realmente dos directorios, ``{\tt /}''
y ``{\tt dev}''. Su núcleo de {\linux} se localizará en la partición raíz,
pero puede estar en un subdirectorio con tal de que ese subdirectorio resida en la partición raíz.
Por ejemplo, algunas distribuciones usan {\tt /boot} para contener el núcleo, mapa del sistema, y ficheros de arranque.


La siguiente estructura (como mínimo) se establecerá en su partición raíz durante la instalación:
\begin{tscreen}
        /bin \\
        /dev \\
        /etc \\
        /home \\
        /lib \\
        /lost+found \\
        /proc \\
        /root \\
        /sbin \\
        /usr \\
        /var \\
\end{tscreen}
Puede ver otras como {\tt /boot}, {\tt /mnt}, {\tt /cdrom}, {\tt
/floppy}, {\tt /opt}, y así, pero las citadas anteriormente son fundamentales.

¿Qué hay de las otras particiones?
{\linux} puede usar un nombre de directorio (digamos {\tt /usr}) como un {\bf punto de montaje}.
Es decir, la otra partición en el disco (o en otro disco) es montada bajo él (en este caso {\tt /usr}).

Si desmonta la otra partición y mira en el subdirectorio que {\linux} usa como punto de montaje, no verá (o no debería ver)
nada---ni ficheros ni directorios. Cuando otra partición es montada, verá los ficheros y directorios que están en esa partición bajo el punto de montaje.
Así que si tiene dos unidades, una con 120 MB y otra con 840 MB puede hacer una partición en la unidad de 120MB (diremos que es la partición raíz) y montar 
cualquiera de las particiones que ha creado en la unidad de 840MB (esta podría ser una gran partición, o varias particiones pequeñas) bajo sus respectivos puntos de montaje,
una partición por punto de montaje, creando, en efecto, un sistema de ficheros de 960MB.

La única restricción es que no puede usar ciertos directorios en la unidad raíz como puntos de montaje, porque
contienen ficheros que son necesarios para arrancar el sistema o montar otros sistemas. Obviamente si el directorio usado para montar otras particiones está ubicado en otra
partición y no puede acceder a esa partición hasta que no sea montada, estará como el perro que persigue su cola.

\blackdiamond
Los directorios que no puede usar como puntos de montaje son:  {\tt
/bin}, {\tt /dev}, {\tt /etc}, {\tt /lib}, {\tt /lost+found}, {\tt
/proc}, {\tt /root}, y {\tt /sbin}. 

Una descripción detallada de qué ficheros están contenidos en estos directorios del sistema estándar
se da a partir de la página~\pageref{sec-filesystem-tour}.

Veamos un pequeño ejemplo. Usted es un aspirante a Proveedor de Servicios de Internet (ISP)
Tiene cuatro máquinas, y cada una tiene una unidad de 1 gigabyte.
Así que decide asignar espacio como a continuación:
\begin{tscreen}\begin{verbatim}
máquina A:      / = 120MB
                /usr = resto de la unidad (exportado)
                /home = 0 - punto de montaje (montado desde B)
                /var/news = 0 - punto de montaje (montado desde C)
                /var/spool/mail = 0 - punto de montaje (montado desde D)

máquina B:      / = 120MB
                /usr = 0 - punto de montaje (montado desde A)
                /home = resto de la unidad (exportado)
                /var/news = 0 - punto de montaje (montado desde C)
                /var/spool/mail = 0 - punto de montaje (montado desde D)

máquina C:      / = 120MB
                /usr = 0 - punto de montaje (montado desde A)
                /home = 0 - punto de montaje (montado desde B)
                /var/news = resto de la unidad (exportado)
                /var/spool/mail = 0 - punto de montaje (montado desde D)

máquina D:      (ejercicio para el lector)
\end{verbatim}\end{tscreen}
Probablemente advirtió que asigné arbitrariamente 120 MB a la partición raíz,
y asigné el resto a cualquiera ({ \tt /usr}, {\tt /home},
{\tt /var/spool/mail} y así sucesivamente). También, que no asigné espacio a ninguna partición de intercambio.

Así que, miremos lo que probablemente necesitaremos, comprender de qué ``depende'' es clave.  Plantearé esto desde la perspectiva de una situación familiar con solamente 
unos pocos de usuarios, montones de programas y sin otras necesidades notorias.

Lo mejor para empezar es decirle la apariencia de mi ordenador principal.
Tengo dos unidades, {\tt /dev/hda} (1.2 GB) y {\tt
/dev/hdb} (540 MB). {\tt df} (disk free) muestra

\begin{tscreen}\begin{verbatim}
File system         1024-blocks  Used Available Capacity Mounted on 
/dev/hda1             150259   69605    72894     49%   /
/dev/hda3             723923  615452    71075     90%   /usr
/dev/hda2             150291   93326    49204     65%   /usr/X11R6
/dev/hdb1             499620  455044    18773     96%   /home
\end{verbatim}\end{tscreen}
Puede ver que tengo a mitad de uso 150-MB de partición raíz ({\tt /}),
una partición {\tt /usr} casi completa, una partición {\tt /usr/X11R6}
usada en su mayor parte, y una grande pero restringida 500-MB partición /home.
El resto de la unidad {\tt /dev/hdb} es una partición de intercambio.

En un mínimo realista, sugeriría reservar 80--100 MB para su partición raíz, 
sobre 10 MB por usuario en su partición {\tt /home}, tanto más espacio
como pueda reservar para intercambio, dentro de lo razonable (vea la próxima sección), 
y el resto para {\tt /usr}. Tengo un sistema familiar para cinco usuarios, pero
personalmente tengo sobre 400 MB inmovilizados del directorio 
{\tt /home}, la mayoría en gráficos---un álbum de fotos de familia y amigos.
Su partición {\tt /usr} debería ser presumiblemente de al menos 250MB, 
pero el mínimo dependerá de lo que decida al instalar.
Como puede ver, se puede rellenar rápidamente con más de 800 MB de programas,
bibliotecas, y datos. Además recuerde que las particiones le dan la flexibilidad 
que perdería con una partición gigante.

\subsection{La partición de intercambio}

Debe ir pensando hacer una partición de intercambio.
A diferencia de Microsoft Windows, {\linux} usa una 
partición de intercambio dedicada por rapidez. Aunque es posible crear un fichero de intercambio
no es recomendable. {\linux} puede usar hasta 128 MB\NT{Hasta 8 particiones de 128Mb de espacio de intercambio}
 de espacio de intercambio.
Recomiendo un mínimo práctico de 16 MB. El óptimo es probablemente tanto como 
pueda reservar entre 32 y 64MB---cuanto más, mejor.


Una última consideración antes de que decida cómo trocear mejor el disco.
Recuerde que dije que la BIOS no puede ``ver'' pasado el sector 1023 en el disco duro
(aproximadamente 512MB). Así que, el núcleo de {\linux} (un fichero probablemente llamado
{\tt vmlinuz} en su disquete de arranque), o cualquier núcleo de otro SO en ese caso, 
debe residir completamente en una de las primeras dos unidades de discos ({\tt
/dev/hda} o {\tt /dev/hdb}) y entre los primeros 1024 sectores, o la
BIOS será incapaz de cargarlo. Para garantizar que puede, planee hacer
que su partición raíz (así como cualquier otra partición de arranque) caiga
enteramente dentro de esta limitación, en el primer o segundo disco duro.

\subsection{Reparticionando}

Al comienzo de este Capítulo dije que había hecho unas pocas suposiciones.
Una era que quería guardar su cómodo MS-DOS y Microsoft Windows.
Y puesto que el ordenador que compró sólo tiene MS-DOS, no tiene sentido tener múltiples particiones,
así que la única unidad que tiene está probablemente dedicada por completo a MS-DOS.

De una manera o de otra, después, tendremos dos sistemas operativos en este ordenador.
Si actualmente no tiene nada en su disco (buena suerte), es decir estupendo,
pero no está del todo listo para seguir adelante. {\linux} está confortable donde quiera que lo ponga.
Su BIOS puede que no tenga capacidad de arrancarlo, pero una vez en ejecución,
no se quejará si es relegado a la cuarta partición del cuarto disco duro.
Pero MS-DOS y Microsoft Windows no son así de compasivos. Ellos quieren la primera unidad
y la primera partición y pueden rechazar arrancar desde cualquier otra posición.
He visto arrancar MS-DOS desde la primera partición en el segundo disco duro, pero el primer disco duro no tenía ninguna partición de MS-DOS,
así que MS-DOS no reconoció la unidad. La mejor estrategia, a menudo, es el camino de la menor
resistencia. Si en absoluto es posible, ponga MS-DOS en la primera unidad y la primera partición.

Una segunda consideración en una situación de múltiples SO es cuál sistema operativo cargar primero.
Si está tentado de particionar el disco duro e instalar {\linux} primero (reservando {\tt /dev/hda1} 
para MS-DOS, entonces no instale MS-DOS en segundo lugar.
Al instalar MS-DOS o Windows, el programa de instalación borrará cualquier programa de arranque previo
 que tenga instalado en el registro maestro de arranque (MBR) (el que la BIOS usa para apuntar
a núcleos arrancables), De hecho, puede incluso oír esta alusión como el ``virus Microsoft''. Esto no es un 
virus en el sentido verdadero de la palabra, exactamente es arrogancia por parte de Microsoft, que solamente
quiere un sistema operativo Microsoft para arrancar. {\linux} no causa tales problemas, y de hecho suministra un medio para 
elegir la imagen para el arranque predeterminado. También le permite intervenir durante el proceso de arranque para
especificar con qué sistema operativo arrancar. Esto es una parte estándar del proceso de instalación de {\linux}.

\subsection{Haciendo copia de seguridad de su sistema antiguo}

Antes de que realmente consigamos trabajar en la tabla de particiones, 
Le guiaré a través de procedimientos para proteger los datos que tiene en su disco duro.
Estos procedimientos asumen que tiene una partición DOS. Otros sistemas operativos pueden o 
no tener un método para lograr el mismo propósito.

\blackdiamond
Lo primero que debería hacer es realizar una copia de seguridad completa.
Las herramientas que usará trabajan como debieran. Pero estos procedimientos son 
intrínsecamente peligrosos. En cualquier momento que trabaje con una tabla de particiones de un disco duro,
puede perder fácilmente todos los datos contenidos en la unidad. {\bf
Copie su disco duro antes de proceder.}

Una vez ha copiado su disco duro, cree un disquete de arranque para el sistema.
Puede usar los órdenes de MS-DOS
\begin{tscreen}
C:>format a: /s
\end{tscreen}
el cual formatea el disquete y le pone los ficheros que requiere el sistema
o, usar un disquete formateado. Escriba la orden
\begin{tscreen}
C:>sys a:
\end{tscreen}

En cuanto haya creado un disquete de inicio y lo haya probado para garantizar que funciona,
copie los siguientes ficheros de su sistema MS-DOS al disquete de inicio: {\tt FDISK.EXE}, {\tt SCANDISK.EXE},
y {\tt SYS.COM}. Además copie el fichero {\tt RESTORRB.EXE} desde un CD de una distribución de {\linux} 
o de un sitio de FTP de ficheros de {\linux}. (Vea Apéndice~\ref{app-ftp}).

Ejecute un programa de desfragmentación en su unidad DOS para desfragmentar y agrupar los
ficheros junto a la parte delantera del disco. Si desfragmentando
encuentra cualquier error, necesita ejecutar {\tt SCANDISK.EXE} para reparar los problemas.
Una vez ha desfragmentado el disco y se ha asegurado que los ficheros están condensados en la parte delantera
de la unidad (como se indica en la gráfica de su disco), está preparado para ejecutar {\tt
FIPS.EXE} para reducir de tamaño la partición MS-DOS.

\subsection{{\tt FIPS.EXE}}

En su CD de la distribución de {\linux} (o en el emplazamiento de la distribución en Internet),
encontrará una copia de {\tt FIPS.EXE}, con la que puede reducir el tamaño de la partición MS-DOS.
Note que {\tt FIPS.EXE} solamente trabaja con particiones MS-DOS.
Si tiene otras particiones que necesite reducir, el programa 
Partition Magic le puede ayudar, pero no es libre. Copie {\tt FIPS.EXE} a
su disquete de inicio y rearranque usando este disquete. Esto cumplirá dos objetivos:
asegura que el disquete de inicio funciona, y asegura que está arrancando en modo read de MS-DOS y no ejecutando
Microsoft Windows.

En el indicador {\tt A:\bs\rbr} escriba {\tt FIPS} (en mayúsculas o minúsculas). 
Se le dará la bienvenida y se le preguntará con qué unidad quiere operar (si tiene más de una).
Elija la unidad a reducir. Una vez que confirme su elección, {\tt FIPS.EXE} hará una copia de sus sectores de 
arranque y raíz al disquete por si acaso algo adverso ocurre.

Entonces se le preguntará si todo el espacio libre de su partición debería
usarse para crear una segunda partición. Si contesta ``sí'', no tendrá ningún 
espacio libre en la partición MS-DOS para guardar datos, así que diga ``no''.
En ese momento estará capacitado para variar la cantidad de espacio que asignar 
entre la primera y segunda partición. Note que si no desfragmentó correctamente
su unidad, no tendrá mucho para trabajar con la segunda partición. También, si
usa el software de replicado de MS-DOS, un fichero que se crea en el mismo final de la partición, y 
{\tt FIPS.EXE} le dirá que no tiene espacio para crear una segunda partición.
Salga y corriga el problema borrando el fichero {\tt MIRROR.FIL}, después vuelva a arrancar {\tt FIPS.EXE}.

Puede editar y reeditar la tabla de particiones hasta que esté satisfecho. En cuanto esté contento
con la distribución de espacio entre las particiones, confirme sus cambios y escriba la tabla.

Una vez que {\tt FIPS.EXE} ha terminado, quite el disquete de arranque y rearranque su ordenador.
En este ejemplo, destruiremos y nos recrearemos con la segunda partición durante la instalación
para crear al menos dos particiones para {\linux}: una partición de intercambio, y una partición nativa de {\linux}.
Pero puede crear tantas como guste.

\subsection{Preparándose para iniciar {\linux}}

Para instalar {\linux}, debemos comenzar con la carga del núcleo de {\linux}.
Esto es llevado a cabo del mismo modo como si quisiera volver a cargar MS-DOS: 
necesitamos un disquete de inicio. Pero la mayoría de las distribuciones
vienen sólo con un CD-ROM,y aún cuando tengamos un sistema {\linux} en ejecución,
la orden para crear disquetes de inicio para {\linux} es diferente que en MS-DOS. 
Si ha comprado un ordenador nuevo que permite el arranque desde CD-ROM, algunas
distribuciones le permitirán arrancar de este modo. Pero seguiremos 
enteramente el proceso de creación de un disquete de inicio en lo que nos resta.

\subsection{Creando un disquete de arranque de {\linux} bajo DOS}
\label{sec-rawrite}
\index{RAWRITE.EXE@{\tt RAWRITE.EXE}}

Toda distribución contiene un programa MS-DOS que le permite escribir
una imagen de disco en un disquete formateado. Necesita un disquete de 
alta densidad, y algunas distribuciones requieren que sea de 3.5-pulgadas, y 1.44 Mb.
Introduzca el disquete en la unidad. Busque en el CD
(o en su disco duro si lo descargó) {\tt RAWRITE2.EXE}
(puede que tenga el antiguo {\tt RAWRITE.EXE}).

Luego haga {\tt cd} al directorio que tiene la(s) imagen(es) del disco que necesita para arrancar.
Puede haber sólo una, o muchas imágenes configuradas para diferente hardware.
Tendrá que consultar la documentación de la distribución.
Ejecutando {\tt RAWRITE2.EXE} sin argumentos
se le preguntarán dos cosas: la ruta de la imagen de disco a escribir
y la unidad de disco destino,
{\tt A:} o {\tt B:}. Para acortar, con {\tt
RAWRITE.EXE} o {\tt RAWRITE2.EXE}, especifique los argumentos en la línea de órdenes de MS-DOS.

\begin{tscreen}
C:>rawrite \cparam{imagen} \cparam{unidad}
\end{tscreen}

Repita este paso para cualquier imagen de disco adicional que su sistema necesite.

\blackdiamond
Si puede, verifique los disquetes con {\tt SCANDISK.EXE} y haga una 
exploración de la superficie antes de escribir las imágenes al disco,
le puede ahorrar algo de tiempo posteriormente. La mayoría de los fallos iniciales
en la instalación se originan por disquetes de arranque en mal estado,
y {\tt RAWRITE2.EXE} no los verifica.

\blackdiamond
Esto también es cierto si crea disquetes de arranque bajo {\linux}. La 
página de manual de {\tt badblocks(1)} describe cómo verificarlos.

Etiquete los disquetes que cree para uso futuro.

\subsection{Creando un disquete de arranque bajo {\linux}}

Si tiene un sistema {\linux} funcional; por ejemplo, si se actualiza 
y quiere crear las imágenes de discos con {\linux}, cambie al directorio que contiene las
imágenes de disco y use la orden
\begin{tscreen}
\# dd if=\cparam{imagen} of=\cparam{unidad de disquete} bs=512 conv=sync ; sync
\end{tscreen}
Sustituya el nombre de la imagen de disco por \textsl{imagen} y la unidad de disquete
correcta (casi siempre {\tt /dev/fd0}), y repítalo para cada disquete que necesite.
Los argumentos {\tt dd} son: {\tt if} para el fichero de entrada;
{\tt of} para el fichero de salida, y aquí debemos usar la unidad de disquete;
{\tt bs} para el tamaño de bloque, en este caso 512 bytes; {\tt conv=sync}
asegura que el fichero de salida tiene exactamente el mismo tamaño que el fichero
de entrada. La coletilla ``{\tt sync}'' garantiza el volcado de los búfferes al disco
inmediatamente.

Un método alternativo que, aunque funciona será evitado por un genuino administrador de {\linux},
es la orden {\tt cp} (copiar) 
\begin{tscreen}
cp \cparam{imagen} \cparam{unidad de disquete} ; sync
\end{tscreen}
De nuevo, sustituya el nombre de la imagen de disco por \textsl{imagen}, la correcta
\textsl{unidad de disquete}, y repita el paso por cada disquete que necesite.
Puede recibir un mensaje preguntando si desea reemplazar la unidad de disquete por \textsl{imagen.} 
Obviamente si esto no ocurriera, puesto que el disquete no es un verdadero fichero sino un dispositivo, {\tt cp} no presta atención a ese detalle.
Exactamente diga, ``sí,'' si es preguntado.

Con los disquetes de instalación de {\linux} en la mano, esté preparado para
instalar nuestro sistema. La mayoría de las distribuciones invocan a {\tt fdisk}, la versión de {\linux},
así que puede crear una partición nativa de {\linux} y una de intercambio.
El programa de instalación continúa creando el sistema de ficheros 
(el equivalente de formatear un disquete en MS-DOS) para ambas particiones la de {\linux} y la de
intercambio, inicializa la partición de intercambio y monta la partición de {\linux}.

Una pregunta que le será realizada es si quiere comprobar su disco duro para detectar bloques defectuosos.
Si usa una unidad  SCSI, conteste ``no''. Las unidades SCSI tienen incorporadas la detección y corrección de errores.
Las unidades IDE y similares no tienen esta facilidad y necesitan ser barridos para encontrar bloques defectuosos. Si tiene una unidad
antigua debe hacer esto. Si dice ``sí'', el programa de instalación invocará al programa  {\tt badblocks}
, que marcará todos los bloques defectuosos que encuentre. Esto lleva tiempo. Si duda, diga ``sí''.

\subsection{Particionando el disco duro: {\tt fdisk} y {\tt cfdisk}}
 \label{sec-generic-fdisk} 
 \index{fdisk@{\tt fdisk}} 
Cada sistema operativo, sea MS-DOS y Microsoft Windows, o {\linux},
tiene su propia versión de {\tt fdisk}. Si desea crear una partición para ser usada por MS-DOS, use la versión
de MS-DOS, {\tt FDISK.EXE}, para crear la partición y escribir la tabla. Si va a crear una partición para {\linux}, debe
crearla con la versión de {\linux}, {\tt fdisk}.

Bajo {\linux}, están disponibles dos programas de particion de discos:
el original {\tt fdisk}, y uno amigable {\tt cfisk}. La diferencia entre ellos es que con
{\tt fdisk} usted usa todas los órdenes a través del teclado con letras y números.
Con {\tt cfdisk}, usted usa el teclado de flechas para resaltar las opciones que desea, y pulsar  \key{Enter} para
ejecutar la orden. La única vez que use todo menos las teclas flechas y \key{Enter} es cuando especifica un número para el tamaño de la partición.

Para iniciados, todos los disquetes de arranque de {\linux} son creados en esencia idénticos.
Rearranque el ordenador con el disquette de arranque en la unidad. Será saludado con una pantalla con algunas 
instrucciones y un indicador
\begin{tscreen}
LILO boot: 
\end{tscreen}
y un cursor parpadeante. Si usa la tecla \key{Tab}, debería ver una lista de nombres.
Los nombres difieren dependiendo de la distribución, pero busque uno que diga  ``rescue'' o ``expert.'' 
La etiqueta ``install'' inicia el programa de instalación después de cargar el núcleo, así que si desea
permitir al programa de instalación guiarle a través del proceso de particionado e 
inicialización del sistema de ficheros, puede usar la etiqueta ``install'';
de lo contrario, elija una etiqueta diferente. Puede también necesitar suministrar a {\linux}
algunos parámetros de arranque. Para nuestros propósitos, esto no debería ser necesario, pero
pronto averiguará si éste es el caso.

Introduzca un nombre de etiqueta y pulse \key{Enter}. Cuando el núcleo de {\linux} finaliza el proceso de arranque,
puede ser obsequiado con cualquiera de un número de indicadores, dependiendo de la distribución.
Si tiene un indicador de shell, como el signo libra ({\tt \#}) o el signo dólar ({\tt \$}), 
está donde necesita estar. Si no, pruebe pulsando \key{Alt}-\key{F2} o
\key{Alt}-\key{Shift}-\key{F2}.
Debería poder activar una de las consolas virtuales del sistema.

Una vez que tiene un indicador (no necesitaría iniciar la sesión), estará trabajando como
 ``{\tt root}'' (más información en el Capítulo~\ref{chap-sysadm}).
Introduzca la orden
\begin{tscreen}
\# fdisk 
\end{tscreen}
Si es devuelto un error, pruebe {\tt cfdisk}. Ésta es la utilidad de particionado de discos.
Por omisión trabaja con {\tt /dev/hda}, así que si necesita trabajar con el segundo disco duro, use la orden
\begin{tscreen}
\# fdisk /dev/hdb
\end{tscreen}

Dentro de {\tt fdisk}, pulse \key{m} para ver un menú. Los órdenes que usará son:
\key{n} para crear una nueva partición; \key{d} para eliminar una partición
; \key{t} para cambiar el tipo de partición (83 es Linux Nativo (ext2),
82 es Linux intercambio (swap)); \key{p} imprime en la pantalla la información de la partición 
actualmente en memoria (no la que está en el disco); \key{w}
escribe la tabla de partición en el disco; y \key{q} salir. 

\blackdiamond
Hasta que no pulse la orden \key{w}, no se modifica nada
y puede hacer cambios o salir sin hacerlos.

\blackdiamond 
Preste atención a los prefijos y sufijos del tamaño de la tabla de particiones. Con el tamaño
de la partición necesita especificar ``{\tt +}'' si el tamaño estará 
dentro del número de partición, y un sufijo de ``{\tt k}'' o
``{\tt M}'' ( la mayúscula o minúscula no importa) para especificar KB o MB.

Una nota final sobre particiones: puede crear hasta cuatro particiones primarias.
Si necesita más de cuatro, debería crear tres particiones primarias y una partición extendida.
El número de partición extendida comienza con el 5, asi que puede tener
{\tt /dev/hda1}, {\tt /dev/hda2}, {\tt /dev/hda3}, {\tt /dev/hda5}, y {\tt /dev/hda6} si necesita
cinco particiones.


Como comprobación final, antes de escribir la tabla de particiones, asegúrese que
sus particiones no se solapan. Siempre y cuando el comienzo y final de un tramo
no se solape con ningún otro, puede estar seguro
que los límites de las particiones están bien. El número 1024 puede ser mostrado al comienzo
para particiones que comiencen a partir del cilindro 1024. Por ahora, tan sólo considere eso como un recordatorio 
de que la BIOS no será capaz de leer (o cargar desde) esa partición.

 \index{cfdisk@{\tt cfdisk}} 
{\tt cfdisk} hace exactamente lo mismo que {\tt fdisk}, pero muestra
en pantalla el estado de la tabla de particiones en memoria (no en
una partición con la que trabajar), y las teclas Flecha Derecha y Flecha Izquierda para seleccionar
la acción a realizar. Entonces pulse  \key{Enter} para realizar la acción.
Tendrá que introducir la cantidad para el tamaño con el que desea hacer la partición,
pero toda la información es dada en pantalla, justo después de 
las instrucciones. {\tt cfdisk} por omisión actúa sobre {\tt /dev/hda}, así que debe dar
el argumento {\tt /dev/hdb} si quiere cambiar la tabla de particiones
de un segundo disco duro. Recuerde escribir la tabla de particiones
antes de salir. Esta es la parte más dura de {\tt cfdisk}. No se solicita confirmación antes de salir.
Así que seleccione ``Escribir'' y pulse \key{Enter} antes de elegir Salir y pulsar \key{Enter}.



