<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook V4.1//EN"[
<!ENTITY genindex.sgml SYSTEM "genindex.sgml">
]>
<book id="wincvs" lang="es">
  <bookinfo>
    <date>2001-11-05 </date>
    <title>Utilización de WinCVS</title>
    <subtitle>Un taller, para comenzar</subtitle>
    <abbrev>WinCVS</abbrev>
    <authorgroup>
      <author>
	<firstname>Jaime Irving</firstname>
	<surname>Dávila Latorre</surname>
      </author>
      <author>
	<firstname>Juan Pablo</firstname>
	<surname>Quiroga González</surname>
      </author>
    </authorgroup>
    <address>
      <email>jadavila@uniandes.edu.co</email>
      <email>jquiroga@uniandes.edu.co</email>
    </address>
    <legalnotice>
      <para> Este documento se cede al dominio público. Úselo sin
      ninguna garantía. </para>
    </legalnotice>
    <revhistory>
      <revision>
	<revnumber>1.0</revnumber>
	<date>2001-04-03</date>
	<authorinitials>jid</authorinitials>
	<revremark>Creación de documento inicial usando texinfo</revremark>
      </revision>
    </revhistory>
    <revhistory>
      <revision>
	<revnumber>1.1</revnumber>
	<date>2001-05-11</date>
	<authorinitials>jid</authorinitials>
	<revremark>
	    Formato Docbook. Sugerencias de Vladimir Tamara y Carlos
	    Julio Ruiz.
	</revremark> 
      </revision>
    </revhistory>
    <revhistory>
      <revision>
	<revnumber>1.2</revnumber>
	<date>2001-08-06</date>
	<authorinitials>jpq</authorinitials>
	<revremark>
	    Formato Docbook. Adición de configuración del servidor cuando se utiliza
            xinetd. Algunos comentarios cuando se utiliza ssh para conectarse con el
            depósito central.
	</revremark> 
      </revision>
    </revhistory>
    <revhistory>
      <revision>
	<revnumber>2.0</revnumber>
	<date>2002-01-24</date>
	<authorinitials>jid</authorinitials>
	<revremark>Énfasis en el uso de ssh, definición de depósitos
	de lectura usando cvspserver.</revremark>
      </revision>
    </revhistory>
  </bookinfo>

  <chapter id="objetivos">
    <title>Introducción</title>
    <para><application>cvs</application> (<foreignphrase>concurrent
    version system</foreignphrase>) es una herramienta que permite
    manejar de forma concurrente las versiones con un conjunto de
    archivos y directorios. Dichos archivos pueden corresponder a
    documentos (como es el caso de este documento) o archivos fuente
    de una determinada aplicación o programa. Este tipo de aplicación
    corre en un servidor (en este caso un servidor
    <application>Linux</application>) y permite que muchos clientes se
    conecten a ella, obteniendo copias de los archivos sobre los
    cuales se está trabajando. Quizás la forma más fácil de visualizar
    a <application>cvs</application> es como un servidor
    <application>ftp</application> (<foreignphrase>file transfer
    protocol</foreignphrase>) que además permite el manejo de versiones.</para>

    <para>Hay multitud de programas usados por los clientes para
    conectarse con el depósito central <application>cvs</application>,
    como es el caso de la línea de comandos de
    <application>cvs</application> (probablemente si usted está
    corriendo <application>Linux</application> en su cliente esta es
    una de las más conocidas) y las interfaces gráficas. Con el
    objetivo de desarrollar clientes gráficos para una multitud de
    plataformas existe el proyecto <ulink
    url="guicvs.org">guicvs</ulink>, que ha generado hasta el momento
    interfaces gráficas para <application>Windows</application>
    (<application>wincvs</application>, la aplicación que
    describiremos en este taller),
    <application>Macintosh</application>
    (<application>maccvs</application>) y
    <application>Linux</application>
    (<application>gcvs</application>). Este taller se enfoca en
    presentar un ejemplo de la funcionalidad de un servidor
    <application>cvs</application> en
    <application>Linux</application>, y de su cliente en
    <trademark>Windows</trademark>, <application>wincvs</application>,
    (aunque por ejemplo, la interfaz <application>gcvs</application>
    es muy similar) en forma de taller. </para>

    <para>
      Por ende, nuestros objetivos en este taller son:
    </para>
    <itemizedlist>
      <listitem>
	<para>Crear un depósito central <application>cvs</application>
	para la administración de configuraciones.</para>
      </listitem>
      <listitem>
	<para>Aprender el uso del 
	  <foreignphrase>checkin</foreignphrase>(registro),
	  <foreignphrase>checkout</foreignphrase>(extracción), en un
	  depósito <application>cvs</application>.
        </para>
      </listitem>
      <listitem>
	<para>Manejar el uso de
	<foreignphrase>tags</foreignphrase>(marquillas).</para>
      </listitem>
    </itemizedlist>
    <para>
      Sin embargo no describimos en detalle toda las capacidades de
      <application>cvs</application> y
      <application>wincvs</application>,
       para ello remitimos a la documentación en línea de
      (<ulink url="http://www.wincvs.org">wincvs</ulink>). Sin
      embargo, siéntase libre de contactar a <ulink url="mailto:
      jadavila@uniandes.edu.co">Jaime Irving</ulink> o a <ulink
      url="mailto: jquiroga@uniandes.edu.co">Juan Pablo</ulink> en
      caso de imprecisiones en alguna de las secciones.
    </para>
    <para>Esta <ulink url="wincvs.sgml">versión</ulink> de este
      documento fue realizado usando la herramienta <ulink
      url="http://www.docbook.org">DocBook</ulink>, en contraste de la
      <ulink url="wincvs.texinfo">primera versión</ulink> que fue
      realizada usando <ulink
      url="http://www.texinfo.org">texinfo</ulink>. Queremos agradecer
      las valiosas sugerencias de <ulink url="mailto:
      vtamara@tamarapatino.com">Vladimir Támara</ulink> y <ulink
      url="mailto: carlosjulioruiz@hotmail.com">Carlos Julio Ruiz</ulink> en
      especial en <xref
      linkend="informacion-administradores"/>.</para>
      
  </chapter>
  <chapter id="configuracion-del-servidor">
    <title>
      Configuración del servidor Linux.
    </title>
    <indexterm>
      <primary>servidor <application>cvs</application></primary>
    </indexterm>
    <indexterm>
      <primary>servidor Linux</primary>
    </indexterm>
    <para>La configuración del servidor de
    <application>cvs</application>, depende del método que se usará
    después para conectarse con éste. En esta documentación
    básicamente estudiaremos dos formas de comunicarse con el
    servidor, <application>ssh</application> y un protocolo propio de
    <application>cvs</application> llamado
    <acronym>pserver</acronym>. El primero es el método preferido para
    depósitos de escritura y lectura, por cuanto los
    <foreignphrase>passwords</foreignphrase> viajan de forma segura
    por la red y además por cuánto require menos labores de
    administración, sin embargo tiene la desventaja de que se necesita
    tener un cliente de <application>ssh</application> en el cliente
    (en nuestro caso usaremos el <application>ssh</application> que
    viene con <application>cygwin</application>). El segundo es un
    método apropiado para depósitos de lectura solamente, su uso en
    depósitos de lectura/escritura puede ser un riesgo de seguridad,
    por cuanto las claves del usuario viajan por la red sin la debida
    encriptación y además la seguridad del sistema depende de la
    correcta administración del directorio <filename
    class="directory">CVSROOT</filename>. A continuación describimos
    el conjunto de pasos que son necesarios para configurar un
    servidor <application>cvs</application>, con sistema operacional
    Linux.
    </para>
    <sect1 id="creacion-deposito-central">
      <title>
	Creación del depósito central
      </title>
      <indexterm>
	<primary><varname>CVSROOT</varname></primary>
      </indexterm>
      <indexterm>
	<primary>Inicialización del depósito central</primary>
      </indexterm>
      <itemizedlist>
	<listitem>
	  <para>
	    Inicie una sesión en el servidor donde desea ubicar el
	    depósito central de su proyecto
	    <footnote>
	      <para>En nuestro caso dicho servidor es
	      naoma@uniandes.edu.co</para>
	    </footnote>
	  </para>
	</listitem>
	<listitem>
	  <para>
	    Defina la variable <envar>CVSROOT</envar> 
            en tal máquina,
	    dicha variable, contendrá el nombre del directorio donde
	    usted tendra su depósito, en nuestro ejemplo usaremos
	    <filename class="directory"><replaceable>~/deposito</replaceable></filename>. Para
	    ello es necesaria la siguientes línea:
<screen>
<prompt>[is25201@naoma is25201]$ </prompt><userinput><command>export</command> <envar>CVSROOT</envar>=<filename class="directory"><replaceable>~/deposito</replaceable></filename></userinput>
</screen>
	  </para>
	</listitem>
	<listitem>
	  <para>
	    Inicialice <application>cvs</application>, de la siguiente
	    forma:
<screen>
<prompt>[is25201@naoma is25201]$ </prompt><userinput><command>cvs</command> <option>init</option></userinput>
</screen>
	  </para>
	  <para>Después de este paso se creará un directorio de nombre
	  <filename
	  class="directory"><replaceable>deposito</replaceable></filename>,
	  en su directorio. Si va a utilizar
	  <application>ssh</application> para las conexiones al
	  depósito central es importante que el directorio contenga
	  permisos de escritura de grupo de forma que los integrantes
	  de éste puedan acceder al depósito. Para cambiar los
	  permisos escriba una línea como la siguiente (<filename
	  class="directory"><replaceable>deposito</replaceable></filename>
	  es el nombre del directorio en el cual se ubica su depósito:
<screen>
<prompt>[is25201@naoma is25201]$ </prompt><userinput><command>chmod</command> <option>g+w</option> <filename class="directory "><replaceable>deposito</replaceable></filename></userinput>
</screen>
          Es importante anotar que todos los usuarios que desean
          acceder al depósito deben pertenecer al grupo de la persona
          dueña del depósito central.
          </para>
	  <para>En caso de querer acceder el depósito central usando
	  <application>ssh</application>, estos pasos serán
	  suficientes y podrá continuar a <xref
	  linkend="configuracion-cliente"/>. A continuación
	  describimos los pasos siguientes en el caso del protocolo
	  <acronym>pserver</acronym>.</para>
	</listitem>
      </itemizedlist>
    </sect1>
  <sect1 id="creacion-usuario">
    <title>
      Creación del archivo de usuarios
    </title>
      <indexterm>
	<primary><filename>passwd</filename></primary>
      </indexterm>
      <indexterm>
	<primary>Archivo de <foreignphrase>passwords</foreignphrase></primary>
      </indexterm>
      <indexterm>
	<primary>Creación de usuarios</primary>
      </indexterm>
      <indexterm>
	<primary><command>htpasswd</command></primary>
      </indexterm>
      <indexterm>
	<primary>Seguridad</primary>
      </indexterm>
      <indexterm>
	<primary>Sólo lectura</primary>
      </indexterm>
    <para>
      Se indicará a continuación la forma de crear el archivo
      <filename>passwd</filename>, cuál permite registrar a los
      usuarios que tienen acceso al depósito central de datos.  Para
      ello hay que seguir los siguientes pasos:
    </para>
    <itemizedlist>
      <listitem>
	<para> Dentro del directorio previamente definido
	  <footnote><para> En nuestro caso <filename
	  class="directory">~/deposito</filename></para> </footnote>,
	  ubíquese dentro del subdirectorio
	  <filename class="directory">CVSROOT</filename>. Esto
	  corresponde en la interfaz de comandos, a la siguiente
	  línea.
	</para>
<screen>
<prompt>[is25201@naoma is25201]$ </prompt><userinput><command>cd</command> <filename class="directory">~/deposito/CVSROOT</filename>
</userinput>
</screen>
      </listitem>
      <listitem>
	<para> Ahora, es necesario definir los usuarios que pueden
	  acceder a dicho depósito central, lo cual lo hacemos en dos
	  pasos:
	</para>
	<orderedlist>
	  <listitem>
	    <para>
	      Creando el primer usuario
	      <footnote>
		<para>
		  Dicho nombre no tiene que ver con el
		  <foreignphrase>login</foreignphrase>, etc. Es
		  simplemente un nombre predeterminado; sin embargo
		  por claridad use los nombres de las personas que
		  tendrán acceso a tal depósito.
		</para>
	      </footnote>, de la siguiente forma:
	    </para>
<screen>
<prompt>[is25201@naoma CVSROOT]$ </prompt><userinput><command>htpasswd</command> <option>-c</option> <filename>passwd</filename> <replaceable>jquiroga</replaceable> </userinput>
</screen>
	    <para> Luego digite el
	      <foreignphrase>password</foreignphrase> correspondiente
	      a este usuario.  </para> <para> El comando
	      <command>htpasswd -c</command> crea un archivo
	      <filename>passwd </filename> en el cual se guarda el
	      <foreignphrase>password</foreignphrase> del usuario
	      <replaceable>jquiroga</replaceable>.
	    </para>
	  </listitem>
	  <listitem>
	    <para>
	      Para los demás usuarios se omite la opción
	      <option>-c</option>, obteniéndose por ejemplo:
	    </para>
<screen>
<prompt>[is25201@naoma CVSROOT]$ </prompt><userinput><command>htpasswd</command> <filename>passwd</filename> <replaceable>jdavila</replaceable> </userinput>
</screen>
	    <para>
	      Y a continuación se escribe el <foreignphrase>password</foreignphrase> para cada uno de
	      los nuevos miembros.
	    </para>
	  </listitem>
	</orderedlist>
      </listitem>
      <listitem>
	<para>
	  Es necesario editar el archivo <filename>passwd</filename>
	  agregando al final de cada línea el nombre de la cuenta.
	</para>
	<para>
	  En nuestro caso el archivo luce de la siguiente forma:
	</para>
<screen>
<computeroutput>
<replaceable>jquiroga</replaceable>:m14lm5:<replaceable>is25201</replaceable>
</computeroutput>
<computeroutput>
<replaceable>jdavila</replaceable>:m14lm5:<replaceable>is25201</replaceable>
</computeroutput>
<computeroutput>
<replaceable>anonymous</replaceable>::<replaceable>is25201</replaceable>
</computeroutput>
</screen>
	  <para>Note que hemos creado un usuario
	  <replaceable>anonymous</replaceable> sin contraseña pues
	  planeamos que éste sea un usuario de sólo lectura.  Del
	  archivo <filename>passwd</filename> y de sus permisos
	  depende la seguridad del sistema entero, la cual reposa en
	  manos del usuario encargado del depósito, cualquier cambio
	  en este archivo puede producir que cualquier persona entre
	  como un usuario que ella cree y tener permisos de
	  <foreignphrase>root</foreignphrase>. Si su intención es
	  crear un usuario anónimo con permiso de solo lectura, siga
	  al siguiente paso.</para>
	</listitem>
	<listitem>
	  <para>Una vez definidos los usuarios del sistema, es
	  necesario definir cuáles de éstos tendrán permiso de sólo lectura,
	  la forma más fácil de hacer ésto es crear un archivo
	  <filename>readers</filename> en el directorio <filename
	  class="directory">CVSROOT</filename> dentro de su directorio
	  de depósito central. Dicho archivo contiene la lista de
	  usuarios con permiso de sólo lectura separados por
	  <foreignphrase>Enter</foreignphrase>. A continuación
	  presentamos el archivo <filename>readers</filename> de este
	  ejemplo.
	  </para>
<screen>
<computeroutput>
<replaceable>anonymous</replaceable>
</computeroutput>
<computeroutput>
</computeroutput>
</screen>
	</listitem>
    </itemizedlist>
    </sect1>
    <sect1 id="informacion-administradores">
      <title>Información para administradores </title>
      <indexterm>
	<primary>administración del servidor</primary>
      </indexterm>
      <indexterm>
	<primary><filename>inetd.conf</filename></primary>
      </indexterm>
      <indexterm>
	<primary<command>S20inetd</command></primary>
      </indexterm>
      <indexterm>
	<primary><filename>xinetd</filename></primary>
      </indexterm>
      <indexterm>
	<primary<command>S56xinetd</command></primary>
      </indexterm>
      <para>
	Esta sección sólo es necesaria para el admistrador de la
	máquina, así que en caso de no tener permisos de usuarios,
	solicite a su administrador que siga las siguientes
	instrucciones:
      </para>
      <sect2>
	<title>Si dispone de <application>inetd</application><footnote>
	    <para>
	    Demonio de servicios de Internet, inicia los programas asociados a servicios
	    de Internet cuando el sistema inicia.</para>
	  </footnote>
          (Redhat 6.2 y anterior)</title>
	<itemizedlist>
	  <listitem>
	    <para>
	    Es necesario que en el archivo <filename
	    class="directory">/etc/inetd.conf</filename> agregue una
	    linea como la siguiente:
	  </para>
<screen>
<computeroutput>cvspserver   stream   tcp   nowait   root   /usr/bin/cvs</computeroutput>
<computeroutput>cvs --allow-root= <replaceable>/home/is25201/deposito</replaceable> pserver</computeroutput>
</screen>
	    <para>
	    Note que es necesario cambiar la línea <replaceable>/home/is25201/deposito</replaceable>
	    por la ruta donde se encuentra el depósito que se acaba de
	    crear. De otro lado <replaceable>pserver</replaceable>
	    indica el protocolo mediante el cual se conectan los
	    clientes al depósito central.
	  </para>
	  </listitem>
	  <listitem>
	    <para>
	    Posteriormente es necesario bajar y subir el servicio
	    <command>S20inetd</command> para lo cual son necesarias
	    las siguiente líneas:
	    </para>
<screen>
<prompt>[root@naoma /]$ </prompt><userinput>cd /etc/rc5.d</userinput>
<prompt>[root@naoma rc5.d]$ </prompt><userinput>S20inetd restart</userinput>
</screen>
	  </listitem>
	</itemizedlist>
      </sect2>

      <sect2>
	<title>Si dispone de <application>xinetd</application><footnote>
	    <para>
	    Este es un demonio de servicios de Internet extendido,
	    que inicia los programas asociados a servicios de Internet
	    cuando el sistema inicia.</para>
	  </footnote>
          (Redhat 7.0 y posterior)</title>
	<itemizedlist>
	  <listitem>
	    <para>
	    Es necesario crear un archivo en<filename
	    class="directory">/etc/xinetd.d/cvspserver</filename> con la
	    la siguiente información:
	  </para>
<screen>
<computeroutput># default: on</computeroutput>
<computeroutput># description: The cvs allow the creation of remote repositories</computeroutput>
<computeroutput>service cvspserver</computeroutput>
<computeroutput>{</computeroutput>
<computeroutput>	disable	= no</computeroutput>
<computeroutput>	socket_type	= stream</computeroutput>
<computeroutput>	protocol	= tcp</computeroutput>
<computeroutput>	wait		= no</computeroutput>
<computeroutput>	passenv		= </computeroutput>
<computeroutput>	user		= root</computeroutput>
<computeroutput>	server		= /usr/bin/cvs</computeroutput>
<computeroutput>	server_args     = --allow-root=<replaceable>/home/is25201/deposito</replaceable> -f pserver
</computeroutput>
<computeroutput>}</computeroutput>
</screen>
	    <para>
	    Note que es necesario cambiar la linea <replaceable>/home/is25201/deposito </replaceable>
	    por la ruta donde se encuentra el depósito que se acaba de
	    crear. De otro lado <replaceable>pserver</replaceable>
	    indica el protocolo mediante el cual se conectan los
	    clientes al depósito central.
	  </para>
	  </listitem>
	  <listitem>
	    <para>
	    Posteriormente es necesario bajar y subir el servicio
	    <command>S50xinetd</command> para lo cual son necesarias
	    las siguiente líneas:
	    </para>
<screen>
<prompt>[root@naoma /]$ </prompt><userinput>cd /etc/rc5.d</userinput>
<prompt>[root@naoma rc5.d]$ </prompt><userinput>S50xinetd restart</userinput>
</screen>
	  </listitem>
	</itemizedlist>
      </sect2>
      <sect2>
	<title>Información para la distribución Debian</title>
	<para>
	  En caso de que no se tenga en su distribución de Linux
	  instalado previamente el paquete
	  <application>cvs</application>, tenga en cuenta las
	  siguientes instrucciones para Debian 2.2, es necesario usar
	  el paquete <application>cvs</application> (por ejemplo desde
	  el program <application>dselect</application>). Para
	  configurar <application>cvs</application>(después de
	  instalado) ejecutar
	  <application>dpkg-reconfigure-cvs</application>, la interfaz
	  guiada por menús le solicitará el nombre del directorio
	  donde desea el depósito y si lo desea activará
	  <option>pserver</option> (modificando
	  <filename>/etc/inetd.conf</filename>).
	</para>
      </sect2>
    </sect1>
  </chapter>
  <chapter id="configuracion-cliente">
    <title>
       Configuración del cliente en Windows
    </title>
    <para>
       A continuación describirmemos el proceso de configuracion en el
       cliente, asi como el conjunto de comandos necesarios para crear
       un espacio de trabajo y hacer las operaciones usuales, con el
       depósito central.
     </para>
    <sect1 id="definicion-deposito-central">
      <title>Definición del depósito central</title>
      <indexterm>
	<primary><application>wincvs</application></primary>
      </indexterm>
      <indexterm>
	<primary>conexión al depósito central</primary>
      </indexterm>
      <indexterm>
	<primary>autenticación de usuarios</primary>
      </indexterm>
      <indexterm>
	<primary>directorio local</primary>
      </indexterm>
      <itemizedlist>
	<listitem>
	  <para>En este caso usaremos como
	  <application>ssh</application> al que viene con
	  <ulink url="http://cygwin.com">cygwin</ulink>. Por lo tanto
	  es necesario que para ejecutar
	  <application>wincvs</application>, lo hagamos desde
	  <application>cygwin</application>. Para ello una vez dentro
	  de la línea de comandos <application>cygwin</application>
	  desplacése hasta el directorio donde se encuentra
	  <application>wincvs</application> y ejecútelo. En nuestro
	  caso esto se hace de la siguiente forma</para>
<screen>
<prompt>Administrador@sistemas141~: </prompt><command>cd</command> <filename
class="directory"><replaceable>/cygdrive/d/Software/GNU/Wincvs</replaceable></filename>
<prompt>Administrador@sistemas141~: </prompt><userinput>wincvs &</userinput>
</screen>

	  <para>Desde<application>wincvs </application> realice <menuchoice> <guimenu>Admin</guimenu>
	  <guimenuitem>Preferences</guimenuitem> </menuchoice>
	  (Alternativamente puede usar <keycombo>
	  <keycap>Ctrl</keycap> <keycap>F1</keycap>
	  </keycombo>)</para>
	</listitem>
	<listitem>
	  <para>En la pestaña <guilabel>General</guilabel> en
	  la sección <interface>Enter the CVSROOT</interface> digite
	  una línea como la siguiente:</para>
	  <para>
            <userinput><replaceable>is25201@naoma.uniandes.edu.co</replaceable>:<replaceable>/home/is25201/deposito</replaceable>/
            </userinput></para>

	  <para>Tenga en cuenta que debe modificarse dicha línea de tal
	  forma que se utilice un usuario válido en el servidor.
          (En nuestro caso es
	  <replaceable>is25201@naoma.uniandes.edu.co</replaceable>),
	  adicionalmente se debe incluir la ruta completa desde la
	  raíz de la máquina, donde se ubica el depósito central (En
	  nuestro caso es
	  <replaceable>/home/is25201/deposito</replaceable>)</para>

	</listitem>
	<listitem>
	  <para>En la sección <interface>Authentication</interface>
	  seleccione la opción correspondiente <interface>SSH
	  server</interface>, adicionalmente active la opción.</para>
	  <para>En caso de querer usar la autenticación por medio de
	  <acronym>pserver</acronym>, es necesario que la línea de
	  <envar>CVSROOT</envar> sea como la siguiente
	  <userinput>:pserver:<replaceable>anonymous@naoma.uniandes.edu.co</replaceable>:
	  <replaceable>/home/is25201/deposito</replaceable></userinput>.
	  Adicionalmente en la sección
	  <interface>Authentication</interface> seleccione la opción
	  correspondiente <interface>"passwd" file on the cvs
	  server</interface></para>
         <informalfigure>
	   <screenshot>
	     <mediaobject>
		<imageobject>
		  <imagedata scale="50" fileref="ConfiguracionCVSROOTCliente.eps" format="eps">
		</imageobject>
		<imageobject>
		  <imagedata fileref="ConfiguracionCVSROOTCliente.jpg" format="jpg">
		</imageobject>
		<textobject>
		  <phrase>Ventana de configuración de la
		  variable<varname>CVSROOT</varname> en el cliente</phrase>
		</textobject>
		<caption>
		  <para>Configuración de la variable
		  <varname>CVSROOT</varname> en el cliente </para>
		</caption> 
	      </mediaobject>
	    </screenshot>
	  </informalfigure>
        </listitem>
	<listitem>
        <para>En la pestaña <interface>WinCvs</interface> es
	   necesario definir el directorio donde se realizará la
	   extracción. En nuestro caso tendremos una línea como la
	   siguiente <userinput><filename
	   class="directory">c:\temp</filename></userinput></para>
        </listitem>
      </itemizedlist>
    </sect1>
  <sect1 id=ingreso-al-sistema>
    <title>Ingreso al sistema.</title>
    <indexterm>
      <primary><command>login</command></primary>
    </indexterm>
    <indexterm>
      <primary>ingreso</primary>
    </indexterm>
      <para>En caso de utilizar <acronym>pserver</acronym>, es
      necesario comenzar una sesión con el depósito central (es decir
      <foreignphrase>login</foreignphrase> pra lo cual es necesario
      que realice los siguientes pasos. En caso de utilizar
      <application>ssh</application> por favor continue a <xref
      linkend="creacion-espacio-trabajo"/></para>
    <itemizedlist>
      <listitem>
	<para>Realice <menuchoice>
	    <guimenu>Admin</guimenu>
	    <guimenuitem>Login</guimenuitem>
	  </menuchoice>
          y posteriormente coloque su
          <foreignphrase>password</foreignphrase> correspondiente (ver
          <xref linkend="creacion-usuario"/>) </para>
      </listitem>
      <listitem>
	<para>Verifique que en la parte inferior de la ventana se
	  obtenga el siguiente mensaje</para>
<screen>
<computeroutput>*** CVS exited normal with code 0
</computeroutput>
        </screen>  
	<para>Una vez haya obtenido dicho mensaje podrá realizar las
	  acciones normales sobre <application>cvs</application>.</para>
      </listitem>
    </itemizedlist>
  </sect1>
  <sect1 id="creacion-espacio-trabajo">
    <title>Creación de un espacio de trabajo</title>
    <indexterm>
      <primary>espacio de trabajo</primary>
    </indexterm>
    <indexterm>
      <primary>módulo</primary>
    </indexterm>
    <para>A continuación crearemos un espacio de trabajo, usando el
      archivo de ejemplo <filename>FirstMVC</filename>, para
      ello realice los siguiente</para>
      <itemizedlist>
	<listitem>
	  <para>Baje el <ulink
	  url="FirstMVC.zip">archivo</ulink> y descomprímalo en un
	  directorio adecuado. </para>
	</listitem>
	<listitem>
	  <para> Ubíquese dentro del directorio donde descomprimió el
	  archivo usando el explorador de
	  <application>wincvs</application>.</para>

	  <informalfigure>
	    <screenshot>
	      <mediaobject>
		<imageobject>
		  <imagedata scale="40" fileref="UbicarseExploradorModuloImportar.eps" format="eps">
		</imageobject>
		<imageobject>
		  <imagedata fileref="UbicarseExploradorModuloImportar.jpg" format="jpg">
		</imageobject>
		<textobject>
		  <phrase>Explorador ubicado en el módulo a importar.
		  cliente</phrase>
		</textobject>
		<caption>
		  <para>Directorio del archivo descomprimido</para>
		</caption> 
	      </mediaobject>
	    </screenshot>
	  </informalfigure>

	</listitem>
	<listitem>
	  <para>Vaya al menú <guimenu>Create</guimenu>, al
	  submenú <guisubmenu>Import Module</guisubmenu> y
	  seleccione el directorio adecuado (es decir aquel donde está
	  descomprimido el archivo), después de lo cual debe obtener
	  una ventana con nombre <interface>Import Filter</interface>
	  y luego presione <guilabel>continue</guilabel>.</para>
	  <informalfigure>
	    <screenshot>
	      <mediaobject>
		<imageobject>
		  <imagedata scale="40" fileref="ImportacionModuloResultados.eps" format="eps">
		</imageobject>
		<imageobject>
		  <imagedata fileref="ImportacionModuloResultados.jpg" format="jpg">
		</imageobject>
		<textobject>
		  <phrase>Diálogo de resultados de la importación del módulo.
		  </phrase>
		</textobject>
		<caption>
		  <para>Resultados de la importación del módulo.</para>
		</caption> 
	      </mediaobject>
	    </screenshot>
	  </informalfigure>
	</listitem>
	<listitem>
	  <para>Se deberá obtener una ventana de <guilabel>Import
	  Settings</guilabel>. En dicha ventana realice lo
	  siguiente:</para> 
	  <itemizedlist>
	    <listitem>
	      <para>En la sección <guilabel>Select the module name and
	      paht on the remote server</guilabel>, coloque el nombre
	      de como quiere que se llame tal directorio en el
	      depósito central, en nuestro caso lo llamaremos
	      <userinput><filename
	      class="directory">mvc</filename></userinput></para> 
	    </listitem>
	    <listitem>
	      <para>En la sección <guilabel>Initial vendor and release
	      tags</guilabel>, en el campo <guilabel>Vendor
	      tag</guilabel> coloque el nombre del grupo (en nuestro
	      caso es <acronym>SIGMA</acronym> y en el campo
	      <guilabel>Release tag</guilabel> coloque la versión (en
	      nuestro caso es
	      <userinput><filename>MVC_1_0</filename></userinput>). </para>
	    </listitem>
	    <listitem>
	      <para>Finalmente, en la sección <guilabel>Enter the log
	      message</guilabel>, coloque una descripción de dicho
	      directorio, en nuestro caso es <userinput>Ejemplo de una
	      aplicación MVC sencilla</userinput>.</para>
	      <informalfigure>
		<screenshot>
		  <mediaobject>
		    <imageobject>
		      <imagedata scale="40" fileref="ConfiguracionImportacion.eps" format="eps">
		    </imageobject>
		    <imageobject>
		      <imagedata fileref="ConfiguracionImportacion.jpg" format="jpg">
		    </imageobject>
		    <textobject>
		      <phrase>Ventana de descripción del
		      <foreignphrase>checkin</foreignphrase>
		  </phrase>
		    </textobject>
		    <caption>
		      <para>Descripción del <foreignphrase>checkin</foreignphrase>.</para>
		    </caption> 
		  </mediaobject>
		</screenshot>
	      </informalfigure>
	    </listitem>
	    <listitem>
	      <para>En caso de utilizar
	      <application>ssh</application>, obtendrá una nueva
	      ventana en la cuál le pedirán que acepte la clave del
	      servidor al que se conecte y luego tendrá que digitar su
	      clave. Este tipo de situación se repetirá cada vez que
	      haga una operación con el depósito central, pero puede
	      modificarse usando como se describe en este <ulink
	      url="http://wincvs.org/ssh">enlace</ulink>, sin embargo
	      este tipo de instrucciones no sirven en el caso de
	      <trademark>Window 2000</trademark>. Deberá
	      obtener el mensaje:</para>
<screen>
<computeroutput>No conflict created by this import</computeroutput>
</screen>
	    </listitem>
	  </itemizedlist>
	</listitem>
      </itemizedlist>
  </sect1>
  <sect1 id="extraccion-modulo">
    <title>Extracción de un módulo</title>
    <indexterm>
      <primary><command>checkout</command></primary>
    </indexterm>
    <indexterm>
      <primary>copia local</primary>
    </indexterm>
      <para>Entenderemos por <foreignphrase>checkout</foreignphrase>
      al proceso mediante el cuál extraemos una copia local de un
      módulo del depósito central, con el fin de posteriormente
      podamos editarla.</para>
      <sect2 id="seleccion-modulo">
	<title>Selección del módulo</title>
	<para>Para hacer <foreignphrase>checkout</foreignphrase> de un
	módulo realice el siguiente conjunto de instrucciones</para>
	<itemizedlist>
	  <listitem>
	    <para>Seleccione <menuchoice>
		<guimenu>Create</guimenu>
		<guisubmenu>Checkout Module</guisubmenu>
	      </menuchoice>.</para>
	  </listitem>
	  <listitem>
	    <para>En la pestaña <guilabel>Checkout
	    Settings</guilabel>, en la sección <guilabel>Enter the
	    module name and path on the server</guilabel>
	    coloque el nombre del módulo que desea
	    hacer<foreignphrase>checkout</foreignphrase>, en nuestro
	    caso <userinput>mvc</userinput>.</para> 
	  </listitem>
	  <listitem>
	    <para>En la sección <guilabel>Local Folder to
	    Checkout</guilabel>, seleccione el directorio donde desea
	    extraer dicho módulo, en nuestro caso,
	    <userinput>
              <filename class="directory">c:\temp\mvc</filename>
             </userinput>.</para> 
	  </listitem>
          <listitem>
	    <para>Deberá obtener el siguiente mensaje</para>
<screen>
<computeroutput>***CVS exited with normal code *** </computeroutput>
</screen>
	  </listitem>
	</itemizedlist>
    </sect2>
    <sect2 id="edicion-archivos-modulo">
      <title>Edición de los archivos del módulo.</title>
      <indexterm>
	<primary>edición</primary>
      </indexterm>
	<para>Es necesario tener la información del módulo que se ha
	extraído, en el directorio local con el ánimo de poder
	observar la información de éste, para ello:</para>
	<itemizedlist>
	  <listitem>
	    <para>Realice <menuchoice>
		<guimenu>View</guimenu>
		<guisubmenu>Browse Location</guisubmenu>
		<guisubmenu>Change</guisubmenu>
	      </menuchoice>
            y posiciónese sobre el directorio sobre el que acabó de
            hacer <foreignphrase>checkout</foreignphrase>, obteniendo
            en una ventana la información de los archivos de
            <application>cvs</application>. </para>
	    <screenshot>
	      <mediaobject>
		<imageobject>
		  <imagedata scale="40" fileref="VerModuloCheckout.eps" format="eps">
		</imageobject>
		<imageobject>
		  <imagedata fileref="VerModuloCheckout.jpg" format="jpg">
		</imageobject>
		<textobject>
		  <phrase>Ventana de elección de archivos para
		      <foreignphrase>checkout</foreignphrase>
		  </phrase>
		</textobject>
		<caption>
		  <para>Elección de archivos de <foreignphrase>checkout</foreignphrase>.</para>
		</caption>  
	      </mediaobject>
	    </screenshot>

	  </listitem>
	  <listitem>
	    <para>Para que pueda editar los archivos en su editor de texto
	    favorito<footnote>
		<para>es decir, <application>emacs</application></para>
	      </footnote>, seleccione el archivo y haga<menuchoice>
		<guimenu>Trace</guimenu>
		<guisubmenu>Edit</guisubmenu>
		<guisubmenu>Select</guisubmenu>
	      </menuchoice>, o haga click sobre el icono del
	    lapiz.</para>
	    <para>En nuestro caso, editaremos el archivo
	    <filename>ListView.java</filename>.</para>
	  </listitem>
	  <listitem>
	    <para>Modifique dicho archivo con su editor de texto,
	    arreglando el estándar de codificación.</para>
	    <screenshot>
	      <mediaobject>
		<imageobject>
		  <imagedata scale="40" fileref="EdicionArchivo.eps" format="eps">
		</imageobject>
		<imageobject>
		  <imagedata fileref="EdicionArchivo.jpg" format="jpg">
		</imageobject>
		<textobject>
		  <phrase>Edición usando emacs del estándar de codificación
		  </phrase>
		</textobject>
		<caption>
		  <para>Edición del archivo. </para>
		</caption>  
	      </mediaobject>
	    </screenshot>

	  </listitem>
	  <listitem>
	    <para>Una vez grabados los cambios sobre tal archivo,
	    usted observará que en <application>wincvs</application>
	    el archivo correspondiente se presenta con color rojo,
	    indicando que tal copia local, no se ha actualizado en el
	    depósito central.</para>
	  </listitem>
	</itemizedlist>
      </sect2>
  </sect1>
  <sect1 id="actualizacion-deposito-central">
    <title>Actualización del depósito central.</title>
    <indexterm>
      <primary><command>checkin</command></primary>
    </indexterm>
    <indexterm>
      <primary><command>commit</command></primary>
    </indexterm>
    <indexterm>
      <primary>actualización del depósito central</primary>
    </indexterm>
      <para>Una vez modificado nuestro archivo deseamos actualizarlo
      en el depósito central, tal acción recibe el nombre de
      <foreignphrase>commit</foreignphrase> o
      <foreignphrase>checkin</foreignphrase>.</para> 
      <para>Sin embargo dicho proceso puede tener variantes de
      acuerdo a si tenemos la versión más actualizada del archivo que
      está en el depósito central. A continuación describimos las
      variantes en cada caso.</para>
      <sect2 id="actualizacion-ausencia-conflictos">
      
      <title>Actualizacion en ausencia de conflictos de
	versiones</title>
      <indexterm>
	<primary><command>commit</command></primary>
      </indexterm>
      <indexterm>
	<primary>checkin</primary>
      </indexterm>
	<para>La actualización de un archivo en el depósito central no
	tendrá conflictos, en caso de que tengamos en nuestro espacio
	de trabajo la última versión del módulo del depósito
	central.</para>
	<para>Para hacer dicha actualización debemos realizar lo
	siguiente:</para> 
	<itemizedlist>
	  <listitem>
	    <para>Seleccionar el o los archivos sobre los que se
	    desear realizar
	    <foreignphrase>commit</foreignphrase>.</para>
	  </listitem>
	  <listitem>
	    <para>Para actualizar en el depósito central hay que
	    realizar <menuchoice>
		<guimenu>Modify</guimenu>
		<guisubmenu>Commit Selection</guisubmenu>
	      </menuchoice>
            (o simplemente <keycombo>
		<keycap>Control</keycap>
		<keycap>M</keycap>
	      </keycombo>).</para>
	    <para>En la pestaña <guilabel>Commit Settings</guilabel>,
		en la sección <guilabel>Enter Log Settings</guilabel>,
		indique la razón del cambio, es decir,
		<userinput>Arreglo del estándar de
		codificación</userinput>.</para>
	    <screenshot>
	      <mediaobject>
		<imageobject>
		  <imagedata scale="50" fileref="CommitArchivo.eps" format="eps">
		</imageobject>
		<imageobject>
		  <imagedata fileref="CommitArchivo.jpg" format="jpg">
		</imageobject>
		<textobject>
		  <phrase>Diálogo de
		  <foreignphrase>commit</foreignphrase> del archivo.
		  </phrase>
		</textobject>
		<caption>
		  <para><foreignphrase>commit</foreignphrase> del archivo. </para>
		</caption>  
	      </mediaobject>
	    </screenshot>
 
	  </listitem>
	</itemizedlist>
	<para>Esto actualiza su depósito y verá que su archivo aparece
	de nuevo con estatus de poder ser editado, adicionalmente
	cambia su versión a 1.2.</para>
    </sect2>
    <sect2 id="actualizacion-conflictos">
      <title>Actualización en caso de conflictos de
	versiones</title>
      <indexterm>
	<primary>checkin</primary>
      </indexterm>
      <indexterm>
	<primary>commit</primary>
      </indexterm>
      <indexterm>
	<primary>conflictos de versiones</primary>
      </indexterm>
	<para>Suponga que se desea hacer
	<foreignphrase>commit</foreignphrase> de su archivo, sin
	embargo otra persona de que su cambio fuera envíado, ha hecho
	<foreignphrase>checkin</foreignphrase>, creando una nueva
	versión y por ende dejando que los cambios que usted ha hecho
	sobre su archivo desactualizados.</para>
	<para>En caso de que intente hacer
	<foreignphrase>commit</foreignphrase> de este archivo,
	obtendrá el siguiente error: </para>
<screen>
<computeroutput>Up to date checked failed for ListView.java
</computeroutput>
        </screen>
	<screenshot>
	  <mediaobject>
	    <imageobject>
	      <imagedata scale="50" fileref="ErrorHaciendoCommit.eps" format="eps">
	    </imageobject>
	    <imageobject>
	      <imagedata fileref="ErrorHaciendoCommit.jpg" format="jpg">
	    </imageobject>
	    <textobject>
	      <phrase>Diálogo de error al hacer
		  <foreignphrase>commit</foreignphrase> del archivo.
		  </phrase>
	    </textobject>
	    <caption>
	      <para>Error al hacer
	    <foreignphrase>commit</foreignphrase> del archivo. </para>
	    </caption>
	  </mediaobject>
	</screenshot>

	<para>Por ende tendrá que realizar el siguiente conjunto de
	pasos:</para>
	<itemizedlist>
	  <listitem>
	    <para>Tiene que actualizar el archivo de su espacio de
	    trabajao, para lo cuál realice <menuchoice>
		<guimenu>Modify</guimenu>
		<guisubmenu>Update Selection</guisubmenu>
	      </menuchoice> y luego de Aceptar.</para>
	  </listitem>
	  <listitem>
	    <para>El archivo se marca con una C, indicando que no hubo
	    problemas en el mezclado de dichos archivos.</para>
	  </listitem>
	  <listitem>
	    <para>Al editar el archivo se obtiene un archivo con las
	    modificaciones hechas a ambas versiones, por lo que se
	    debe decidir que partes de ambas se desean
	    mantener.</para>

	  </listitem>
	  <listitem>
	    <para>Grabe las modificaciones que decidió mantener y
	    ahora puede hacer <foreignphrase>commit</foreignphrase> de
	    tal archivo, creándose una nueva versión.</para>
	  </listitem>
	</itemizedlist>
	<screenshot>
	  <mediaobject>
	    <imageobject>
	      <imagedata scale="40" fileref="EditarArchivoUpdate.eps" format="eps">
	    </imageobject>
	    <imageobject>
	      <imagedata fileref="EditarArchivoUpdate.jpg" format="jpg">
	    </imageobject>
	    <textobject>
	      <phrase><application>emacs</application> editando el
		  archivo con las dos versiones.
		  </phrase>
	    </textobject>
	    <caption>
	      <para>Edición del archivo con dos versiones. </para>
	    </caption>
	  </mediaobject>
	</screenshot>
       </sect2>
  </sect1>
  <sect1 id="uso-tag">
    <title>Uso de los <foreignphrase>tag's</foreignphrase></title>
    <indexterm>
      <primary><foreignphrase>tag</foreignphrase></primary>
    </indexterm>
      <para>Mediante un <foreignphrase>tag</foreignphrase> se puede
      nombrar un conjunto de archivos relacionados a través de un
      nombre específico, facilitando el uso de éstos. Usando dicho
      nombre se pueden extraer posteriormente este conjunto de
      archivos.</para> 
      <para>A continuación describimos las actividades relacionadas
      con el uso y creación de dichos
      <foreignphrase>tag's</foreignphrase>.</para>
    <sect2>
      <title>Creacion de
	los <foreignphrase>tag's</foreignphrase></title>
      <para>Siga los siguientes pasos:</para>
      <indexterm>
	<primary><foreignphrase>tag</foreignphrase></primary>
	<secondary>creación</secondary>
      </indexterm>
	<itemizedlist>
	  <listitem>
	    <para>Seleccione los archivos y/o directorios
	     relacionados, en nuestro caso los archivos fuentes del
	     programa, es decir todos los archivos con extension
	     <filename>.java</filename></para>
	 
	    <screenshot>
	      <mediaobject>
		<imageobject>
		  <imagedata scale="30" fileref="SeleccionandoArchivosTag.eps" format="eps">
		</imageobject>
		<imageobject>
		  <imagedata fileref="SeleccionandoArchivosTag.jpg" format="jpg">
		</imageobject>
		<textobject>
		  <phrase>Ventana para escoger archivos del
		  <foreignphrase>tag</foreignphrase>.
		  </phrase>
		</textobject>
		<caption>
		  <para>Escogiendo archivos del
		  <foreignphrase>tag</foreignphrase>. </para>
		</caption>
	      </mediaobject>
	    </screenshot>
	  </listitem>
	  <listitem>
	  <para>Realice <menuchoice>
	      <guimenu>Create</guimenu>
	      <guimenuitem>Create a tag by module</guimenuitem>
	    </menuchoice>.</para>
	</listitem>
	<listitem>
	  <para>En la pestaña <guilabel>Create tag
	    settings</guilabel>, en la sección <guilabel>Enter the tag
	    name and which module to tag</guilabel> entre en el campo
	    <interface>New Tag Name</interface> el nombre del tag
	    deseado (en nuestro caso
	    <userinput>CodigoFuente</userinput>) y en el campo
	    <interface>Module to tag</interface> el nombre del módulo
	    actual, es decir <userinput>mvc</userinput>.</para>
	  </listitem>
	</itemizedlist>
      </sect2>
      <sect2>
	<title>Observación de los <foreignphrase>tag's</foreignphrase>
	disponibles</title>
      <indexterm>
	<primary><foreignphrase>tag</foreignphrase> de un archivo.</primary>
      </indexterm>
	<para>Para ver los <foreignphrase>tag's</foreignphrase> que
	existen sobre un archivo debe hacer lo siguiente</para>
	<itemizedlist>
	  <listitem>
	    <para>Seleccione el archivo del cuál desea ver los
	    <foreignphrase>tag'</foreignphrase> asociados, en nuestro
	    caso escogeremos
	    <userinput><filename>ListView.java</filename></userinput>.</para> 
	  </listitem>
	  <listitem>
	    <para>Realice <menuchoice>
		<guimenu>Query</guimenu>
		<guisubmenu>Graph Selection</guisubmenu>
	      </menuchoice>, o alternativamente <keycombo>
		<keycap>Ctrl</keycap>
		<keycap>G</keycap>
	      </keycombo></para>
	  </listitem>
	  <listitem>
	    <para>Al salir una ventana, simplemente presione
	    aceptar.</para>
	    <screenshot>
	      <mediaobject>
		<imageobject>
		  <imagedata scale="30" fileref="GrafoListView.eps" format="eps">
		</imageobject>
		<imageobject>
		  <imagedata fileref="GrafoListView.jpg" format="jpg">
		</imageobject>
		<textobject>
		  <phrase>Grafo de los
		  <foreignphrase>tags</foreignphrase> de un Archivo
		  </phrase>
		</textobject>
		<caption>
		  <para><foreignphrase>tags</foreignphrase> de un archivo. </para>
		</caption>
	      </mediaobject>
	    </screenshot>
	  </listitem>
	</itemizedlist>
    </sect2>
    <sect2 id="extraccion-archivos-tag">
      <indexterm>
	<primary><foreignphrase>tag</foreignphrase></primary>
	<secondary>extración de archivos</secondary>
      </indexterm>
	<title>Extracción de los archivos asociados con un
	<foreignphrase>tag</foreignphrase></title>
	<para>Para crear un espacio de trabajo con archivos asociados
	a un <foreignphrase>tag</foreignphrase> debe hacer lo
	siguiente:</para>
	<itemizedlist>
	  <listitem>
	    <para>En la pestaña <guilabel>Checkout
	    Settings</guilabel>, en el campo <interface>Enter the
	    module name and path on the server</interface>, coloque el
	    nombre del módulo (en nuestro caso es <userinput>mvc</userinput>).</para>
	  </listitem>
	  <listitem>
	    <para>En la pestaña <guilabel>Checkout
	    Settings</guilabel>, en el campo <interface>Local folder
	    to checkout to</interface>, dé el nombre del directorio
	    donde desea extraer los archivos, por ejemplo <filename
	    class="directory">c:\temp\CodigofuenteMVC</filename>.</para> 
	  </listitem>
	  <listitem>
	    <para>En la pestaña <guilabel>Checkout Options</guilabel>,
	    en el campo <interface>By Revision/Tag/Branch</interface>
	    seleccione o escriba el nombre del tag.</para>
	  </listitem>
	  <listitem>
	    <para>Por último presione en aceptar.</para>
	  </listitem>
	</itemizedlist>
      </sect2>

    </sect1>
    <sect1 id="salida-sesion">
    <title>Salida de la sesión</title>
    <indexterm>
      <primary><foreignphrase>logout</foreignphrase></primary>
    </indexterm>
    <indexterm>
      <primary>salida de la sesión</primary>
    </indexterm>
      <para>Por último, si uso el protocolo
      <acronym>pserver</acronym>no olvide salirse de la sesión de
      <application>wincvs</application>, para lo cual realice
      <menuchoice>
	  <guimenu>Admin</guimenu>
	  <guimenuitem>logout</guimenuitem>
	</menuchoice></para>
  </sect1>
</chapter>
&genindex.sgml;
</book>



 





